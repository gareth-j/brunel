{"version":3,"sources":["components/ForceGraph.module.css","components/Accordion.module.css","components/DefaultButton.module.css","components/CheckBox.module.css","components/ResponsiveList.module.css","components/GroupsList.module.css","components/ConnectionList.module.css","components/WeightsList.module.css","components/InfoBox.module.css","images/RHowlett_IKB.jpg","images/IllustriteZeitung_SS_GreatBritain.png","images/320px-SS_Great_Britain_diagram.jpg","images/Sumerian_26th_c_Adab.jpg","images/320px-SS_Great_Britain_transverse_section.jpg","components/TimeLineView.module.css","components/d3/ForceGraph.d3.js","components/ForceGraph.js","components/SocialGraph.js","components/Accordion.js","components/DefaultButton.js","components/CheckBox.js","components/ResponsiveList.js","components/GroupsList.js","components/ConnectionList.js","components/DateRangeButton.js","model/Errors.js","model/RoughDate.js","model/DateRange.js","components/SourceList.js","components/WeightsList.js","model/Person.js","model/People.js","model/Business.js","model/Businesses.js","model/Connection.js","model/Connections.js","model/Position.js","model/Positions.js","model/Affiliation.js","model/Affiliations.js","model/Source.js","model/Sources.js","model/Note.js","model/Notes.js","model/Project.js","model/Projects.js","model/Biographies.js","model/Social.js","components/InfoBox.js","components/TimeLineView.js","components/TimeLineBox.js","components/FilterBox.js","components/SlidingPanel.js","components/OverlayBox.js","components/SearchBar.js","components/BrunelMenu.js","components/ShipSelector.js","components/ShipTitle.js","SocialApp.js","components/TimeLineBox.module.css","components/FilterBox.module.css","components/SlidingPanel.module.css","components/transitions/SlideFromLeft.module.css","components/transitions/SlideFromRight.module.css","components/transitions/SlideFromBottom.module.css","components/transitions/SlideFromTop.module.css","components/OverlayBox.module.css","components/SearchBar.module.css","components/BrunelMenu.module.css","components/ShipTitle.module.css","SocialApp.module.css"],"names":["module","exports","_null_function","constrain","x","w","r","Math","max","min","drag","THIS","simulation","_simulation","d3","on","d","alphaTarget","_target_alpha","velocityDecay","_target_decay","restart","fx","fy","y","_is_running","state","width","h","height","fixed","handleMouseClick","svg","_mainGroup","node","this","raise","id","attr","items","selectAll","classed","styles","highlight","signalClicked","stopPropagation","handleMouseOver","each","target_id","target","source_id","source","signalMouseOver","handleMouseOut","signalMouseOut","_resolve","item","getID","ForceGraphD3","props","uid","uuidv4","social","selected","highlighted","colors","anchor","Jd0174de","J30ea52b","slice","length","_size_changed","_graph_changed","update","graph","getGraph","l","lodash","cloneDeep","edges","edge","n","nodes","old_nodes","old","_graph","i","o","random","size_changed","wobble","Object","prototype","hasOwnProperty","call","updateGraph","group","color","console","error","data","select","join","enter","append","size","getGroupColor","text","node_text","label","link","index","dx","dy","dragLink","stop","force","strength","distanceMin","distanceMax","links","distance","value","iterations","radius","_link","_node","_label","log","className","remove","container","mainGroup","_updateSimulation","_updateLink","_updateNode","_updateNodeText","_is_drawn","drawFromScratch","update_simulation","ForceGraph","_updateSize","bind","window","addEventListener","removeEventListener","updateSize","draw","offsetWidth","offsetHeight","s","ref","el","style","React","Component","SocialGraph","getNetwork","emitClicked","BAccordion","accordion","preExpanded","allowMultipleExpanded","allowZeroExpanded","children","BAccordionItem","accordionItem","uuid","BAccordionTitle","accordionButton","BAccordionPanel","DefaultButton","href","button","onClick","CheckBox","checkBox","type","checked","onChange","checkMark","ResponsiveList","list","ResponsiveListItem","key","null_function","GroupsList","groups","title","emitSelected","emitToggleFilter","projects","keys","forEach","get","is_filtered","isFiltered","push","getName","project","projectHeader","projectBody","minWidth","ConnectionList","connections","listitems","map","name","DateRangeButton","_isARoughDateObject","_isADateRangeObject","isNull","toSimpleString","toDateRange","KeyError","args","Error","captureStackTrace","ValueError","MissingError","_toDate","val","def","_isAMomentObject","date","moment","isValid","_get_min","d1","d2","toDate","_get_max","RoughDate","start","end","raw","setState","toISOString","delta","add","isFuzzy","format","e","getMonth","getDate","getFullYear","getEarliest","getLatest","DateRange","isExact","both","m","toMoment","other","s1","s2","getStart","getEnd","getRaw","getLatestDate","getEarliestDate","getEarliestString","getLatestString","eq","lt","gt","unDry","Dry","registerClass","_clean","hasBounds","isInstant","getStartString","getEndString","getEarliestStart","merge","getLatestEnd","hasStart","hasEnd","my_start","other_start","my_end","other_end","contains","scale","getDelta","toString","tmp","dates","SourceList","sources","output","daterange","mergeAll","body","WeightsList","weights","weight","_filterWindow","values","ret","intersect","_filterProject","Person","titles","firstnames","surnames","suffixes","positions","affiliations","alive","gender","notes","orig_name","_getHook","_isAPersonObject","ids","seen","nsources","includes","nprojects","person","getAlive","hook","parts","part","getTitle","getFirstName","getSurname","getSuffix","scores","content","is_anchor","shape","sort","c","_generate_person_uid","substring","People","registry","_names","_isAPeopleObject","load","_updateHooks","names","canAdd","existing","getByName","clone","trim","toLowerCase","results","indexOf","funcs","people","timeline","getTimeLine","getNode","array","element","v","Business","_isABusinessObject","business","_generate_business_uid","Businesses","_isABusinessesObject","businesses","_mergeSources","Connection","n0","n1","shared","duration","correspondances","_isAConnectionObject","node0","getNode0","node1","getNode1","getDuration","getNode0Name","getNode1Name","getWeight","getColorFromType","getWeightFromType","_generate_connection_uid","Connections","_isAConnectionsObject","connection","nnodes","_add","getNode0ID","getNode1ID","areNodesVisible","toEdge","Position","_isAPositionObject","canonical","makeCanonical","_generate_position_uid","Positions","_isAPositionsObject","position","_isApositionObject","Affiliation","_isAAffiliationObject","_generate_affiliation_uid","Affiliations","_isAAffiliationsObject","affiliation","Source","description","_isASourceObject","ne","_generate_source_uid","Sources","_isASourcesObject","getDescription","Note","_isANoteObject","getText","_generate_note_uid","Notes","_isANotesObject","note","Project","url","_isAProjectObject","_generate_project_uid","Projects","_isAProjectsObject","Biographies","bios","_isABiographiesObject","biography","bio","_push","enabled","timestep","Social","filter","cache","projectTimeLine","itemTimeLine","node_filters","edge_filters","max_window","_rebuilding","_isASocialObject","getHook","biographies","getWindow","filterWindow","project_filter","filterProject","source_filter","filterSource","node_filter","getConnectionsTo","group_filter","inGroup","new_window","getStartDate","getEndDate","fitted","_fitWindow","setWindow","clearCache","filtered","getNodeFilters","getEdgeFilters","getConnections","f","_getType","result","getPeople","find","getBusinesses","getPositions","getAffiliations","getSources","search","getBiographies","getProjects","getNodes","concat","getEdges","added","getNotes","default_text","getBiography","pages","a","InfoBox","image","default_image","person_image","business_image","source_image","asources","getAffiliationSources","csources","getCorrespondanceSources","textAlign","getWeights","getType","analysis_image","extractData","tabs","panes","tabId","tabPanel","tab","tabFor","heroImage","alt","src","vertical","defaultTab","tablist","timeline_options","autoResize","horizontalScroll","showCurrentTime","showTooltips","verticalScroll","zoomable","order","b","DateInput","zoomButton","TimeLineView","dimensions","_is_activated","is_active","redraw","$el","isActive","byUser","_byUser","emitWindowChanged","old_window","animation","shiftEarlier","shiftLater","zoomIn","zoomOut","my_options","getMaxWindow","getItems","activated","rangechangedHandler","rangeChangedHandler","selectHandler","options","buttonGroup","scrollButton","scrollLeft","datePicker","openToDate","selectsStart","startDate","endDate","dateFormat","showMonthYearPicker","showYearDropdown","dropdownMode","customInput","setStartDate","selectsEnd","setEndDate","scrollRight","TimeLineBox","deactivate","activate","tabList","getProjectWindow","getProjectTimeLine","centerContainer","getItemWindow","getItemTimeLine","filterList","maxWidth","FilterBox","filter_text","getFilterText","emitClearFilters","filter_info","filterContainer","filterText","SlidingPanel","isOpen","minSize","maxSize","rightContainer","transition","SlideFromRight","horiz_size","vert_size","minHeight","maxHeight","bottomContainer","SlideFromBottom","topContainer","SlideFromTop","leftContainer","SlideFromLeft","CSSTransition","in","timeout","classNames","unmountOnExit","OverlayBox","loading","getURL","fadeIn","onLoad","hideSpinner","frameBorder","marginHeight","marginWidth","sandbox","emitClose","SearchResults","SearchBar","suggestions","searching","nextProps","searchText","setSuggestions","setResults","setTimeout","startSearch","startSuggestion","event","isSearching","autocomplete","isEmpty","which","keyCode","searchFor","button_style","searchButton","disabledButton","searchContainer","hamburgerButton","emitHamburgerClicked","searchBox","onKeyPress","onEnter","placeholder","onSearch","magnifier","resultContainer","closeResultButton","stopSearch","searchPending","display","isSuggesting","searchResult","hasResults","BrunelMenu","buttons","func","menuItem","menu","ShipSelector","lastShip","shipName","resetFilters","shipFilter","setFilter","ShipTitle","SocialApp","toggleWobble","parse","graph_data","setAnchor","setMaxWindow","highlighted_item","selected_item","overlay_item","isInfoPanelOpen","isTimeLinePanelOpen","isFilterPanelOpen","isHamburgerMenuOpen","isOverlayOpen","wobbleEnabled","selectedShip","socialGraph","slotToggleFilter","toggleFilter","showInfo","closePanels","open","focus","location","reload","viewAbout","viewSource","resetAll","onRequestClose","closeOverlay","contentLabel","modal","overlayClassName","base","modalOverlay","afterOpen","modalOverlayAfterOpen","beforeClose","modalOverlayBeforeClose","closeTimeoutMS","appElement","document","getElementById","closeOverlayButton","slotSelected","emitHighlighted","slotHighlighted","slotClicked","closePanelButton","slotWindowChanged","slotClearFilters","graphContainer","shipNameContainer","slotSetFilter","sidePanel","toggleFilterPanel","toggleTimeLinePanel"],"mappings":"qFACAA,EAAOC,QAAU,CAAC,UAAY,8BAA8B,MAAQ,0BAA0B,KAAO,yBAAyB,UAAY,8BAA8B,KAAO,yBAAyB,UAAY,gC,oBCApND,EAAOC,QAAU,CAAC,UAAY,6BAA6B,cAAgB,iCAAiC,gBAAkB,mCAAmC,eAAiB,kCAAkC,OAAS,4B,oBCA7ND,EAAOC,QAAU,CAAC,OAAS,gC,oBCA3BD,EAAOC,QAAU,CAAC,SAAW,2BAA2B,UAAY,8B,oBCApED,EAAOC,QAAU,CAAC,KAAO,6BAA6B,KAAO,+B,oBCA7DD,EAAOC,QAAU,CAAC,QAAU,4BAA4B,cAAgB,kCAAkC,YAAc,kC,oBCAxHD,EAAOC,QAAU,CAAC,YAAc,sC,0CCAhCD,EAAOC,QAAU,CAAC,QAAU,6BAA6B,cAAgB,mCAAmC,YAAc,mC,oBCA1HD,EAAOC,QAAU,CAAC,UAAY,2BAA2B,UAAY,2BAA2B,MAAQ,uBAAuB,OAAS,wBAAwB,KAAO,sBAAsB,QAAU,yBAAyB,IAAM,qBAAqB,SAAW,4B,oBCDtQD,EAAOC,QAAU,IAA0B,0C,oBCA3CD,EAAOC,QAAU,IAA0B,+D,oBCA3CD,EAAOC,QAAU,IAA0B,4D,oBCA3CD,EAAOC,QAAU,IAA0B,kD,oBCA3CD,EAAOC,QAAU,IAA0B,uE,oBCC3CD,EAAOC,QAAU,CAAC,YAAc,kCAAkC,WAAa,iCAAiC,WAAa,iCAAiC,aAAe,qC,0LCO7K,SAASC,KAET,SAASC,EAAUC,EAAGC,GAAY,IAATC,EAAQ,uDAAJ,GAC3B,OAAOC,KAAKC,IAAIF,EAAGC,KAAKE,IAAIJ,EAAIC,EAAGF,IA6DrC,SAASM,EAAKC,GACZ,IAAIC,EAAaD,EAAKE,YA4BtB,OAAOC,MAAUC,GAAG,SA1BpB,SAAqBC,GACnBJ,EAAWK,YAAYN,EAAKO,eAAeC,cAAcR,EAAKS,eAAeC,UAE7EL,EAAEM,GAAKN,EAAEZ,EACTY,EAAEO,GAAKP,EAAEQ,KAsB+BT,GAAG,QAnB7C,SAAiBC,GACVL,EAAKc,aAAab,EAAWS,UAElC,IAAIhB,EAAIM,EAAKe,MAAMC,MACfC,EAAIjB,EAAKe,MAAMG,OAEnBb,EAAEM,GAAKnB,EAAUW,IAASV,EAAGC,EAAGW,EAAEV,GAClCU,EAAEO,GAAKpB,EAAUW,IAASU,EAAGI,EAAGZ,EAAEV,MAY0BS,GAAG,OATjE,SAAmBC,GACjBJ,EAAWK,YAAY,GAAGI,UAErBL,EAAEc,QACLd,EAAEM,GAAK,KACPN,EAAEO,GAAK,SAOb,SAASQ,EAAiBpB,GA8BxB,OA7BA,WACE,IAAIqB,EAAMrB,EAAKsB,WACf,GAAKD,EAAL,CAIA,IAAIE,EAAOpB,IAAUqB,MACrBD,EAAKE,QAEL,IAAIC,EAAKH,EAAKI,KAAK,MAEnB,GAAKD,EAAL,CAIA,IAAIE,EAAQP,EAAIQ,UAAJ,WAAkBH,IAE9BE,EAAME,QAAQC,IAAOC,WAAW,IAEhCJ,EAAQP,EAAIQ,UAAJ,qBAA4BH,EAA5B,OACFI,QAAQC,IAAOC,WAAW,IAEhCJ,EAAQP,EAAIQ,UAAJ,qBAA4BH,EAA5B,OACFI,QAAQC,IAAOC,WAAW,GAEhChC,EAAKe,MAAMkB,cAAcP,GACzBvB,IAAS+B,qBAMb,SAASC,EAAgBnC,GAiDvB,OAhDA,WACE,IAAIqB,EAAMrB,EAAKsB,WACf,GAAKD,EAAL,CAIA,IAAIE,EAAOpB,IAAUqB,MACrBD,EAAKE,QAEL,IAAIC,EAAKH,EAAKI,KAAK,MAEnB,GAAKD,EAAL,CAKA,IAAIE,EAAQP,EAAIQ,UAAJ,WAAkBH,IAC9BE,EAAME,QAAQC,IAAOC,WAAW,IAGhCJ,EAAQP,EAAIQ,UAAJ,qBAA4BH,EAA5B,OACFI,QAAQC,IAAOC,WAAW,GAGhCJ,EAAMQ,MAAK,SAAC/B,GACV,IAAIgC,EAAYhC,EAAEiC,OAAOZ,GACzBL,EAAIQ,UAAJ,WAAkBQ,IAAaP,QAAQC,IAAOC,WAAW,OAI3DJ,EAAQP,EAAIQ,UAAJ,qBAA4BH,EAA5B,OACFI,QAAQC,IAAOC,WAAW,GAGhCJ,EAAMQ,MAAK,SAAC/B,GACV,IAAIkC,EAAYlC,EAAEmC,OAAOd,GACzBL,EAAIQ,UAAJ,WAAkBU,IAAaT,QAAQC,IAAOC,WAAW,MAGvDT,EAAKI,KAAK,eACZN,EAAIQ,UAAJ,WAAkBN,EAAKI,KAAK,eAAgBG,QAAQC,IAAOC,WAAW,GAEtEX,EAAIQ,UAAJ,WAAkBN,EAAKI,KAAK,eAAgBG,QAAQC,IAAOC,WAAW,IAGxEhC,EAAKe,MAAM0B,gBAAgBf,MAM/B,SAASgB,EAAe1C,GA2CtB,OA1CA,WACE,IAAIqB,EAAMrB,EAAKsB,WACf,GAAKD,EAAL,CAIA,IAAIE,EAAOpB,IAAUqB,MACjBE,EAAKH,EAAKI,KAAK,MAEfC,EAAQP,EAAIQ,UAAJ,WAAkBH,IAE9BE,EAAME,QAAQC,IAAOC,WAAW,IAGhCJ,EAAQP,EAAIQ,UAAJ,qBAA4BH,EAA5B,OACFI,QAAQC,IAAOC,WAAW,GAGhCJ,EAAMQ,MAAK,SAAC/B,GACV,IAAIgC,EAAYhC,EAAEiC,OAAOZ,GACzBL,EAAIQ,UAAJ,WAAkBQ,IAAaP,QAAQC,IAAOC,WAAW,OAI3DJ,EAAQP,EAAIQ,UAAJ,qBAA4BH,EAA5B,OACFI,QAAQC,IAAOC,WAAW,GAGhCJ,EAAMQ,MAAK,SAAC/B,GACV,IAAIkC,EAAYlC,EAAEmC,OAAOd,GACzBL,EAAIQ,UAAJ,WAAkBU,IAAaT,QAAQC,IAAOC,WAAW,MAGvDT,EAAKI,KAAK,eACZN,EAAIQ,UAAJ,WAAkBN,EAAKI,KAAK,eAAgBG,QAAQC,IAAOC,WAAW,GAEtEX,EAAIQ,UAAJ,WAAkBN,EAAKI,KAAK,eAAgBG,QAAQC,IAAOC,WAAW,IAGxEhC,EAAKe,MAAM4B,eAAejB,KAM9B,SAASkB,EAASC,GAChB,OAAKA,EAEMA,EAAKC,MACPD,EAAKC,QAELD,EAJA,K,IAydIE,E,WA/cb,WAAYC,GAAQ,oBAGlB,IAAIC,EAAMC,eAEV1B,KAAKT,MAAQ,CACXC,MAAO,KACPE,OAAQ,KACRiC,OAAQ,KACRC,SAAU,KACVC,YAAa,KACbpB,cAAe1C,EACfoD,eAAgBpD,EAChBkD,gBAAiBlD,EAEjB+D,OAAQ,CAAE,oBAAqB,UAAWC,OAAQ,UAAWC,SAAU,UAAWC,SAAU,WAM5FR,IAAKA,EAAIS,MAAMT,EAAIU,OAAS,IAG9BnC,KAAKoC,eAAgB,EACrBpC,KAAKqC,gBAAiB,EACtBrC,KAAKV,aAAc,EAGnBU,KAAKf,cAAgB,GACrBe,KAAKjB,cAAgB,GAErBiB,KAAKsC,OAAOd,G,wDAGFG,GACV,IAAIzD,EAAI8B,KAAKT,MAAMC,MACfC,EAAIO,KAAKT,MAAMG,OAInB,GAFAM,KAAKT,MAAMoC,OAASA,EAEfzD,GAAMuB,EAAX,CAIA,IAAI8C,EAAQ,KASZ,GAPIZ,IACFY,EAAQZ,EAAOa,YAMbD,IAAUvC,KAAKT,MAAMgD,MAAO,CAW9B,IAAK,IAAIE,KATTzC,KAAKT,MAAMgD,MAAQA,GAKnBA,EAAQG,IAAOC,UAAU3C,KAAKT,MAAMgD,QAIhBK,MAAO,CACzB,IAAIC,EAAON,EAAMK,MAAMH,GACvB,IAAK,IAAIK,KAAKP,EAAMQ,MAAO,CACzB,IAAIhD,EAAOwC,EAAMQ,MAAMD,GACnBD,EAAK7B,SAAWjB,EAAKG,IACvB2C,EAAK7B,OAAS8B,EACdD,EAAK9B,UAAYhB,EAAKG,IACb2C,EAAK/B,SAAWf,EAAKG,KAC9B2C,EAAK/B,OAASgC,EACdD,EAAKhC,UAAYd,EAAKG,KAM5B,IAAI8C,EAAY,GACZC,EAAM,GAEV,GAAIjD,KAAKkD,OAGP,IAAK,IAAIJ,KAFTE,EAAYhD,KAAKkD,OAAOH,MAGtBE,EAAID,EAAUF,GAAG5C,IAAM4C,EAI3B,IAAK,IAAIA,KAAKP,EAAMQ,MAAO,CACzB,IAAIhD,EAAOwC,EAAMQ,MAAMD,GAEnBK,EAAIF,EAAIlD,EAAKG,IAEjB,GAAIiD,EAAG,CACL,IAAIC,EAAIJ,EAAUG,GAClBpD,EAAK9B,EAAImF,EAAEnF,EACX8B,EAAKV,EAAI+D,EAAE/D,OAEXU,EAAK9B,EAAIC,EAAIE,KAAKiF,SAClBtD,EAAKV,EAAII,EAAIrB,KAAKiF,SAGhBtD,EAAKJ,QACHwD,GACFpD,EAAKZ,GAAKY,EAAK9B,EACf8B,EAAKX,GAAKW,EAAKV,IAEfU,EAAKZ,GAAKjB,EAAI,EACd6B,EAAKX,GAAKK,EAAI,IAKpBO,KAAKkD,OAASX,EACdvC,KAAKqC,gBAAiB,M,6BAInBb,GACL,IAAI8B,GAAe,EAEf9B,EAAM+B,QACRvD,KAAKf,cAAgB,GACrBe,KAAKjB,cAAgB,KAErBiB,KAAKf,cAAgB,GACrBe,KAAKjB,cAAgB,GAGRyE,OAAOC,UAAUC,eAAeC,KAAKnC,EAAO,UAErDxB,KAAKT,MAAMC,QAAUgC,EAAMhC,QAC7BQ,KAAKT,MAAMC,MAAQgC,EAAMhC,MACzB8D,GAAe,GAIHE,OAAOC,UAAUC,eAAeC,KAAKnC,EAAO,WAEtDxB,KAAKT,MAAMG,SAAW8B,EAAM9B,SAC9BM,KAAKT,MAAMG,OAAS8B,EAAM9B,OAC1B4D,GAAe,GAIfA,IACFtD,KAAKoC,eAAgB,GAGAoB,OAAOC,UAAUC,eAAeC,KAAKnC,EAAO,mBAG7DxB,KAAKT,MAAMkB,cACbT,KAAKT,MAAMkB,cAAgBe,EAAMf,cAEjCT,KAAKT,MAAMkB,cAAgB1C,GAIPyF,OAAOC,UAAUC,eAAeC,KAAKnC,EAAO,oBAG9DxB,KAAKT,MAAM4B,eACbnB,KAAKT,MAAM4B,eAAiBK,EAAML,eAElCnB,KAAKT,MAAM4B,eAAiBpD,GAIPyF,OAAOC,UAAUC,eAAeC,KAAKnC,EAAO,qBAG/DxB,KAAKT,MAAM0B,gBACbjB,KAAKT,MAAM0B,gBAAkBO,EAAMP,gBAEnCjB,KAAKT,MAAM0B,gBAAkBlD,GAIjByF,OAAOC,UAAUC,eAAeC,KAAKnC,EAAO,WAG1DxB,KAAK4D,YAAYpC,EAAMG,QAGP6B,OAAOC,UAAUC,eAAeC,KAAKnC,EAAO,cAG5DxB,KAAKT,MAAMqC,SAAWR,EAASI,EAAMI,WAGlB4B,OAAOC,UAAUC,eAAeC,KAAKnC,EAAO,iBAG/DxB,KAAKT,MAAMsC,YAAcT,EAASI,EAAMK,gB,kCAK1C,MAAM,gBAAN,OAAuB7B,KAAKT,MAAMkC,O,oCAGtBoC,GACZ,IAAIC,EAAQ9D,KAAKT,MAAMuC,OAAO+B,GAsB9B,OApBKC,IACHC,QAAQC,MAAM,wBAAyBH,GACvCC,EAAQ,WAkBHA,I,kCAGGG,GAAO,IAAD,OACZlE,EAAOC,KAAKF,WAAWoE,OAAO,eAAe7D,UAAU,SAsB3D,OApBAN,EAAOA,EACJkE,KAAKA,GAAM,SAACpF,GAAD,OAAOA,EAAEqB,MACpBiE,MACC,SAACC,GAAD,OAAWA,EAAMC,OAAO,UAAUlE,KAAK,QAA5B,eAA6CI,IAAOR,UAC/D,SAACuC,GAAD,OAAYA,EAAOnC,KAAK,QAAZ,eAA6BI,IAAOR,UAEjDI,KAAK,KAAK,SAACtB,GACV,OAAOA,EAAEyF,QAEVnE,KAAK,MAAM,SAACtB,GACX,OAAOA,EAAEqB,MAEVC,KAAK,QAAQ,SAACtB,GACb,OAAO,EAAK0F,cAAc1F,EAAEgF,UAE7BjF,GAAG,QAASgB,EAAiBI,OAC7BpB,GAAG,YAAa+B,EAAgBX,OAChCpB,GAAG,WAAYsC,EAAelB,OAC9B2D,KAAKpF,EAAKyB,S,sCAKCiE,GACd,IAAIO,EAAOxE,KAAKF,WAAWoE,OAAO,oBAAoB7D,UAAU,cAiBhE,OAfAmE,EAAOA,EACJP,KAAKA,GAAM,SAACpF,GAAD,OAAOA,EAAEqB,MACpBiE,MACC,SAACC,GAAD,OAAWA,EAAMC,OAAO,QAAQlE,KAAK,QAA1B,oBAAgDI,IAAOkE,eAClE,SAACnC,GAAD,OAAYA,EAAOnC,KAAK,QAAZ,oBAAkCI,IAAOkE,eAEtDD,MAAK,SAAC3F,GAAD,OAAOA,EAAE6F,SACdvE,KAAK,MAAM,SAACtB,GACX,OAAOA,EAAEqB,MAEVtB,GAAG,QAASgB,EAAiBI,OAC7BpB,GAAG,YAAa+B,EAAgBX,OAChCpB,GAAG,WAAYsC,EAAelB,OAC9B2D,KAAKpF,EAAKyB,S,kCAKHiE,GACV,IAAIU,EAAO3E,KAAKF,WAAWoE,OAAO,eAAe7D,UAAU,SAuB3D,OArBAsE,EAAOA,EACJV,KAAKA,GAAM,SAACpF,GAAD,OAAOA,EAAEqB,MACpBiE,MACC,SAACC,GAAD,OAAWA,EAAMC,OAAO,QAAQlE,KAAK,QAA1B,eAA2CI,IAAOoE,UAC7D,SAACrC,GAAD,OAAYA,EAAOnC,KAAK,QAAZ,eAA6BI,IAAOoE,UAEjDxE,KAAK,QAND,eAMkBI,IAAOoE,OAC7BxE,KAAK,MAAM,SAACtB,GACX,OAAOA,EAAEqB,MAEVC,KAAK,aAAa,SAACtB,GAClB,OAAOA,EAAEkC,aAEVZ,KAAK,aAAa,SAACtB,GAClB,OAAOA,EAAEgC,aAEVjC,GAAG,QAASgB,EAAiBI,OAC7BpB,GAAG,YAAa+B,EAAgBX,OAChCpB,GAAG,WAAYsC,EAAelB,OAC9B2D,KArhBP,SAAkBnF,GAChB,IAAIC,EAAaD,EAAKE,YAsDtB,OAAOC,MAAUC,GAAG,SApDpB,SAAqBC,GACnBJ,EAAWK,YAAYN,EAAKO,eAAeC,cAAcR,EAAKS,eAAeC,UAG7E,IAAI8B,EAASxC,EAAK0E,OAAOH,MAAMlE,EAAEmC,OAAO4D,OACpC9D,EAAStC,EAAK0E,OAAOH,MAAMlE,EAAEiC,OAAO8D,OAGxC5D,EAAO7B,GAAK6B,EAAO/C,EACnB+C,EAAO5B,GAAK4B,EAAO3B,EAEnByB,EAAO3B,GAAK2B,EAAO7C,EACnB6C,EAAO1B,GAAK0B,EAAOzB,KAwCqBT,GAAG,QArC7C,SAAiBC,GACVL,EAAKc,aAAab,EAAWS,UAGlC,IAAI8B,EAASxC,EAAK0E,OAAOH,MAAMlE,EAAEmC,OAAO4D,OACpC9D,EAAStC,EAAK0E,OAAOH,MAAMlE,EAAEiC,OAAO8D,OAIpCC,EAAK,IAAO/D,EAAO7C,EAAI+C,EAAO/C,GAC9B6G,EAAK,IAAOhE,EAAOzB,EAAI2B,EAAO3B,GAElC2B,EAAO7B,GAAKnB,EAAUW,IAASV,EAAI4G,EAAIrG,EAAKe,MAAMC,MAAOwB,EAAO7C,GAChE6C,EAAO5B,GAAKpB,EAAUW,IAASU,EAAIyF,EAAItG,EAAKe,MAAMG,OAAQsB,EAAO7C,GAEjE2C,EAAO3B,GAAKnB,EAAUW,IAASV,EAAI4G,EAAIrG,EAAKe,MAAMC,MAAOsB,EAAO3C,GAChE2C,EAAO1B,GAAKpB,EAAUW,IAASU,EAAIyF,EAAItG,EAAKe,MAAMG,OAAQoB,EAAO3C,MAqBLS,GAAG,OAlBjE,SAAmBC,GACjBJ,EAAWK,YAAY,GAAGI,UAG1B,IAAI8B,EAASxC,EAAK0E,OAAOH,MAAMlE,EAAEmC,OAAO4D,OACpC9D,EAAStC,EAAK0E,OAAOH,MAAMlE,EAAEiC,OAAO8D,OAEnC5D,EAAOrB,QACVqB,EAAO7B,GAAK,KACZ6B,EAAO5B,GAAK,MAGT0B,EAAOnB,QACVmB,EAAO3B,GAAK,KACZ2B,EAAO1B,GAAK,SAkeN2F,CAAS/E,S,0CAMbA,KAAKtB,cACPsB,KAAKtB,YAAYsG,OACjBhF,KAAKtB,YAAc,KACnBsB,KAAKV,aAAc,GAGrB,IAAIpB,EAAI8B,KAAKT,MAAMC,MACfC,EAAIO,KAAKT,MAAMG,OAEflB,EAAOwB,KAwBX,IAAIvB,EAAaE,IACEqB,KAAKkD,OAAOH,OAC5BkC,MAAM,SAAUtG,MAAmBuG,UAAU,KAAKC,YAAY,GAAGC,YAAY,MAC7EH,MACC,OACAtG,MAEG0G,MAAMrF,KAAKkD,OAAON,OAClB0C,UAAS,SAACzG,GACT,OAAO,IAAM,EAAIA,EAAE0G,UAEpBC,WAAW,IAEfP,MACC,YACAtG,MAEG8G,QAAO,SAAC5G,GACP,OAAO,EAAIA,EAAEyF,QAEdY,SAAS,GACTM,WAAW,IAEf5G,GAAG,QAzCN,WACEJ,EAAKkH,MACFvF,KAAK,MAAM,SAACtB,GAAD,OAAOA,EAAEmC,OAAO/C,KAC3BkC,KAAK,MAAM,SAACtB,GAAD,OAAOA,EAAEmC,OAAO3B,KAC3Bc,KAAK,MAAM,SAACtB,GAAD,OAAOA,EAAEiC,OAAO7C,KAC3BkC,KAAK,MAAM,SAACtB,GAAD,OAAOA,EAAEiC,OAAOzB,KAE9Bb,EAAKmH,MACFxF,KAAK,MAAM,SAACtB,GACX,OAAQA,EAAEZ,EAAID,EAAUa,EAAEZ,EAAGC,EAAGW,EAAEV,MAEnCgC,KAAK,MAAM,SAACtB,GACX,OAAQA,EAAEQ,EAAIrB,EAAUa,EAAEQ,EAAGI,EAAGZ,EAAEV,MAGtCK,EAAKoH,OAAOzF,KAAK,KAAK,SAACtB,GAAD,OAAOA,EAAEZ,KAAGkC,KAAK,KAAK,SAACtB,GAAD,OAAOA,EAAEQ,QA2BpDT,GAAG,OA9CN,WACEJ,EAAKc,aAAc,KA+CrBU,KAAKV,aAAc,EAGnBU,KAAKtB,YAAcD,I,wCAGF,IAAD,OAChBsF,QAAQ8B,IAAI,qBACZ,IAAItD,EAAQvC,KAAKkD,OAEjB,GAAKX,IACCvC,KAAKT,MAAMoC,QACb3B,KAAK4D,YAAY5D,KAAKT,MAAMoC,QAG9BY,EAAQvC,KAAKkD,QALf,CAYAvE,IAAA,WAAcqB,KAAK8F,YAAnB,SAAsCC,SAEtC,IAAIC,EAAYrH,IAAA,WAAcqB,KAAK8F,cAEnC,GAAKE,EAAL,CAKA,IAAMxG,EAAQQ,KAAKT,MAAMC,MACnBE,EAASM,KAAKT,MAAMG,OAI1B,GAFAqE,QAAQ8B,IAAR,iBAAsBrG,EAAtB,YAA+BE,IAE1BF,GAAUE,EAAf,CAKA,IAUIuG,EAVMD,EACP3B,OAAO,OACPlE,KAAK,SAAUT,GACfS,KAAK,QAASX,GACdW,KAAK,KAAM,WACXA,KAAK,QAAS,UACdvB,GAAG,SAAS,WACX,EAAKW,MAAMkB,cAAc,SAI7BT,KAAKF,WAAamG,EAElBjG,KAAKkG,oBAELD,EAAU5B,OAAO,KAAKlE,KAAK,QAAS,cACpC8F,EAAU5B,OAAO,KAAKlE,KAAK,QAAS,cACpC8F,EAAU5B,OAAO,KAAKlE,KAAK,QAAS,mBAEpCH,KAAK0F,MAAQ1F,KAAKmG,YAAY5D,EAAMK,OACpC5C,KAAK2F,MAAQ3F,KAAKoG,YAAY7D,EAAMQ,OACpC/C,KAAK4F,OAAS5F,KAAKqG,gBAAgB9D,EAAMQ,OAEzC/C,KAAKsG,WAAY,OA3BfvC,QAAQ8B,IAAR,mCAAwCrG,EAAxC,cAAmDE,SAVnDqE,QAAQ8B,IAAR,8CAAmD7F,KAAK8F,mBAVtD/B,QAAQ8B,IAAI,wB,6BAmDhB,IAAK7F,KAAKsG,UAIR,OAHAtG,KAAKuG,kBACLvG,KAAKoC,eAAgB,OACrBpC,KAAKqC,gBAAiB,GAIxB,IAAImE,GAAoB,EAEpBxG,KAAKoC,gBACSzD,IAAA,WAAcqB,KAAK8F,cACzBzF,UAAU,OAAOF,KAAK,QAASH,KAAKT,MAAMC,OAAOW,KAAK,SAAUH,KAAKT,MAAMG,QACrFM,KAAKoC,eAAgB,EACrBoE,GAAoB,GAGlBxG,KAAKqC,iBACPrC,KAAK2F,MAAQ3F,KAAKoG,YAAYpG,KAAKkD,OAAOH,OAC1C/C,KAAK4F,OAAS5F,KAAKqG,gBAAgBrG,KAAKkD,OAAOH,OAC/C/C,KAAK0F,MAAQ1F,KAAKmG,YAAYnG,KAAKkD,OAAON,OAC1C5C,KAAKqC,gBAAiB,EACtBmE,GAAoB,GAGlBA,GACFxG,KAAKkG,wB,KClpBIO,E,kDA1Cb,WAAYjF,GAAQ,IAAD,8BACjB,cAAMA,IAED0B,OAAS,IAAI3B,EAAaC,GAC/B,EAAKkF,YAAc,EAAKA,YAAYC,KAAjB,gBAJF,E,gEAQjBC,OAAOC,iBAAiB,SAAU7G,KAAK0G,aACvC1G,KAAK0G,gB,6CAILE,OAAOE,oBAAoB,SAAU9G,KAAK+G,c,2CAI1C/G,KAAKkD,OAAOZ,OAAOtC,KAAKwB,OACxBxB,KAAKkD,OAAO8D,S,oCAIRhH,KAAKgG,WAAahG,KAAKkD,SACzBlD,KAAKkD,OAAOZ,OAAO,CACjB9C,MAAOQ,KAAKgG,UAAUiB,YACtBvH,OAAQM,KAAKgG,UAAUkB,eAEzBlH,KAAKkD,OAAO8D,U,+BAIN,IAAD,OACHG,EAAC,UAAM5G,IAAOgC,MAAb,YAAsBvC,KAAKkD,OAAO4C,aAEvC,OACE,yBAAKsB,IAAK,SAACC,GAAD,OAAS,EAAKrB,UAAYqB,GAAKC,MAAO,CAAE9H,MAAO,OAAQE,OAAQ,SACvE,yBAAKoG,UAAWqB,S,GArCCI,IAAMC,WC8ChBC,E,yKA5CX,IAAM9F,EAAS3B,KAAKwB,MAAMG,OAE1B,OAAIA,EACKA,EAAOa,WAET,O,mCAIP,IAAMb,EAAS3B,KAAKwB,MAAMG,OAE1B,OAAIA,EACKA,EAAO+F,aAET,O,+BAIP,OAAI1H,KAAKwB,MAAMG,OAEX,yBAAK2F,MAAO,CAAE9H,MAAO,OAAQE,OAAQ,SACnC,kBAAC,EAAD,CACEiC,OAAQ3B,KAAKwB,MAAMG,OACnBlB,cAAeT,KAAKwB,MAAMmG,YAC1B9F,YAAa7B,KAAKwB,MAAMK,YACxBD,SAAU5B,KAAKwB,MAAMI,SACrB2B,OAAQvD,KAAKwB,MAAM+B,UAKlB,0D,GAjCagE,IAAMC,W,oCCShC,SAASI,EAAWpG,GAClB,OACE,kBAAC,IAAD,CACEsE,UAAWvF,IAAOsH,UAClBC,YAAatG,EAAMsG,YACnBC,sBAAuBvG,EAAMuG,sBAC7BC,kBAAmBxG,EAAMwG,mBAExBxG,EAAMyG,UAYb,SAASC,EAAe1G,GACtB,OACE,kBAAC,IAAD,CAAesE,UAAWvF,IAAO4H,cAAeb,MAAO9F,EAAM8F,MAAOc,KAAM5G,EAAM4G,MAC7E5G,EAAMyG,UAWb,SAASI,EAAgB7G,GACvB,OACE,kBAAC,IAAD,CAAsB8F,MAAO9F,EAAM8F,OACjC,kBAAC,IAAD,CAAqBxB,UAAWvF,IAAO+H,iBAAkB9G,EAAMyG,WAWrE,SAASM,EAAgB/G,GACvB,OAAO,kBAAC,IAAD,CAAoB8F,MAAO9F,EAAM8F,OAAQ9F,EAAMyG,U,sBC3CzCO,MAdf,SAAuBhH,GACrB,OACE,4BAAQiH,KAAK,IAAI3C,UAAWvF,IAAOmI,OAAQC,QAASnH,EAAMmH,QAASrB,MAAO9F,EAAM8F,OAC7E9F,EAAMyG,W,kBCYEW,MAff,SAAkBpH,GAChB,OACE,2BAAOsE,UAAWvF,IAAOsI,SAAUvB,MAAO9F,EAAM8F,OAC9C,2BAAOwB,KAAK,WAAWC,QAASvH,EAAMuH,QAASC,SAAUxH,EAAMwH,WAC/D,0BAAMlD,UAAWvF,IAAO0I,c,kBCL9B,SAASC,EAAe1H,GACtB,OAAO,yBAAKsE,UAAWvF,IAAO4I,MAAO3H,EAAMyG,UAO7C,SAASmB,EAAmB5H,GAC1B,OACE,yBAAKsE,UAAWvF,IAAOc,KAAMgI,IAAK7H,EAAM6H,KACrC7H,EAAMyG,U,sBCPb,SAASqB,KAoFMC,MAlFf,YAMI,IALFC,EAKC,EALDA,OAKC,IAJDC,aAIC,MAJO,KAIP,MAHDC,oBAGC,MAHcJ,EAGd,MAFDK,wBAEC,MAFkBL,EAElB,MADD3H,cACC,MADQ,KACR,EACD,IAAK6H,EACH,OAAO,KAGT,IAAII,EAAW,GA2Df,OAzDApG,OAAOqG,KAAKL,GAAQM,SAAQ,SAACT,GAC3B,IAAIjJ,EAAQ,GADuB,WAG1BwE,GACP,IAAIf,EAAQlC,EAAOoI,IAAIP,EAAOH,GAAKzE,IAC/BoF,EAAcrI,EAAOsI,WAAWpG,GAEpCzD,EAAM8J,KACJ,kBAACd,EAAD,CAAoBC,IAAKxF,EAAMsG,WAC7B,kBAAC,EAAD,CACExB,QAAS,WACPe,EAAa7F,IAEfyD,MAAO,CAAE9H,MAAO,QAEfqE,EAAMsG,WAET,kBAAC,EAAD,CACEnB,SAAU,WACRW,EAAiB9F,IAEnByD,MAAO,CAAE9H,MAAO,OAChBuJ,QAASiB,OAnBjB,IAAK,IAAIpF,KAAS4E,EAAOH,GAAO,EAAvBzE,GAyBT,IAAIwF,EAAUzI,EAAOoI,IAAIV,GACrBW,EAAcrI,EAAOsI,WAAWG,GAEpCR,EAASM,KACP,yBAAKpE,UAAWvF,IAAO6J,QAASf,IAAKe,EAAQD,WAC3C,yBAAKrE,UAAWvF,IAAO8J,eACrB,kBAAC,EAAD,CACE/C,MAAO,CAAE9H,MAAO,OAChBmJ,QAAS,WACPe,EAAaU,KAGdA,EAAQD,WAEX,kBAAC,EAAD,CACEnB,SAAU,WACRW,EAAiBS,IAEnB9C,MAAO,CAAE9H,MAAO,OAChBuJ,QAASiB,KAGb,yBAAKlE,UAAWvF,IAAO+J,aACrB,kBAACpB,EAAD,CAAgB5B,MAAO,CAAEiD,SAAU,SAAWnK,SAMlDqJ,EAEA,6BACE,yBAAK3D,UAAWvF,IAAOkJ,OAAQA,GAC9BG,GAIEA,G,kBC/EX,SAASN,MA4DMkB,OA1Df,YAMI,IALFC,EAKC,EALDA,YACAhB,EAIC,EAJDA,MAIC,IAHDC,oBAGC,MAHcJ,GAGd,MAFDK,wBAEC,MAFkBL,GAElB,MADD3H,cACC,MADQ,KACR,EACD,IAAK8I,GAAsC,IAAvBA,EAAYtI,OAC9B,OAAO,KAGT,IAAMuI,EAAYD,EAAYE,KAAI,SAACtJ,GACjC,IAAI8B,EAAI9B,EACJuJ,EAAOvJ,EAAK8I,UAEZH,GAAc,EAMlB,OAJIrI,IACFqI,EAAcrI,EAAOsI,WAAW5I,IAIhC,kBAAC+H,EAAD,CAAoBC,IAAKuB,GACvB,kBAAC,EAAD,CACEjC,QAAS,WACPe,EAAavG,IAEfmE,MAAO,CAAE9H,MAAO,QAEfoL,GAEH,kBAAC,EAAD,CACE5B,SAAU,WACRW,EAAiBxG,IAEnB4F,QAASiB,EACT1C,MAAO,CAAE9H,MAAO,aAMxB,OAAIiK,EAEA,yBAAK3D,UAAWvF,IAAOkK,aACrB,yBAAK3E,UAAWvF,IAAOkJ,OAAQA,GAC/B,kBAACP,EAAD,KAAiBwB,IAKnB,yBAAK5E,UAAWvF,IAAOkK,aACrB,kBAACvB,EAAD,KAAiBwB,KC1DzB,SAAS3M,MAiDM8M,OA/Cf,SAAyBrJ,GACvB,IAAI3C,EAAI2C,EAAM+D,MAEd,IAAK1G,EACH,OAAO,KAGT,IAAMA,EAAEiM,sBAAuBjM,EAAEkM,oBAC/B,OAAO,KAGT,GAAIlM,EAAEmM,SACJ,OAAO,KAKT,IAAItB,EAAelI,EAAMkI,aAEpBA,IACHA,EAAe3L,IAGjB,IAAIoJ,EAAItI,EAAEoM,iBAMV,OAJIpM,EAAEiM,sBACJjM,EAAIA,EAAEqM,eAIN,kBAAC,EAAD,CACEvC,QAAS,WACPe,EAAa7K,IAEfyI,MAAO9F,EAAM8F,OAEZH,I,wCC3CDgE,G,kDACJ,aAAsB,IAAD,iDAANC,EAAM,yBAANA,EAAM,uBACnB,+BAASA,IACTC,MAAMC,kBAAN,eAA8BH,GAFX,E,uBADAE,QAOjBE,G,kDACJ,aAAsB,IAAD,iDAANH,EAAM,yBAANA,EAAM,uBACnB,+BAASA,IACTC,MAAMC,kBAAN,eAA8BC,GAFX,E,uBADEF,QAcnBG,IAPuBH,M,kDAQ3B,aAAsB,IAAD,iDAAND,EAAM,yBAANA,EAAM,uBACnB,+BAASA,IACTC,MAAMC,kBAAN,eAA8BE,GAFX,E,uBADIH,SCb3B,SAASI,GAAQC,GAAkB,IAAbC,EAAY,uDAAN,KAC1B,GAAID,EAAK,CACP,GAAIA,EAAIE,iBACN,OAAOF,EAOT,IAAIG,EAAOC,KAAOJ,GAElB,IAAKG,EAAKE,UAER,MADAhI,QAAQ8B,IAAR,uBAA4B6F,IACtB,IAAIH,GAAJ,uBAA+BG,IAGvC,OAAOG,EAEP,OAAKF,EAGIF,GAAQE,GAFR,KAWb,SAASK,GAASC,EAAIC,GACpB,OAAID,EACEC,EACED,EAAGE,SAAWD,EAAGC,SACZF,EAEAC,EAGFD,EAGFC,EAIX,SAASE,GAASH,EAAIC,GACpB,OAAID,EACEC,EACED,EAAGE,SAAWD,EAAGC,SACZF,EAEAC,EAGFD,EAGFC,E,IAcLG,G,WACJ,WAAY9M,GAAQ,oBAClBS,KAAKT,MAAQ,CACX+M,MAAO,KACPC,IAAK,KACLC,IAAK,MAGPxM,KAAKyM,SAASlN,GAEdS,KAAK8K,qBAAsB,E,qDAGpBvL,GACP,GAAKA,GAAmB,SAAVA,GAA8B,OAAVA,EAG3B,GAAIA,EAAMuL,oBACf9K,KAAKT,MAAL,gBAAkBA,EAAMA,YAEnB,GAAIA,EAAMwL,oBACf/K,KAAKT,MAAQA,EAAM4M,cAEd,GAAI5M,EAAMqM,iBACf5L,KAAKT,MAAQ,CAAE+M,MAAOb,GAAQlM,SAEzB,GAAIA,EAAMmN,YACf1M,KAAKT,MAAQ,CAAE+M,MAAOb,GAAQlM,SAEzB,GAAIiE,OAAOC,UAAUC,eAAeC,KAAKpE,EAAO,SACrDS,KAAKT,MAAQ,CAAE+M,MAAO/M,EAAMgG,YAEvB,GAAqB,kBAAVhG,EAAX,CAKP,IAAI+M,EAAQb,GAAQlM,EAAM+M,OACtBC,EAAMd,GAAQlM,EAAMgN,KAEnBD,GAKLtM,KAAKT,MAAM+M,MAAQA,EACnBtM,KAAKT,MAAMgN,IAAMA,EACjBvM,KAAKT,MAAMiN,IAAMjN,EAAMiN,IAEnBxM,KAAKgL,WACPjH,QAAQ8B,IAAI,mBACZ9B,QAAQ8B,IAAItG,KAVZS,KAAKT,MAAQ,CAAE+M,MAAO,WARtBtM,KAAKT,MAAQ,CAAE+M,MAAOb,GAAQlM,GAAQiN,IAAKjN,QAlB3CS,KAAKT,MAAQ,CAAE+M,MAAO,Q,0BAoGtBK,GACE3M,KAAKT,MAAM+M,OACbtM,KAAKT,MAAM+M,MAAMM,IAAID,GAGnB3M,KAAKT,MAAMgN,KACbvM,KAAKT,MAAMgN,IAAIK,IAAID,GAGrB3M,KAAKT,MAAMiN,IAAM,O,0BAGfG,GACF3M,KAAK4M,KAAKD,K,+BAIV,OAAI3M,KAAKT,MAAM+M,Q,gCAQf,QAAItM,KAAKT,MAAMgN,M,gCAQf,QAASvM,KAAKgL,UAAYhL,KAAK6M,a,iCAI/B,OAAI7M,KAAKgL,SACA,eACEhL,KAAK6M,UACR,IAAN,OAAW7M,KAAKT,MAAM+M,MAAMQ,OAAO,MAAnC,YAA4C9M,KAAKT,MAAMgN,IAAIO,OAAO,OAE3D9M,KAAKT,MAAM+M,MAAMQ,OAAO,Q,uCAKjC,GAAI9M,KAAKgL,SACP,MAAO,UACF,GAAIhL,KAAK6M,UAAW,CACzB,IAAI1F,EAAInH,KAAKT,MAAM+M,MAAMH,SACrBY,EAAI/M,KAAKT,MAAMgN,IAAIJ,SAEvB,OAAqB,IAAjBhF,EAAE6F,YAAqC,KAAjBD,EAAEC,YAAqC,IAAhB7F,EAAE8F,WAAmC,KAAhBF,EAAEE,UAElE9F,EAAE+F,gBAAkBH,EAAEG,cACjB/F,EAAE+F,cAEH,GAAN,OAAU/F,EAAE+F,cAAZ,YAA6BH,EAAEG,eAG3B,GAAN,OAAU/F,EAAE8F,UAAZ,YAAyB9F,EAAE6F,WAAa,EAAxC,YAA6C7F,EAAE+F,cAA/C,YAAgEH,EAAEE,UAAlE,YACEF,EAAEC,WAAa,EADjB,YAEID,EAAEG,eAGR,OAAOlN,KAAKT,MAAM+M,MAAMQ,OAAO,Q,oCAKjC,IAAIvN,EAAQ,CAAE+M,MAAOtM,KAAKT,MAAM+M,OAC5BnO,EAAI,IAAIkO,EAEZ,OADAlO,EAAEoB,MAAQA,EACHpB,I,kCAIP,GAAI6B,KAAKT,MAAMgN,IAAK,CAClB,IAAIhN,EAAQ,CAAE+M,MAAOtM,KAAKT,MAAMgN,KAC5BpO,EAAI,IAAIkO,EAEZ,OADAlO,EAAEoB,MAAQA,EACHpB,EAEP,OAAO6B,KAAKmN,gB,wCAKd,IAAItO,EAAImB,KAAKmN,cAEb,OAAItO,EACKA,EAAEsN,SAEF,O,sCAKT,IAAItN,EAAImB,KAAKoN,YAEb,OAAIvO,EACKA,EAAEsN,SAEF,O,0CAKT,IAAItN,EAAImB,KAAKmN,cAEb,OAAItO,EACKA,EAAEsN,SAASO,cAEX,O,wCAKT,IAAI7N,EAAImB,KAAKoN,YAEb,OAAIvO,EACKA,EAAEsN,SAASO,cAEX,O,gCAKT,OAAI1M,KAAKgL,SACA,IAAIqC,GACFrN,KAAKsN,UACP,IAAID,GAAU,CAAEE,KAAMvN,KAAKT,MAAM+M,QAEjC,IAAIe,GAAU,CAAEf,MAAOtM,KAAKT,MAAM+M,MAAOC,IAAKvM,KAAKT,MAAMgN,Q,oCAKlE,OAAIvM,KAAKgL,SACA,IAAIqC,GACFrN,KAAK6M,UACP,IAAIQ,GAAU,CAAEf,MAAOtM,KAAKmN,cAAeZ,IAAKvM,KAAKoN,cAErD,IAAIC,GAAU,CAAEE,KAAMvN,KAAKmN,kB,+BAKpC,IAAIK,EAAIxN,KAAKyN,WAEb,IAAID,EAUF,OAAO,KATP,IACE,OAAOA,EAAErB,SACT,MAAOnI,GAIP,OAHAD,QAAQ8B,IAAR,wBAA6B7B,IAC7BD,QAAQ8B,IAAR,cAAmB2H,IACnBzJ,QAAQ8B,IAAI2H,GACL,Q,iCAQX,GAAIxN,KAAKgL,SACP,OAAO,KACF,GAAIhL,KAAKsN,UACd,OAAOtN,KAAKT,MAAM+M,MAElB,MAAMf,GAAW,qDAAD,OAAsDvL,S,+BAKxE,OAAOA,KAAKT,MAAMiN,M,iCAIlB,OAAOxM,KAAKT,MAAM+M,Q,+BAIlB,OAAItM,KAAKT,MAAMgN,IACNvM,KAAKT,MAAMgN,IAEXvM,KAAKT,MAAM+M,Q,4BAIhBoB,GACJ,IA7TgBC,EAAIC,EA6ThBrO,EAAQ,CACV+M,MAAON,GAAShM,KAAK6N,WAAYH,EAAMG,YACvCtB,IAAKH,GAASpM,KAAK8N,SAAUJ,EAAMI,UACnCtB,KAhUcmB,EAgUE3N,KAAK+N,SAhUHH,EAgUaF,EAAMK,SA/TpCJ,EAEOC,EAIN,GAAN,OAAUD,EAAV,cAAkBC,GAHTD,EAFAC,IAiUH/B,EAAO,IAAIQ,EAGf,OAFAR,EAAKtM,MAAQA,EAENsM,K,6BArQIxK,GACX,IAAIxC,EAAI,IAAIwN,EAEZ,OADAxN,EAAEU,MAAQmD,IAAOC,UAAUtB,EAAK9B,OACzBV,I,0BAGEoN,EAAIC,GACb,OAAO,IAAIG,EAAUD,GAASH,EAAGmB,YAAalB,EAAGkB,gB,0BAGxCnB,EAAIC,GACb,OAAO,IAAIG,EAAUL,GAASC,EAAGkB,cAAejB,EAAGiB,kB,4BAGxClB,EAAIC,GACf,OAAOD,EAAG+B,gBAAkB9B,EAAG+B,oB,+BAGjBhC,EAAIC,GAClB,OAAOG,EAAUM,MAAMV,EAAIC,K,yBAGnB7K,EAAMqM,GACd,SAAIrM,EAAKyJ,sBAAuB4C,EAAM5C,uBAElCzJ,EAAK6M,sBAAwBR,EAAMQ,qBAAuB7M,EAAK8M,oBAAsBT,EAAMS,qB,yBAOvFlC,EAAIC,GACZ,OAAID,EAAGjB,WAAYkB,EAAGlB,UAGbiB,EAAGgC,kBAAoB/B,EAAG+B,oB,yBAI3BhC,EAAIC,GACZ,OAAID,EAAGjB,WAAYkB,EAAGlB,UAGbiB,EAAGgC,kBAAoB/B,EAAG+B,oB,yBAI3BhC,EAAIC,GACZ,OAAOG,EAAU+B,GAAGnC,EAAIC,IAAOG,EAAUgC,GAAGpC,EAAIC,K,yBAGxCD,EAAIC,GACZ,OAAOG,EAAU+B,GAAGnC,EAAIC,IAAOG,EAAUiC,GAAGrC,EAAIC,K,yBAGxCD,EAAIC,GACZ,OAAQG,EAAU+B,GAAGnC,EAAIC,O,KAgN7BG,GAAUkC,MAAQ,SAAUhJ,GAC1B,OAAO,IAAI8G,GAAU9G,IAGvBiJ,IAAIC,cAAc,OAAQpC,IAEXA,UCjZf,SAASqC,GAAOhD,GACd,OAAKA,GAAOA,EAAIX,oBACPW,EACEA,EAAIZ,oBACNY,EAAIR,cAEX1H,OAAOC,UAAUC,eAAeC,KAAK+H,EAAK,UAC1ClI,OAAOC,UAAUC,eAAeC,KAAK+H,EAAK,QAC1ClI,OAAOC,UAAUC,eAAeC,KAAK+H,EAAK,SAC1ClI,OAAOC,UAAUC,eAAeC,KAAK+H,EAAK,SAEnC,IAAI2B,GAAU3B,GAEd,IAAI2B,GAAU,CAAEE,KAAM,IAAIlB,GAAUX,K,IAIzC2B,G,WACJ,WAAY9N,GAAQ,oBAClBS,KAAKT,MAAQ,CACX+M,MAAO,KACPC,IAAK,MAGPvM,KAAKyM,SAASlN,GACdS,KAAK+K,qBAAsB,E,uDAI3B,OAAI/K,KAAK2O,YACH3O,KAAK4O,YACD,aAAN,OAAoB5O,KAAK6O,iBAAzB,KAEM,aAAN,OAAoB7O,KAAK6O,iBAAzB,eAAgD7O,KAAK8O,eAArD,KAGK,yB,uCAKT,OAAI9O,KAAK2O,YACH3O,KAAK4O,YACA5O,KAAK6N,WAAW5C,iBAEhBjL,KAAK+O,mBAAmBC,MAAMhP,KAAKiP,gBAAgBhE,iBAEnDjL,KAAKkP,WACR,GAAN,OAAUlP,KAAK6N,WAAW5C,iBAA1B,aACSjL,KAAKmP,SACR,UAAN,OAAiBnP,KAAK8N,SAAS7C,kBAExB,kB,4BAkELyC,GACJ,OAAKA,GAEMA,EAAM5C,sBACf4C,EAAQA,EAAMxC,eAGT,IAAImC,EAAU,CACnBf,MAAOD,GAAU/N,IAAI0B,KAAK+O,mBAAoBrB,EAAMqB,oBACpDxC,IAAKF,GAAUhO,IAAI2B,KAAKiP,eAAgBvB,EAAMuB,mBAPvCjP,O,kCAYT,OAAOA,KAAKkP,YAAclP,KAAKmP,W,+BAI/B,QAAInP,KAAKT,MAAMgN,MACLvM,KAAKT,MAAMgN,IAAIvB,W,iCAOzB,QAAIhL,KAAKT,MAAM+M,QACLtM,KAAKT,MAAM+M,MAAMtB,W,kCAO3B,OAAOhL,KAAKkP,YAAclP,KAAKT,MAAM+M,QAAUtM,KAAKT,MAAMgN,M,+BAI1D,OAAIvM,KAAKkP,WACHlP,KAAKmP,SACAnP,KAAK6N,WAAWmB,MAAMhP,KAAK8N,UAE3B9N,KAAK6N,WAGP7N,KAAK8N,W,+BAIPjC,GAGP,GAFAA,EAAO6C,GAAO7C,GAIP,IAAIA,EAAKd,oBAAqB,CACnC,IAAMqE,EAAWpP,KAAK+O,mBAChBM,EAAcxD,EAAKkD,mBAEzB,GAAIK,GAAYC,GACd,GAAIhD,GAAUiC,GAAGc,EAAUC,GACzB,OAAO,OAEJ,GAAIA,EACT,OAAO,EAGT,IAAMC,EAAStP,KAAKiP,eACdM,EAAY1D,EAAKoD,eAEvB,GAAIK,GAAUC,GACZ,GAAIlD,GAAUgC,GAAGiB,EAAQC,GACvB,OAAO,OAEJ,GAAID,EACT,OAAO,EAGT,OAAO,EAEP,MAAM,IAAI/D,GAAJ,uBAA+BM,IA1BrC,OAAO,I,gCA8BD6B,GAGR,KAFAA,EAAQgB,GAAOhB,IAGb,OAAO1N,KAGT,IAAK0N,EAAMiB,YACT,OAAO3O,KACF,IAAKA,KAAK2O,YACf,OAAOjB,EAGT,IAAMpB,EAAQD,GAAUhO,IAAI2B,KAAK6N,WAAYH,EAAMG,YAEnD,IAAK7N,KAAKwP,SAASlD,GACjB,OAAO,KAGT,IAAMC,EAAMF,GAAU/N,IAAI0B,KAAK8N,SAAUJ,EAAMI,UAE/C,OAAK9N,KAAKwP,SAASjD,GAIfF,GAAU+B,GAAG9B,EAAOC,GACf,IAAIc,EAAU,CAAEE,KAAMjB,IAEtB,IAAIe,EAAU,CAAEf,MAAOA,EAAOC,IAAKA,IANnC,O,4BAULmB,GAEJ,KADAA,EAAQgB,GAAOhB,IAEb,OAAO1N,KACG0N,EAAM3C,sBAChB2C,EAAQ,IAAIL,EAAU,CAAE9H,MAAOmI,KAGjC,IAAMpB,EAAQD,GAAU/N,IAAI0B,KAAK6N,WAAYH,EAAMG,YAC7CtB,EAAMF,GAAUhO,IAAI2B,KAAK8N,SAAUJ,EAAMI,UAE/C,OAAIzB,GAAU+B,GAAG9B,EAAOC,GACf,IAAIc,EAAU,CAAEE,KAAMjB,IAEtB,IAAIe,EAAU,CAAEf,MAAOA,EAAOC,IAAKA,M,iCAK5C,IAAIvM,KAAKkP,aAAclP,KAAKmP,SAW1B,OAAO,KAVP,IACE,OAAOnP,KAAKiP,eAAe9C,SAAWnM,KAAK+O,mBAAmB5C,SAC9D,MAAOnI,GAKP,MAJAD,QAAQ8B,IAAI7B,GACZD,QAAQ8B,IAAI7F,KAAKkP,WAAYlP,KAAKmP,UAClCpL,QAAQ8B,IAAI7F,KAAK6N,WAAY7N,KAAK8N,UAClC/J,QAAQ8B,IAAI7F,KAAKiP,eAAgBjP,KAAK+O,oBAChC/K,K,+BAOO,IAAZyL,EAAW,uDAAH,EACTlQ,EAAQmD,IAAOC,UAAU3C,KAAKT,OAE9BoN,EAAQ,KAgBZ,OAbEA,EADkB,OAAhBpN,EAAM+M,OAAgC,OAAd/M,EAAMgN,IACxBvM,KAAK0P,YAAc,EAAMD,GAEzB,KAGNlQ,EAAM+M,OACR/M,EAAM+M,MAAMM,IAAID,EAAO,MAGrBpN,EAAMgN,KACRhN,EAAMgN,IAAIK,KAAKD,EAAO,MAGjB,IAAIU,EAAU9N,K,gCAGH,IAAZkQ,EAAW,uDAAH,EACVlQ,EAAQmD,IAAOC,UAAU3C,KAAKT,OAE9BoN,EAAQ,KAgBZ,OAbEA,EADkB,OAAhBpN,EAAM+M,OAAgC,OAAd/M,EAAMgN,IACxBvM,KAAK0P,WAAaD,EAElB,KAGNlQ,EAAM+M,OACR/M,EAAM+M,MAAMM,KAAKD,EAAO,MAGtBpN,EAAMgN,KACRhN,EAAMgN,IAAIK,IAAID,EAAO,MAGhB,IAAIU,EAAU9N,K,qCAGK,IAAfoN,EAAc,uDAAN,KACfpN,EAAQmD,IAAOC,UAAU3C,KAAKT,OAkBlC,OAhBc,OAAVoN,IAEAA,EADkB,OAAhBpN,EAAM+M,OAAgC,OAAd/M,EAAMgN,KACvBvM,KAAK0P,YAEL,MAITnQ,EAAM+M,OACR/M,EAAM+M,MAAMM,IAAID,EAAO,MAGrBpN,EAAMgN,KACRhN,EAAMgN,IAAIK,IAAID,EAAO,MAGhB,IAAIU,EAAU9N,K,mCAGG,IAAfoN,EAAc,uDAAN,KACbpN,EAAQmD,IAAOC,UAAU3C,KAAKT,OAkBlC,OAhBc,OAAVoN,IAEAA,EADkB,OAAhBpN,EAAM+M,OAAgC,OAAd/M,EAAMgN,IACxBvM,KAAK0P,WAEL,MAIRnQ,EAAM+M,OACR/M,EAAM+M,MAAMM,IAAID,EAAO,MAGrBpN,EAAMgN,KACRhN,EAAMgN,IAAIK,IAAID,EAAO,MAGhB,IAAIU,EAAU9N,K,iCAIrB,OAAOS,KAAKT,MAAM+M,Q,+BAIlB,OAAOtM,KAAKT,MAAMgN,M,yCAIlB,OAAIvM,KAAKkP,WACAlP,KAAK6N,WAAWV,cAEhB,O,qCAKT,OAAInN,KAAKmP,SACAnP,KAAK8N,SAASV,YAEd,O,qCAKT,IAAIL,EAAI/M,KAAK+O,mBACb,OAAIhC,EACKA,EAAEZ,SAEF,O,mCAKT,IAAIY,EAAI/M,KAAKiP,eACb,OAAIlC,EACKA,EAAEZ,SAEF,O,uCAKT,OAAInM,KAAKT,MAAM+M,MACNtM,KAAKT,MAAM+M,MAAMqD,WAEjB,c,qCAKT,OAAI3P,KAAKT,MAAMgN,IACNvM,KAAKT,MAAMgN,IAAIoD,WAEf,c,+BAIFpQ,GACP,GAAIA,EAAO,CACT,GAAc,SAAVA,GAA8B,OAAVA,EAEtB,YADAS,KAAKT,MAAQ,CAAE+M,MAAO,KAAMC,IAAK,OAE5B,GAAIhN,EAAMwL,oBACf/K,KAAKT,MAAL,gBAAkBA,EAAMA,YACnB,GAAIA,EAAMuL,oBACf9K,KAAKT,MAAQ,CAAE+M,MAAO/M,EAAOgN,IAAKhN,OAC7B,IAAIiE,OAAOC,UAAUC,eAAeC,KAAKpE,EAAO,SAErD,YADAS,KAAKyM,SAASlN,EAAMgG,OAEf,GAAI/B,OAAOC,UAAUC,eAAeC,KAAKpE,EAAO,QACrDS,KAAKT,MAAM+M,MAAQ,IAAID,GAAU9M,EAAMgO,MACvCvN,KAAKT,MAAMgN,IAAMvM,KAAKT,MAAM+M,WACvB,GAAqB,kBAAV/M,EAChBS,KAAKT,MAAM+M,MAAQ,IAAID,GAAU9M,GACjCS,KAAKT,MAAMgN,IAAMvM,KAAKT,MAAM+M,UACvB,CACL,IAAIA,EAAQ,KAER/M,EAAM+M,QACRA,EAAQ,IAAID,GAAU9M,EAAM+M,QAElBtB,WACRsB,EAAQ,MAIZ,IAAIC,EAAM,KAUV,GARIhN,EAAMgN,MACRA,EAAM,IAAIF,GAAU9M,EAAMgN,MAElBvB,WACNuB,EAAM,MAIND,GAASC,EAAK,CAChB,GAAIF,GAAUiC,GAAGhC,EAAOC,GAAM,CAC5B,IAAIqD,EAAMtD,EACVA,EAAQC,EACRA,EAAMqD,EAGR,GAAIvD,GAAUiC,GAAGhC,EAAOC,GAAM,CAC5B,IAAIqD,EAAMvD,GAAU/N,IAAIgO,EAAOC,GAC/BA,EAAMF,GAAUhO,IAAIiO,EAAOC,GAC3BD,EAAQsD,GAIZ5P,KAAKT,MAAM+M,MAAQA,EACnBtM,KAAKT,MAAMgN,IAAMA,SAGnBvM,KAAKT,MAAM+M,MAAQ,KACnBtM,KAAKT,MAAMgN,IAAM,O,8BAKnB,OAAOvM,KAAKT,S,6BApaD8B,GACX,IAAIxC,EAAI,IAAIwO,EAEZ,OADAxO,EAAEU,MAAQmD,IAAOC,UAAUtB,EAAK9B,OACzBV,I,yBAGCwC,EAAMqM,GACd,GAAIrM,IAASqM,EACX,OAAO,EAGT,GAAIrM,EAAK6N,YAAcxB,EAAMwB,YAC3B,IAAK7C,GAAU+B,GAAG/M,EAAKwM,WAAYH,EAAMG,YACvC,OAAO,OAEJ,GAAIxM,EAAK6N,YAAcxB,EAAMwB,WAClC,OAAO,EAGT,GAAI7N,EAAK8N,UAAYzB,EAAMyB,UACzB,IAAK9C,GAAU+B,GAAG/M,EAAKyM,SAAUJ,EAAMI,UACrC,OAAO,OAEJ,GAAIzM,EAAK8N,UAAYzB,EAAMyB,SAChC,OAAO,EAGT,OAAO,I,+BAGOU,GACd,IAAKA,EACH,OAAO,KACF,GAAIA,EAAM/E,qBAAuB+E,EAAM/E,oBAC5C,OAAO+E,EAGT,IAAKA,EAAM1N,QAA2B,IAAjB0N,EAAM1N,OACzB,OAAO,KAGT,IAAI0J,EAAOgE,EAAM,GAEjB,GAAIA,EAAM1N,OAAS,EACjB,IAAK,IAAIgB,EAAI,EAAGA,EAAI0M,EAAM1N,SAAUgB,EAC7B0M,EAAM1M,GAAG6H,WAEVa,EADEA,EAAKb,SACA6E,EAAM1M,GAEN0I,EAAKmD,MAAMa,EAAM1M,KAMhC,OAAI0I,EAAKb,SACA,KAEAa,M,KA8WbwB,GAAUkB,MAAQ,SAAUhJ,GAC1B,OAAO,IAAI8H,GAAU9H,IAGvBiJ,IAAIC,cAAc,YAAapB,IAEhBA,U,qBCjef,SAAStP,MA0EM+R,OAxEf,SAAoBtO,GAClB,IAAIG,EAASH,EAAMG,OACfoO,EAAUvO,EAAMuO,QAChBrG,EAAelI,EAAMkI,aACrBD,EAAQjI,EAAMiI,MAElB,IAAK9H,IAAWoO,EACd,OAAO,KAGJrG,IACHA,EAAe3L,IAGjB,IAAIiS,EAASxM,OAAOqG,KAAKkG,GAASpF,KAAI,SAACtB,GACrC,IAAIrI,EAASW,EAAOoI,IAAIV,GACpB4G,EAAY5C,GAAU6C,SAASH,EAAQ1G,IAE3C,OAAI4G,EAEA,kBAAC7G,EAAD,CAAoBC,IAAKrI,EAAOmJ,WAC9B,kBAAC,EAAD,CACExB,QAAS,WACPe,EAAa1I,IAEfsG,MAAO,CAAE9H,MAAO,QAEfwB,EAAOmJ,WAEV,kBAAC,GAAD,CAAiB7C,MAAO,CAAE9H,MAAO,OAAS+F,MAAO0K,EAAWvG,aAAcA,KAK5E,kBAACN,EAAD,CAAoBC,IAAKrI,EAAOmJ,WAC9B,kBAAC,EAAD,CACExB,QAAS,WACPe,EAAa1I,KAGdA,EAAOmJ,eAOlB,OAAK6F,GAA4B,IAAlBA,EAAO7N,OAIlBsH,EAEA,yBAAK3D,UAAWvF,KAAOyF,WACrB,yBAAKF,UAAWvF,KAAOkJ,OAAQA,GAC/B,yBAAK3D,UAAWvF,KAAO4P,MACrB,kBAACjH,EAAD,KAAiB8G,KAKhB,kBAAC9G,EAAD,KAAiB8G,GAbjB,M,qBCtDX,SAAS1G,MA4DM8G,OA1Df,YAOI,IANFC,EAMC,EANDA,QAMC,IALD5G,aAKC,MALO,KAKP,MAJDC,oBAIC,MAJcJ,GAId,MAHDK,wBAGC,MAHkBL,GAGlB,MAFD3H,cAEC,MAFQ,KAER,MADDmH,YACC,MADM,KACN,EACD,IAAKuH,EACH,OAAO,KAGT,IAAIzG,EAAW,GAkCf,OAhCApG,OAAOqG,KAAKwG,GAASvG,SAAQ,SAACT,GAC5B,IAAIe,EAAUzI,EAAOoI,IAAIV,GACrBW,EAAcrI,EAAOsI,WAAWG,GAEhCkG,EAASD,EAAQhH,GAErBO,EAASM,KACP,yBAAKpE,UAAWvF,KAAO6J,QAASf,IAAKe,EAAQD,WAC3C,yBAAKrE,UAAWvF,KAAO8J,eACrB,kBAAC,EAAD,CACE/C,MAAO,CAAE9H,MAAO,OAChBmJ,QAAS,WACPe,EAAaU,KAGdA,EAAQD,WAEX,kBAAC,EAAD,CACEnB,SAAU,WACRW,EAAiBS,IAEnB9C,MAAO,CAAE9H,MAAO,OAChBuJ,QAASiB,KAGb,yBAAKlE,UAAWvF,KAAO+J,aAAvB,YACYgG,EADZ,YAC6BxH,QAM/BW,EAEA,6BACE,yBAAK3D,UAAWvF,KAAOkJ,OAAQA,GAC9BG,GAIEA,GCxDX,SAAS6C,GAASf,GAAkB,IAAbC,EAAY,uDAAN,KAC3B,OAAID,GAGKC,EAIX,SAAS4E,GAAcC,EAAQ5J,GAC7B,IAAK4J,EACH,OAAOA,EAGT,IAAIC,EAAM,KAeV,OAbAjN,OAAOqG,KAAK2G,GAAQ1G,SAAQ,SAACT,GAC3B,IAAIwG,EAAQW,EAAOnH,GAEHzC,EAAO8J,UAAUb,KAG1BY,IACHA,EAAG,gBAAQD,WAENC,EAAIpH,OAIXoH,GAGKD,EAIX,SAASG,GAAeH,EAAQpG,GAC9B,IAAKoG,EACH,OAAOA,EAGT,IAAIC,EAAM,KAWV,OATAjN,OAAOqG,KAAK2G,GAAQ1G,SAAQ,SAACT,GACrBA,KAAOe,IACNqG,IACHA,EAAG,gBAAQD,WAENC,EAAIpH,OAIXoH,GAGKD,E,IAILI,G,WACJ,WAAYpP,GAAQ,oBAClBxB,KAAKT,MAAQ,CACXqL,KAAM,KACNiG,OAAQ,GACRC,WAAY,GACZC,SAAU,GACVC,SAAU,GACV9Q,GAAI,KACJ+Q,UAAW,GACXC,aAAc,GACdtH,SAAU,GACVmG,QAAS,GACToB,MAAO,KACPC,OAAQ,KACRC,MAAO,GACPC,UAAW,MAGbtR,KAAKyM,SAASjL,GAEdxB,KAAKuR,SAAW,KAChBvR,KAAKwR,kBAAmB,E,qDAWxB,OAAO,I,8BAGD3N,GAAQ,IAAD,OACb,GAAIA,EAAMvC,MAAO,CACf,IAAImQ,EAAM,GACVA,EAAI5N,EAAMvC,SAAW,EACrBuC,EAAQ4N,EAGV,IAAIC,EAAO,GAkBX,OAhBAlO,OAAOqG,KAAK7J,KAAKT,MAAM2R,cAAcpH,SAAQ,SAACT,GAC5C,IAAK,IAAIzE,KAAS,EAAKrF,MAAM2R,aAAa7H,GACpC,EAAK9J,MAAM2R,aAAa7H,GAAKzE,KAAUf,IACzC6N,EAAK,EAAKnS,MAAM2R,aAAa7H,GAAKzE,IAAU,MAKlDpB,OAAOqG,KAAK7J,KAAKT,MAAM0R,WAAWnH,SAAQ,SAACT,GACzC,IAAK,IAAIzE,KAAS,EAAKrF,MAAM0R,UAAU5H,GACjC,EAAK9J,MAAM0R,UAAU5H,GAAKzE,KAAUf,IACtC6N,EAAK,EAAKnS,MAAM0R,UAAU5H,GAAKzE,IAAU,MAKxCpB,OAAOqG,KAAK6H,GAAMvP,SAAWqB,OAAOqG,KAAKhG,GAAO1B,S,8BAIvD,OAAOnC,KAAKT,MAAMW,K,mCAGPc,GAAS,IAAD,OACnB,GAAIA,EAAOM,MAAO,CAChB,IAAIpB,EAAKc,EAAOM,SAChBN,EAAS,IACFd,GAAM,EAGf,IAAIyR,EAAWnO,OAAOqG,KAAK7I,GAAQmB,OAE/BuP,EAAO,GAYX,OAVAlO,OAAOqG,KAAK7J,KAAKT,MAAMwQ,SAASjG,SAAQ,SAACT,GACvC,IAAIlC,EAAI,EAAK5H,MAAMwQ,QAAQ1G,GAE3B7F,OAAOqG,KAAK7I,GAAQ8I,SAAQ,SAAC/I,GACvBoG,EAAEyK,SAAS7Q,KACb2Q,EAAK3Q,GAAa,SAKpByC,OAAOqG,KAAK6H,GAAMvP,SAAWwP,EACxB,KAEA3R,O,oCAIGoK,GACZ,GAAIA,EAAQ9I,MAAO,CACjB,IAAIpB,EAAKkK,EAAQ9I,SACjB8I,EAAU,IACFlK,GAAM,EAGhB,IAAI2R,EAAYrO,OAAOqG,KAAKO,GAASjI,OAEjCuP,EAAO,GAQX,GANAlO,OAAOqG,KAAK7J,KAAKT,MAAMqK,UAAUE,SAAQ,SAACT,GACpCA,KAAOe,IACTsH,EAAKrI,GAAO,MAIZ7F,OAAOqG,KAAK6H,GAAMvP,SAAW0P,EAC/B,OAAO,KAGT,IAAIX,EAAeP,GAAe3Q,KAAKT,MAAM2R,aAAc9G,GACvD6G,EAAYN,GAAe3Q,KAAKT,MAAM0R,UAAW7G,GAErD,GAAI8G,IAAiBlR,KAAKT,MAAM2R,cAAgBD,IAAcjR,KAAKT,MAAM0R,UAAW,CAClF,IAAIa,EAAS,IAAIlB,EAKjB,OAJAkB,EAAOvS,MAAP,gBAAoBS,KAAKT,OACzBuS,EAAOvS,MAAM2R,aAAeA,EAC5BY,EAAOvS,MAAM0R,UAAYA,EACzBa,EAAOP,SAAWvR,KAAKuR,SAChBO,EAEP,OAAO9R,O,mCAIE4G,GACX,IAAKA,EACH,OAAO5G,KAOT,GANY4G,EAAOmE,sBACjBnE,EAAS,IAAIyG,GAAUzG,MAGzBA,EAASA,EAAO8J,UAAU1Q,KAAK+R,aAG7B,OAAO,KAGT,IAAIb,EAAeX,GAAcvQ,KAAKT,MAAM2R,aAActK,GACtDqK,EAAYV,GAAcvQ,KAAKT,MAAM0R,UAAWrK,GAEpD,GAAIsK,IAAiBlR,KAAKT,MAAM2R,cAAgBD,IAAcjR,KAAKT,MAAM0R,UAAW,CAClF,IAAIa,EAAS,IAAIlB,EAKjB,OAJAkB,EAAOvS,MAAP,gBAAoBS,KAAKT,OACzBuS,EAAOvS,MAAM2R,aAAeA,EAC5BY,EAAOvS,MAAM0R,UAAYA,EACzBa,EAAOP,SAAWvR,KAAKuR,SAChBO,EAEP,OAAO9R,O,+BAIFT,GACP,GAAIA,IACFS,KAAKT,MAAMsR,OAASpE,GAASlN,EAAMsR,OAAQ,IAC3C7Q,KAAKT,MAAMuR,WAAarE,GAASlN,EAAMuR,WAAY,IACnD9Q,KAAKT,MAAMwR,SAAWtE,GAASlN,EAAMwR,SAAU,IAC/C/Q,KAAKT,MAAMyR,SAAWvE,GAASlN,EAAMyR,SAAU,IAC/ChR,KAAKT,MAAMW,GAAKuM,GAASlN,EAAMW,IAC/BF,KAAKT,MAAM0R,UAAYxE,GAASlN,EAAM0R,UAAW,IACjDjR,KAAKT,MAAM2R,aAAezE,GAASlN,EAAM2R,aAAc,IACvDlR,KAAKT,MAAMqK,SAAW6C,GAASlN,EAAMqK,SAAU,IAC/C5J,KAAKT,MAAMwQ,QAAUtD,GAASlN,EAAMwQ,QAAS,IAC7C/P,KAAKT,MAAM4R,MAAQ1E,GAASlN,EAAM4R,OAClCnR,KAAKT,MAAM6R,OAAS3E,GAASlN,EAAM6R,QACnCpR,KAAKT,MAAM+R,UAAY7E,GAASlN,EAAM+R,WACtCtR,KAAKT,MAAM8R,MAAQ5E,GAASlN,EAAM8R,MAAO,KAEpCrR,KAAKT,MAAM+R,WAAsC,SAAzBtR,KAAKT,MAAM+R,WACtC,MAAM,IAAI/F,GAAJ,sBAA8BvL,S,mCAK7BgS,GACXhS,KAAKuR,SAAWS,I,8BAIhB,OAAOhS,O,iCAIP,MAAM,UAAN,OAAiBA,KAAKmK,UAAtB,O,iCAIA,OAAOnK,KAAKT,MAAM4R,Q,qCAIlB,OAAInR,KAAKT,MAAMuR,WACN9Q,KAAKT,MAAMuR,WAAW3M,KAAK,KAE3B,O,iCAKT,OAAInE,KAAKT,MAAMsR,OACN7Q,KAAKT,MAAMsR,OAAO1M,KAAK,KAEvB,O,mCAKT,OAAInE,KAAKT,MAAMwR,SACN/Q,KAAKT,MAAMwR,SAAS5M,KAAK,KAEzB,O,kCAKT,OAAInE,KAAKT,MAAMyR,SACNhR,KAAKT,MAAMyR,SAAS7M,KAAK,KAEzB,O,gCAKT,IAAI8N,EAAQ,GAERC,EAAOlS,KAAKmS,WAoBhB,OAnBID,GACFD,EAAM/H,KAAKgI,IAGbA,EAAOlS,KAAKoS,iBAEVH,EAAM/H,KAAKgI,IAGbA,EAAOlS,KAAKqS,eAEVJ,EAAM/H,KAAKgI,IAGbA,EAAOlS,KAAKsS,cAEVL,EAAM/H,KAAKgI,GAGTD,EAAM9P,OAAS,EACV8P,EAAM9N,KAAK,KAEX,S,wCAKT,OAAOnE,KAAKT,MAAM2R,e,mCAIlB,OAAOlR,KAAKT,MAAMwQ,U,qCAIlB,OAAO/P,KAAKT,MAAM0R,Y,kCAIlB,OAAOjR,KAAKT,MAAMgT,S,gCAIlB,OAAIvS,KAAKT,MAAM4R,MACNnR,KAAKT,MAAM4R,MAAMtD,WAEjB,O,gCAKT,OAAI7N,KAAKT,MAAM4R,MACNnR,KAAKT,MAAM4R,MAAMrD,SAEjB,O,oCAKT,IAAMqD,EAAQnR,KAAK+R,WAEnB,OAAKZ,EAGI,CACL7E,MAAO6E,EAAMtD,WACbtB,IAAK4E,EAAMrD,SACX5N,GAAIF,KAAKsB,QACTkR,QAASxS,KAAKmK,WANT,O,gCAWiB,IAApBsI,EAAmB,wDACrB1S,EAAO,CACTG,GAAIF,KAAKsB,QACToD,MAAO1E,KAAKmK,UACZV,MAAOzJ,KAAKmK,UACZxK,OAAO,EACP+S,MAAO,UAGLpC,EAAS,GAETA,EAAS,EACXA,EAAS,EACAA,EAAS,KAClBA,EAAS,IAGXvQ,EAAI,KAAWuQ,EAEf,IAAIzG,EAAOrG,OAAOqG,KAAK7J,KAAKT,MAAMqK,UAelC,OAbIC,EAAK1H,OAAS,EAChBpC,EAAI,MAAY8J,EAAK8I,OAAOxO,KAAK,KAEjCpE,EAAI,MAAY,UAGd0S,IACF1S,EAAI,MAAY,OAChBA,EAAI,OAAY,EAChBA,EAAI,MAAY,SAChBA,EAAI,KAAW,IAGVA,I,8BAIP,MAAO,CAAEwF,MAAOvF,KAAKT,U,6BAhUV8B,GACX,IAAIuR,EAAI,IAAIhC,EAGZ,OAFAgC,EAAErB,SAAWlQ,EAAKkQ,SAClBqB,EAAErT,MAAQmD,IAAOC,UAAUtB,EAAK9B,OACzBqT,M,KAgUXhC,GAAOrC,MAAQ,SAAUhJ,GACvB,OAAO,IAAIqL,GAAOrL,IAGpBiJ,IAAIC,cAAc,SAAUmC,IAEbA,UC7Zf,SAASiC,KACP,IAAIpR,EAAMC,eACV,MAAO,IAAMD,EAAIqR,UAAUrR,EAAIU,OAAS,G,IAGpC4Q,G,WACJ,WAAYvR,GAAQ,oBAClBxB,KAAKT,MAAQ,CACXyT,SAAU,IAGZhT,KAAKiT,OAAS,GACdjT,KAAKkT,kBAAmB,EACxBlT,KAAKmT,KAAK3R,G,yDAGCwQ,GAEX,IAAK,IAAI3I,KADTrJ,KAAKuR,SAAWS,EACAhS,KAAKT,MAAMyT,SACzBhT,KAAKT,MAAMyT,SAAS3J,GAAK+J,aAAapB,K,+BAYhC,IAAD,OACHqB,EAAQ7P,OAAOqG,KAAK7J,KAAKiT,QAC7BI,EAAMV,OAEN,IAAI3C,EAAS,GAMb,OAJAqD,EAAMvJ,SAAQ,SAACT,GACb2G,EAAO9F,KAAK,EAAKH,IAAI,EAAKkJ,OAAO5J,QAG5B2G,I,6BAGF3O,GACL,OAAOA,aAAgBuP,IAAUvP,EAAKmQ,mB,0BAGpCM,GACF,IAAK9R,KAAKsT,OAAOxB,GACf,OAAO,KAGT,IAAIyB,EAAW,KAEf,IACEA,EAAWvT,KAAKwT,UAAU1B,EAAO3H,WACjC,MAAOnG,GACPD,QAAQC,MAAMA,GAGhB,GAAIuP,EAGF,OAFAA,EAAWA,EAASvE,MAAM8C,GAC1B9R,KAAKT,MAAMyT,SAASO,EAASjS,SAAWiS,EACjCA,EAKT,IAAIrT,GAFJ4R,EAASlB,GAAO6C,MAAM3B,IAENxQ,QAEhB,GAAIpB,EAAI,CACN,GAAIA,KAAMF,KAAKT,MAAMyT,SACnB,MAAM,IAAI7H,GAAJ,8BAAoC2G,IAG5CA,EAAOsB,aAAapT,KAAKuR,UACzBvR,KAAKT,MAAMyT,SAAS9S,GAAM4R,MACrB,CAGL,IAFA,IAAIrQ,EAAMoR,KAEHpR,KAAOzB,KAAKT,MAAMyT,UACvBvR,EAAMoR,KAGRf,EAAOvS,MAAMW,GAAKuB,EAOpB,OAJAqQ,EAAOsB,aAAapT,KAAKuR,UACzBvR,KAAKiT,OAAOnB,EAAO3H,WAAa2H,EAAOxQ,QACvCtB,KAAKT,MAAMyT,SAASlB,EAAOxQ,SAAWwQ,EAE/BA,I,gCAGClH,GACR,IAAI1K,EAAKF,KAAKiT,OAAOrI,GAErB,GAAI1K,EACF,OAAOF,KAAK+J,IAAI7J,GAEhB,MAAM,IAAIsL,GAAJ,8BAAwCZ,M,2BAI7CA,GAAO,IAAD,OACT,GAAIA,aAAgBgG,IAAUhG,EAAK4G,iBACjC,OAAOxR,KAAK+J,IAAIa,EAAKtJ,SAGvBsJ,EAAOA,EAAK8I,OAAOC,cAEnB,IAAIC,EAAU,GAQd,GANApQ,OAAOqG,KAAK7J,KAAKiT,QAAQnJ,SAAQ,SAACT,IACS,IAArCA,EAAIsK,cAAcE,QAAQjJ,IAC5BgJ,EAAQ1J,KAAK,EAAKH,IAAI,EAAKkJ,OAAO5J,QAIf,IAAnBuK,EAAQzR,OACV,OAAOyR,EAAQ,GACV,GAAIA,EAAQzR,OAAS,EAC1B,OAAOyR,EAGT,IAAI/J,EAAOrG,OAAOqG,KAAK7J,KAAKiT,QAAQ9O,KAAK,QAEzC,MAAM,IAAIqH,GAAJ,6BAAuCZ,EAAvC,mCAAsEf,EAAtE,Q,+BAGY,IAAD,OAAZiK,EAAY,uDAAJ,GACb,GAAqB,IAAjBA,EAAM3R,OACR,OAAOnC,KAGT,IAAIgT,EAAW,GACXK,EAAQ,GAEZ7P,OAAOqG,KAAK7J,KAAKT,MAAMyT,UAAUlJ,SAAQ,SAACT,GACxC,IAAIyI,EAAS,EAAKvS,MAAMyT,SAAS3J,GAEjC,GAAIyI,EAAQ,CACV,IAAK,IAAI3O,EAAI,EAAGA,EAAI2Q,EAAM3R,SACxB2P,EAASgC,EAAM3Q,GAAG2O,MADgB3O,GAOhC2O,IACFkB,EAAS3J,GAAOyI,EAChBuB,EAAMvB,EAAO3H,WAAad,OAKhC,IAAI0K,EAAS,IAAIhB,EAKjB,OAJAgB,EAAOxU,MAAMyT,SAAWA,EACxBe,EAAOd,OAASI,EAChBU,EAAOX,aAAapT,KAAKuR,UAElBwC,I,oCAGM,IAAD,OACR3T,EAAQ,GAYZ,OAVAoD,OAAOqG,KAAK7J,KAAKT,MAAMyT,UAAUlJ,SAAQ,SAACT,GACxC,IAAIyI,EAAS,EAAKvS,MAAMyT,SAAS3J,GACjC,GAAIyI,EAAQ,CACV,IAAIkC,EAAWlC,EAAOmC,cAClBD,GACF5T,EAAM8J,KAAK8J,OAKV5T,I,iCAGyB,IAAD,gEAAJ,GAAI,IAAtB2B,cAAsB,MAAb,KAAa,EAC3BgB,EAAQ,GAuBZ,OArBIhB,EAAOT,QACTS,EAASA,EAAOT,SAGlBkC,OAAOqG,KAAK7J,KAAKT,MAAMyT,UAAUlJ,SAAQ,SAACT,GACxC,IAAIyI,EAAS,EAAKvS,MAAMyT,SAAS3J,GAEjC,GAAIyI,EAAQ,CACV,IAAI/R,EAAO,MAETA,EADEsJ,IAAQtH,EACH+P,EAAOoC,QAAQ,CAAEzB,WAAW,IAE5BX,EAAOoC,YAIdnR,EAAMmH,KAAKnK,OAKVgD,I,0BAGL7C,GACF,IAAI4R,EAAS9R,KAAKT,MAAMyT,SAAS9S,GAEjC,IAAK4R,EACH,MAAM,IAAItG,GAAJ,4BAAsCtL,IAG9C,OAAO4R,I,2BAGJ7N,GAAO,IAAD,OACLA,IACEA,EAAKkQ,QACPlQ,EAAOA,EAAKkQ,OAEdlQ,EAAK6F,SAAQ,SAACsK,GACZ,IAAItC,EAASlB,GAAOuC,KAAKiB,GACzB,EAAKxH,IAAIkF,S,8BAMb,MAAO,CAAEvM,MAAOvF,KAAKT,U,6BAhNV8B,GACX,IAAIuR,EAAI,IAAIG,EAIZ,OAHAH,EAAErT,MAAQmD,IAAOC,UAAUtB,EAAK9B,OAChCqT,EAAEK,OAASvQ,IAAOC,UAAUtB,EAAK4R,QACjCL,EAAErB,SAAWlQ,EAAKkQ,SACXqB,M,KA+MXG,GAAOxE,MAAQ,SAAUhJ,GACvB,IAAIwO,EAAS,IAAIhB,GASjB,OARAgB,EAAOxU,MAAQgG,EACfwO,EAAOd,OAAS,GAEhBzP,OAAOqG,KAAKtE,EAAMyN,UAAUlJ,SAAQ,SAACT,GACnC,IAAIgL,EAAI9O,EAAMyN,SAAS3J,GACvB0K,EAAOd,OAAOoB,EAAElK,WAAad,KAGxB0K,GAGTvF,IAAIC,cAAc,SAAUsE,IAEbA,UC1Pf,SAAStG,GAASf,GAAkB,IAAbC,EAAY,uDAAN,KAC3B,OAAID,GAGKC,E,IAsDL2I,G,WACJ,WAAY9S,GAAQ,oBAClBxB,KAAKT,MAAQ,CACXqL,KAAM,KACN1K,GAAI,KACJ0J,SAAU,GACVmG,QAAS,GACTwC,OAAQ,GACRrB,aAAc,GACdG,MAAO,IAGTrR,KAAKyM,SAASjL,GAEdxB,KAAKuR,SAAW,KAChBvR,KAAKuU,oBAAqB,E,qDAW1B,OAAO,I,8BAGD1Q,GAAQ,IAAD,OACb,GAAIA,EAAMvC,MAAO,CACf,IAAImQ,EAAM,GACVA,EAAI5N,EAAMvC,SAAW,EACrBuC,EAAQ4N,EAGV,IAAIC,EAAO,GAUX,OARAlO,OAAOqG,KAAK7J,KAAKT,MAAM2R,cAAcpH,SAAQ,SAACT,GAC5C,IAAK,IAAIzE,KAAS,EAAKrF,MAAM2R,aAAa7H,GACpC,EAAK9J,MAAM2R,aAAa7H,GAAKzE,KAAUf,IACzC6N,EAAK,EAAKnS,MAAM2R,aAAa7H,GAAKzE,IAAU,MAK3CpB,OAAOqG,KAAK6H,GAAMvP,SAAWqB,OAAOqG,KAAKhG,GAAO1B,S,8BAIvD,OAAOnC,KAAKT,MAAMW,K,mCAGPc,GAAS,IAAD,OACnB,GAAIA,EAAOM,MAAO,CAChB,IAAIpB,EAAKc,EAAOM,SAChBN,EAAS,IACFd,GAAM,EAGf,IAAIyR,EAAWnO,OAAOqG,KAAK7I,GAAQmB,OAE/BuP,EAAO,GAYX,OAVAlO,OAAOqG,KAAK7J,KAAKT,MAAMwQ,SAASjG,SAAQ,SAACT,GACvC,IAAIlC,EAAI,EAAK5H,MAAMwQ,QAAQ1G,GAE3B7F,OAAOqG,KAAK7I,GAAQ8I,SAAQ,SAAC/I,GACvBoG,EAAEyK,SAAS7Q,KACb2Q,EAAK3Q,GAAa,SAKpByC,OAAOqG,KAAK6H,GAAMvP,SAAWwP,EACxB,KAEA3R,O,oCAIGoK,GACZ,GAAIA,EAAQ9I,MAAO,CACjB,IAAIpB,EAAKkK,EAAQ9I,SACjB8I,EAAU,IACFlK,GAAM,EAGhB,IAAI2R,EAAYrO,OAAOqG,KAAKO,GAASjI,OAEjCuP,EAAO,GAQX,GANAlO,OAAOqG,KAAK7J,KAAKT,MAAMqK,UAAUE,SAAQ,SAACT,GACpCA,KAAOe,IACTsH,EAAKrI,GAAO,MAIZ7F,OAAOqG,KAAK6H,GAAMvP,SAAW0P,EAC/B,OAAO,KAGT,IAAIX,EA7HR,SAAwBV,EAAQpG,GAC9B,IAAKoG,EACH,OAAOA,EAGT,IAAIC,EAAM,KAWV,OATAjN,OAAOqG,KAAK2G,GAAQ1G,SAAQ,SAACT,GACrBA,KAAOe,IACNqG,IACHA,EAAG,gBAAQD,WAENC,EAAIpH,OAIXoH,GAGKD,EA0GYG,CAAe3Q,KAAKT,MAAM2R,aAAc9G,GAE3D,GAAI8G,IAAiBlR,KAAKT,MAAM2R,aAAc,CAC5C,IAAIsD,EAAW,IAAIF,EAInB,OAHAE,EAASjV,MAAT,gBAAsBS,KAAKT,OAC3BiV,EAASjV,MAAM2R,aAAeA,EAC9BsD,EAASjD,SAAWvR,KAAKuR,SAClBiD,EAEP,OAAOxU,O,mCAIE4G,GACX,IAAKA,EACH,OAAO5G,KACG4G,EAAOmE,sBACjBnE,EAAS,IAAIyG,GAAUzG,IAGzB,IAAIsK,EA5KR,SAAuBV,EAAQ5J,GAC7B,IAAK4J,EACH,OAAOA,EAGT,IAAIC,EAAM,KAeV,OAbAjN,OAAOqG,KAAK2G,GAAQ1G,SAAQ,SAACT,GAC3B,IAAIwG,EAAQW,EAAOnH,GAEHzC,EAAO8J,UAAUb,KAG1BY,IACHA,EAAG,gBAAQD,WAENC,EAAIpH,OAIXoH,GAGKD,EAqJYD,CAAcvQ,KAAKT,MAAM2R,aAActK,GAE1D,GAAIsK,IAAiBlR,KAAKT,MAAM2R,aAAc,CAC5C,IAAIsD,EAAW,IAAIF,EAInB,OAHAE,EAASjV,MAAT,gBAAsBS,KAAKT,OAC3BiV,EAASjV,MAAM2R,aAAeA,EAC9BsD,EAASjD,SAAWvR,KAAKuR,SAClBiD,EAEP,OAAOxU,O,+BAIFT,GACP,GAAIA,IACFS,KAAKT,MAAMqL,KAAO6B,GAASlN,EAAMqL,MACjC5K,KAAKT,MAAMW,GAAKuM,GAASlN,EAAMW,IAC/BF,KAAKT,MAAMqK,SAAW6C,GAASlN,EAAMqK,SAAU,IAC/C5J,KAAKT,MAAM2R,aAAezE,GAASlN,EAAM2R,aAAc,IACvDlR,KAAKT,MAAMgT,OAAS9F,GAASlN,EAAMgT,OAAQ,IAC3CvS,KAAKT,MAAMwQ,QAAUtD,GAASlN,EAAMwQ,QAAS,IAC7C/P,KAAKT,MAAM8R,MAAQ5E,GAASlN,EAAM8R,MAAO,KAEpCrR,KAAKT,MAAMqL,MACd,MAAMW,GAAW,gD,mCAKVyG,GACXhS,KAAKuR,SAAWS,I,8BAIhB,OAAOhS,O,iCAIP,MAAM,YAAN,OAAmBA,KAAKmK,UAAxB,O,gCAIA,OAAOnK,KAAKT,MAAMqL,O,wCAIlB,OAAO5K,KAAKT,MAAM2R,e,mCAIlB,OAAOlR,KAAKT,MAAMwQ,U,kCAIlB,OAAO/P,KAAKT,MAAMgT,S,gCAGQ,IAApBE,EAAmB,wDACrB1S,EAAO,CAAEG,GAAIF,KAAKsB,QAASoD,MAAO1E,KAAKmK,UAAWV,MAAOzJ,KAAKmK,UAAWuI,MAAO,UAEhFpC,EAAS,GAETA,EAAS,EACXA,EAAS,EACAA,EAAS,KAClBA,EAAS,IAGXvQ,EAAI,KAAWuQ,EAEf,IAAIzG,EAAOrG,OAAOqG,KAAK7J,KAAKT,MAAMqK,UAelC,OAbIC,EAAK1H,OAAS,EAChBpC,EAAI,MAAY8J,EAAK8I,OAAOxO,KAAK,KAEjCpE,EAAI,MAAY,UAGd0S,IACF1S,EAAI,MAAY,OAChBA,EAAI,SAAc,EAClBA,EAAI,MAAY,SAChBA,EAAI,KAAW,IAGVA,I,8BAIP,MAAO,CAAEwF,MAAOvF,KAAKT,U,6BAjMV8B,GACX,IAAIuR,EAAI,IAAI0B,EAGZ,OAFA1B,EAAErB,SAAWlQ,EAAKkQ,SAClBqB,EAAErT,MAAQmD,IAAOC,UAAUtB,EAAK9B,OACzBqT,M,KAiMX0B,GAAS/F,MAAQ,SAAUhJ,GACzB,OAAO,IAAI+O,GAAS/O,IAGtBiJ,IAAIC,cAAc,WAAY6F,IAEfA,UCvRf,SAASG,KACP,IAAIhT,EAAMC,eACV,MAAO,IAAMD,EAAIqR,UAAUrR,EAAIU,OAAS,G,IAGpCuS,G,WACJ,WAAYlT,GAAQ,oBAClBxB,KAAKT,MAAQ,CACXyT,SAAU,IAGZhT,KAAKiT,OAAS,GACdjT,KAAK2U,sBAAuB,EAC5B3U,KAAKmT,KAAK3R,G,yDAGCwQ,GAEX,IAAK,IAAI3I,KADTrJ,KAAKuR,SAAWS,EACAhS,KAAKT,MAAMyT,SACzBhT,KAAKT,MAAMyT,SAAS3J,GAAK+J,aAAapB,K,+BAYhC,IAAD,OACHqB,EAAQ7P,OAAOqG,KAAK7J,KAAKiT,QAC7BI,EAAMV,OAEN,IAAI3C,EAAS,GAMb,OAJAqD,EAAMvJ,SAAQ,SAACT,GACb2G,EAAO9F,KAAK,EAAKH,IAAI,EAAKkJ,OAAO5J,QAG5B2G,I,6BAGF3O,GACL,OAAOA,aAAgBiT,IAAYjT,EAAKkT,qB,0BAGtCC,GACF,IAAKxU,KAAKsT,OAAOkB,GACf,OAAO,KAGT,IAAIjB,EAAW,KAEf,IACEA,EAAWvT,KAAKwT,UAAUgB,EAASrK,WACnC,MAAOnG,GACPD,QAAQC,MAAMA,GAGhB,GAAIuP,EAGF,OAFAA,EAAWA,EAASvE,MAAMwF,GAC1BxU,KAAKT,MAAMyT,SAASO,EAASjS,SAAWiS,EACjCA,EAKT,IAAIrT,GAFJsU,EAAWF,GAASb,MAAMe,IAERlT,QAElB,GAAIpB,EAAI,CACN,GAAIA,KAAMF,KAAKT,MAAMyT,SACnB,MAAM,IAAI7H,GAAJ,gCAAsCqJ,IAG9CA,EAASpB,aAAapT,KAAKuR,UAC3BvR,KAAKT,MAAMyT,SAAS9S,GAAMsU,MACrB,CAGL,IAFA,IAAI/S,EAAMgT,KAEHhT,KAAOzB,KAAKT,MAAMyT,UACvBvR,EAAMgT,KAGRD,EAASjV,MAAMW,GAAKuB,EAOtB,OAJA+S,EAASpB,aAAapT,KAAKuR,UAC3BvR,KAAKiT,OAAOuB,EAASrK,WAAaqK,EAASlT,QAC3CtB,KAAKT,MAAMyT,SAASwB,EAASlT,SAAWkT,EAEjCA,I,gCAGC5J,GACR,IAAI1K,EAAKF,KAAKiT,OAAOrI,GAErB,GAAI1K,EACF,OAAOF,KAAK+J,IAAI7J,GAEhB,MAAMsL,GAAa,yBAAD,OAA0BZ,M,2BAI3CA,GAAO,IAAD,OACT,GAAIA,aAAgB0J,IAAY1J,EAAK2J,mBACnC,OAAOvU,KAAK+J,IAAIa,EAAKtJ,SAGvBsJ,EAAOA,EAAK8I,OAAOC,cAEnB,IAAIC,EAAU,GAQd,GANApQ,OAAOqG,KAAK7J,KAAKiT,QAAQnJ,SAAQ,SAACT,IACS,IAArCA,EAAIsK,cAAcE,QAAQjJ,IAC5BgJ,EAAQ1J,KAAK,EAAKH,IAAI,EAAKkJ,OAAO5J,QAIf,IAAnBuK,EAAQzR,OACV,OAAOyR,EAAQ,GACV,GAAIA,EAAQzR,OAAS,EAC1B,OAAOyR,EAGT,IAAI/J,EAAOrG,OAAOqG,KAAK7J,KAAKiT,QAAQ9O,KAAK,QAEzC,MAAMqH,GAAa,wBAAD,OAAyBZ,EAAzB,uCAA4Df,EAA5D,Q,+BAGA,IAAD,OAAZiK,EAAY,uDAAJ,GACb,GAAqB,IAAjBA,EAAM3R,OACR,OAAOnC,KAGT,IAAIgT,EAAW,GACXK,EAAQ,GAEZ7P,OAAOqG,KAAK7J,KAAKT,MAAMyT,UAAUlJ,SAAQ,SAACT,GACxC,IAAImL,EAAW,EAAKjV,MAAMyT,SAAS3J,GAEnC,GAAImL,EAAU,CACZ,IAAK,IAAIrR,EAAI,EAAGA,EAAI2Q,EAAM3R,SACxBqS,EAAWV,EAAM3Q,GAAGqR,MADcrR,GAOhCqR,IACFxB,EAAS3J,GAAOmL,EAChBnB,EAAMmB,EAASrK,WAAad,OAKlC,IAAIuL,EAAa,IAAIF,EAKrB,OAJAE,EAAWrV,MAAMyT,SAAWA,EAC5B4B,EAAW3B,OAASI,EACpBuB,EAAWxB,aAAapT,KAAKuR,UAEtBqD,I,oCAGM,IAAD,OACRxU,EAAQ,GAYZ,OAVAoD,OAAOqG,KAAK7J,KAAKT,MAAMyT,UAAUlJ,SAAQ,SAACT,GACxC,IAAImL,EAAW,EAAKjV,MAAMyT,SAAS3J,GACnC,GAAImL,EAAU,CACZ,IAAIR,EAAWQ,EAASP,cACpBD,GACF5T,EAAM8J,KAAK8J,OAKV5T,I,iCAGyB,IAAD,gEAAJ,GAAI,IAAtB2B,cAAsB,MAAb,KAAa,EAC3BgB,EAAQ,GAmBZ,OAjBAS,OAAOqG,KAAK7J,KAAKT,MAAMyT,UAAUlJ,SAAQ,SAACT,GACxC,IAAImL,EAAW,EAAKjV,MAAMyT,SAAS3J,GAEnC,GAAImL,EAAU,CACZ,IAAIzU,EAAO,MAETA,EADEsJ,IAAQtH,EACHyS,EAASN,QAAQ,CAAEzB,WAAW,IAE9B+B,EAASN,YAIhBnR,EAAMmH,KAAKnK,OAKVgD,I,0BAGL7C,GACF,IAAIsU,EAAWxU,KAAKT,MAAMyT,SAAS9S,GAEnC,IAAKsU,EACH,MAAM,IAAIhJ,GAAJ,8BAAwCtL,IAGhD,OAAOsU,I,2BAGJvQ,GAAO,IAAD,OACLA,IACEA,EAAKkQ,QACPlQ,EAAOA,EAAKkQ,OAEdlQ,EAAK6F,SAAQ,SAACsK,GACZ,IAAII,EAAWF,GAASnB,KAAKiB,GAC7B,EAAKxH,IAAI4H,S,8BAMb,MAAO,CAAEjP,MAAOvF,KAAKT,U,6BA5MV8B,GACX,IAAIuR,EAAI,IAAI8B,EAIZ,OAHA9B,EAAErT,MAAQmD,IAAOC,UAAUtB,EAAK9B,OAChCqT,EAAEK,OAASvQ,IAAOC,UAAUtB,EAAK4R,QACjCL,EAAErB,SAAWlQ,EAAKkQ,SACXqB,M,KA2MX8B,GAAWnG,MAAQ,SAAUhJ,GAC3B,IAAIqP,EAAa,IAAIF,GASrB,OARAE,EAAWrV,MAAQgG,EACnBqP,EAAW3B,OAAS,GAEpBzP,OAAOqG,KAAKtE,EAAMyN,UAAUlJ,SAAQ,SAACT,GACnC,IAAIgL,EAAI9O,EAAMyN,SAAS3J,GACvBuL,EAAW3B,OAAOoB,EAAElK,WAAad,KAG5BuL,GAGTpG,IAAIC,cAAc,aAAciG,IAEjBA,UCtPf,SAASjI,GAASf,GAAkB,IAAbC,EAAY,uDAAN,KAC3B,OAAID,GAGKC,EAIX,SAASkJ,GAActV,EAAOmO,EAAOrE,GACnC9J,EAAQA,EAAM8J,GACdqE,EAAQA,EAAMrE,GAEd7F,OAAOqG,KAAK6D,GAAO5D,SAAQ,SAACT,GAC1B,GAAMA,KAAO9J,EAGX,IAAK,IAAI8B,KAAQqM,EAAMrE,GACfhI,KAAQ9B,EAAM8J,IAClB9J,EAAM8J,GAAKa,KAAK7I,QAJpB9B,EAAM8J,GAAOqE,EAAMrE,M,IAWnByL,G,WACJ,WAAYtT,GAAQ,oBAClBxB,KAAKT,MAAQ,CACXW,GAAI,KACJ6U,GAAI,KACJC,GAAI,KACJC,OAAQ,KACRnM,KAAM,KACNoM,SAAU,KACVhE,aAAc,KACdiE,gBAAiB,KACjBvL,SAAU,KACVyH,MAAO,MAGTrR,KAAKyM,SAASjL,GACdxB,KAAKuR,SAAW,KAChBvR,KAAKoV,sBAAuB,E,yDAUjBpD,GACXhS,KAAKuR,SAAWS,I,8BAIhB,OAAOhS,KAAKT,MAAMW,K,gCAIlB,IAAI6U,EAAK/U,KAAKT,MAAMwV,GAChBC,EAAKhV,KAAKT,MAAMyV,GAEpB,OAAID,GAAMC,EACF,GAAN,OAAUD,EAAV,cAAkBC,GAEZ,GAAN,OAAUA,EAAV,cAAkBD,K,iCAKpB,OAAI/U,KAAKuR,SACAvR,KAAKuR,SAASvR,KAAKT,MAAMwV,IAEzB/U,KAAKT,MAAMwV,K,iCAKpB,OAAI/U,KAAKuR,SACAvR,KAAKuR,SAASvR,KAAKT,MAAMyV,IAEzBhV,KAAKT,MAAMyV,K,mCAKpB,OAAOhV,KAAKT,MAAMwV,K,mCAIlB,OAAO/U,KAAKT,MAAMyV,K,sCAGJlS,GACd,OAAOA,EAAE9C,KAAKT,MAAMwV,KAAOjS,EAAE9C,KAAKT,MAAMyV,M,qCAIxC,IAAIK,EAAQrV,KAAKsV,WAEjB,IACE,OAAOD,EAAMlL,UACb,MAAOnG,GACP,OAAOqR,K,qCAKT,IAAIE,EAAQvV,KAAKwV,WAEjB,IACE,OAAOD,EAAMpL,UACb,MAAOnG,GACP,OAAOuR,K,oCAKT,OAAOvV,KAAKT,MAAM2V,W,8CAIlB,OAAOlV,KAAKT,MAAM2R,e,iDAIlB,OAAOlR,KAAKT,MAAM4V,kB,mCAGPnU,GAAS,IAAD,OACnB,GAAIA,EAAOM,MAAO,CAChB,IAAIpB,EAAKc,EAAOM,SAChBN,EAAS,IACFd,GAAM,EAGf,IAAIyR,EAAWnO,OAAOqG,KAAK7I,GAAQmB,OAE/BuP,EAAO,GAQX,OANAlO,OAAOqG,KAAK7I,GAAQ8I,SAAQ,SAACT,IACvB,EAAK9J,MAAM2R,aAAa7H,IAAQ,EAAK9J,MAAM4V,gBAAgB9L,MAC7DqI,EAAKrI,GAAO,MAIZ7F,OAAOqG,KAAK6H,GAAMvP,SAAWwP,EACxB,KAEA3R,O,oCAIGoK,GACZ,GAAIA,EAAQ9I,MAAO,CACjB,IAAIpB,EAAKkK,EAAQ9I,SACjB8I,EAAU,IACFlK,GAAM,EAGhB,IAAI2R,EAAYrO,OAAOqG,KAAKO,GAASjI,OAEjCuP,EAAO,GAQX,OANAlO,OAAOqG,KAAK7J,KAAKT,MAAMqK,UAAUE,SAAQ,SAACT,GACpCA,KAAOe,IACTsH,EAAKrI,GAAO,MAIZ7F,OAAOqG,KAAK6H,GAAMvP,SAAW0P,EACxB,KAEA7R,O,mCAIE4G,GACX,IAAKA,EACH,OAAO5G,KAKT,GAJY4G,EAAOmE,sBACjBnE,EAAS,IAAIyG,GAAUzG,KAGpBA,EACH,OAAO5G,KAGT,IAAIkV,EAAWlV,KAAKyV,cAEpB,OAAKP,EAIWtO,EAAO8J,UAAUwE,GAKxBlV,KAFA,KANAA,O,+BAYFT,GACP,GAAIA,IACFS,KAAKT,MAAMW,GAAKuM,GAASlN,EAAMW,IAC/BF,KAAKT,MAAMwV,GAAKtI,GAASlN,EAAMwV,IAC/B/U,KAAKT,MAAMyV,GAAKvI,GAASlN,EAAMyV,IAC/BhV,KAAKT,MAAM0V,OAASxI,GAASlN,EAAM0V,OAAQ,IAC3CjV,KAAKT,MAAMuJ,KAAO2D,GAASlN,EAAMuJ,MACjC9I,KAAKT,MAAM2V,SAAWzI,GAASlN,EAAM2V,UACrClV,KAAKT,MAAM2R,aAAezE,GAASlN,EAAM2R,aAAc,IACvDlR,KAAKT,MAAM4V,gBAAkB1I,GAASlN,EAAM4V,gBAAiB,IAC7DnV,KAAKT,MAAM8R,MAAQ5E,GAASlN,EAAM8R,MAAO,IACzCrR,KAAKT,MAAM8Q,QAAU5D,GAASlN,EAAM8Q,QAAS,IAC7CrQ,KAAKT,MAAMqK,SAAW6C,GAASlN,EAAMqK,SAAU,KAE1C5J,KAAKT,MAAMwV,KAAO/U,KAAKT,MAAMyV,IAChC,MAAM,IAAIzJ,GAAJ,6BAAqCvL,S,4BAK3C0N,GACJ,IAAK1N,KAAKuR,UACJ7D,EAAM6D,SACR,OAAO7D,EAAMsB,MAAMhP,MAIvB,IAAIT,EAAQmD,IAAOC,UAAU3C,KAAKT,OAElCiE,OAAOqG,KAAK6D,EAAMnO,MAAM0V,QAAQnL,SAAQ,SAACT,GACjCA,KAAO9J,EAAM0V,SACjB1V,EAAM0V,OAAO5L,GAAOqE,EAAMnO,MAAM0V,OAAO5L,OAI3C7F,OAAOqG,KAAK6D,EAAMnO,MAAM8R,OAAOvH,SAAQ,SAACT,GAChCA,KAAO9J,EAAM8R,QACjB9R,EAAM8R,MAAMhI,GAAOqE,EAAMnO,MAAM8R,MAAMhI,OAIzCwL,GAActV,EAAOmO,EAAMnO,MAAO,gBAClCsV,GAActV,EAAOmO,EAAMnO,MAAO,mBAElCA,EAAM2V,SAAW3V,EAAM2V,SAASlG,MAAMtB,EAAMnO,MAAM2V,UAElD,IAAItC,EAAI,IAAIkC,EAIZ,OAHAlC,EAAErT,MAAQA,EACVqT,EAAErB,SAAWvR,KAAKuR,SAEXqB,I,iCAIP,MAAM,cAAN,OAAqB5S,KAAK0V,eAA1B,cAA8C1V,KAAK2V,eAAnD,O,yCAIA,OAAQ3V,KAAKT,MAAMuJ,MACjB,IAAK,SACH,MAAO,mBACT,IAAK,WACH,MAAO,mBACT,QAEE,OADA/E,QAAQ8B,IAAR,wBAA6B7F,KAAKT,MAAMuJ,OACjC,S,gCAKX,OAAO9I,KAAKT,MAAMuJ,O,mCAIlB,OAAO9I,KAAKT,MAAM8Q,U,kCAGP,IAAD,OACNC,EAAS,EAMb,OAJA9M,OAAOqG,KAAK7J,KAAKT,MAAM8Q,SAASvG,SAAQ,SAACT,GACvCiH,GAAU,EAAK/Q,MAAM8Q,QAAQhH,MAGxBiH,I,0CAIP,IAAIA,EAAStQ,KAAK4V,YAElB,OAAQ5V,KAAKT,MAAMuJ,MACjB,IAAK,SACH,OAAO,EAAMwH,EACf,IAAK,WACH,MAAO,GAAMA,EACf,QAEE,OADAvM,QAAQ8B,IAAR,wBAA6B7F,KAAKT,MAAMuJ,OACjC,GAAMwH,K,+BAKjB,IAAIxM,EAAQ9D,KAAK6V,mBACbvF,EAAStQ,KAAK8V,oBAUlB,MARW,CACT5V,GAAIF,KAAKsB,QACTN,OAAQhB,KAAKT,MAAMwV,GACnBjU,OAAQd,KAAKT,MAAMyV,GACnBzP,MAAO+K,EACPxM,MAAOA,K,8BAOT,MAAO,CAAEyB,MAAOvF,KAAKT,U,6BArRV8B,GACX,IAAIuR,EAAI,IAAIkC,EAGZ,OAFAlC,EAAErB,SAAWlQ,EAAKkQ,SAClBqB,EAAErT,MAAQmD,IAAOC,UAAUtB,EAAK9B,OACzBqT,M,KAqRXkC,GAAWvG,MAAQ,SAAUhJ,GAC3B,OAAO,IAAIuP,GAAWvP,IAGxBuP,GAAW3B,KAAO,SAAUlP,GAC1B,OAAO,IAAI6Q,GAAW,CAAElK,KAAM3G,EAAK2G,QAGrC4D,IAAIC,cAAc,aAAcqG,IAEjBA,UChVf,SAASiB,KACP,IAAItU,EAAMC,eACV,MAAO,IAAMD,EAAIqR,UAAUrR,EAAIU,OAAS,G,IAGpC6T,G,WACJ,aAAe,oBACbhW,KAAKT,MAAQ,CACXyT,SAAU,IAGZhT,KAAKiT,OAAS,GACdjT,KAAKiW,uBAAwB,E,yDAGlBjE,GAEX,IAAK,IAAI3I,KADTrJ,KAAKuR,SAAWS,EACAhS,KAAKT,MAAMyT,SACzBhT,KAAKT,MAAMyT,SAAS3J,GAAK+J,aAAapB,K,6BAYnC3Q,GACL,OAAOA,aAAgByT,IAAczT,EAAK+T,uB,0BAGxCc,GACF,IAAKlW,KAAKsT,OAAO4C,GACf,OAAO,KAGT,IAAI3C,EAAW,KAEf,IACEA,EAAWvT,KAAKwT,UAAU0C,EAAW/L,WACrC,MAAOnG,GACPD,QAAQC,MAAMA,GAGhB,GAAIuP,EAGF,OAFAA,EAAWA,EAASvE,MAAMkH,GAC1BlW,KAAKT,MAAMyT,SAASO,EAASjS,SAAWiS,EACjCA,EAKT,IAAIrT,GAFJgW,EAAapB,GAAWrB,MAAMyC,IAEV5U,QAEpB,GAAIpB,GACF,GAAIA,KAAMF,KAAKT,MAAMyT,SACnB,MAAM,IAAI7H,GAAJ,kCAAwC+K,QAE3C,CAGL,IAFA,IAAIzU,EAAMsU,KAEHtU,KAAOzB,KAAKT,MAAMyT,UACvBvR,EAAMsU,KAGRG,EAAW3W,MAAMW,GAAKuB,EAOxB,OAJAyU,EAAW9C,aAAapT,KAAKuR,UAC7BvR,KAAKiT,OAAOiD,EAAW/L,WAAa+L,EAAW5U,QAC/CtB,KAAKT,MAAMyT,SAASkD,EAAW5U,SAAW4U,EAEnCA,I,gCAGCtL,GACR,IAAI1K,EAAKF,KAAKiT,OAAOrI,GAErB,GAAI1K,EACF,OAAOF,KAAK+J,IAAI7J,GAEhB,MAAMsL,GAAa,2BAAD,OAA4BZ,M,2BAI7CA,GAAO,IAAD,OACT,GAAIA,aAAgBkK,IAAclK,EAAKwK,qBACrC,OAAOpV,KAAK+J,IAAIa,EAAKtJ,SAGvBsJ,EAAOA,EAAK8I,OAAOC,cAEnB,IAAIC,EAAU,GAQd,GANApQ,OAAOqG,KAAK7J,KAAKiT,QAAQnJ,SAAQ,SAACT,IACS,IAArCA,EAAIsK,cAAcE,QAAQjJ,IAC5BgJ,EAAQ1J,KAAK,EAAKH,IAAI,EAAKkJ,OAAO5J,QAIf,IAAnBuK,EAAQzR,OACV,OAAOyR,EAAQ,GACV,GAAIA,EAAQzR,OAAS,EAC1B,OAAOyR,EAGT,IAAI/J,EAAOrG,OAAOqG,KAAK7J,KAAKiT,QAAQ9O,KAAK,QAEzC,MAAMqH,GAAa,0BAAD,OAA2BZ,EAA3B,wCAA+Df,EAA/D,Q,0BAGhB3J,GACF,IAAIgW,EAAalW,KAAKT,MAAMyT,SAAS9S,GAErC,IAAKgW,EACH,MAAM,IAAI1K,GAAJ,gCAA0CtL,IAGlD,OAAOgW,I,+BAGW,IAAD,OAAZpC,EAAY,uDAAJ,GACb,GAAqB,IAAjBA,EAAM3R,OACR,OAAOnC,KAGT,IAAIgT,EAAW,GACXK,EAAQ,GAEZ7P,OAAOqG,KAAK7J,KAAKT,MAAMyT,UAAUlJ,SAAQ,SAACT,GACxC,IAAI6M,EAAa,EAAK3W,MAAMyT,SAAS3J,GAErC,GAAI6M,EAAY,CACd,IAAK,IAAI/S,EAAI,EAAGA,EAAI2Q,EAAM3R,SACxB+T,EAAapC,EAAM3Q,GAAG+S,MADY/S,GAOhC+S,IACFlD,EAAS3J,GAAO6M,EAChB7C,EAAM6C,EAAW/L,WAAad,OAKpC,IAAIoB,EAAc,IAAIuL,EAMtB,OAJAvL,EAAYlL,MAAMyT,SAAWA,EAC7BvI,EAAYwI,OAASI,EACrB5I,EAAY2I,aAAapT,KAAKuR,UAEvB9G,I,uCAGQpJ,GAAO,IAAD,OACrB,GAAIA,EAAKC,MAAO,CACd,IAAIpB,EAAKmB,EAAKC,SACdD,EAAO,IACFnB,GAAM,EAGb,IAAIiW,EAAS3S,OAAOqG,KAAKxI,GAAMc,OAE3BuP,EAAO,GAEX,SAAS0E,EAAKlW,GACNA,KAAMwR,EAGVA,EAAKxR,IAAO,EAFZwR,EAAKxR,GAAM,EAMf,IAAK,IAAImJ,KAAOrJ,KAAKT,MAAMyT,SAAU,CACnC,IAAIkD,EAAalW,KAAKT,MAAMyT,SAAS3J,GAEjC6M,EAAWG,eAAgBhV,EAC7B+U,EAAKF,EAAWI,cACPJ,EAAWI,eAAgBjV,GACpC+U,EAAKF,EAAWG,cAIpB,IAAI5L,EAAc,GAgBlB,OAdIzK,KAAKuR,SACP/N,OAAOqG,KAAK6H,GAAM5H,SAAQ,SAACT,GACzB,IACMqI,EAAKrI,KAAS8M,GAChB1L,EAAYP,KAAK,EAAKqH,SAASlI,IAEjC,MAAOrF,GACPD,QAAQC,MAAMA,OAIlByG,EAAcjH,OAAOqG,KAAK6H,GAGrBjH,I,iCAGa,IAAD,OAAZgH,EAAY,uDAAN,KACT7O,EAAQ,GAgBZ,OAdI6O,EACFjO,OAAOqG,KAAK7J,KAAKT,MAAMyT,UAAUlJ,SAAQ,SAACT,GACxC,IAAI6M,EAAa,EAAK3W,MAAMyT,SAAS3J,GACjC6M,EAAWK,gBAAgB9E,IAC7B7O,EAAMsH,KAAKgM,EAAWM,aAI1BhT,OAAOqG,KAAK7J,KAAKT,MAAMyT,UAAUlJ,SAAQ,SAACT,GACxC,IAAI6M,EAAa,EAAK3W,MAAMyT,SAAS3J,GACrCzG,EAAMsH,KAAKgM,EAAWM,aAInB5T,I,8BAIP,MAAO,CAAE2C,MAAOvF,KAAKT,U,6BA9MV8B,GACX,IAAIuR,EAAI,IAAIoD,EAIZ,OAHApD,EAAErT,MAAQmD,IAAOC,UAAUtB,EAAK9B,OAChCqT,EAAEK,OAASvQ,IAAOC,UAAUtB,EAAK4R,QACjCL,EAAErB,SAAWlQ,EAAKkQ,SACXqB,M,KA6MXoD,GAAYzH,MAAQ,SAAUhJ,GAC5B,IAAIkF,EAAc,IAAIuL,GAStB,OARAvL,EAAYlL,MAAQgG,EACpBkF,EAAYwI,OAAS,GAErBzP,OAAOqG,KAAKtE,EAAMyN,UAAUlJ,SAAQ,SAACT,GACnC,IAAIgL,EAAI9O,EAAMyN,SAAS3J,GACvBoB,EAAYwI,OAAOoB,EAAElK,WAAad,KAG7BoB,GAGT+D,IAAIC,cAAc,cAAeuH,IAElBA,UCxPf,SAASvJ,GAASf,GAAe,IAAVC,EAAS,uDAAL,KACzB,OAAID,GAGKC,E,IAIL8K,G,WACJ,WAAYjV,GAAO,oBACjBxB,KAAKT,MAAQ,CACXqL,KAAM,KACN1K,GAAI,KACJ6P,QAAS,GACTsB,MAAO,IAGTrR,KAAKyM,SAASjL,GAEdxB,KAAKuR,SAAW,KAChBvR,KAAK0W,oBAAqB,E,oDAW1B,OAAO1W,KAAKT,MAAMW,K,+BAYXX,GACP,GAAIA,IACFS,KAAKT,MAAMqL,KAAO6B,GAASlN,EAAMqL,MACjC5K,KAAKT,MAAMW,GAAKuM,GAASlN,EAAMW,IAC/BF,KAAKT,MAAM8R,MAAQ5E,GAASlN,EAAM8R,MAAO,IACzCrR,KAAKT,MAAMwQ,QAAUtD,GAASlN,EAAMwQ,QAAS,IAE7C/P,KAAKT,MAAMoX,UAAYF,EAASG,cAAc5W,KAAKT,MAAMqL,OAEpD5K,KAAKT,MAAMqL,MACd,MAAMW,GAAW,gD,mCAKVyG,GACXhS,KAAKuR,SAAWS,I,4BAGZtE,GACJ,OAAO1N,O,iCAIP,MAAM,YAAN,OAAmBA,KAAKmK,UAAxB,O,gCAIA,OAAOnK,KAAKT,MAAMqL,O,8BAIlB,MAAO,CAACrF,MAAOvF,KAAKT,U,6BApDT8B,GACX,IAAIuR,EAAI,IAAI6D,EAGZ,OAFA7D,EAAErB,SAAWlQ,EAAKkQ,SAClBqB,EAAErT,MAAQmD,IAAOC,UAAUtB,EAAK9B,OACzBqT,I,oCAOYhI,GACnB,OAAKA,EAIIA,EAAK8I,OAAOC,cAHZ,S,KA2Cb8C,GAASlI,MAAQ,SAAShJ,GACxB,OAAO,IAAIkR,GAASlR,IAGtBiJ,IAAIC,cAAc,WAAYgI,IAEfA,UCnFf,SAASI,KACP,IAAIpV,EAAMC,eACV,MAAO,IAAMD,EAAIqR,UAAUrR,EAAIU,OAAO,G,IAGlC2U,G,WACJ,WAAYtV,GAAO,oBACjBxB,KAAKT,MAAQ,CACXyT,SAAU,IAGZhT,KAAKiT,OAAS,GACdjT,KAAK+W,qBAAsB,E,yDAGhB/E,GAEX,IAAK,IAAI3I,KADTrJ,KAAKuR,SAAWS,EACAhS,KAAKT,MAAMyT,SACzBhT,KAAKT,MAAMyT,SAAS3J,GAAK+J,aAAapB,K,+BAYjC,IAAD,OACFqB,EAAQ7P,OAAOqG,KAAK7J,KAAKiT,QAC7BI,EAAMV,OAEN,IAAI3C,EAAS,GAMb,OAJAqD,EAAMvJ,SAAQ,SAACT,EAAKzE,GAClBoL,EAAO9F,KAAK,EAAKH,IAAI,EAAKkJ,OAAO5J,QAG5B2G,I,6BAGF3O,GACL,OAAQA,aAAgBoV,IAAapV,EAAKqV,qB,0BAGxCM,GACF,IAAKhX,KAAKsT,OAAO0D,GAAY,OAAO,KAEpC,IAAIzD,EAAW,KAEf,IACEA,EAAWvT,KAAKwT,UAAUwD,EAAS7M,WAErC,MAAMnG,IAEN,GAAIuP,EAGF,OAFAA,EAAWA,EAASvE,MAAMgI,GAC1BhX,KAAKT,MAAMyT,SAASO,EAASjS,SAAWiS,EACjCA,EAKT,IAAIrT,GAFJ8W,EAAWP,GAAShD,MAAMuD,IAER1V,QAElB,GAAIpB,EAAG,CACL,GAAIA,KAAMF,KAAKT,MAAMyT,SACnB,MAAM,IAAI7H,GAAJ,gCAAsC6L,IAG9CA,EAAS5D,aAAapT,KAAKuR,UAC3BvR,KAAKT,MAAMyT,SAAS9S,GAAM8W,MAExB,CAGF,IAFA,IAAIvV,EAAMoV,KAEHpV,KAAOzB,KAAKT,MAAMyT,UACvBvR,EAAMoV,KAGRG,EAASzX,MAAMW,GAAKuB,EAOtB,OAJAuV,EAAS5D,aAAapT,KAAKuR,UAC3BvR,KAAKiT,OAAO+D,EAAS7M,WAAa6M,EAAS1V,QAC3CtB,KAAKT,MAAMyT,SAASgE,EAAS1V,SAAW0V,EAEjCA,I,gCAGCpM,GACR,IAAI1K,EAAKF,KAAKiT,OAAOrI,GAErB,GAAI1K,EACF,OAAOF,KAAK+J,IAAI7J,GAGhB,MAAMsL,GAAa,yBAAD,OAA0BZ,M,2BAI3CA,GAAM,IAAD,OACR,GAAIA,aAAgB6L,IAAY7L,EAAKqM,mBACnC,OAAOjX,KAAK+J,IAAIa,EAAKtJ,SAGvBsJ,EAAOA,EAAK8I,OAAOC,cAEnB,IAAIC,EAAU,GAQd,GANApQ,OAAOqG,KAAK7J,KAAKiT,QAAQnJ,SAAQ,SAACT,EAAKzE,IACI,IAArCyE,EAAIsK,cAAcE,QAAQjJ,IAC5BgJ,EAAQ1J,KAAK,EAAKH,IAAI,EAAKkJ,OAAO5J,QAIf,IAAnBuK,EAAQzR,OACV,OAAOyR,EAAQ,GAEZ,GAAIA,EAAQzR,OAAS,EACxB,OAAOyR,EAGT,IAAI/J,EAAOrG,OAAOqG,KAAK7J,KAAKiT,QAAQ9O,KAAK,QAEzC,MAAMqH,GAAa,+BAAwBZ,EAAxB,yCACQf,EADR,Q,0BAIjB3J,GACF,IAAI8W,EAAWhX,KAAKT,MAAMyT,SAAS9S,GAEnC,IAAK8W,EACH,MAAM,IAAIxL,GAAJ,8BAAwCtL,IAGhD,OAAO8W,I,8BAIP,MAAO,CAACzR,MAAOvF,KAAKT,U,6BAxHT8B,GACX,IAAIuR,EAAI,IAAIkE,EAIZ,OAHAlE,EAAErT,MAAQmD,IAAOC,UAAUtB,EAAK9B,OAChCqT,EAAEK,OAASvQ,IAAOC,UAAUtB,EAAK4R,QACjCL,EAAErB,SAAWlQ,EAAKkQ,SACXqB,M,KAuHXkE,GAAUvI,MAAQ,SAAShJ,GACzB,IAAI0L,EAAY,IAAI6F,GASpB,OARA7F,EAAU1R,MAAQgG,EAClB0L,EAAUgC,OAAS,GAEnBzP,OAAOqG,KAAKtE,EAAMyN,UAAUlJ,SAAQ,SAACT,EAAKzE,GACxC,IAAIyP,EAAI9O,EAAMyN,SAAS3J,GACvB4H,EAAUgC,OAAOoB,EAAElK,WAAad,KAG3B4H,GAGTzC,IAAIC,cAAc,YAAaqI,IAEhBA,UCpKf,SAASrK,GAASf,GAAkB,IAAbC,EAAY,uDAAN,KAC3B,OAAID,GAGKC,E,IAILuL,G,WACJ,WAAY1V,GAAQ,oBAClBxB,KAAKT,MAAQ,CACXqL,KAAM,KACN1K,GAAI,KACJ6P,QAAS,GACTsB,MAAO,IAGTrR,KAAKyM,SAASjL,GAEdxB,KAAKuR,SAAW,KAChBvR,KAAKmX,uBAAwB,E,oDAW7B,OAAOnX,KAAKT,MAAMW,K,+BAWXX,GACP,GAAIA,IACFS,KAAKT,MAAMqL,KAAO6B,GAASlN,EAAMqL,MACjC5K,KAAKT,MAAMW,GAAKuM,GAASlN,EAAMW,IAC/BF,KAAKT,MAAM8R,MAAQ5E,GAASlN,EAAM8R,MAAO,IACzCrR,KAAKT,MAAMwQ,QAAUtD,GAASlN,EAAMwQ,QAAS,IAE7C/P,KAAKT,MAAMoX,UAAYO,EAAYN,cAAc5W,KAAKT,MAAMqL,OAEvD5K,KAAKT,MAAMqL,MACd,MAAMW,GAAW,mD,mCAKVyG,GACXhS,KAAKuR,SAAWS,I,8BAIhB,OAAOhS,O,iCAIP,MAAM,eAAN,OAAsBA,KAAKmK,UAA3B,O,gCAIA,OAAOnK,KAAKT,MAAMqL,O,8BAIlB,MAAO,CAAErF,MAAOvF,KAAKT,U,6BAnDV8B,GACX,IAAIuR,EAAI,IAAIsE,EAGZ,OAFAtE,EAAErB,SAAWlQ,EAAKkQ,SAClBqB,EAAErT,MAAQmD,IAAOC,UAAUtB,EAAK9B,OACzBqT,I,oCAOYhI,GACnB,OAAKA,EAGIA,EAAK8I,OAAOC,cAFZ,S,KA0CbuD,GAAY3I,MAAQ,SAAUhJ,GAC5B,OAAO,IAAI2R,GAAY3R,IAGzBiJ,IAAIC,cAAc,cAAeyI,IAElBA,UClFf,SAASE,KACP,IAAI3V,EAAMC,eACV,MAAO,IAAMD,EAAIqR,UAAUrR,EAAIU,OAAS,G,IAGpCkV,G,WACJ,aAAe,oBACbrX,KAAKT,MAAQ,CACXyT,SAAU,IAGZhT,KAAKiT,OAAS,GACdjT,KAAKsX,wBAAyB,E,yDAGnBtF,GAEX,IAAK,IAAI3I,KADTrJ,KAAKuR,SAAWS,EACAhS,KAAKT,MAAMyT,SACzBhT,KAAKT,MAAMyT,SAAS3J,GAAK+J,aAAapB,K,+BAYhC,IAAD,OACHqB,EAAQ7P,OAAOqG,KAAK7J,KAAKiT,QAC7BI,EAAMV,OAEN,IAAI3C,EAAS,GAMb,OAJAqD,EAAMvJ,SAAQ,SAACT,GACb2G,EAAO9F,KAAK,EAAKH,IAAI,EAAKkJ,OAAO5J,QAG5B2G,I,6BAGF3O,GACL,OAAOA,aAAgB6V,IAAe7V,EAAK8V,wB,0BAGzCI,GACF,IAAKvX,KAAKsT,OAAOiE,GACf,OAAO,KAGT,IAAIhE,EAAW,KAEf,IACEA,EAAWvT,KAAKwT,UAAU+D,EAAYpN,WACtC,MAAOnG,GACPD,QAAQC,MAAMA,GAGhB,GAAIuP,EAGF,OAFAA,EAAWA,EAASvE,MAAMuI,GAC1BvX,KAAKT,MAAMyT,SAASO,EAASjS,SAAWiS,EACjCA,EAKT,IAAIrT,GAFJqX,EAAcL,GAAYzD,MAAM8D,IAEXjW,QAErB,GAAIpB,EAAI,CACN,GAAIA,KAAMF,KAAKT,MAAMyT,SACnB,MAAM,IAAI7H,GAAJ,mCAAyCoM,IAGjDA,EAAYnE,aAAapT,KAAKuR,UAC9BvR,KAAKT,MAAMyT,SAAS9S,GAAMqX,MACrB,CAGL,IAFA,IAAI9V,EAAM2V,KAEH3V,KAAOzB,KAAKT,MAAMyT,UACvBvR,EAAM2V,KAGRG,EAAYhY,MAAMW,GAAKuB,EAOzB,OAJA8V,EAAYnE,aAAapT,KAAKuR,UAC9BvR,KAAKiT,OAAOsE,EAAYpN,WAAaoN,EAAYjW,QACjDtB,KAAKT,MAAMyT,SAASuE,EAAYjW,SAAWiW,EAEpCA,I,gCAGC3M,GACR,IAAI1K,EAAKF,KAAKiT,OAAOrI,GAErB,GAAI1K,EACF,OAAOF,KAAK+J,IAAI7J,GAEhB,MAAMsL,GAAa,4BAAD,OAA6BZ,M,2BAI9CA,GAAO,IAAD,OACT,GAAIA,aAAgBsM,IAAetM,EAAKuM,sBACtC,OAAOnX,KAAK+J,IAAIa,EAAKtJ,SAGvBsJ,EAAOA,EAAK8I,OAAOC,cAEnB,IAAIC,EAAU,GAQd,GANApQ,OAAOqG,KAAK7J,KAAKiT,QAAQnJ,SAAQ,SAACT,IACS,IAArCA,EAAIsK,cAAcE,QAAQjJ,IAC5BgJ,EAAQ1J,KAAK,EAAKH,IAAI,EAAKkJ,OAAO5J,QAIf,IAAnBuK,EAAQzR,OACV,OAAOyR,EAAQ,GACV,GAAIA,EAAQzR,OAAS,EAC1B,OAAOyR,EAGT,IAAI/J,EAAOrG,OAAOqG,KAAK7J,KAAKiT,QAAQ9O,KAAK,QAEzC,MAAMqH,GAAa,2BAAD,OAA4BZ,EAA5B,yCAAiEf,EAAjE,Q,0BAGhB3J,GACF,IAAIqX,EAAcvX,KAAKT,MAAMyT,SAAS9S,GAEtC,IAAKqX,EACH,MAAM,IAAI/L,GAAJ,iCAA2CtL,IAGnD,OAAOqX,I,8BAIP,MAAO,CAAEhS,MAAOvF,KAAKT,U,6BAvHV8B,GACX,IAAIuR,EAAI,IAAIyE,EAIZ,OAHAzE,EAAErT,MAAQmD,IAAOC,UAAUtB,EAAK9B,OAChCqT,EAAEK,OAASvQ,IAAOC,UAAUtB,EAAK4R,QACjCL,EAAErB,SAAWlQ,EAAKkQ,SACXqB,M,KAsHXyE,GAAa9I,MAAQ,SAAUhJ,GAC7B,IAAI2L,EAAe,IAAImG,GASvB,OARAnG,EAAa3R,MAAQgG,EACrB2L,EAAa+B,OAAS,GAEtBzP,OAAOqG,KAAKtE,EAAMyN,UAAUlJ,SAAQ,SAACT,GACnC,IAAIgL,EAAI9O,EAAMyN,SAAS3J,GACvB6H,EAAa+B,OAAOoB,EAAElK,WAAad,KAG9B6H,GAGT1C,IAAIC,cAAc,eAAgB4I,IAEnBA,UChKf,SAAS5K,GAASf,GAAkB,IAAbC,EAAY,uDAAN,KAC3B,OAAID,GAGKC,E,IAIL6L,G,WACJ,WAAYhW,GAAQ,oBAClBxB,KAAKT,MAAQ,CACXqL,KAAM,KACN1K,GAAI,KACJ2L,KAAM,KACN4L,YAAa,KACbpG,MAAO,IAGTrR,KAAKyM,SAASjL,GAEdxB,KAAKuR,SAAW,KAChBvR,KAAK0X,kBAAmB,E,oDAWxB,OAAO1X,KAAKT,MAAMW,K,gCAIlB,OAAOF,KAAKT,MAAMsM,O,iCAGTA,GAAsB,IAAhB5G,EAAe,wDAK9B,GAJM4G,aAAgBQ,IAAaR,EAAKf,sBACtCe,EAAO,IAAIQ,GAAUR,IAGnBA,EAAKb,SACP,OAAO,EAGT,GAAIhL,KAAKiN,UAAUjC,SAEjB,OADAhL,KAAKT,MAAMsM,KAAOA,GACX,EAGT,GAAIQ,GAAUsL,GAAG3X,KAAKiN,UAAWpB,GAAO,CACtC,GAAI5G,EAEF,OADAjF,KAAKT,MAAMsM,KAAO7L,KAAKiN,UAAU+B,MAAMnD,IAChC,EAEP9H,QAAQ8B,IAAR,mCAAwC7F,KAAxC,aAAiDA,KAAKiN,UAAtD,eAAsEpB,IAI1E,OAAO,I,+BAGAtM,GACP,GAAIA,IACFS,KAAKT,MAAMqL,KAAO6B,GAASlN,EAAMqL,MACjC5K,KAAKT,MAAMW,GAAKuM,GAASlN,EAAMW,IAC/BF,KAAKT,MAAMkY,YAAchL,GAASlN,EAAMkY,aACxCzX,KAAKT,MAAM8R,MAAQ5E,GAASlN,EAAM8R,MAAO,IACzCrR,KAAKT,MAAMwQ,QAAUtD,GAASlN,EAAMwQ,QAAS,IAC7C/P,KAAKT,MAAMsM,KAAOY,GAASlN,EAAMsM,KAAM,IAAIQ,KAEtCrM,KAAKT,MAAMqL,MACd,MAAMW,GAAW,8C,mCAKVyG,GACXhS,KAAKuR,SAAWS,I,8BAIhB,OAAOhS,O,iCAIP,MAAM,UAAN,OAAiBA,KAAKmK,UAAtB,O,gCAIA,OAAOnK,KAAKT,MAAMqL,O,uCAIlB,OAAO5K,KAAKT,MAAMkY,c,8BAIlB,MAAO,CAAElS,MAAOvF,KAAKT,U,6BA7EV8B,GACX,IAAIuR,EAAI,IAAI4E,EAGZ,OAFA5E,EAAErB,SAAWlQ,EAAKkQ,SAClBqB,EAAErT,MAAQmD,IAAOC,UAAUtB,EAAK9B,OACzBqT,M,KA6EX4E,GAAOjJ,MAAQ,SAAUhJ,GACvB,OAAO,IAAIiS,GAAOjS,IAGpBiJ,IAAIC,cAAc,SAAU+I,IAEbA,UC/Gf,SAASI,KACP,IAAInW,EAAMC,eACV,MAAO,IAAMD,EAAIqR,UAAUrR,EAAIU,OAAS,G,IAGpC0V,G,WACJ,aAAe,oBACb7X,KAAKT,MAAQ,CACXyT,SAAU,IAGZhT,KAAKiT,OAAS,GACdjT,KAAK8X,mBAAoB,E,yDAGd9F,GAEX,IAAK,IAAI3I,KADTrJ,KAAKuR,SAAWS,EACAhS,KAAKT,MAAMyT,SACzBhT,KAAKT,MAAMyT,SAAS3J,GAAK+J,aAAapB,K,+BAYhC,IAAD,OACHqB,EAAQ7P,OAAOqG,KAAK7J,KAAKiT,QAC7BI,EAAMV,OAEN,IAAI3C,EAAS,GAMb,OAJAqD,EAAMvJ,SAAQ,SAACT,GACb2G,EAAO9F,KAAK,EAAKH,IAAI,EAAKkJ,OAAO5J,QAG5B2G,I,6BAGF3O,GACL,OAAOA,aAAgBmW,IAAUnW,EAAKqW,mB,0BAGpC1W,GACF,IAAKhB,KAAKsT,OAAOtS,GACf,OAAO,KAGT,IAAIuS,EAAW,KAEf,IACEA,EAAWvT,KAAKwT,UAAUxS,EAAOmJ,WACjC,MAAOnG,GACLD,QAAQC,MAAMA,GAGlB,GAAIuP,EAGF,OAFAA,EAAWA,EAASvE,MAAMhO,GAC1BhB,KAAKT,MAAMyT,SAASO,EAASjS,SAAWiS,EACjCA,EAKT,IAAIrT,GAFJc,EAASwW,GAAO/D,MAAMzS,IAENM,QAEhB,GAAIpB,EAAI,CACN,GAAIA,KAAMF,KAAKT,MAAMyT,SACnB,MAAM,IAAI7H,GAAJ,8BAAoCnK,IAG5CA,EAAOoS,aAAapT,KAAKuR,UACzBvR,KAAKT,MAAMyT,SAAS9S,GAAMc,MACrB,CAGL,IAFA,IAAIS,EAAMmW,KAEHnW,KAAOzB,KAAKT,MAAMyT,UACvBvR,EAAMmW,KAGR5W,EAAOzB,MAAMW,GAAKuB,EAOpB,OAJAT,EAAOoS,aAAapT,KAAKuR,UACzBvR,KAAKiT,OAAOjS,EAAOmJ,WAAanJ,EAAOM,QACvCtB,KAAKT,MAAMyT,SAAShS,EAAOM,SAAWN,EAE/BA,I,gCAGC4J,GACR,IAAI1K,EAAKF,KAAKiT,OAAOrI,GAErB,GAAI1K,EACF,OAAOF,KAAK+J,IAAI7J,GAEhB,MAAMsL,GAAa,uBAAD,OAAwBZ,M,6BAIvCA,GAAO,IAAD,QACPA,aAAgB4M,IAAU5M,EAAK8M,oBACjC9M,EAAOA,EAAKT,WAGdS,EAAOA,EAAK8I,OAAOC,cAEnB,IAAIC,EAAU,GAsBd,OApBApQ,OAAOqG,KAAK7J,KAAKT,MAAMyT,UAAUlJ,SAAQ,SAACT,GACxC,IAAIhI,EAAO,EAAK9B,MAAMyT,SAAS3J,GAE3BoO,EAAcpW,EAAK0W,iBAElBN,IACHA,EAAc,IAGhB,MACsD,IAAhDpW,EAAK8I,UAAUwJ,cAAcE,QAAQjJ,KAEe,IAA7C6M,EAAY9D,cAAcE,QAAQjJ,KAD3CgJ,EAAQ1J,KAAK7I,GAIf,MAAO2C,GACPD,QAAQ8B,IAAI7B,OAIO,IAAnB4P,EAAQzR,OACHyR,EAAQ,GACNA,EAAQzR,OAAS,EACnByR,EAEA,O,2BAINhJ,GAAO,IAAD,OACT,GAAIA,aAAgB4M,IAAU5M,EAAK8M,iBACjC,OAAO1X,KAAK+J,IAAIa,EAAKtJ,SAGvBsJ,EAAOA,EAAK8I,OAAOC,cAEnB,IAAIC,EAAU,GAQd,GANApQ,OAAOqG,KAAK7J,KAAKiT,QAAQnJ,SAAQ,SAACT,IACS,IAArCA,EAAIsK,cAAcE,QAAQjJ,IAC5BgJ,EAAQ1J,KAAK,EAAKH,IAAI,EAAKkJ,OAAO5J,QAIf,IAAnBuK,EAAQzR,OACV,OAAOyR,EAAQ,GACV,GAAIA,EAAQzR,OAAS,EAC1B,OAAOyR,EAGT,IAAI/J,EAAOrG,OAAOqG,KAAK7J,KAAKiT,QAAQ9O,KAAK,QAEzC,MAAMqH,GAAa,sBAAD,OAAuBZ,EAAvB,oCAAuDf,EAAvD,Q,0BAGhB3J,GACF,IAAIc,EAAShB,KAAKT,MAAMyT,SAAS9S,GAEjC,IAAKc,EACH,MAAM,IAAIwK,GAAJ,4BAAsCtL,IAG9C,OAAOc,I,8BAIP,MAAO,CAAEuE,MAAOvF,KAAKT,U,6BA7JV8B,GACX,IAAIuR,EAAI,IAAIiF,EAIZ,OAHAjF,EAAErT,MAAQmD,IAAOC,UAAUtB,EAAK9B,OAChCqT,EAAEK,OAASvQ,IAAOC,UAAUtB,EAAK4R,QACjCL,EAAErB,SAAWlQ,EAAKkQ,SACXqB,M,KA4JXiF,GAAQtJ,MAAQ,SAAUhJ,GACxB,IAAIwK,EAAU,IAAI8H,GASlB,OARA9H,EAAQxQ,MAAQgG,EAChBwK,EAAQkD,OAAS,GAEjBzP,OAAOqG,KAAKtE,EAAMyN,UAAUlJ,SAAQ,SAACT,GACnC,IAAIgL,EAAI9O,EAAMyN,SAAS3J,GACvB0G,EAAQkD,OAAOoB,EAAElK,WAAad,KAGzB0G,GAGTvB,IAAIC,cAAc,UAAWoJ,IAEdA,UC1Mf,SAASpL,GAASf,GAAkB,IAAbC,EAAY,uDAAN,KAC3B,OAAID,GAGKC,E,IAILqM,G,WACJ,WAAYxW,GAAQ,oBAClBxB,KAAKT,MAAQ,CACXiF,KAAM,KACNtE,GAAI,KACJ6P,QAAS,IAGX/P,KAAKyM,SAASjL,GAEdxB,KAAKuR,SAAW,KAChBvR,KAAKiY,gBAAiB,E,oDAWtB,OAAOjY,KAAKT,MAAMW,K,+BAGXX,GACHA,IACFS,KAAKT,MAAMiF,KAAOiI,GAASlN,EAAMiF,MACjCxE,KAAKT,MAAMW,GAAKuM,GAASlN,EAAMW,IAC/BF,KAAKT,MAAMwQ,QAAUtD,GAASlN,EAAMwQ,QAAS,O,mCAIpCiC,GACXhS,KAAKuR,SAAWS,I,iCAIhB,MAAM,QAAN,OAAehS,KAAKkY,UAApB,O,gCAIA,OAAOlY,KAAKT,MAAMiF,O,8BAIlB,MAAO,CAAEe,MAAOvF,KAAKT,U,6BAhCV8B,GACX,IAAIuR,EAAI,IAAIoF,EAGZ,OAFApF,EAAErB,SAAWlQ,EAAKkQ,SAClBqB,EAAErT,MAAQmD,IAAOC,UAAUtB,EAAK9B,OACzBqT,M,KAgCXoF,GAAKzJ,MAAQ,SAAUhJ,GACrB,OAAO,IAAIyS,GAAKzS,IAGlBiJ,IAAIC,cAAc,OAAQuJ,IAEXA,UC5Df,SAASG,KACP,IAAI1W,EAAMC,eACV,MAAO,IAAMD,EAAIqR,UAAUrR,EAAIU,OAAS,G,IAGpCiW,G,WACJ,aAAe,oBACbpY,KAAKT,MAAQ,CACXyT,SAAU,IAGZhT,KAAKiT,OAAS,GACdjT,KAAKqY,iBAAkB,E,yDAGZrG,GAEX,IAAK,IAAI3I,KADTrJ,KAAKuR,SAAWS,EACAhS,KAAKT,MAAMyT,SACzBhT,KAAKT,MAAMyT,SAAS3J,GAAK+J,aAAapB,K,6BAYnC3Q,GACL,OAAOA,aAAgB2W,IAAQ3W,EAAK4W,iB,0BAGlCK,GACF,IAAKtY,KAAKsT,OAAOgF,GACf,OAAO,KAGT,IAAI/E,EAAW,KAEf,IACEA,EAAWvT,KAAKwT,UAAU8E,EAAKnO,WAC/B,MAAOnG,GACPD,QAAQC,MAAMA,GAGhB,GAAIuP,EAGF,OAFAA,EAAWA,EAASvE,MAAMsJ,GAC1BtY,KAAKT,MAAMyT,SAASO,EAASjS,SAAWiS,EACjCA,EAKT,IAAIrT,GAFJoY,EAAOA,EAAK7E,MAAMuE,KAEJ1W,QAEd,GAAIpB,EAAI,CACN,GAAIA,KAAMF,KAAKT,MAAMyT,SACnB,MAAM,IAAI7H,GAAJ,4BAAkCmN,IAG1CA,EAAKlF,aAAapT,KAAKuR,UACvBvR,KAAKT,MAAMyT,SAAS9S,GAAM8X,OACrB,CAGL,IAFA,IAAIvW,EAAM0W,KAEH1W,KAAOzB,KAAKT,MAAMyT,UACvBvR,EAAM0W,KAGRG,EAAK/Y,MAAMW,GAAKuB,EAOlB,OAJA6W,EAAKlF,aAAapT,KAAKuR,UACvBvR,KAAKiT,OAAOqF,EAAKnO,WAAamO,EAAKhX,QACnCtB,KAAKT,MAAMyT,SAASsF,EAAKhX,SAAWgX,EAE7BA,I,gCAGC1N,GACR,IAAI1K,EAAKF,KAAKiT,OAAOrI,GAErB,GAAI1K,EACF,OAAOF,KAAK+J,IAAI7J,GAEhB,MAAMsL,GAAa,qBAAD,OAAsBZ,M,2BAIvCA,GAAO,IAAD,OACT,GAAIA,aAAgBoN,IAAQpN,EAAKqN,eAC/B,OAAOjY,KAAK+J,IAAIa,EAAKtJ,SAGvBsJ,EAAOA,EAAK8I,OAAOC,cAEnB,IAAIC,EAAU,GAQd,GANApQ,OAAOqG,KAAK7J,KAAKiT,QAAQnJ,SAAQ,SAACT,IACS,IAArCA,EAAIsK,cAAcE,QAAQjJ,IAC5BgJ,EAAQ1J,KAAK,EAAKH,IAAI,EAAKkJ,OAAO5J,QAIf,IAAnBuK,EAAQzR,OACV,OAAOyR,EAAQ,GACV,GAAIA,EAAQzR,OAAS,EAC1B,OAAOyR,EAGT,IAAI/J,EAAOrG,OAAOqG,KAAK7J,KAAKiT,QAAQ9O,KAAK,QAEzC,MAAMqH,GAAa,oBAAD,OAAqBZ,EAArB,kCAAmDf,EAAnD,Q,0BAGhB3J,GACF,IAAI8X,EAAOhY,KAAKT,MAAMyT,SAAS9S,GAE/B,IAAK8X,EACH,MAAM,IAAIxM,GAAJ,0BAAoCtL,IAG5C,OAAO8X,I,8BAIP,MAAO,CAAEzS,MAAOvF,KAAKT,U,6BA1GV8B,GACX,IAAIuR,EAAI,IAAIwF,EAIZ,OAHAxF,EAAErT,MAAQmD,IAAOC,UAAUtB,EAAK9B,OAChCqT,EAAEK,OAASvQ,IAAOC,UAAUtB,EAAK4R,QACjCL,EAAErB,SAAWlQ,EAAKkQ,SACXqB,M,KAyGXwF,GAAM7J,MAAQ,SAAUhJ,GACtB,IAAI8L,EAAQ,IAAI+G,GAShB,OARA/G,EAAM9R,MAAQgG,EACd8L,EAAM4B,OAAS,GAEfzP,OAAOqG,KAAKtE,EAAMyN,UAAUlJ,SAAQ,SAACT,GACnC,IAAIgL,EAAI9O,EAAMyN,SAAS3J,GACvBgI,EAAM4B,OAAOoB,EAAElK,WAAad,KAGvBgI,GAGT7C,IAAIC,cAAc,QAAS2J,IAEZA,UCnJf,SAAS3L,GAASf,GAAe,IAAVC,EAAS,uDAAL,KACzB,OAAID,GAGKC,E,IAIL4M,G,WACJ,WAAY/W,GAAO,oBACjBxB,KAAKT,MAAQ,CACXqL,KAAM,KACN1K,GAAI,KACJsY,IAAK,KACLtD,SAAU,IAAI7H,GACdgE,MAAO,IAGTrR,KAAKyM,SAASjL,GAEdxB,KAAKuR,SAAW,KAChBvR,KAAKyY,mBAAoB,E,oDAWzB,OAAOzY,KAAKT,MAAMW,K,+BAGXX,GACP,GAAIA,IACFS,KAAKT,MAAMqL,KAAO6B,GAASlN,EAAMqL,MACjC5K,KAAKT,MAAMW,GAAKuM,GAASlN,EAAMW,IAC/BF,KAAKT,MAAM8R,MAAQ5E,GAASlN,EAAM8R,MAAO,IACzCrR,KAAKT,MAAMiZ,IAAM/L,GAASlN,EAAMiZ,IAAK,MACrCxY,KAAKT,MAAM2V,SAAW,IAAI7H,GAAU,CAAC9H,MAAMhG,EAAM2V,YAE5ClV,KAAKT,MAAMqL,MACd,MAAMW,GAAW,8C,mCAKVyG,GACXhS,KAAKuR,SAAWS,I,4BAGZtE,GACJ,OAAO1N,O,iCAIP,MAAM,WAAN,OAAkBA,KAAKmK,UAAvB,O,gCAIA,OAAOnK,KAAKT,MAAMqL,O,+BAIhB,OAAO5K,KAAKT,MAAMiZ,M,oCAIpB,OAAOxY,KAAKT,MAAM2V,W,oCAIlB,IAAMA,EAAWlV,KAAKyV,cAEtB,OAAIP,GAAYA,EAASvG,YAChB,CAACrC,MAAO4I,EAASnG,mBAAmB5C,SACnCI,IAAK2I,EAASjG,eAAe9C,SAC7BjM,GAAIF,KAAKsB,QACTkR,QAASxS,KAAKmK,WAIf,O,8BAKT,MAAO,CAAC5E,MAAOvF,KAAKT,U,6BAjET8B,GACX,IAAIuR,EAAI,IAAI2F,EAGZ,OAFA3F,EAAErB,SAAWlQ,EAAKkQ,SAClBqB,EAAErT,MAAQmD,IAAOC,UAAUtB,EAAK9B,OACzBqT,M,KAiEX2F,GAAQhK,MAAQ,SAAShJ,GACvB,OAAO,IAAIgT,GAAQhT,IAGrBiJ,IAAIC,cAAc,UAAW8J,IAEdA,UCnGf,SAASG,KACP,IAAIjX,EAAMC,eACV,MAAO,IAAMD,EAAIqR,UAAUrR,EAAIU,OAAS,G,IAGpCwW,G,WACJ,aAAe,oBACb3Y,KAAKT,MAAQ,CACXyT,SAAU,IAGZhT,KAAKiT,OAAS,GACdjT,KAAK4Y,oBAAqB,E,yDAGf5G,GAEX,IAAK,IAAI3I,KADTrJ,KAAKuR,SAAWS,EACAhS,KAAKT,MAAMyT,SACzBhT,KAAKT,MAAMyT,SAAS3J,GAAK+J,aAAapB,K,+BAYhC,IAAD,OACHqB,EAAQ7P,OAAOqG,KAAK7J,KAAKiT,QAC7BI,EAAMV,OAEN,IAAI3C,EAAS,GAMb,OAJAqD,EAAMvJ,SAAQ,SAACT,GACb2G,EAAO9F,KAAK,EAAKH,IAAI,EAAKkJ,OAAO5J,QAG5B2G,I,iCAIP,OAAOxM,OAAOqG,KAAK7J,KAAKiT,U,+BAIxB,OAAOzP,OAAOgN,OAAOxQ,KAAKiT,U,mCAI1B,OAAOjT,KAAKiT,S,6BAGP5R,GACL,OAAOA,aAAgBkX,IAAWlX,EAAKoX,oB,0BAGrCrO,GACF,IAAKpK,KAAKsT,OAAOlJ,GACf,OAAO,KAGT,IAAImJ,EAAW,KAEf,IACEA,EAAWvT,KAAKwT,UAAUpJ,EAAQD,WAClC,MAAOnG,GACPD,QAAQC,MAAM,qBAAsBA,GAGtC,GAAIuP,EAGF,OAFAA,EAAWA,EAASvE,MAAM5E,GAC1BpK,KAAKT,MAAMyT,SAASO,EAASjS,SAAWiS,EACjCA,EAKT,IAAIrT,GAFJkK,EAAUmO,GAAQ9E,MAAMrJ,IAEP9I,QAEjB,GAAIpB,EAAI,CACN,GAAIA,KAAMF,KAAKT,MAAMyT,SACnB,MAAM,IAAI7H,GAAJ,+BAAqCf,IAG7CA,EAAQgJ,aAAapT,KAAKuR,UAC1BvR,KAAKT,MAAMyT,SAAS9S,GAAMkK,MACrB,CAGL,IAFA,IAAI3I,EAAMiX,KAEHjX,KAAOzB,KAAKT,MAAMyT,UACvBvR,EAAMiX,KAGRtO,EAAQ7K,MAAMW,GAAKuB,EAOrB,OAJA2I,EAAQgJ,aAAapT,KAAKuR,UAC1BvR,KAAKiT,OAAO7I,EAAQD,WAAaC,EAAQ9I,QACzCtB,KAAKT,MAAMyT,SAAS5I,EAAQ9I,SAAW8I,EAEhCA,I,gCAGCQ,GACR,IAAI1K,EAAKF,KAAKiT,OAAOrI,GAErB,GAAI1K,EACF,OAAOF,KAAK+J,IAAI7J,GAEhB,MAAMsL,GAAa,wBAAD,OAAyBZ,M,2BAI1CA,GAAO,IAAD,OACT,GAAIA,aAAgB2N,IAAW3N,EAAK6N,kBAClC,OAAOzY,KAAK+J,IAAIa,EAAKtJ,SAGvBsJ,EAAOA,EAAK8I,OAAOC,cAEnB,IAAIC,EAAU,GAQd,GANApQ,OAAOqG,KAAK7J,KAAKiT,QAAQnJ,SAAQ,SAACT,IACS,IAArCA,EAAIsK,cAAcE,QAAQjJ,IAC5BgJ,EAAQ1J,KAAK,EAAKH,IAAI,EAAKkJ,OAAO5J,QAIf,IAAnBuK,EAAQzR,OACV,OAAOyR,EAAQ,GACV,GAAIA,EAAQzR,OAAS,EAC1B,OAAOyR,EAGT,IAAI/J,EAAOrG,OAAOqG,KAAK7J,KAAKiT,QAAQ9O,KAAK,QAEzC,MAAMqH,GAAa,uBAAD,OAAwBZ,EAAxB,qCAAyDf,EAAzD,Q,0BAGhB3J,GACF,IAAIkK,EAAUpK,KAAKT,MAAMyT,SAAS9S,GAElC,IAAKkK,EACH,MAAM,IAAIoB,GAAJ,6BAAuCtL,IAG/C,OAAOkK,I,oCAGM,IAAD,OACRhK,EAAQ,GAYZ,OAVAoD,OAAOqG,KAAK7J,KAAKT,MAAMyT,UAAUlJ,SAAQ,SAACT,GACxC,IAAIe,EAAU,EAAK7K,MAAMyT,SAAS3J,GAClC,GAAIe,EAAS,CACX,IAAI4J,EAAW5J,EAAQ6J,cACnBD,GACF5T,EAAM8J,KAAK8J,OAKV5T,I,8BAIP,MAAO,CAAEmF,MAAOvF,KAAKT,U,6BAnJV8B,GACX,IAAIuR,EAAI,IAAI+F,EAIZ,OAHA/F,EAAErT,MAAQmD,IAAOC,UAAUtB,EAAK9B,OAChCqT,EAAEK,OAASvQ,IAAOC,UAAUtB,EAAK4R,QACjCL,EAAErB,SAAWlQ,EAAKkQ,SACXqB,M,KAkJX+F,GAASpK,MAAQ,SAAUhJ,GACzB,IAAIqE,EAAW,IAAI+O,GASnB,OARA/O,EAASrK,MAAQgG,EACjBqE,EAASqJ,OAAS,GAElBzP,OAAOqG,KAAKtE,EAAMyN,UAAUlJ,SAAQ,SAACT,GACnC,IAAIgL,EAAI9O,EAAMyN,SAAS3J,GACvBO,EAASqJ,OAAOoB,EAAElK,WAAad,KAG1BO,GAGT4E,IAAIC,cAAc,WAAYkK,IAEfA,UChMTE,G,WACJ,aAAe,oBACb7Y,KAAKT,MAAQ,CACXuZ,KAAM,IAGR9Y,KAAKuR,SAAW,KAChBvR,KAAK+Y,uBAAwB,E,yDAGlB/G,GACXhS,KAAKuR,SAAWS,I,0BAUdjS,GACF,OAAKA,GAEMA,EAAKuB,QACdvB,EAAOA,EAAKuB,SAGPtB,KAAKT,MAAMuZ,KAAK/Y,IALd,O,8BAQHG,GACN,OAAIF,KAAKuR,SACAvR,KAAKuR,SAASrR,GAEdA,I,6BAIJsE,GAAO,IAAD,OACX,IAAKA,EACH,OAAO,KAGTA,EAAOA,EAAKkP,OAAOC,cAEnB,IAAIC,EAAU,GAQd,OANApQ,OAAOqG,KAAK7J,KAAKT,MAAMuZ,MAAMhP,SAAQ,SAACT,IACsB,IAAtD,EAAK9J,MAAMuZ,KAAKzP,GAAKsK,cAAcE,QAAQrP,IAC7CoP,EAAQ1J,KAAK,EAAKgK,QAAQ7K,OAIP,IAAnBuK,EAAQzR,OACHyR,EAAQ,GACNA,EAAQzR,OAAS,EACnByR,EAEA,O,0BAIP7T,EAAMiZ,GACR,IAAKjZ,IAASiZ,EACZ,OAAO,KACEjZ,EAAKuB,QACdvB,EAAOA,EAAKuB,SAGd,IAAI2X,EAAMjZ,KAAKT,MAAMuZ,KAAK/Y,GAEtBkZ,IACFlV,QAAQ8B,IAAR,qCAA0C7F,KAAKkU,QAAQnU,KACvDiZ,EAAS,UAAMC,EAAN,aAAcD,IAGzBhZ,KAAKT,MAAMuZ,KAAK/Y,GAAQiZ,K,6BA/Db3X,GACX,IAAIuR,EAAI,IAAIiG,EAGZ,OAFAjG,EAAErT,MAAQmD,IAAOC,UAAUtB,EAAK9B,OAChCqT,EAAErB,SAAWlQ,EAAKkQ,SACXqB,M,KA+DXiG,GAAYtK,MAAQ,SAAUhJ,GAC5B,IAAIuT,EAAO,IAAID,GAEf,OADAC,EAAKvZ,MAAQgG,EACNuT,GAGTtK,IAAIC,cAAc,cAAeoK,IAElBA,UCpEf,SAASK,GAAM1I,EAAQrH,GACrB,GAAKA,EAIL,GAAIqH,EAAOrO,OACT,IAAK,IAAIgB,EAAI,EAAGA,EAAIqN,EAAOrO,SAAUgB,EACnCgG,EAAKe,KAAKsG,EAAOrN,SAGnBgG,EAAKe,KAAKsG,GAbI,gBALG,CACnB2I,SAAS,EACTC,SAAU,KAICA,SAAW,G,IAgBlBC,G,WACJ,WAAY7X,GAAQ,oBAEhBxB,KAAKT,MADHiC,GAGW,GAGfxB,KAAKT,MAAMwC,OAAS,KACpB/B,KAAKT,MAAM+Z,OAAS,GACpBtZ,KAAKT,MAAMga,MAAQ,CACjBhX,MAAO,KACPiX,gBAAiB,KACjBC,aAAc,KACdC,aAAc,KACdC,aAAc,KACd5F,OAAQ,KACRa,WAAY,KACZnK,YAAa,MAEfzK,KAAKT,MAAMqH,OAAS,IAAIyG,GACxBrN,KAAKT,MAAMqa,WAAa,IAAIvM,GAC5BrN,KAAK6Z,YAAc,EAEnB7Z,KAAK8Z,kBAAmB,E,2DASV,IAAD,OACTC,EAAU,SAAC7Z,GACb,OAAO,EAAK6J,IAAI7J,IAGdX,EAAK,gBAAQS,KAAKT,OA0DtB,IAAK,IAAI8J,KAxDHrJ,KAAKT,MAAMwU,kBAAkBhB,GAGjCxT,EAAMwU,OAAS/T,KAAKT,MAAMwU,OAF1BxU,EAAMwU,OAAS,IAAIhB,GAKf/S,KAAKT,MAAMqV,sBAAsBF,GAGrCnV,EAAMqV,WAAa5U,KAAKT,MAAMqV,WAF9BrV,EAAMqV,WAAa,IAAIF,GAKnB1U,KAAKT,MAAMkL,uBAAuBuL,GAGtCzW,EAAMkL,YAAczK,KAAKT,MAAMkL,YAF/BlL,EAAMkL,YAAc,IAAIuL,GAKpBhW,KAAKT,MAAM0R,qBAAqB6F,GAGpCvX,EAAM0R,UAAYjR,KAAKT,MAAM0R,UAF7B1R,EAAM0R,UAAY,IAAI6F,GAKlB9W,KAAKT,MAAM2R,wBAAwBmG,GAGvC9X,EAAM2R,aAAelR,KAAKT,MAAM2R,aAFhC3R,EAAM2R,aAAe,IAAImG,GAKrBrX,KAAKT,MAAMwQ,mBAAmB8H,GAGlCtY,EAAMwQ,QAAU/P,KAAKT,MAAMwQ,QAF3BxQ,EAAMwQ,QAAU,IAAI8H,GAKhB7X,KAAKT,MAAM8R,iBAAiB+G,GAGhC7Y,EAAM8R,MAAQrR,KAAKT,MAAM8R,MAFzB9R,EAAM8R,MAAQ,IAAI+G,GAKdpY,KAAKT,MAAMqK,oBAAoB+O,GAGnCpZ,EAAMqK,SAAW5J,KAAKT,MAAMqK,SAF5BrK,EAAMqK,SAAW,IAAI+O,GAKjB3Y,KAAKT,MAAMya,uBAAuBnB,GAGtCtZ,EAAMya,YAAcha,KAAKT,MAAMya,YAF/Bza,EAAMya,YAAc,IAAInB,GAK1B7Y,KAAKT,MAAQA,EAEGS,KAAKT,MACnB,IACES,KAAKT,MAAM8J,GAAK+J,aAAa2G,GAC7B,MAAO/V,GACPD,QAAQC,MAAMA,M,mCAMlBhE,KAAKT,MAAMga,MAAQ,CACjBhX,MAAO,KACPiX,gBAAiB,KACjBC,aAAc,KACdC,aAAc,KACdC,aAAc,KACd5F,OAAQ,KACRa,WAAY,KACZnK,YAAa,MAEfzK,KAAK6Z,YAAc,I,uCAInB,GAAI7Z,KAAKT,MAAMga,MAAMG,aACnB,OAAO1Z,KAAKT,MAAMga,MAAMG,aAG1B1Z,KAAK6Z,aAAe,EACpB7Z,KAAKT,MAAMga,MAAMG,aAAe,GAGhC,IAAI9S,EAAS5G,KAAKia,aAEdrT,EAAOsI,YAActI,EAAOuI,WAC9BnP,KAAKT,MAAMga,MAAMG,aAAaxP,MAAK,SAAC7I,GAClC,IACE,OAAOA,EAAK6Y,aAAatT,GACzB,MAAO5C,GAEP,OADAD,QAAQ8B,IAAR,gBAAqB7B,EAArB,aAA+B3C,IACxBA,MAKb,IAAM8Y,EAAiBna,KAAKT,MAAM+Z,OAAOlP,QAErC+P,GACFna,KAAKT,MAAMga,MAAMG,aAAaxP,MAAK,SAAC7I,GAClC,OAAOA,EAAK+Y,cAAcD,MAI9B,IAAME,EAAgBra,KAAKT,MAAM+Z,OAAOtY,OAEpCqZ,GACFra,KAAKT,MAAMga,MAAMG,aAAaxP,MAAK,SAAC7I,GAClC,OAAOA,EAAKiZ,aAAaD,MAI7B,IAAME,EAAcva,KAAKT,MAAM+Z,OAAOvZ,KAEtC,GAAIwa,EAAa,CACf,IAAI9P,EAAczK,KAAKwa,iBAAiBD,GACpCjB,EAAM,gBAAQiB,GAElB,IAAK,IAAIrE,KAAczL,EAAa,CAClC,IAAI1K,EAAO0K,EAAYyL,GACvBoD,EAAOvZ,EAAKuB,SAAW,EAGzBtB,KAAKT,MAAMga,MAAMG,aAAaxP,MAAK,SAAC7I,GAClC,OAAIA,EAAKC,UAAWgY,EACXjY,EAEA,QAKb,IAAMoZ,EAAeza,KAAKT,MAAM+Z,OAAOzV,MAkBvC,OAhBI4W,GACFza,KAAKT,MAAMga,MAAMG,aAAaxP,MAAK,SAAC7I,GAClC,IACE,OAAIA,EAAKqZ,QAAQD,GACRpZ,EAEA,KAET,MAAO2C,GAEP,OADAD,QAAQ8B,IAAR,wBAA6B7B,IACtB3C,MAKbrB,KAAK6Z,aAAe,EACb7Z,KAAKT,MAAMga,MAAMG,e,uCAIxB,IAAK1Z,KAAKT,MAAMga,MAAMI,aAAc,CAClC3Z,KAAKT,MAAMga,MAAMI,aAAe,GAGhC,IAAI/S,EAAS5G,KAAKia,aAEdrT,EAAOsI,YAActI,EAAOuI,WAC9BnP,KAAKT,MAAMga,MAAMI,aAAazP,MAAK,SAAC7I,GAClC,IACE,OAAOA,EAAK6Y,aAAatT,GACzB,MAAO5C,GAEP,OADAD,QAAQ8B,IAAR,gBAAqB7B,EAArB,aAA+B3C,IACxBA,MAKb,IAAM8Y,EAAiBna,KAAKT,MAAM+Z,OAAOlP,QAErC+P,GACFna,KAAKT,MAAMga,MAAMI,aAAazP,MAAK,SAAC7I,GAClC,IACE,OAAOA,EAAK+Y,cAAcD,GAC1B,MAAOnW,GAEP,OADAD,QAAQ8B,IAAR,gBAAqB7B,EAArB,aAA+B3C,IACxBA,MAKb,IAAMgZ,EAAgBra,KAAKT,MAAM+Z,OAAOtY,OAEpCqZ,GACFra,KAAKT,MAAMga,MAAMI,aAAazP,MAAK,SAAC7I,GAClC,IACE,OAAOA,EAAKiZ,aAAaD,GACzB,MAAOrW,GAEP,OADAD,QAAQ8B,IAAR,gBAAqB7B,EAArB,aAA+B3C,IACxBA,MAMf,OAAOrB,KAAKT,MAAMga,MAAMI,e,kCAIxB,OAAO3Z,KAAKT,MAAMqH,S,qCAIlB,OAAO5G,KAAKT,MAAMqa,a,iCAGThT,GACT,IAAI+T,EAAa3a,KAAKT,MAAMqa,WAAWlJ,UAAU9J,GAE7C+F,EAAQ/F,EAAO8I,WAEnB,OAAIiL,GAAcA,EAAWjL,aAAe/C,EACnC/F,EAGL+F,EAAQ3M,KAAKT,MAAMqa,WAAWlK,WACzBrC,GAAUoG,MAAMzT,KAAKT,MAAMqa,YAGhChT,EAAOgU,eAAiB5a,KAAKT,MAAMqa,WAAWgB,eACzC,IAAIvN,GAAU,CACnBf,MAAOtM,KAAKT,MAAMqa,WAAWgB,eAC7BrO,IAAKvM,KAAKT,MAAMqa,WAAWgB,eAAiBjO,IAGvC,IAAIU,GAAU,CACnBf,MAAOtM,KAAKT,MAAMqa,WAAWiB,aAAelO,EAC5CJ,IAAKvM,KAAKT,MAAMqa,WAAWiB,iB,mCAKpBjU,GAKX,GAJKA,EAAOmE,sBACVnE,EAAS,IAAIyG,GAAUzG,IAGrBA,IAAW5G,KAAKT,MAAMqa,WAM1B,GAFA5Z,KAAKT,MAAMqa,WAAahT,EAEpB5G,KAAKT,MAAMqH,QAAU5G,KAAKT,MAAMqH,OAAO+H,YAAa,CACtD,IAAImM,EAAS9a,KAAK+a,WAAW/a,KAAKT,MAAMqH,QAEpCkU,IAAW9a,KAAKT,MAAMqH,QACxB5G,KAAKgb,UAAUF,QAGjB9a,KAAKT,MAAMqH,OAAS5G,KAAKT,MAAMqa,a,gCAIzBhT,GAKR,GAJKA,EAAOmE,sBACVnE,EAAS,IAAIyG,GAAUzG,IAGrByG,GAAUe,GAAGxH,EAAQ5G,KAAKT,MAAMqH,QAClC,OAAO,EAGT,IAAIkU,EAAS9a,KAAK+a,WAAWnU,GAE7B,OAAIyG,GAAUe,GAAG0M,EAAQ9a,KAAKT,MAAMqH,UAIpC5G,KAAKT,MAAMqH,OAASkU,EACpB9a,KAAKib,cACE,K,kCAGmB,IAAlBC,IAAiB,yDAKzB,OAJIlb,KAAK6Z,cACPqB,GAAW,GAGTA,GACGlb,KAAKT,MAAMga,MAAMxF,SACpBhQ,QAAQ8B,IAAI,kBACZ7F,KAAK6Z,aAAe,EACpB7Z,KAAKT,MAAMga,MAAMxF,OAAS/T,KAAKT,MAAMwU,OAAOuF,OAAOtZ,KAAKmb,kBACxDnb,KAAK6Z,aAAe,GAGf7Z,KAAKT,MAAMga,MAAMxF,QAEjB/T,KAAKT,MAAMwU,S,sCAIU,IAAlBmH,IAAiB,yDAK7B,OAJIlb,KAAK6Z,cACPqB,GAAW,GAGTA,GACGlb,KAAKT,MAAMga,MAAM3E,aACpB7Q,QAAQ8B,IAAI,sBACZ7F,KAAK6Z,aAAe,EACpB7Z,KAAKT,MAAMga,MAAM3E,WAAa5U,KAAKT,MAAMqV,WAAW0E,OAAOtZ,KAAKmb,kBAChEnb,KAAK6Z,aAAe,GAGf7Z,KAAKT,MAAMga,MAAM3E,YAEjB5U,KAAKT,MAAMqV,a,uCAIW,IAAlBsG,IAAiB,yDAK9B,OAJIlb,KAAK6Z,cACPqB,GAAW,GAGTA,GACGlb,KAAKT,MAAMga,MAAM9O,cACpB1G,QAAQ8B,IAAI,uBACZ7F,KAAK6Z,aAAe,EACpB7Z,KAAKT,MAAMga,MAAM9O,YAAczK,KAAKT,MAAMkL,YAAY6O,OAAOtZ,KAAKob,kBAClEpb,KAAK6Z,aAAe,GAGf7Z,KAAKT,MAAMga,MAAM9O,aAEjBzK,KAAKT,MAAMkL,c,uCAKpB,OAAOzK,KAAKT,MAAMya,c,wCAIlB,OAAOha,KAAKT,MAAM2R,e,qCAIlB,OAAOlR,KAAKT,MAAM0R,Y,mCAIlB,OAAOjR,KAAKT,MAAMwQ,U,iCAIlB,OAAO/P,KAAKT,MAAM8R,Q,oCAIlB,OAAOrR,KAAKT,MAAMqK,W,uCAGHvI,GACf,OAAOrB,KAAKqb,iBAAiBb,iBAAiBnZ,K,kCAI9C,OAAOrB,KAAKT,MAAMwC,S,kCAIlB,OAAO,gBAAK/B,KAAKT,MAAM+Z,U,sCAGR,IAAD,OACRA,EAAS,GAEXgC,EAAItb,KAAKT,MAAM+Z,OAAOvZ,KAE1B,GAAIub,EAAG,CACL,IAAIrJ,EAAQ,GAEZzO,OAAOqG,KAAKyR,GAAGxR,SAAQ,SAACT,GACtB4I,EAAM/H,KAAK,EAAKH,IAAIV,GAAK,GAAOc,cAGlC8H,EAAMU,OAEe,IAAjBV,EAAM9P,OACRmX,EAAOpP,KAAP,uBAA4B+H,EAAM,KACzBA,EAAM9P,OAAS,GACxBmX,EAAOpP,KAAP,wBAA6B+H,EAAM9N,KAAK,SAAxC,MAMJ,GAFAmX,EAAItb,KAAKT,MAAM+Z,OAAOtY,OAEf,CACL,IAAIiR,EAAQ,GAEZzO,OAAOqG,KAAKyR,GAAGxR,SAAQ,SAACT,GACtB4I,EAAM/H,KAAK,EAAKH,IAAIV,GAAK,GAAOc,cAGlC8H,EAAMU,OAEe,IAAjBV,EAAM9P,OACRmX,EAAOpP,KAAP,sBAA2B+H,EAAM,KACxBA,EAAM9P,OAAS,GACxBmX,EAAOpP,KAAP,wBAA6B+H,EAAM9N,KAAK,SAAxC,MAMJ,GAFAmX,EAAItb,KAAKT,MAAM+Z,OAAOzV,MAEf,CACL,IAAIoO,EAAQ,GAEZzO,OAAOqG,KAAKyR,GAAGxR,SAAQ,SAACT,GACtB4I,EAAM/H,KAAK,EAAKH,IAAIV,GAAK,GAAOc,cAGlC8H,EAAMU,OAEe,IAAjBV,EAAM9P,OACRmX,EAAOpP,KAAP,mBAAwB+H,EAAM,KACrBA,EAAM9P,OAAS,GACxBmX,EAAOpP,KAAP,qBAA0B+H,EAAM9N,KAAK,SAArC,MAMJ,GAFAmX,EAAItb,KAAKT,MAAM+Z,OAAOlP,QAEf,CACL,IAAI6H,EAAQ,GAEZzO,OAAOqG,KAAKyR,GAAGxR,SAAQ,SAACT,GACtB4I,EAAM/H,KAAK,EAAKH,IAAIV,GAAK,GAAOc,cAGlC8H,EAAMU,OAEe,IAAjBV,EAAM9P,OACRmX,EAAOpP,KAAP,qBAA0B+H,EAAM,KACvBA,EAAM9P,OAAS,GACxBmX,EAAOpP,KAAP,uBAA4B+H,EAAM9N,KAAK,SAAvC,MAIJ,OAAsB,IAAlBmV,EAAOnX,OACFmX,EAAO,GACLA,EAAOnX,OAAS,EACnB,IAAN,OAAWmX,EAAOnV,KAAK,WAAvB,KAEO,O,+BAIF9C,GAKP,OAJIA,EAAKC,QACPD,EAAOA,EAAKC,SAGE,MAAZD,EAAK,IAA0B,MAAZA,EAAK,GACnB,OACc,MAAZA,EAAK,GACP,UACc,MAAZA,EAAK,GACP,SAEA,U,iCAIAA,GACLA,EAAKC,QACPD,EAAOA,EAAKC,SAGd,IAAIwH,EAAO9I,KAAKub,SAASla,GAEnBiY,EAAStZ,KAAKT,MAAM+Z,OAAOxQ,GAEjC,QAAIwQ,GACKjY,KAAQiY,I,2BAMd9U,GACH,IAAIgX,EAAS,GAEb,IAEEtC,GADYlZ,KAAKyb,WAAU,GAAOC,KAAKlX,GAC1BgX,GACb,MAAOxX,GACPD,QAAQC,MAAMA,GAGhB,IAEEkV,GADYlZ,KAAK2b,eAAc,GAAOD,KAAKlX,GAC9BgX,GACb,MAAOxX,GACPD,QAAQC,MAAMA,GAGhB,IAEEkV,GADYlZ,KAAK4b,eAAeF,KAAKlX,GACxBgX,GACb,MAAOxX,GACPD,QAAQC,MAAMA,GAGhB,IAEEkV,GADYlZ,KAAK6b,kBAAkBH,KAAKlX,GAC3BgX,GACb,MAAOxX,GACPD,QAAQC,MAAMA,GAGhB,IAEEkV,GADYlZ,KAAK8b,aAAaC,OAAOvX,GACxBgX,GACb,MAAOxX,GACPD,QAAQC,MAAMA,GAGhB,IAEEkV,GADYlZ,KAAKgc,iBAAiBD,OAAOvX,GAC5BgX,GACb,MAAOxX,GACPD,QAAQC,MAAMA,GAGhB,OAAOwX,I,qCAIPxb,KAAKT,MAAM+Z,OAAS,GACpBtZ,KAAKib,e,gCAGGlZ,GACJA,IACFA,EAAS/B,KAAKyb,YAAYC,KAAK3Z,IAGjC/B,KAAKT,MAAMwC,OAASA,EACpB/B,KAAKib,e,mCAGM5Z,GACPA,EAAKC,QACPD,EAAOA,EAAKC,SAGd,IAAIwH,EAAO9I,KAAKub,SAASla,GAEnByH,KAAQ9I,KAAKT,MAAM+Z,SACvBtZ,KAAKT,MAAM+Z,OAAOxQ,GAAQ,IAGxBzH,KAAQrB,KAAKT,MAAM+Z,OAAOxQ,WACrB9I,KAAKT,MAAM+Z,OAAOxQ,GAAMzH,GAEqB,IAAhDmC,OAAOqG,KAAK7J,KAAKT,MAAM+Z,OAAOxQ,IAAO3G,eAChCnC,KAAKT,MAAM+Z,OAAOxQ,IAG3B9I,KAAKT,MAAM+Z,OAAOxQ,GAAMzH,GAAQ,EAGlCrB,KAAKib,e,2CAIL,GAAyC,OAArCjb,KAAKT,MAAMga,MAAMC,gBACnB,OAAOxZ,KAAKT,MAAMga,MAAMC,gBAG1B,IAAIpZ,EAAQJ,KAAKic,cAAchI,cAI/B,OAFAjU,KAAKT,MAAMga,MAAMC,gBAAkBpZ,EAE5BJ,KAAKT,MAAMga,MAAMC,kB,wCAIxB,GAAsC,OAAlCxZ,KAAKT,MAAMga,MAAME,aACnB,OAAOzZ,KAAKT,MAAMga,MAAME,aAG1B,IAAIrZ,EAAQJ,KAAKyb,YAAYxH,cAW7B,OATejU,KAAKic,cAAchI,cAEzBnK,SAAQ,SAACzI,GAChBA,EAAKyH,KAAO,aACZ1I,EAAM8J,KAAK7I,MAGbrB,KAAKT,MAAMga,MAAME,aAAerZ,EAEzBJ,KAAKT,MAAMga,MAAME,e,iCAIxB,GAA+B,OAA3BzZ,KAAKT,MAAMga,MAAMhX,MACnB,OAAOvC,KAAKT,MAAMga,MAAMhX,MAG1B,IAAMR,EAAS/B,KAAKT,MAAMwC,OACtBgB,EAAQ/C,KAAKyb,YAAYS,SAAS,CAAEna,OAAQA,IAChDgB,EAAQA,EAAMoZ,OAAOnc,KAAK2b,gBAAgBO,YAE1C,IAAIpZ,EAAI,GACR,IAAK,IAAIK,KAAKJ,EACZD,EAAEC,EAAMI,GAAGjD,IAAM,EAGnB,IAAI0C,EAAQ5C,KAAKqb,iBAAiBe,SAAStZ,GAG3C,OADA9C,KAAKT,MAAMga,MAAMhX,MAAQ,CAAEQ,MAAOA,EAAOH,MAAOA,GACzC5C,KAAKT,MAAMga,MAAMhX,Q,0BAGtBlB,GAAO,IAAD,OACR,GAAKA,EAAL,CAIA,IAAIgb,GAAQ,EAcZ,GAZA7Y,OAAOqG,KAAK7J,KAAKT,OAAOuK,SAAQ,SAACT,GAC/B,IAAKgT,EAAO,CACV,IAAIxY,EAAQ,EAAKtE,MAAM8J,GACnBxF,GAASA,EAAMyP,QACbzP,EAAMyP,OAAOjS,KACfwC,EAAM+I,IAAIvL,GACVgb,GAAQ,QAMXA,EACH,MAAM,IAAI9Q,GAAJ,iCAAyClK,EAAzC,6B,0BAINnB,GAAsB,IAAlBgb,IAAiB,yDACnBhb,EAAGoB,QACLpB,EAAKA,EAAGoB,SAGNtB,KAAK6Z,cAGPqB,GAAW,GAGb,IACE,MAAc,MAAVhb,EAAG,GACEF,KAAKqb,eAAeH,GAAUnR,IAAI7J,GACtB,MAAVA,EAAG,GACLF,KAAKyb,UAAUP,GAAUnR,IAAI7J,GACjB,MAAVA,EAAG,GACLF,KAAK2b,cAAcT,GAAUnR,IAAI7J,GACrB,MAAVA,EAAG,GACLF,KAAK4b,eAAe7R,IAAI7J,GACZ,MAAVA,EAAG,GACLF,KAAK6b,kBAAkB9R,IAAI7J,GACf,MAAVA,EAAG,GACLF,KAAK8b,aAAa/R,IAAI7J,GACV,MAAVA,EAAG,GACLF,KAAKsc,WAAWvS,IAAI7J,GACR,MAAVA,EAAG,GACLF,KAAKic,cAAclS,IAAI7J,GAEvBA,EAET,MAAO8D,GACP,GAAIkX,EACF,OAAOlb,KAAK+J,IAAI7J,GAAI,GAEpB,MAAM8D,K,8BAMV,MAAO,CAAEuB,MAAOvF,KAAKT,U,6BAlsBV8B,GACX,IAAIuR,EAAI,IAAIyG,EAEZ,OADAzG,EAAErT,MAAQmD,IAAOC,UAAUtB,EAAK9B,OACzBqT,M,KAmsBXyG,GAAO9K,MAAQ,SAAUhJ,GACvB,IAAI5D,EAAS,IAAI0X,GAAO9T,GAGxB,OAFA5D,EAAOyR,eAEAzR,GAGT6M,IAAIC,cAAc,SAAU4K,IAEbA,U,8HCvvBXkD,GACF,mJAMF,SAASjT,MAET,SAASkT,GAAT,GAAyG,IAAjFnb,EAAgF,EAAhFA,KAAMM,EAA0E,EAA1EA,OAA0E,IAAlE+H,oBAAkE,MAAnDJ,GAAmD,MAApCK,wBAAoC,MAAjBL,GAAiB,EAClGmT,EAAQ,GACRvL,EAAe,GACfD,EAAY,GACZlB,EAAU,GACVtF,EAAc,GAElB,IACEA,EAAc9I,EAAO6Y,iBAAiBnZ,GACtC,MAAO2C,GACPD,QAAQ8B,IAAR,4BAAiC7B,IAG/B3C,EAAKwa,kBACP3K,EAAe7P,EAAKwa,mBAGlBxa,EAAKua,eACP3K,EAAY5P,EAAKua,gBAGfva,EAAKya,aACP/L,EAAU1O,EAAKya,cAGjB,IAAI3K,EAAQ,KAEZ,GAAI9P,EAAK0Q,SAAU,CACjB,IAAI2K,EAAIrb,EAAK0Q,WACT2K,IACFvL,EACE,sDAEGuL,EAAE7N,iBAFL,cAEoC6N,EAAE5N,eAFtC,MAQN,IAAImK,EAAM,KAEV,IACEA,EAAMtX,EAAOqa,iBAAiBjS,IAAI1I,GAClC,MAAO2C,GACPiV,EAAM,KAsER,OAnEAwD,EAAMvS,KAAK,CACT,YACA,yBAAKb,IAAI,aACP,6BAAM4P,GACN,6BAAM9H,MAIN1G,EAAYtI,OAAS,EACvBsa,EAAMvS,KAAK,CACT,cACA,yBAAKb,IAAI,eACP,kBAAC,GAAD,CACEoB,YAAaA,EACbf,aAAcA,EACdC,iBAAkBA,EAClBhI,OAAQA,OAKd8a,EAAMvS,KAAK,CAAC,cAAe,SAGzB1G,OAAOqG,KAAKoH,GAAW9O,OAAS,EAClCsa,EAAMvS,KAAK,CACT,YACA,yBAAKb,IAAI,aACP,kBAAC,EAAD,CACEG,OAAQyH,EACRvH,aAAcA,EACdC,iBAAkBA,EAClBhI,OAAQA,OAKd8a,EAAMvS,KAAK,CAAC,YAAa,SAGvB1G,OAAOqG,KAAKqH,GAAc/O,OAAS,EACrCsa,EAAMvS,KAAK,CACT,eACA,yBAAKb,IAAI,gBACP,kBAAC,EAAD,CACEG,OAAQ0H,EACRxH,aAAcA,EACdC,iBAAkBA,EAClBhI,OAAQA,OAKd8a,EAAMvS,KAAK,CAAC,eAAgB,SAG1B1G,OAAOqG,KAAKkG,GAAS5N,OAAS,GAChCsa,EAAMvS,KAAK,CACT,UACA,yBAAKb,IAAI,WACP,kBAAC,EAAD,CAAYG,OAAQuG,EAASrG,aAAcA,EAAcC,iBAAkBA,EAAkBhI,OAAQA,OAK3G8a,EAAMvS,KAAK,CAAC,WAAY,yBAAKb,IAAI,YAAT,4CAA8DhI,EAAK8I,aAEpFsS,EA+PME,OA9Df,SAAiBnb,GACf,IAAIyC,EAAO,GAEX,IACEA,EAlMJ,YAAwG,IAAjF5C,EAAgF,EAAhFA,KAAMM,EAA0E,EAA1EA,OAA0E,IAAlE+H,oBAAkE,MAAnDJ,GAAmD,MAApCK,wBAAoC,MAAjBL,GAAiB,EACjGrF,EAAO,CACTwF,MAlIgB,4BAmIhBmT,MAAOC,KACPJ,MAAO,CAAC,CAAC,QAASF,MAGpB,KAAM5a,aAAkB0X,IACtB,OAAOpV,EAGT,IAAK5C,EACH,OAAO4C,EAIL5C,EAAKC,QACPD,EAAOA,EAAKC,SAGd,IACED,EAAOM,EAAOoI,IAAI1I,GAClB,MAAO2C,GACP3C,EAAO,KAGT,IAAKA,EACH,OAAO4C,EAGT,GAAI5C,EAAKmQ,iBACPvN,EAAKwF,MACH,kBAAC,EAAD,CACEd,QAAS,WACPgB,EAAiBtI,KAGlBA,EAAK8I,WAGVlG,EAAKwY,MAAQD,GAAa,CACxBnb,KAAMA,EACNM,OAAQA,EACR+H,aAAcA,EACdC,iBAAkBA,IAGpB1F,EAAK2Y,MAAQE,UACR,GAAIzb,EAAKkT,mBACdtQ,EAAKwF,MACH,kBAAC,EAAD,CACEd,QAAS,WACPgB,EAAiBtI,KAGlBA,EAAK8I,WAGVlG,EAAKwY,MAAQD,GAAa,CACxBnb,KAAMA,EACNM,OAAQA,EACR+H,aAAcA,EACdC,iBAAkBA,IAGpB1F,EAAK2Y,MAAQG,UACR,GAAI1b,EAAKqW,iBAAkB,CAChCzT,EAAKwF,MAAQpI,EAAK8I,UAClB,IAAIsN,EAAcpW,EAAK0W,iBAClBN,IACHA,EAAc,kBAEhBxT,EAAKwY,MAAQ,CACX,CAAC,cAAehF,GAChB,CAAC,WAAY,6DAEfxT,EAAK2Y,MAAQI,UACR,GAAI3b,EAAK+T,qBAAsB,CACpCnR,EAAKwF,MAAQ,KAEb,IAAIsL,EAAK1T,EAAKiU,WACd,GAAIP,EAAG5K,QAAS,CACd,IAAIpK,EAAOgV,EACXA,EACE,kBAAC,EAAD,CACEpM,QAAS,WACPe,EAAa3J,KAGdgV,EAAG5K,WAKV,IAAI6K,EAAK3T,EAAKmU,WACd,GAAIR,EAAG7K,QAAS,CACd,IAAIpK,EAAOiV,EACXA,EACE,kBAAC,EAAD,CACErM,QAAS,WACPe,EAAa3J,KAGdiV,EAAG7K,WAKV,IAAI8S,EAAW5b,EAAK6b,wBAChBC,EAAW9b,EAAK+b,2BAChBlI,EAAW7T,EAAKoU,cAEhBP,IACFA,EACE,6BACE,uCACA,kBAAC,GAAD,CAAiB3P,MAAO2P,EAAUxL,aAAcA,MAKlDuT,IACFA,EACE,kBAAC,EAAD,CAAe7U,KAAK,YAClB,kBAAC,EAAD,oBACA,kBAAC,EAAD,KACE,kBAAC,GAAD,CAAYzG,OAAQA,EAAQoO,QAASkN,EAAUvT,aAAcA,OAMjEyT,IACFA,EACE,kBAAC,EAAD,CAAe/U,KAAK,YAClB,kBAAC,EAAD,uBACA,kBAAC,EAAD,KACE,kBAAC,GAAD,CAAYzG,OAAQA,EAAQoO,QAASoN,EAAUzT,aAAcA,OAMrE,IAAI7B,EAAY,MAEZoV,GAAYE,KACdtV,EACE,kBAAC,EAAD,CAAWE,uBAAuB,EAAMC,mBAAmB,EAAMF,YAAa,CAAC,WAAY,aACxFmV,EACAE,IAKP,IAAIV,EAAQ,GACZA,EAAMvS,KAAK,CACT,aACA,yBAAKb,IAAI,aAAa/B,MAAO,CAAE+V,UAAW,WACvCtI,EACD,mCACCC,EACD,qCACA,6BAAME,MAIVuH,EAAMvS,KAAK,CAAC,UAAW,yBAAKb,IAAI,WAAWxB,KAE3C4U,EAAMvS,KAAK,CACT,WACA,kBAAC,GAAD,CACEb,IAAI,WACJgH,QAAShP,EAAKic,aACdxU,KAAMzH,EAAKkc,UACX5b,OAAQA,EACR+H,aAAcA,EACdC,iBAAkBA,MAItB8S,EAAMvS,KAAK,CAAC,WAAY,0CAExBjG,EAAK2Y,MAAQY,KAEbvZ,EAAKwY,MAAQA,EAGf,OAAOxY,EAOEwZ,CAAYjc,GACnB,MAAOwC,GACPC,EAAO,CACLwF,MArUc,4BAsUdmT,MAAOC,KACPJ,MAAO,CAAC,CAAC,QAASF,MAEpBxY,QAAQ8B,IAAR,gBAAqB7B,IAGvB,IAAMyY,EAAQxY,EAAKwY,MAEnB,GAAIA,EAAMta,OAAS,EAAG,CAIpB,IAHA,IAAIub,EAAO,GACPC,EAAQ,GAEHxa,EAAI,EAAGA,EAAIsZ,EAAMta,SAAUgB,EAClCwa,EAAMzT,KACJ,kBAAC,IAAD,CAAUb,IAAKoT,EAAMtZ,GAAG,GAAIya,MAAOnB,EAAMtZ,GAAG,GAAI2C,UAAWvF,KAAOsd,UAC/DpB,EAAMtZ,GAAG,KAGdua,EAAKxT,KACH,kBAAC,IAAD,CAAKb,IAAKoT,EAAMtZ,GAAG,GAAI2C,UAAWvF,KAAOud,IAAKC,OAAQtB,EAAMtZ,GAAG,IAC5DsZ,EAAMtZ,GAAG,KAKhB,OACE,yBAAK2C,UAAWvF,KAAOyF,WACrB,yBAAKF,UAAWvF,KAAOyd,UAAWC,IAAI,GAAGC,IAAKja,EAAK2Y,QACnD,yBAAK9W,UAAWvF,KAAOkJ,OAAQxF,EAAKwF,OACpC,kBAAC,IAAD,CACEJ,IAAKsU,EAAMxb,OACXgc,UAAQ,EACRnV,SAAU,SAAC4U,GACT7Z,QAAQ8B,IAAI+X,IAEdQ,WAAY3B,EAAM,GAAG,GACrB3W,UAAWvF,KAAOmd,MAElB,kBAAC,IAAD,CAAS5X,UAAWvF,KAAO8d,SAAUX,GACpCC,IAKP,OACE,yBAAK7X,UAAWvF,KAAOyF,WACrB,yBAAKF,UAAWvF,KAAOyd,UAAWC,IAAI,GAAGC,IAAKja,EAAK2Y,QACnD,yBAAK9W,UAAWvF,KAAOkJ,OAAQxF,EAAKwF,OACnCgT,EAAM,GAAG,K,wEC5XlB,IAAM6B,GAAmB,CACvBC,YAAY,EACZC,kBAAkB,EAClBC,iBAAiB,EACjBC,cAAc,EACdC,gBAAgB,EAChBC,UAAU,EACVC,MAZF,SAAsBnC,EAAGoC,GAEvB,OAAOpC,EAAExc,GAAK4e,EAAE5e,KAaZ6e,G,uKACM,IAAD,EACkB/e,KAAKwB,MAAxB+D,EADC,EACDA,MAAOoD,EADN,EACMA,QAEb,OACE,4BAAQ7C,UAAWvF,KAAOye,WAAYrW,QAASA,GAC5CpD,O,GANeiC,aAuVTyX,G,kDArUb,WAAYzd,GAAQ,IAAD,8BACjB,cAAMA,IAEDjC,MAAQ,CACX2f,WAAY,CAAExf,OAAQ,IAAKF,MAAO,MAGpC,EAAK2f,cAAgB,EAAK3d,MAAM4d,UAPf,E,uDAWjBpf,KAAKmf,eAAgB,I,mCAIrBnf,KAAKmf,eAAgB,I,iCAIrB,OAAOnf,KAAKmf,gB,iCAGHD,GACTlf,KAAKyM,SAAS,CACZyS,WAAY,CACV1f,MAAO0f,EAAW1f,MAAQ,GAC1BE,OAAQwf,EAAWxf,OAAS,OAIhC,IAAIsU,EAAWhU,KAAKiU,cAChBD,GACFA,EAASqL,W,oCAKX,OAAIrf,KAAKgU,SACAhU,KAAKgU,SAASsL,IAEd,O,oCAIG9d,GACPxB,KAAKuf,YAINvf,KAAKwB,MAAMkI,cACb1J,KAAKwB,MAAMkI,aAAalI,EAAMpB,MAAM,M,0CAIpBoB,GAClB,IAAIoF,EAAS,KAEb,GAAIpF,EAAMge,QAAUxf,KAAKyf,SAGvB,GAFAzf,KAAKyf,SAAU,IACf7Y,EAAS,IAAIyG,GAAU,CAAEf,MAAO9K,EAAM8K,MAAMI,cAAeH,IAAK/K,EAAM+K,IAAIG,iBAC9DiC,YAEV,YADA5K,QAAQ8B,IAAR,gCAAqCe,SAIvCA,EAAS5G,KAAKia,YAGZrT,GAAU5G,KAAKuf,YAAcvf,KAAKwB,MAAMke,mBAC1C1f,KAAKwB,MAAMke,kBAAkB9Y,K,gCAIvBA,GACR,GAAK5G,KAAKuf,YAIL3Y,EAAL,CAIA,IAAI+Y,EAAa3f,KAAKia,YAElB5M,GAAUe,GAAGxH,EAAQ+Y,KAIzB3f,KAAKyf,SAAU,EACfzf,KAAKiU,cAAc+G,UAAUpU,EAAOgU,eAAgBhU,EAAOiU,aAAc,CAAE+E,WAAW,Q,kCAItF,OAAI5f,KAAKwB,MAAMyY,UACNja,KAAKwB,MAAMyY,YAEX,O,mCAIEpO,GACX,GAAKA,EAAL,CAIA,IAAMjF,EAAS5G,KAAKia,YAEhBrT,GACF5G,KAAKgb,UAAU,IAAI3N,GAAU,CAAEf,MAAOT,EAAMU,IAAK3F,EAAOiU,mB,iCAIjDhP,GACT,GAAKA,EAAL,CAIA,IAAMjF,EAAS5G,KAAKia,YAEhBrT,GACF5G,KAAKgb,UAAU,IAAI3N,GAAU,CAAEf,MAAO1F,EAAOgU,eAAgBrO,IAAKV,Q,mCAKpE,IAAMjF,EAAS5G,KAAKia,YAEhBrT,GACF5G,KAAKgb,UAAUpU,EAAOiZ,kB,oCAKxB,IAAMjZ,EAAS5G,KAAKia,YAEhBrT,GACF5G,KAAKgb,UAAUpU,EAAOkZ,gB,+BAKxB,IAAMlZ,EAAS5G,KAAKia,YAEhBrT,GACF5G,KAAKgb,UAAUpU,EAAOmZ,Y,gCAKxB,IAAMnZ,EAAS5G,KAAKia,YAEhBrT,GACF5G,KAAKgb,UAAUpU,EAAOoZ,a,+BAIhB,IAAD,OACHtgB,EAAM,UAAMM,KAAKT,MAAM2f,WAAWxf,OAA5B,MACNF,EAAK,UAAMQ,KAAKT,MAAM2f,WAAW1f,MAA5B,MAELygB,EAAU,gBAAQ3B,IACtB2B,EAAU,OAAavgB,EACvBugB,EAAU,MAAYzgB,EAEtB,IAAIoH,EAAS5G,KAAKia,YACdL,EAAahT,EAEb5G,KAAKwB,MAAM0e,gBACbtG,EAAa5Z,KAAKwB,MAAM0e,gBAETvR,aACbsR,EAAU,IAAUrG,EAAW3K,eAAe9C,SAC9C8T,EAAU,IAAUrG,EAAW7K,mBAAmB5C,SAE7CvF,IACHA,EAASgT,KAGX7V,QAAQ8B,IAAR,gCAAqC+T,IACrCA,EAAa,OAIZhT,IACHA,EAAS,IAAIyG,GAAU,CAAEf,MAAO,aAAcC,IAAK,eACnDxI,QAAQ8B,IAAI,iBAGd,IAAIyG,EAAQ1F,EAAOmI,mBACfxC,EAAM3F,EAAOqI,eAEb7O,EAAQ,KAERJ,KAAKuf,YACHvf,KAAKwB,MAAM2e,WACb/f,EAAQJ,KAAKwB,MAAM2e,YAIT,OAAV/f,GAAmC,IAAjBA,EAAM+B,SAC1B/B,EAAQ,IAGNkM,IACFA,EAAQA,EAAMH,SACd8T,EAAU,MAAY3T,GAGpBC,IACFA,EAAMA,EAAIJ,SACV8T,EAAU,IAAU1T,GAGtB,IAAIyH,EAAWhU,KAAKiU,cAEpB,GAAID,EAAU,CAGZ,IAAIoM,EAAYpgB,KAAKmf,cACrBnL,EAASgH,UAAU1O,EAAOC,EAAK,CAAEqT,WAAW,IAC5C5f,KAAKmf,cAAgBiB,EAGvB,OACE,yBAAKta,UAAWvF,KAAOyF,UAAWsB,MAAO,CAAE9H,MAAOA,EAAOE,OAAQA,IAC/D,kBAAC,KAAD,CACEoG,UAAWvF,KAAOyT,SAClB5M,IAAK,SAACC,GAAD,OAAS,EAAK2M,SAAW3M,GAC9BgZ,oBAAqB,SAAC7e,GACpB,EAAK8e,oBAAoB9e,IAE3B+e,cAAe,SAAC/e,GACd,EAAK+e,cAAc/e,IAErBgf,QAASP,EACT7f,MAAOA,IAET,yBAAK0F,UAAWvF,KAAOkgB,aACrB,4BACE3a,UAAWvF,KAAOmgB,aAClB/X,QAAS,WACP,EAAKgY,eAHT,UAQA,4BACE7a,UAAWvF,KAAOye,WAClBrW,QAAS,WACP,EAAKqX,YAHT,KAQA,kBAAC,KAAD,CACEla,UAAWvF,KAAOqgB,WAClBhf,SAAU0K,EACVuU,WAAYvU,EACZwU,cAAY,EACZC,UAAWzU,EACX0U,QAASzU,EACT0U,WAAW,aACXC,qBAAmB,EACnBC,kBAAgB,EAChBC,aAAa,SACbC,YAAa,kBAAC,GAAD,MACbrY,SAAU,SAAC6C,GACT,EAAKyV,aAAazV,MAGtB,4BACE/F,UAAWvF,KAAOmgB,aAClB/X,QAAS,WACP,EAAKqS,UAAUpB,KAHnB,UAQA,kBAAC,KAAD,CACE9T,UAAWvF,KAAOqgB,WAClBhf,SAAU2K,EACVsU,WAAYtU,EACZgV,YAAU,EACVR,UAAWzU,EACX0U,QAASzU,EACT0U,WAAW,aACXC,qBAAmB,EACnBC,kBAAgB,EAChBC,aAAa,SACbC,YAAa,kBAAC,GAAD,MACbrY,SAAU,SAAC6C,GACT,EAAK2V,WAAW3V,MAGpB,4BACE/F,UAAWvF,KAAOye,WAClBrW,QAAS,WACP,EAAKoX,WAHT,KAQA,4BACEja,UAAWvF,KAAOmgB,aAClB/X,QAAS,WACP,EAAK8Y,gBAHT,gB,GA/SiBja,a,qBCkGZka,G,kDApIb,WAAYlgB,GAAQ,IAAD,8BACjB,cAAMA,IAEDjC,MAAQ,CACX2f,WAAY,CAAExf,OAAQ,IAAKF,MAAO,MAGpC,EAAKke,KAAO,GACZ,EAAK1X,UAAY,KARA,E,gEAWE,IAAD,OAClBY,OAAOC,iBAAiB,UAAU,WAChC,EAAKE,gBAEP/G,KAAK+G,e,6CAGiB,IAAD,OACrBH,OAAOE,oBAAoB,UAAU,WACnC,EAAKC,kB,+BAIA6W,GAAQ,IAAD,OACdpa,OAAOqG,KAAK7J,KAAK0d,MAAM5T,SAAQ,SAACT,GAC9B,GAAIA,IAAQuU,EAAO,CACjB,IAAIE,EAAM,EAAKJ,KAAKrU,GAChByU,GACFA,EAAI6D,iBAKN3hB,KAAK0d,KAAKE,IACZ5d,KAAK0d,KAAKE,GAAOgE,a,mCAIP,IAAD,OACP5hB,KAAKgG,WACPhG,KAAKyM,SAAS,CACZyS,WAAY,CACV1f,MAAOQ,KAAKgG,UAAUiB,YACtBvH,OAAQM,KAAKgG,UAAUkB,gBAK7B1D,OAAOqG,KAAK7J,KAAK0d,MAAM5T,SAAQ,SAACT,GAC9B,IAAIyU,EAAM,EAAKJ,KAAKrU,GAChByU,GACFA,EAAI/W,WAAW,EAAKxH,MAAM2f,iB,+BAKtB,IAAD,OACP,OACE,yBAAK9X,IAAK,SAACC,GAAD,OAAS,EAAKrB,UAAYqB,GAAKvB,UAAWvF,KAAOyF,WACzD,kBAAC,IAAD,CACEqD,IAAI,gBACJL,SAAU,SAAC4U,GACT,EAAKgE,SAAShE,GACd,EAAK7W,cAEPjB,UAAWvF,KAAOmd,MAElB,kBAAC,IAAD,CAAS5X,UAAWvF,KAAOshB,SACzB,kBAAC,IAAD,CAAK/b,UAAWvF,KAAOud,IAAKzU,IAAI,QAAQ0U,OAAO,SAA/C,YAGA,kBAAC,IAAD,CAAKjY,UAAWvF,KAAOud,IAAKzU,IAAI,WAAW0U,OAAO,YAAlD,YAGA,kBAAC,IAAD,CAAKjY,UAAWvF,KAAOud,IAAKzU,IAAI,WAAW0U,OAAO,YAAlD,aAKF,kBAAC,IAAD,CAAU1U,IAAI,WAAWuU,MAAM,WAAW9X,UAAWvF,KAAOsd,UAC1D,kBAAC,GAAD,CACEzW,IAAK,SAACC,GAAD,OAAS,EAAKqW,KAAK9T,SAAWvC,GACnCuD,KAAK,WACLhJ,SAAU5B,KAAKwB,MAAMI,SACrBse,aAAclgB,KAAKwB,MAAM0e,aACzBjG,UAAWja,KAAKwB,MAAMsgB,iBACtB3B,SAAUngB,KAAKwB,MAAMugB,mBACrBrC,kBAAmB1f,KAAKwB,MAAMke,kBAC9BhW,aAAc1J,KAAKwB,MAAMkI,aACzB/B,YAAa3H,KAAKwB,MAAMmG,eAI5B,kBAAC,IAAD,CAAU0B,IAAI,WAAWuU,MAAM,WAAW9X,UAAWvF,KAAOsd,UAC1D,yBAAK/X,UAAWvF,KAAOyhB,iBACrB,yGAIJ,kBAAC,IAAD,CAAU3Y,IAAI,QAAQuU,MAAM,QAAQ9X,UAAWvF,KAAOsd,UACpD,kBAAC,GAAD,CACEzW,IAAK,SAACC,GAAD,OAAS,EAAKqW,KAAKtd,MAAQiH,GAChCuD,KAAK,QACLwU,WAAW,EACXxd,SAAU5B,KAAKwB,MAAMI,SACrBse,aAAclgB,KAAKwB,MAAM0e,aACzBjG,UAAWja,KAAKwB,MAAMygB,cACtB9B,SAAUngB,KAAKwB,MAAM0gB,gBACrBxC,kBAAmB1f,KAAKwB,MAAMke,kBAC9BhW,aAAc1J,KAAKwB,MAAMkI,aACzB/B,YAAa3H,KAAKwB,MAAMmG,qB,GAhHZH,a,qBCE1B,SAAS8B,MAET,SAAS6Y,GAAW/hB,EAAOoB,GACzB,IAAIG,EAASH,EAAMG,OAEf+H,EAAelI,EAAMkI,aAEpBA,IACHA,EAAeJ,IAGjB,IAAIK,EAAmBnI,EAAMmI,iBAExBA,IACHA,EAAmBL,IAGrB,IAAI0G,EAAS5P,EAAMoQ,SAAS7F,KAAI,SAACtJ,GAC/B,IAAI2I,EAAcrI,EAAOsI,WAAW5I,GAEpC,OACE,kBAAC+H,EAAD,CAAoBC,IAAKhI,EAAK8I,WAC5B,kBAAC,EAAD,CACE7C,MAAO,CAAE0P,SAAU,WAAYoL,SAAU,OACzCzZ,QAAS,WACPe,EAAarI,KAGdA,EAAK8I,WAPV,OAUE,kBAAC,EAAD,CACEpB,QAASiB,EACThB,SAAU,WACRW,EAAiBtI,UAO3B,OAAO,kBAAC6H,EAAD,KAAiB8G,GA4FXqS,OAnFf,SAAmB7gB,GACjB,IAAIG,EAASH,EAAMG,OAEnB,IAAKA,EACH,OAAO,sDAGT,IAAI2gB,EAAc3gB,EAAO4gB,gBAEpBD,IACHA,EAAc,cAGhB,IAAIE,EAAmBhhB,EAAMghB,iBAExBA,IACHA,EAAmBlZ,IAGrB,IAAImZ,EACF,kBAAC,EAAD,CAAera,KAAK,cAClB,kBAAC,EAAD,uBACA,kBAAC,EAAD,KACE,yBAAKtC,UAAWvF,KAAOmiB,iBACrB,yBAAK5c,UAAWvF,KAAOoiB,YAAaL,GACpC,6BACE,kBAAC,EAAD,CAAe3Z,QAAS6Z,GAAxB,qBAON5Y,EAAWuY,GAAWxgB,EAAOsa,aAAY,GAAQza,GACjDuO,EAAUoS,GAAWxgB,EAAOma,YAAW,GAAQta,GAC/CyP,EAAYkR,GAAWxgB,EAAOia,cAAa,GAAQpa,GACnD0P,EAAeiR,GAAWxgB,EAAOka,iBAAgB,GAAQra,GACzDuS,EAASoO,GAAWxgB,EAAO8Z,WAAU,GAAQja,GAC7CoT,EAAauN,GAAWxgB,EAAOga,eAAc,GAAQna,GAEzD,OACE,kBAAC,EAAD,CAAWuG,uBAAuB,EAAOC,mBAAmB,GACzDya,EAED,kBAAC,EAAD,CAAera,KAAK,YAClB,kBAAC,EAAD,iBACA,kBAAC,EAAD,KAAiBwB,IAGnB,kBAAC,EAAD,CAAexB,KAAK,WAClB,kBAAC,EAAD,gBACA,kBAAC,EAAD,KAAiB2H,IAGnB,kBAAC,EAAD,CAAe3H,KAAK,UAClB,kBAAC,EAAD,eACA,kBAAC,EAAD,KAAiB2L,IAGnB,kBAAC,EAAD,CAAe3L,KAAK,cAClB,kBAAC,EAAD,mBACA,kBAAC,EAAD,KAAiBwM,IAGnB,kBAAC,EAAD,CAAexM,KAAK,aAClB,kBAAC,EAAD,kBACA,kBAAC,EAAD,KAAiB6I,IAGnB,kBAAC,EAAD,CAAe7I,KAAK,gBAClB,kBAAC,EAAD,qBACA,kBAAC,EAAD,KAAiB8I,M,mHClEV0R,OAxDf,YAOI,IANF3a,EAMC,EANDA,SAMC,IALD4a,cAKC,aAJD7L,gBAIC,MAJU,QAIV,MAHD1S,YAGC,MAHM,MAGN,MAFDwe,eAEC,MAFS,QAET,MADDC,eACC,MADS,KACT,EACG/c,EAAYzF,KAAOyiB,eACnBC,EAAaC,KACbC,EAAa,CAAE3jB,MAAO8E,EAAMiG,SAAUuY,GACtCM,EAAY,CAAE1jB,OAAQ4E,EAAM+e,UAAWP,GAEvCC,IACFI,EAAWf,SAAWW,EACtBK,EAAUE,UAAYP,GAGxB,IAAIzb,EAAQ6b,EAoBZ,MAlBiB,UAAbnM,GACFhR,EAAYzF,KAAOyiB,eACnBC,EAAaC,MACS,WAAblM,GACThR,EAAYzF,KAAOgjB,gBACnBN,EAAaO,KACblc,EAAQ8b,GACc,QAAbpM,GACThR,EAAYzF,KAAOkjB,aACnBR,EAAaS,KACbpc,EAAQ8b,GACc,SAAbpM,IACThR,EAAYzF,KAAOojB,cACnBV,EAAaW,MAGf5d,EAAS,UAAMA,EAAN,YAAmBzF,KAAOyF,WAGjC,kBAAC6d,GAAA,EAAD,CAAeC,GAAIjB,EAAQkB,QAAS,IAAKC,WAAYf,EAAYgB,eAAa,GAC5E,yBAAKne,UAAWE,EAAWsB,MAAOA,GAC/BW,K,wCC2BMic,G,kDAvEb,WAAY1iB,GAAQ,IAAD,8BACjB,cAAMA,IACDjC,MAAQ,CACX4kB,SAAS,GAHM,E,0DAQjBnkB,KAAKyM,SAAS,CACZ0X,SAAS,M,+BAIH,IAAD,OACH9iB,EAAOrB,KAAKwB,MAAMH,KAElBmX,EAAM,KAMV,OAJInX,GAAQA,EAAK+iB,SACf5L,EAAMnX,EAAK+iB,UAGR5L,EAgBH,yBAAK1S,UAAWvF,KAAOyF,WACrB,yBAAKF,UAAWvF,KAAOiY,KAAMA,GAC5BxY,KAAKT,MAAM4kB,QACV,yBAAKre,UAAWvF,KAAOyhB,iBACrB,gDACA,6BACE,kBAAC,KAAD,CAASpX,KAAK,kBAAkB9G,MAAM,QAAQugB,OAAO,WAGvD,KACJ,4BACEnG,IAAK1F,EACL/O,MAAO+O,EACPhZ,MAAM,OACNE,OAAO,MACP4kB,OAAQ,WACN,EAAKC,eAEPC,YAAY,IACZC,aAAa,IACbC,YAAY,IACZC,QAAQ,gBACR3N,SAAS,cApCX,yBAAKlR,UAAWvF,KAAOyF,WACrB,yBAAKF,UAAWvF,KAAOyhB,iBACpB3gB,EACD,6BACE,4BAAQyE,UAAWvF,KAAOmI,OAAQC,QAAS3I,KAAKwB,MAAMojB,WAAtD,gB,GA7BWrd,IAAMC,W,qBCK/B,SAASzJ,MAET,SAAS8mB,GAAcrjB,GACrB,IAAIoS,EAAUpS,EAAMoS,QAEpB,IAAKA,EACH,OAAO,KAGT,IAAIxT,EAAQ,GAMZ,OAJAwT,EAAQ9J,SAAQ,SAACzI,EAAMuD,GACrBxE,EAAM8J,KAAK,wBAAIb,IAAKzE,GAAQvD,OAGvB,4BAAKjB,G,IA8TC0kB,G,kDAtTb,WAAYtjB,GAAQ,IAAD,8BACjB,cAAMA,IACDjC,MAAQ,CACXgG,MAAO,GACPwf,YAAa,KACbC,UAAW,KACXpR,QAAS,MANM,E,+DAUAqR,GACbjlB,KAAKwB,MAAM0jB,aAAeD,EAAUC,YACtCllB,KAAKyM,SAAS,CACZlH,MAAO0f,EAAUC,e,iCAKZtR,GACT5T,KAAKyM,SAAS,CAAEuY,UAAW,KAAMD,YAAa,KAAMnR,QAASA,M,qCAGhDmR,GACb/kB,KAAKyM,SAAS,CAAEuY,UAAW,KAAMD,YAAaA,EAAanR,QAAS,S,sCAGtDpP,GACd,IAAI7C,EAAS3B,KAAKwB,MAAMG,OACxB,GAAKA,EAAL,CAIA,IAAIvB,EAAQ,KAEZ,IACEA,EAAQuB,EAAO+Z,KAAKlX,GACpB,MAAOR,GACP5D,EAAQ,KAGV,IAAIsJ,EAAe1J,KAAKwB,MAAMkI,aAM9B,GAJKA,IACHA,EAAe3L,IAGbqC,EAAO,CACT,IAAIwT,EAAUxT,EAAMuK,KAAI,SAACtJ,EAAMuD,GAC7B,IAAIgG,EAAOvJ,EAAK8I,UAChB,OACE,kBAAC,EAAD,CACEd,IAAKuB,EAAKuR,OAAO,IAAKvX,GACtB+D,QAAS,WACPe,EAAarI,IAEfiG,MAAO,CAAE9H,MAAO,SAEfoL,MAKP5K,KAAKmlB,eAAevR,QAEpB5T,KAAKmlB,eAAe,S,kCAIZ3gB,GACV,IAAI7C,EAAS3B,KAAKwB,MAAMG,OAExB,GAAKA,EAAL,CAKA,IAAIvB,EAAQ,KAEZ,IACEA,EAAQuB,EAAO+Z,KAAKlX,GACpB,MAAOR,GACPD,QAAQC,MAAMA,GACd5D,EAAQ,KAGV,IAAIsJ,EAAe1J,KAAKwB,MAAMkI,aAM9B,GAJKA,IACHA,EAAe3L,IAGbqC,EAAO,CACT,IAAIwT,EAAUxT,EAAMuK,KAAI,SAACtJ,EAAMuD,GAC7B,IAAIgG,EAAOvJ,EAAK8I,UAChB,OACE,kBAAC,EAAD,CACEd,IAAKuB,EAAKuR,OAAO,IAAKvX,GACtB+D,QAAS,WACPe,EAAarI,IAEfiG,MAAO,CAAE9H,MAAO,SAEfoL,MAKP5K,KAAKolB,WAAWxR,QAEhB5T,KAAKolB,WAAW,CAAC,yBAAK/b,IAAI,cAAT,6BArCjBrJ,KAAKolB,WAAW,CAAC,yBAAK/b,IAAI,aAAT,mB,gCAyCX7E,GAAO,IAAD,OACVA,GAAQA,EAAKrC,OAAS,GACxBnC,KAAKyM,SAAS,CAAEuY,UAAWxgB,EAAMugB,YAAa,KAAMnR,QAAS,OAE7DyR,YAAW,WACT,EAAKC,YAAY9gB,KAChB,KAEHxE,KAAKyM,SAAS,CAAEsY,YAAa,KAAMC,UAAW,KAAMpR,QAAS,S,mCAIpDpP,GACPA,GAAQA,EAAKrC,OAAS,EACxBnC,KAAKulB,gBAAgB/gB,GAErBxE,KAAKyM,SAAS,CAAEsY,YAAa,KAAMC,UAAW,KAAMpR,QAAS,S,oCAK/D,OAAgC,OAAzB5T,KAAKT,MAAMylB,Y,qCAIlB,OAAkC,OAA3BhlB,KAAKT,MAAMwlB,c,mCAIlB,OAA8B,OAAvB/kB,KAAKT,MAAMqU,U,mCAIlB5T,KAAKyM,SAAS,CAAEuY,UAAW,KAAMD,YAAa,KAAMnR,QAAS,S,+BAGtD4R,GACHxlB,KAAKylB,gBAITzlB,KAAKyM,SAAS,CAAElH,MAAOigB,EAAM1kB,OAAOyE,QACpCvF,KAAK0lB,aAAaF,EAAM1kB,OAAOyE,U,8BAGzBigB,GACN,IAAIxlB,KAAKylB,gBAAiBzlB,KAAK2lB,UAA/B,EAIiB,KACMH,EAAMI,OADZ,KACkCJ,EAAMK,UAGvD7lB,KAAK8lB,UAAUN,EAAM1kB,OAAOyE,U,iCAK1BvF,KAAKylB,eAAiBzlB,KAAK2lB,WAI/B3lB,KAAK8lB,UAAU9lB,KAAKT,MAAMgG,S,gCAI1B,QAASvF,KAAKT,MAAMgG,OAASvF,KAAKT,MAAMgG,MAAMpD,OAAS,K,+BAG/C,IAAD,OACH4jB,EAAexlB,KAAOylB,aAM1B,OAJIhmB,KAAKylB,eAAiBzlB,KAAK2lB,aAC7BI,EAAexlB,KAAO0lB,gBAItB,yBAAKngB,UAAWvF,KAAOyF,WACrB,yBAAKF,UAAWvF,KAAO2lB,iBACrB,4BAAQpgB,UAAWvF,KAAO4lB,gBAAiBxd,QAAS3I,KAAKwB,MAAM4kB,sBAA/D,UAGA,2BACEtgB,UAAWvF,KAAO8lB,UAClBrd,SAAU,SAACwc,GACT,EAAKxc,SAASwc,IAEhBc,WAAY,SAACd,GACX,EAAKe,QAAQf,IAEfgB,YAAaxmB,KAAKwB,MAAMglB,YACxB1d,KAAK,OACLvD,MAAOvF,KAAKT,MAAMgG,QAEpB,yBACEO,UAAWigB,EACXpd,QAAS,WACP,EAAK8d,aAGP,yBAAK3gB,UAAWvF,KAAOmmB,WAAvB,YAGH1mB,KAAKylB,cACJ,yBAAK3f,UAAWvF,KAAO2lB,iBACrB,yBAAKpgB,UAAWvF,KAAOomB,iBACrB,yBACE7gB,UAAWvF,KAAOqmB,kBAClBje,QAAS,WACP,EAAKke,eAHT,KAQA,yBAAK/gB,UAAWvF,KAAOumB,eACrB,+CAA0B9mB,KAAKT,MAAMylB,UAArC,QACA,yBAAK1d,MAAO,CAAEyf,QAAS,iBACrB,kBAAC,KAAD,CAASnc,KAAK,kBAAkB9G,MAAM,QAAQugB,OAAO,WAGzD,yBACEve,UAAWvF,KAAOqmB,kBAClBje,QAAS,WACP,EAAKke,eAHT,OAUF,KACH7mB,KAAKgnB,eACJ,yBAAKlhB,UAAWvF,KAAO2lB,iBACrB,yBAAKpgB,UAAWvF,KAAOomB,iBACrB,yBACE7gB,UAAWvF,KAAOqmB,kBAClBje,QAAS,WACP,EAAK8D,SAAS,CAAEsY,YAAa,SAHjC,KAQA,yBAAKjf,UAAWvF,KAAO0mB,cACrB,kBAACpC,GAAD,CAAejR,QAAS5T,KAAKT,MAAMwlB,eAErC,yBACEjf,UAAWvF,KAAOqmB,kBAClBje,QAAS,WACP,EAAK8D,SAAS,CAAEsY,YAAa,SAHjC,OAUF,KACH/kB,KAAKknB,aACJ,yBAAKphB,UAAWvF,KAAO2lB,iBACrB,yBAAKpgB,UAAWvF,KAAOomB,iBACrB,yBACE7gB,UAAWvF,KAAOqmB,kBAClBje,QAAS,WACP,EAAK8D,SAAS,CAAEmH,QAAS,SAH7B,KAQA,yBAAK9N,UAAWvF,KAAO0mB,cACrB,kBAACpC,GAAD,CAAejR,QAAS5T,KAAKT,MAAMqU,WAErC,yBACE9N,UAAWvF,KAAOqmB,kBAClBje,QAAS,WACP,EAAK8D,SAAS,CAAEmH,QAAS,SAH7B,OAUF,U,GAvSYrM,IAAMC,W,qBCUf2f,OAtCf,SAAoB3lB,GAClB,IAAKA,EAAMpB,MACT,OAAO,wCAGT,IAAIgnB,EAAU,GAyBd,OAvBA5lB,EAAMpB,MAAM0J,SAAQ,SAACzI,EAAMuD,GACzB,IAAIyiB,EAAOhmB,EAAK,GAEZG,EAAMojB,YACRyC,EAAO,WACL7lB,EAAMojB,YACNvjB,EAAK,OAIT+lB,EAAQld,KACN,4BACEb,IAAKzE,EACLkB,UAAWvF,KAAO+mB,SAClB3e,QAAS,WACP0e,MAGDhmB,EAAK,QAKL,yBAAKyE,UAAWvF,KAAOgnB,MAAOH,ICkBxBI,G,kDA/Cb,WAAYhmB,GAAQ,IAAD,8BACjB,cAAMA,IAEDjC,MAAQ,CAAEkoB,SAAU,IAHR,E,sDAMTpmB,GAER,IAAMqmB,EAAWrmB,EAAK8I,UAEtB,GAAIud,IAAa1nB,KAAKT,MAAMkoB,SAI1B,OAHAznB,KAAKwB,MAAMmmB,oBAEX3nB,KAAKyM,SAAS,CAAEgb,SAAU,KAI5BznB,KAAKyM,SAAS,CAAEgb,SAAUC,IAC1B1nB,KAAKwB,MAAMomB,WAAWvmB,K,+BAGd,IAAD,OAgBP,OAferB,KAAKwB,MAAMoI,SAGJ4G,SAAS7F,KAAI,SAACtJ,GAClC,OACE,kBAAC,EAAD,CACEgI,IAAKhI,EAAK8I,UACV7C,MAAO,CAAE0P,SAAU,WAAYoL,SAAU,OACzCzZ,QAAS,kBAAM,EAAKkf,UAAUxmB,KAE7BA,EAAK8I,kB,GAjCW5C,IAAMC,W,qBCiBlBsgB,OAjBf,SAAmBtmB,GACjB,OAAkB,MAAdA,EAAMoJ,KACD,KAGL,4BAAQnC,KAAK,IAAI3C,UAAWvF,KAAOmI,OAAQpB,MAAO9F,EAAM8F,OACrD9F,EAAMoJ,O,+BCiBTmd,G,kDACJ,WAAYvmB,GAAQ,IAAD,uBACjB,cAAMA,IAEDwmB,aAAe,EAAKA,aAAarhB,KAAlB,gBACpB,EAAKghB,aAAe,EAAKA,aAAahhB,KAAlB,gBAGpB,IAAIhF,EAAS6M,IAAIyZ,MAAMC,IAPN,OAQjBnkB,QAAQ8B,IAAIlE,GAENA,aAAkB0X,KACtBtV,QAAQ8B,IAAI,oBACZlE,EAAS,IAAI0X,IAIf1X,EAAOwmB,UAAU,UACjBxmB,EAAOymB,aAAa,IAAI/a,GAAU,CAAEf,MAAO,aAAcC,IAAK,gBAE9D,EAAKhN,MAAQ,CACXoC,OAAQA,EACR0mB,iBAAkB,KAClBC,cAAe,KACfC,aAAc,KACdC,iBAAiB,EACjBC,qBAAqB,EACrBC,mBAAmB,EACnBC,qBAAqB,EACrB3U,SAAU,IAAI0N,GACdkH,eAAe,EACfC,eAAe,EACfC,aAAc,MAGhB,EAAKC,YAAc,KAlCF,E,2DAsCjB,IAAIpnB,EAAS3B,KAAKT,MAAMoC,OACxBA,EAAOgmB,eACP3nB,KAAKyM,SAAS,CAAE9K,OAAQA,EAAQ,aAAgB,S,oCAIhD3B,KAAKyM,SAAS,CACZ+b,iBAAiB,EACjBC,qBAAqB,EACrBE,qBAAqB,EACrBD,mBAAmB,EACnBL,iBAAkB,S,qCAKpBroB,KAAKyM,SAAS,CACZmc,eAAe,EACfL,aAAc,S,+BAITlnB,GACHA,EAAKoX,kBACPzY,KAAKyM,SAAS,CACZ8b,aAAclnB,EACdunB,eAAe,IAGjB5oB,KAAKyM,SAAS,CACZ6b,cAAejnB,EACfmnB,iBAAiB,M,yCAMrBxoB,KAAK2nB,iB,oCAGOtmB,GACZrB,KAAK2nB,eACL3nB,KAAKgpB,iBAAiB3nB,GACtBrB,KAAKyM,SAAS,CAAEqc,aAAcznB,EAAK8I,c,uCAGpB9I,GACf,GAAKA,EAAL,CAIA,IAAIM,EAAS3B,KAAKT,MAAMoC,OACxBA,EAAOsnB,aAAa5nB,GAEpBrB,KAAKyM,SAAS9K,M,sCAGAzB,GACTA,IAIDA,EAAG6K,qBAIP/K,KAAKyM,SAAS,CAAE4b,iBAAkBnoB,O,mCAGvBA,GACX,GAAKA,EAKL,GAAIA,EAAG6K,oBAAP,CACE,IAAIpJ,EAAS3B,KAAKT,MAAMoC,OACpBA,EAAOqZ,UAAU9a,IACnBF,KAAKyM,SAAS,CAAE9K,OAAQA,QAH5B,CAQA,IACMN,EADSrB,KAAKT,MAAMoC,OACNoI,IAAI7J,GACxBF,KAAKkpB,SAAS7nB,QAdZrB,KAAKmpB,gB,wCAiBSviB,GAChB,IAAIjF,EAAS3B,KAAKT,MAAMoC,OAEpBA,EAAOqZ,UAAUpU,IACnB5G,KAAKyM,SAAS,CAAE9K,OAAQA,M,wCAkB1B3B,KAAKyM,SAAS,CAAE+b,iBAAkBxoB,KAAKT,MAAMipB,oB,4CAI7CxoB,KAAKyM,SAAS,CACZic,mBAAmB,EACnBD,qBAAsBzoB,KAAKT,MAAMkpB,wB,0CAKnCzoB,KAAKyM,SAAS,CACZgc,qBAAqB,EACrBC,mBAAoB1oB,KAAKT,MAAMmpB,sB,qCAKjC1oB,KAAKyM,SAAS,CAAEoc,eAAgB7oB,KAAKT,MAAMspB,kB,kCAQ3C,IAAIxnB,EACF,6BACE,kOAIA,mFACsD,IACpD,uBAAGoH,KAAK,wCAAR,uBAINzI,KAAKyM,SAAS,CACZ8b,aAAclnB,EACdunB,eAAe,M,mCAKjB7kB,QAAQ8B,IAAI,eACFe,OAAOwiB,KAAK,uCAAwC,UAC1DC,U,iCAIJtlB,QAAQ8B,IAAI,aACZe,OAAO0iB,SAASC,QAAO,K,+BAGf,IAAD,OACD3nB,EAAW5B,KAAKT,MAAM+oB,cACtBzmB,EAAc7B,KAAKT,MAAM8oB,iBACzBE,EAAevoB,KAAKT,MAAMgpB,aAC1B5mB,EAAS3B,KAAKT,MAAMoC,OAEtB4lB,EAAO,GA2BX,OAnBAA,EAAKrd,KAAK,CACR,QACA,WACE,EAAKsf,eAGTjC,EAAKrd,KAAK,CACR,cACA,WACE,EAAKuf,gBAGTlC,EAAKrd,KAAK,CACR,QACA,WACE,EAAKwf,cAKP,6BACE,kBAAC,IAAD,CACE7G,OAAQ7iB,KAAKT,MAAMqpB,cACnBe,eAAgB,WACd,EAAKC,gBAEPC,aAAa,sBACb/jB,UAAWvF,KAAOupB,MAClBC,iBAAkB,CAChBC,KAAMzpB,KAAO0pB,aACbC,UAAW3pB,KAAO4pB,sBAClBC,YAAa7pB,KAAO8pB,yBAEtBC,eAAgB,IAChBC,WAAYC,SAASC,eAAe,SAEpC,yBACE3kB,UAAWvF,KAAOmqB,mBAClB/hB,QAAS,WACP,EAAKihB,iBAHT,KAQA,kBAAC,GAAD,CACEvoB,KAAMknB,EACN3D,UAAW,WACT,EAAKgF,mBAKX,kBAAC,GAAD,CACEjoB,OAAQA,EACRykB,qBAAsB,WACpB,EAAK3Z,SAAS,CACZkc,qBAAsB,EAAKppB,MAAMopB,uBAGrCjf,aAAc,SAACrI,GACb,EAAKspB,aAAatpB,IAEpBupB,gBAAiB,SAACvpB,GAChB,EAAKwpB,gBAAgBxpB,IAEvBsG,YAAa,SAACtG,GACZ,EAAKypB,YAAYzpB,MAIrB,kBAAC,GAAD,CAAcwhB,OAAQ7iB,KAAKT,MAAMkpB,oBAAqBzR,SAAS,UAC7D,0BACElR,UAAWvF,KAAOwqB,iBAClBpiB,QAAS,WACP,EAAK8D,SAAS,CAAEgc,qBAAqB,MAHzC,KAQA,kBAAC,GAAD,CACE7mB,SAAUA,EACVse,aAAc,WACZ,OAAO,EAAK3gB,MAAMoC,OAAOue,gBAE3B4B,iBAAkB,WAChB,OAAO,EAAKviB,MAAMoC,OAAOsY,aAE3BgI,cAAe,WACb,OAAO,EAAK1iB,MAAMoC,OAAOsY,aAE3B8H,mBAAoB,WAClB,OAAO,EAAKxiB,MAAMoC,OAAOogB,sBAE3BG,gBAAiB,WACf,OAAO,EAAK3iB,MAAMoC,OAAOugB,mBAE3Bva,YAAa,SAACtG,GACZ,EAAKypB,YAAYzpB,IAEnBqI,aAAc,SAACrI,GACb,EAAKspB,aAAatpB,IAEpBupB,gBAAiB,SAACvpB,GAChB,EAAKwpB,gBAAgBxpB,IAEvBqe,kBAAmB,SAAC9Y,GAClB,EAAKokB,kBAAkBpkB,OAM7B,kBAAC,GAAD,CAAcic,OAAQ7iB,KAAKT,MAAMipB,gBAAiBxR,SAAS,SACzD,0BACElR,UAAWvF,KAAOwqB,iBAClBpiB,QAAS,WACP,EAAK8D,SAAS,CAAE+b,iBAAiB,MAHrC,KAQA,kBAAC,GAAD,CACEnnB,KAAMO,EACND,OAAQA,EACR+H,aAAc,SAACrI,GACb,EAAKspB,aAAatpB,IAEpBupB,gBAAiB,SAACvpB,GAChB,EAAKwpB,gBAAgBxpB,IAEvBsI,iBAAkB,SAACtI,GACjB,EAAK2nB,iBAAiB3nB,OAM5B,kBAAC,GAAD,CAAcwhB,OAAQ7iB,KAAKT,MAAMmpB,kBAAmB1R,SAAS,UAC3D,0BACElR,UAAWvF,KAAOwqB,iBAClBpiB,QAAS,WACP,EAAK8D,SAAS,CAAEic,mBAAmB,MAHvC,KAQA,kBAAC,GAAD,CACE/mB,OAAQA,EACRgI,iBAAkB,SAACtI,GACjB,EAAK2nB,iBAAiB3nB,IAExBqI,aAAc,SAACrI,GACb,EAAKspB,aAAatpB,IAEpBupB,gBAAiB,SAACvpB,GAChB,EAAKwpB,gBAAgBxpB,IAEvBmhB,iBAAkB,WAChB,EAAKyI,uBAMX,kBAAC,GAAD,CAAcpI,OAAQ7iB,KAAKT,MAAMopB,oBAAqB3R,SAAS,OAAO1S,KAAK,QAAQwe,QAAQ,SACzF,kBAAC,GAAD,CACE8B,UAAW,WACT,EAAKnY,SAAS,CAAEkc,qBAAqB,KAEvCvoB,MAAOmnB,KAKX,yBAAKzhB,UAAWvF,KAAO2qB,gBACrB,kBAAC,EAAD,CACEvpB,OAAQ3B,KAAKT,MAAMoC,OACnBC,SAAUA,EACVC,YAAaA,EACb8F,YAAa,SAACzH,GAAD,OAAQ,EAAKyqB,aAAazqB,IACvCqD,OAAQvD,KAAKT,MAAMspB,iBAIvB,yBAAK/iB,UAAWvF,KAAO4qB,mBACrB,kBAAC,GAAD,CAAWvgB,KAAM5K,KAAKT,MAAMupB,gBAG9B,yBAAKhjB,UAAWvF,KAAOgjB,iBACrB,kBAAC,GAAD,CACE3Z,SAAU5J,KAAKT,MAAMoC,OAAOsa,cAC5B2L,WAAY,SAACvmB,GAAD,OAAU,EAAK+pB,cAAc/pB,IACzCsmB,aAAc3nB,KAAK2nB,gBAKvB,yBAAK7hB,UAAWvF,KAAO8qB,WACrB,6BACE,kBAAC,EAAD,CACE1iB,QAAS,WACP,EAAK2iB,sBAFT,YAQF,6BACE,kBAAC,EAAD,CAAe3iB,QAAS,kBAAM,EAAK4iB,wBAAwB,aAE7D,6BACE,kBAAC,EAAD,CAAe5iB,QAAS3I,KAAKgoB,cAA7B,iB,GA7aYzgB,IAAMC,WAqbfugB,c,oBChdflqB,EAAOC,QAAU,CAAC,UAAY,+BAA+B,gBAAkB,qCAAqC,KAAO,0BAA0B,QAAU,6BAA6B,IAAM,yBAAyB,SAAW,gC,oBCAtOD,EAAOC,QAAU,CAAC,gBAAkB,qC,oBCApCD,EAAOC,QAAU,CAAC,UAAY,gCAAgC,cAAgB,oCAAoC,eAAiB,qCAAqC,aAAe,mCAAmC,gBAAkB,wC,oBCA5OD,EAAOC,QAAU,CAAC,MAAQ,6BAA6B,YAAc,mCAAmC,KAAO,4BAA4B,WAAa,oC,oBCAxJD,EAAOC,QAAU,CAAC,MAAQ,8BAA8B,YAAc,oCAAoC,KAAO,6BAA6B,WAAa,qC,oBCA3JD,EAAOC,QAAU,CAAC,MAAQ,+BAA+B,YAAc,qCAAqC,KAAO,8BAA8B,WAAa,sC,oBCA9JD,EAAOC,QAAU,CAAC,MAAQ,4BAA4B,YAAc,kCAAkC,KAAO,2BAA2B,WAAa,mC,oBCArJD,EAAOC,QAAU,CAAC,UAAY,8BAA8B,gBAAkB,oCAAoC,OAAS,2BAA2B,IAAM,0B,oBCA5JD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,gBAAkB,mCAAmC,gBAAkB,mCAAmC,cAAgB,iCAAiC,aAAe,gCAAgC,gBAAkB,mCAAmC,UAAY,6BAA6B,eAAiB,kCAAkC,aAAe,gCAAgC,UAAY,6BAA6B,kBAAoB,uC,oBCAlgBD,EAAOC,QAAU,CAAC,KAAO,yBAAyB,SAAW,+B,oBCA7DD,EAAOC,QAAU,CAAC,OAAS,4B,8lnUCA3BD,EAAOC,QAAU,CAAC,OAAS,0BAA0B,eAAiB,kCAAkC,kBAAoB,qCAAqC,cAAgB,iCAAiC,gBAAkB,mCAAmC,gBAAkB,mCAAmC,UAAY,6BAA6B,WAAa,8BAA8B,aAAe,gCAAgC,iBAAmB,oCAAoC,mBAAqB,sCAAsC,MAAQ,yBAAyB,aAAe,gCAAgC,sBAAwB,yCAAyC,wBAA0B","file":"static/js/3.f1afed44.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ForceGraph_container__TQtWA\",\"graph\":\"ForceGraph_graph__wst6B\",\"node\":\"ForceGraph_node__27s5W\",\"highlight\":\"ForceGraph_highlight__DhZbw\",\"link\":\"ForceGraph_link__2qaVU\",\"node_text\":\"ForceGraph_node_text__3ovHB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"accordion\":\"Accordion_accordion__34t4_\",\"accordionItem\":\"Accordion_accordionItem__VO6pK\",\"accordionButton\":\"Accordion_accordionButton__hVXWw\",\"accordionPanel\":\"Accordion_accordionPanel__1rZAH\",\"fadein\":\"Accordion_fadein__2cKpJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"DefaultButton_button__1Uv_G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"checkBox\":\"CheckBox_checkBox__36R4T\",\"checkMark\":\"CheckBox_checkMark__2h9Jd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"ResponsiveList_list__1-ZoE\",\"item\":\"ResponsiveList_item__3jhI7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"project\":\"GroupsList_project__1pnkG\",\"projectHeader\":\"GroupsList_projectHeader__1YDl_\",\"projectBody\":\"GroupsList_projectBody__2Joe0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"connections\":\"ConnectionList_connections__2QbO3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"project\":\"WeightsList_project__3m0SJ\",\"projectHeader\":\"WeightsList_projectHeader__25IKl\",\"projectBody\":\"WeightsList_projectBody__3JVF3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"InfoBox_container__2EWGz\",\"heroImage\":\"InfoBox_heroImage__34BXw\",\"title\":\"InfoBox_title__2rO4Z\",\"button\":\"InfoBox_button__3w2z7\",\"tabs\":\"InfoBox_tabs__32XI5\",\"tablist\":\"InfoBox_tablist__3mBju\",\"tab\":\"InfoBox_tab__qp9XR\",\"tabPanel\":\"InfoBox_tabPanel__3FpOY\"};","module.exports = __webpack_public_path__ + \"static/media/RHowlett_IKB.68e88d10.jpg\";","module.exports = __webpack_public_path__ + \"static/media/IllustriteZeitung_SS_GreatBritain.946104e0.png\";","module.exports = __webpack_public_path__ + \"static/media/320px-SS_Great_Britain_diagram.898c32f6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Sumerian_26th_c_Adab.757d98b8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/320px-SS_Great_Britain_transverse_section.7767cb60.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonGroup\":\"TimeLineView_buttonGroup__2GQ9k\",\"datePicker\":\"TimeLineView_datePicker__1VM6E\",\"zoomButton\":\"TimeLineView_zoomButton__2X6JE\",\"scrollButton\":\"TimeLineView_scrollButton__pbyum\"};","import * as d3 from \"d3\";\n\nimport lodash from \"lodash\";\n\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport styles from \"../ForceGraph.module.css\";\n\nfunction _null_function() {}\n\nfunction constrain(x, w, r = 20) {\n  return Math.max(r, Math.min(w - r, x));\n}\n\nfunction dragLink(THIS) {\n  let simulation = THIS._simulation;\n\n  function dragstarted(d) {\n    simulation.alphaTarget(THIS._target_alpha).velocityDecay(THIS._target_decay).restart();\n\n    //find the two nodes connected to this edge\n    let source = THIS._graph.nodes[d.source.index];\n    let target = THIS._graph.nodes[d.target.index];\n\n    //fix those nodes in place\n    source.fx = source.x;\n    source.fy = source.y;\n\n    target.fx = target.x;\n    target.fy = target.y;\n  }\n\n  function dragged(d) {\n    if (!THIS._is_running) simulation.restart();\n\n    //find the two nodes connected to this edge\n    let source = THIS._graph.nodes[d.source.index];\n    let target = THIS._graph.nodes[d.target.index];\n\n    //moves those nodes with the event - move the center point of the\n    //line connecting these two nodes...\n    let dx = 0.5 * (target.x - source.x);\n    let dy = 0.5 * (target.y - source.y);\n\n    source.fx = constrain(d3.event.x - dx, THIS.state.width, source.r);\n    source.fy = constrain(d3.event.y - dy, THIS.state.height, source.r);\n\n    target.fx = constrain(d3.event.x + dx, THIS.state.width, target.r);\n    target.fy = constrain(d3.event.y + dy, THIS.state.height, target.r);\n  }\n\n  function dragended(d) {\n    simulation.alphaTarget(0).restart();\n\n    //find the two nodes connected to this edge\n    let source = THIS._graph.nodes[d.source.index];\n    let target = THIS._graph.nodes[d.target.index];\n\n    if (!source.fixed) {\n      source.fx = null;\n      source.fy = null;\n    }\n\n    if (!target.fixed) {\n      target.fx = null;\n      target.fy = null;\n    }\n  }\n\n  return d3.drag().on(\"start\", dragstarted).on(\"drag\", dragged).on(\"end\", dragended);\n}\n\nfunction drag(THIS) {\n  let simulation = THIS._simulation;\n\n  function dragstarted(d) {\n    simulation.alphaTarget(THIS._target_alpha).velocityDecay(THIS._target_decay).restart();\n\n    d.fx = d.x;\n    d.fy = d.y;\n  }\n\n  function dragged(d) {\n    if (!THIS._is_running) simulation.restart();\n\n    let w = THIS.state.width;\n    let h = THIS.state.height;\n\n    d.fx = constrain(d3.event.x, w, d.r);\n    d.fy = constrain(d3.event.y, h, d.r);\n  }\n\n  function dragended(d) {\n    simulation.alphaTarget(0).restart();\n\n    if (!d.fixed) {\n      d.fx = null;\n      d.fy = null;\n    }\n  }\n\n  return d3.drag().on(\"start\", dragstarted).on(\"drag\", dragged).on(\"end\", dragended);\n}\n\nfunction handleMouseClick(THIS) {\n  function handle() {\n    let svg = THIS._mainGroup;\n    if (!svg) {\n      return;\n    }\n\n    let node = d3.select(this);\n    node.raise();\n\n    let id = node.attr(\"id\");\n\n    if (!id) {\n      return;\n    }\n\n    let items = svg.selectAll(`#${id}`);\n\n    items.classed(styles.highlight, true);\n\n    items = svg.selectAll(`[source_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    items = svg.selectAll(`[target_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    THIS.state.signalClicked(id);\n    d3.event.stopPropagation();\n  }\n\n  return handle;\n}\n\nfunction handleMouseOver(THIS) {\n  function handle() {\n    let svg = THIS._mainGroup;\n    if (!svg) {\n      return;\n    }\n\n    let node = d3.select(this);\n    node.raise();\n\n    let id = node.attr(\"id\");\n\n    if (!id) {\n      return;\n    }\n\n    //highlight the node\n    let items = svg.selectAll(`#${id}`);\n    items.classed(styles.highlight, true);\n\n    //highlight the connection lines with this node as a source\n    items = svg.selectAll(`[source_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    //highlight the nodes with this node as a target\n    items.each((d) => {\n      let target_id = d.target.id;\n      svg.selectAll(`#${target_id}`).classed(styles.highlight, true);\n    });\n\n    //highlight the connection lines with this node as a target\n    items = svg.selectAll(`[target_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    //highlight the nodes with this node as a source\n    items.each((d) => {\n      let source_id = d.source.id;\n      svg.selectAll(`#${source_id}`).classed(styles.highlight, true);\n    });\n\n    if (node.attr(\"source_id\")) {\n      svg.selectAll(`#${node.attr(\"source_id\")}`).classed(styles.highlight, true);\n\n      svg.selectAll(`#${node.attr(\"target_id\")}`).classed(styles.highlight, true);\n    }\n\n    THIS.state.signalMouseOver(id);\n  }\n\n  return handle;\n}\n\nfunction handleMouseOut(THIS) {\n  function handle() {\n    let svg = THIS._mainGroup;\n    if (!svg) {\n      return;\n    }\n\n    let node = d3.select(this);\n    let id = node.attr(\"id\");\n\n    let items = svg.selectAll(`#${id}`);\n\n    items.classed(styles.highlight, false);\n\n    //highlight the connection lines with this node as a source\n    items = svg.selectAll(`[source_id=${id}]`);\n    items.classed(styles.highlight, false);\n\n    //highlight the nodes with this node as a target\n    items.each((d) => {\n      let target_id = d.target.id;\n      svg.selectAll(`#${target_id}`).classed(styles.highlight, false);\n    });\n\n    //highlight the connection lines with this node as a target\n    items = svg.selectAll(`[target_id=${id}]`);\n    items.classed(styles.highlight, false);\n\n    //highlight the nodes with this node as a source\n    items.each((d) => {\n      let source_id = d.source.id;\n      svg.selectAll(`#${source_id}`).classed(styles.highlight, false);\n    });\n\n    if (node.attr(\"source_id\")) {\n      svg.selectAll(`#${node.attr(\"source_id\")}`).classed(styles.highlight, false);\n\n      svg.selectAll(`#${node.attr(\"target_id\")}`).classed(styles.highlight, false);\n    }\n\n    THIS.state.signalMouseOut(id);\n  }\n\n  return handle;\n}\n\nfunction _resolve(item) {\n  if (!item) {\n    return null;\n  } else if (item.getID) {\n    return item.getID();\n  } else {\n    return item;\n  }\n}\n\n/** The main class that renders the graph in the ForceGraph */\nclass ForceGraphD3 {\n  constructor(props) {\n    // generate a UID for this graph so that we don't clash\n    // with any other graphs on the same page\n    let uid = uuidv4();\n\n    this.state = {\n      width: null,\n      height: null,\n      social: null,\n      selected: null,\n      highlighted: null,\n      signalClicked: _null_function,\n      signalMouseOut: _null_function,\n      signalMouseOver: _null_function,\n      //   Fix the colours here\n      colors: { \"J30ea52b:Jd0174de\": \"#FF0000\", anchor: \"#FFFFFF\", Jd0174de: \"#9a9a9a\", J30ea52b: \"#9f1d35\" },\n      //   colors: {\n      //     color: d3.scaleOrdinal(d3.schemeCategory10),\n      //     last_color: -1,\n      //     group_to_color: {},\n      //   },\n      uid: uid.slice(uid.length - 8),\n    };\n\n    this._size_changed = true;\n    this._graph_changed = true;\n    this._is_running = false;\n\n    // Set parameters for the force simulation\n    this._target_decay = 0.4;\n    this._target_alpha = 0.3;\n\n    this.update(props);\n  }\n\n  updateGraph(social) {\n    let w = this.state.width;\n    let h = this.state.height;\n\n    this.state.social = social;\n\n    if (!w || !h) {\n      return;\n    }\n\n    let graph = null;\n\n    if (social) {\n      graph = social.getGraph();\n    }\n\n    // the social object will cache the 'getGraph' result, meaning\n    // that any change in this object signals that the graph needs\n    // to be redrawn\n    if (graph !== this.state.graph) {\n      //save the cached graph\n      this.state.graph = graph;\n\n      //this view needs to clone its own copy of the graph, as\n      //D3 will update the graph object. We need to clone in case\n      //two ForceGraph.d3 views are viewing the same Social graph\n      graph = lodash.cloneDeep(this.state.graph);\n\n      // need to update IDs so that the edges refer to the index\n      // of the node in the nodes array - this could be optimised!\n      for (let l in graph.edges) {\n        let edge = graph.edges[l];\n        for (let n in graph.nodes) {\n          let node = graph.nodes[n];\n          if (edge.source === node.id) {\n            edge.source = n;\n            edge.source_id = node.id;\n          } else if (edge.target === node.id) {\n            edge.target = n;\n            edge.target_id = node.id;\n          }\n        }\n      }\n\n      //index any old nodes\n      let old_nodes = [];\n      let old = {};\n\n      if (this._graph) {\n        old_nodes = this._graph.nodes;\n\n        for (let n in old_nodes) {\n          old[old_nodes[n].id] = n;\n        }\n      }\n\n      for (let n in graph.nodes) {\n        let node = graph.nodes[n];\n\n        let i = old[node.id];\n\n        if (i) {\n          let o = old_nodes[i];\n          node.x = o.x;\n          node.y = o.y;\n        } else {\n          node.x = w * Math.random();\n          node.y = h * Math.random();\n        }\n\n        if (node.fixed) {\n          if (i) {\n            node.fx = node.x;\n            node.fy = node.y;\n          } else {\n            node.fx = w / 2;\n            node.fy = h / 2;\n          }\n        }\n      }\n\n      this._graph = graph;\n      this._graph_changed = true;\n    }\n  }\n\n  update(props) {\n    let size_changed = false;\n\n    if (props.wobble) {\n      this._target_decay = 0.4;\n      this._target_alpha = 0.3;\n    } else {\n      this._target_decay = 0.4;\n      this._target_alpha = 0;\n    }\n\n    let hasWidth = Object.prototype.hasOwnProperty.call(props, \"width\");\n    if (hasWidth) {\n      if (this.state.width !== props.width) {\n        this.state.width = props.width;\n        size_changed = true;\n      }\n    }\n\n    let hasHeight = Object.prototype.hasOwnProperty.call(props, \"height\");\n    if (hasHeight) {\n      if (this.state.height !== props.height) {\n        this.state.height = props.height;\n        size_changed = true;\n      }\n    }\n\n    if (size_changed) {\n      this._size_changed = true;\n    }\n\n    let hasSignalClicked = Object.prototype.hasOwnProperty.call(props, \"signalClicked\");\n\n    if (hasSignalClicked) {\n      if (this.state.signalClicked) {\n        this.state.signalClicked = props.signalClicked;\n      } else {\n        this.state.signalClicked = _null_function;\n      }\n    }\n\n    let hasSignalMouseOut = Object.prototype.hasOwnProperty.call(props, \"signalMouseOut\");\n\n    if (hasSignalMouseOut) {\n      if (this.state.signalMouseOut) {\n        this.state.signalMouseOut = props.signalMouseOut;\n      } else {\n        this.state.signalMouseOut = _null_function;\n      }\n    }\n\n    let hasSignalMouseOver = Object.prototype.hasOwnProperty.call(props, \"signalMouseOver\");\n\n    if (hasSignalMouseOver) {\n      if (this.state.signalMouseOver) {\n        this.state.signalMouseOver = props.signalMouseOver;\n      } else {\n        this.state.signalMouseOver = _null_function;\n      }\n    }\n\n    let hasSocial = Object.prototype.hasOwnProperty.call(props, \"social\");\n\n    if (hasSocial) {\n      this.updateGraph(props.social);\n    }\n\n    let hasSelected = Object.prototype.hasOwnProperty.call(props, \"selected\");\n\n    if (hasSelected) {\n      this.state.selected = _resolve(props.selected);\n    }\n\n    let hasHighlighted = Object.prototype.hasOwnProperty.call(props, \"highlighted\");\n\n    if (hasHighlighted) {\n      this.state.highlighted = _resolve(props.highlighted);\n    }\n  }\n\n  className() {\n    return `ForceGraphD3-${this.state.uid}`;\n  }\n\n  getGroupColor(group) {\n    let color = this.state.colors[group];\n\n    if (!color) {\n      console.error(\"No color for group : \", group);\n      color = \"#FFFFFF\";\n    }\n\n    // let color = this.state.colors.group_to_color[group];\n\n    // console.log(\"Keys : \", Object.keys(this.state.colors.group_to_color))\n\n    // if (!color) {\n    //   this.state.colors.last_color += 1;\n    //   color = this.state.colors.last_color;\n    //   this.state.colors.group_to_color[group] = color;\n    // }\n\n    // console.log(\"A color : \", color)\n\n    // console.log(\"From within color array : \", this.state.colors.color(color));\n    // this.state.colors.color(color);\n\n    return color;\n  }\n\n  _updateNode(data) {\n    let node = this._mainGroup.select(\".node-group\").selectAll(\".node\");\n\n    node = node\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"circle\").attr(\"class\", `node ${styles.node}`),\n        (update) => update.attr(\"class\", `node ${styles.node}`)\n      )\n      .attr(\"r\", (d) => {\n        return d.size;\n      })\n      .attr(\"id\", (d) => {\n        return d.id;\n      })\n      .attr(\"fill\", (d) => {\n        return this.getGroupColor(d.group);\n      })\n      .on(\"click\", handleMouseClick(this))\n      .on(\"mouseover\", handleMouseOver(this))\n      .on(\"mouseout\", handleMouseOut(this))\n      .call(drag(this));\n\n    return node;\n  }\n\n  _updateNodeText(data) {\n    let text = this._mainGroup.select(\".node_text-group\").selectAll(\".node_text\");\n\n    text = text\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"text\").attr(\"class\", `node_text ${styles.node_text}`),\n        (update) => update.attr(\"class\", `node_text ${styles.node_text}`)\n      )\n      .text((d) => d.label)\n      .attr(\"id\", (d) => {\n        return d.id;\n      })\n      .on(\"click\", handleMouseClick(this))\n      .on(\"mouseover\", handleMouseOver(this))\n      .on(\"mouseout\", handleMouseOut(this))\n      .call(drag(this));\n\n    return text;\n  }\n\n  _updateLink(data) {\n    let link = this._mainGroup.select(\".link-group\").selectAll(\".link\");\n\n    link = link\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"line\").attr(\"class\", `link ${styles.link}`),\n        (update) => update.attr(\"class\", `link ${styles.link}`)\n      )\n      .attr(\"class\", `link ${styles.link}`)\n      .attr(\"id\", (d) => {\n        return d.id;\n      })\n      .attr(\"source_id\", (d) => {\n        return d.source_id;\n      })\n      .attr(\"target_id\", (d) => {\n        return d.target_id;\n      })\n      .on(\"click\", handleMouseClick(this))\n      .on(\"mouseover\", handleMouseOver(this))\n      .on(\"mouseout\", handleMouseOut(this))\n      .call(dragLink(this));\n\n    return link;\n  }\n\n  _updateSimulation() {\n    if (this._simulation) {\n      this._simulation.stop();\n      this._simulation = null;\n      this._is_running = false;\n    }\n\n    let w = this.state.width;\n    let h = this.state.height;\n\n    let THIS = this;\n\n    function ended() {\n      THIS._is_running = false;\n    }\n\n    function ticked() {\n      THIS._link\n        .attr(\"x1\", (d) => d.source.x)\n        .attr(\"y1\", (d) => d.source.y)\n        .attr(\"x2\", (d) => d.target.x)\n        .attr(\"y2\", (d) => d.target.y);\n\n      THIS._node\n        .attr(\"cx\", (d) => {\n          return (d.x = constrain(d.x, w, d.r));\n        })\n        .attr(\"cy\", (d) => {\n          return (d.y = constrain(d.y, h, d.r));\n        });\n\n      THIS._label.attr(\"x\", (d) => d.x).attr(\"y\", (d) => d.y);\n    }\n\n    let simulation = d3\n      .forceSimulation(this._graph.nodes)\n      .force(\"charge\", d3.forceManyBody().strength(-150).distanceMin(1).distanceMax(100))\n      .force(\n        \"link\",\n        d3\n          .forceLink()\n          .links(this._graph.edges)\n          .distance((d) => {\n            return 50 * (1 + d.value);\n          })\n          .iterations(5)\n      )\n      .force(\n        \"collision\",\n        d3\n          .forceCollide()\n          .radius((d) => {\n            return 1 + d.size;\n          })\n          .strength(1.0)\n          .iterations(5)\n      )\n      .on(\"tick\", ticked)\n      .on(\"end\", ended);\n\n    this._is_running = true;\n\n    // save the simulation so that we can update it later...\n    this._simulation = simulation;\n  }\n\n  drawFromScratch() {\n    console.log(\"DRAW FROM SCRATCH\");\n    let graph = this._graph;\n\n    if (!graph) {\n      if (this.state.social) {\n        this.updateGraph(this.state.social);\n      }\n\n      graph = this._graph;\n      if (!graph) {\n        console.log(\"Nothing to draw...\");\n        return;\n      }\n    }\n\n    d3.select(`.${this.className()} > *`).remove();\n\n    let container = d3.select(`.${this.className()}`);\n\n    if (!container) {\n      console.log(`Cannot find container element class ${this.className()}`);\n      return;\n    }\n\n    const width = this.state.width;\n    const height = this.state.height;\n\n    console.log(`REDRAW ${width}x${height}`);\n\n    if (!width || !height) {\n      console.log(`Invalid width or height? ${width} x ${height}`);\n      return;\n    }\n\n    let svg = container\n      .append(\"svg\")\n      .attr(\"height\", height)\n      .attr(\"width\", width)\n      .attr(\"id\", \"svg-viz\")\n      .attr(\"align\", \"center\")\n      .on(\"click\", () => {\n        this.state.signalClicked(null);\n      });\n\n    let mainGroup = svg;\n    this._mainGroup = mainGroup;\n\n    this._updateSimulation();\n\n    mainGroup.append(\"g\").attr(\"class\", \"link-group\");\n    mainGroup.append(\"g\").attr(\"class\", \"node-group\");\n    mainGroup.append(\"g\").attr(\"class\", \"node_text-group\");\n\n    this._link = this._updateLink(graph.edges);\n    this._node = this._updateNode(graph.nodes);\n    this._label = this._updateNodeText(graph.nodes);\n\n    this._is_drawn = true;\n  }\n\n  draw() {\n    if (!this._is_drawn) {\n      this.drawFromScratch();\n      this._size_changed = false;\n      this._graph_changed = false;\n      return;\n    }\n\n    let update_simulation = false;\n\n    if (this._size_changed) {\n      let container = d3.select(`.${this.className()}`);\n      container.selectAll(\"svg\").attr(\"width\", this.state.width).attr(\"height\", this.state.height);\n      this._size_changed = false;\n      update_simulation = true;\n    }\n\n    if (this._graph_changed) {\n      this._node = this._updateNode(this._graph.nodes);\n      this._label = this._updateNodeText(this._graph.nodes);\n      this._link = this._updateLink(this._graph.edges);\n      this._graph_changed = false;\n      update_simulation = true;\n    }\n\n    if (update_simulation) {\n      this._updateSimulation();\n    }\n  }\n}\n\nexport default ForceGraphD3;\n","import React from \"react\";\nimport ForceGraphD3 from \"./d3/ForceGraph.d3.js\";\nimport styles from \"./ForceGraph.module.css\";\n\nclass ForceGraph extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this._graph = new ForceGraphD3(props);\n    this._updateSize = this._updateSize.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this._updateSize);\n    this._updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.updateSize);\n  }\n\n  componentDidUpdate() {\n    this._graph.update(this.props);\n    this._graph.draw();\n  }\n\n  _updateSize() {\n    if (this.container && this._graph) {\n      this._graph.update({\n        width: this.container.offsetWidth,\n        height: this.container.offsetHeight,\n      });\n      this._graph.draw();\n    }\n  }\n\n  render() {\n    let s = `${styles.graph} ${this._graph.className()}`;\n\n    return (\n      <div ref={(el) => (this.container = el)} style={{ width: \"100%\", height: \"100%\" }}>\n        <div className={s} />\n      </div>\n    );\n  }\n}\n\nexport default ForceGraph;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport ForceGraph from \"./ForceGraph\";\n\nclass SocialGraph extends React.Component {\n  getGraph() {\n    const social = this.props.social;\n\n    if (social) {\n      return social.getGraph();\n    }\n    return null;\n  }\n\n  getNetwork() {\n    const social = this.props.social;\n\n    if (social) {\n      return social.getNetwork();\n    }\n    return null;\n  }\n\n  render() {\n    if (this.props.social) {\n      return (\n        <div style={{ width: \"100%\", height: \"100%\" }}>\n          <ForceGraph\n            social={this.props.social}\n            signalClicked={this.props.emitClicked}\n            highlighted={this.props.highlighted}\n            selected={this.props.selected}\n            wobble={this.props.wobble}\n          />\n        </div>\n      );\n    } else {\n      return <div>No data to display!!!</div>;\n    }\n  }\n}\n\nSocialGraph.propTypes = {\n  emitClicked: PropTypes.func.isRequired,\n  highlighted: PropTypes.func,\n  selected: PropTypes.func,\n  social: PropTypes.object.isRequired,\n  wobble: PropTypes.bool.isRequired\n}\n\nexport default SocialGraph;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport {\n  Accordion,\n  AccordionItem,\n  AccordionItemHeading,\n  AccordionItemButton,\n  AccordionItemPanel,\n} from \"react-accessible-accordion\";\n\nimport styles from \"./Accordion.module.css\";\n\nfunction BAccordion(props) {\n  return (\n    <Accordion\n      className={styles.accordion}\n      preExpanded={props.preExpanded}\n      allowMultipleExpanded={props.allowMultipleExpanded}\n      allowZeroExpanded={props.allowZeroExpanded}\n    >\n      {props.children}\n    </Accordion>\n  );\n}\n\nBAccordion.propTypes = {\n  preExpanded: PropTypes.bool,\n  allowMultipleExpanded: PropTypes.bool,\n  allowZeroExpanded: PropTypes.bool,\n  children: PropTypes.string,\n};\n\nfunction BAccordionItem(props) {\n  return (\n    <AccordionItem className={styles.accordionItem} style={props.style} uuid={props.uuid}>\n      {props.children}\n    </AccordionItem>\n  );\n}\n\nBAccordionItem.propTypes = {\n  style: PropTypes.string,\n  uuid: PropTypes.string,\n  children: PropTypes.string,\n};\n\nfunction BAccordionTitle(props) {\n  return (\n    <AccordionItemHeading style={props.style}>\n      <AccordionItemButton className={styles.accordionButton}>{props.children}</AccordionItemButton>\n    </AccordionItemHeading>\n  );\n}\n\nBAccordionTitle.propTypes = {\n  style: PropTypes.string,\n  children: PropTypes.string,\n};\n\n\nfunction BAccordionPanel(props) {\n  return <AccordionItemPanel style={props.style}>{props.children}</AccordionItemPanel>;\n}\n\nBAccordionPanel.propTypes = {\n  style: PropTypes.string,\n  children: PropTypes.string,\n};\n\nexport {\n  BAccordion as Accordion,\n  BAccordionItem as AccordionItem,\n  BAccordionTitle as AccordionTitle,\n  BAccordionPanel as AccordionPanel,\n  BAccordion as default,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\"\n\nimport styles from \"./DefaultButton.module.css\";\n\nfunction DefaultButton(props) {\n  return (\n    <button href=\"#\" className={styles.button} onClick={props.onClick} style={props.style}>\n      {props.children}\n    </button>\n  );\n}\n\nDefaultButton.propTypes = {\n    onClick: PropTypes.func,\n    style: PropTypes.object,\n    children: PropTypes.string\n}\n\nexport default DefaultButton;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./CheckBox.module.css\";\n\nfunction CheckBox(props) {\n  return (\n    <label className={styles.checkBox} style={props.style}>\n      <input type=\"checkbox\" checked={props.checked} onChange={props.onChange} />\n      <span className={styles.checkMark} />\n    </label>\n  );\n}\n\nCheckBox.propTypes = {\n  style: PropTypes.string,\n  checked: PropTypes.bool,\n  onChange: PropTypes.func,\n};\n\nexport default CheckBox;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./ResponsiveList.module.css\";\n\nfunction ResponsiveList(props) {\n  return <div className={styles.list}>{props.children}</div>;\n}\n\nResponsiveList.propTypes = {\n  children: PropTypes.elementType.isRequired,\n};\n\nfunction ResponsiveListItem(props) {\n  return (\n    <div className={styles.item} key={props.key}>\n      {props.children}\n    </div>\n  );\n}\n\nResponsiveListItem.propTypes = {\n  key: PropTypes.string.isRequired,\n  children: PropTypes.elementType.isRequired,\n};\n\nexport { ResponsiveListItem, ResponsiveList, ResponsiveList as default };\n","import React from \"react\";\n\nimport DefaultButton from \"./DefaultButton\";\nimport CheckBox from \"./CheckBox\";\nimport { ResponsiveList, ResponsiveListItem } from \"./ResponsiveList\";\n\nimport styles from \"./GroupsList.module.css\";\n\nfunction null_function() {}\n\nfunction GroupsList({\n  groups,\n  title = null,\n  emitSelected = null_function,\n  emitToggleFilter = null_function,\n  social = null,\n}) {\n  if (!groups) {\n    return null;\n  }\n\n  let projects = [];\n\n  Object.keys(groups).forEach((key) => {\n    let items = [];\n\n    for (let index in groups[key]) {\n      let group = social.get(groups[key][index]);\n      let is_filtered = social.isFiltered(group);\n\n      items.push(\n        <ResponsiveListItem key={group.getName()}>\n          <DefaultButton\n            onClick={() => {\n              emitSelected(group);\n            }}\n            style={{ width: \"70%\" }}\n          >\n            {group.getName()}\n          </DefaultButton>\n          <CheckBox\n            onChange={() => {\n              emitToggleFilter(group);\n            }}\n            style={{ width: \"20%\" }}\n            checked={is_filtered}\n          />\n        </ResponsiveListItem>\n      );\n    }\n\n    let project = social.get(key);\n    let is_filtered = social.isFiltered(project);\n\n    projects.push(\n      <div className={styles.project} key={project.getName()}>\n        <div className={styles.projectHeader}>\n          <DefaultButton\n            style={{ width: \"75%\" }}\n            onClick={() => {\n              emitSelected(project);\n            }}\n          >\n            {project.getName()}\n          </DefaultButton>\n          <CheckBox\n            onChange={() => {\n              emitToggleFilter(project);\n            }}\n            style={{ width: \"20%\" }}\n            checked={is_filtered}\n          />\n        </div>\n        <div className={styles.projectBody}>\n          <ResponsiveList style={{ minWidth: \"100%\" }}>{items}</ResponsiveList>\n        </div>\n      </div>\n    );\n  });\n\n  if (title) {\n    return (\n      <div>\n        <div className={styles.title}>{title}</div>\n        {projects}\n      </div>\n    );\n  } else {\n    return projects;\n  }\n}\n\nexport default GroupsList;\n","import React from \"react\";\n\nimport DefaultButton from \"./DefaultButton\";\nimport CheckBox from \"./CheckBox\";\n\nimport { ResponsiveList, ResponsiveListItem } from \"./ResponsiveList\";\n\nimport styles from \"./ConnectionList.module.css\";\n\nfunction null_function() {}\n\nfunction ConnectionList({\n  connections,\n  title,\n  emitSelected = null_function,\n  emitToggleFilter = null_function,\n  social = null,\n}) {\n  if (!connections || connections.length === 0) {\n    return null;\n  }\n\n  const listitems = connections.map((item) => {\n    let i = item;\n    let name = item.getName();\n\n    let is_filtered = false;\n\n    if (social) {\n      is_filtered = social.isFiltered(item);\n    }\n\n    return (\n      <ResponsiveListItem key={name}>\n        <DefaultButton\n          onClick={() => {\n            emitSelected(i);\n          }}\n          style={{ width: \"70%\" }}\n        >\n          {name}\n        </DefaultButton>\n        <CheckBox\n          onChange={() => {\n            emitToggleFilter(i);\n          }}\n          checked={is_filtered}\n          style={{ width: \"20%\" }}\n        />\n      </ResponsiveListItem>\n    );\n  });\n\n  if (title) {\n    return (\n      <div className={styles.connections}>\n        <div className={styles.title}>{title}</div>\n        <ResponsiveList>{listitems}</ResponsiveList>\n      </div>\n    );\n  } else {\n    return (\n      <div className={styles.connections}>\n        <ResponsiveList>{listitems}</ResponsiveList>\n      </div>\n    );\n  }\n}\n\nexport default ConnectionList;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport DefaultButton from \"./DefaultButton\";\n\nfunction _null_function() {}\n\nfunction DateRangeButton(props) {\n  let d = props.value;\n\n  if (!d) {\n    return null;\n  }\n\n  if (!(d._isARoughDateObject || d._isADateRangeObject)) {\n    return null;\n  }\n\n  if (d.isNull()) {\n    return null;\n  }\n\n\n\n  let emitSelected = props.emitSelected;\n\n  if (!emitSelected) {\n    emitSelected = _null_function;\n  }\n\n  let s = d.toSimpleString();\n\n  if (d._isARoughDateObject) {\n    d = d.toDateRange();\n  }\n\n  return (\n    <DefaultButton\n      onClick={() => {\n        emitSelected(d);\n      }}\n      style={props.style}\n    >\n      {s}\n    </DefaultButton>\n  );\n}\n\n  DateRangeButton.propTypes = {\n      value: PropTypes.func,\n      emitSelected: PropTypes.func,\n      style: PropTypes.string\n  };\n\nexport default DateRangeButton;\n","class KeyError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error.captureStackTrace(this, KeyError);\n  }\n}\n\nclass ValueError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error.captureStackTrace(this, ValueError);\n  }\n}\n\nclass DuplicateError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error.captureStackTrace(this, DuplicateError);\n  }\n}\n\nclass MissingError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error.captureStackTrace(this, MissingError);\n  }\n}\n\nexport { KeyError, ValueError, DuplicateError, MissingError };\n","import Dry from \"json-dry\";\nimport moment from \"moment\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction _toDate(val, def = null) {\n  if (val) {\n    if (val._isAMomentObject) {\n      return val;\n    }\n\n    /*if (val.toISOString){\n      val = val.toISOString();\n    }*/\n\n    let date = moment(val);\n\n    if (!date.isValid()) {\n      console.log(`Invalid Date ${val}`);\n      throw new ValueError(`Invalid Date ${val}`);\n    }\n\n    return date;\n  } else {\n    if (!def) {\n      return null;\n    } else {\n      return _toDate(def);\n    }\n  }\n}\n\n// NOTE FOR FUTURE - moment(x) < moment(y) === true\n//            even though moment(x).toDate() < moment(y).toDate() === false\n//   MOMENT COMPARISONS ARE BROKEN!\n\nfunction _get_min(d1, d2) {\n  if (d1) {\n    if (d2) {\n      if (d1.toDate() < d2.toDate()) {\n        return d1;\n      } else {\n        return d2;\n      }\n    } else {\n      return d1;\n    }\n  } else {\n    return d2;\n  }\n}\n\nfunction _get_max(d1, d2) {\n  if (d1) {\n    if (d2) {\n      if (d1.toDate() > d2.toDate()) {\n        return d1;\n      } else {\n        return d2;\n      }\n    } else {\n      return d1;\n    }\n  } else {\n    return d2;\n  }\n}\n\nfunction _merge_raw(s1, s2) {\n  if (!s1) {\n    return s2;\n  } else if (!s2) {\n    return s1;\n  }\n\n  return `${s1} + ${s2}`;\n}\n\nclass RoughDate {\n  constructor(state) {\n    this.state = {\n      start: null,\n      end: null,\n      raw: null,\n    };\n\n    this.setState(state);\n\n    this._isARoughDateObject = true;\n  }\n\n  setState(state) {\n    if (!state || state === \"null\" || state === null) {\n      this.state = { start: null };\n      return;\n    } else if (state._isARoughDateObject) {\n      this.state = { ...state.state };\n      return;\n    } else if (state._isADateRangeObject) {\n      this.state = state.toDate();\n      return;\n    } else if (state._isAMomentObject) {\n      this.state = { start: _toDate(state) };\n      return;\n    } else if (state.toISOString) {\n      this.state = { start: _toDate(state) };\n      return;\n    } else if (Object.prototype.hasOwnProperty.call(state, \"value\")) {\n      this.state = { start: state.value };\n      return;\n    } else if (typeof state === \"string\") {\n      this.state = { start: _toDate(state), raw: state };\n      return;\n    }\n\n    let start = _toDate(state.start);\n    let end = _toDate(state.end);\n\n    if (!start) {\n      this.state = { start: null };\n      return;\n    }\n\n    this.state.start = start;\n    this.state.end = end;\n    this.state.raw = state.raw;\n\n    if (this.isNull()) {\n      console.log(\"NULL RoughDate?\");\n      console.log(state);\n    }\n  }\n\n  static clone(item) {\n    let d = new RoughDate();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static max(d1, d2) {\n    return new RoughDate(_get_max(d1.getLatest(), d2.getLatest()));\n  }\n\n  static min(d1, d2) {\n    return new RoughDate(_get_min(d1.getEarliest(), d2.getEarliest()));\n  }\n\n  static delta(d1, d2) {\n    return d1.getLatestDate() - d2.getEarliestDate();\n  }\n\n  static getDelta(d1, d2) {\n    return RoughDate.delta(d1, d2);\n  }\n\n  static eq(item, other) {\n    if (item._isARoughDateObject && other._isARoughDateObject) {\n      return (\n        item.getEarliestString() === other.getEarliestString() && item.getLatestString() === other.getLatestString()\n      );\n    } else {\n      return false;\n    }\n  }\n\n  static lt(d1, d2) {\n    if (d1.isNull() || d2.isNull()) {\n      return false;\n    } else {\n      return d1.getEarliestDate() < d2.getEarliestDate();\n    }\n  }\n\n  static gt(d1, d2) {\n    if (d1.isNull() || d2.isNull()) {\n      return false;\n    } else {\n      return d1.getEarliestDate() > d2.getEarliestDate();\n    }\n  }\n\n  static le(d1, d2) {\n    return RoughDate.eq(d1, d2) || RoughDate.lt(d1, d2);\n  }\n\n  static ge(d1, d2) {\n    return RoughDate.eq(d1, d2) || RoughDate.gt(d1, d2);\n  }\n\n  static ne(d1, d2) {\n    return !RoughDate.eq(d1, d2);\n  }\n\n  add(delta) {\n    if (this.state.start) {\n      this.state.start.add(delta);\n    }\n\n    if (this.state.end) {\n      this.state.end.add(delta);\n    }\n\n    this.state.raw = null;\n  }\n\n  sub(delta) {\n    this.add(-delta);\n  }\n\n  isNull() {\n    if (this.state.start) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  isFuzzy() {\n    if (this.state.end) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  isExact() {\n    return !(this.isNull() || this.isFuzzy());\n  }\n\n  toString() {\n    if (this.isNull()) {\n      return \"Date:unknown\";\n    } else if (this.isFuzzy()) {\n      return `~${this.state.start.format(\"LL\")}-${this.state.end.format(\"LL\")}`;\n    } else {\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  toSimpleString() {\n    if (this.isNull()) {\n      return \"unknown\";\n    } else if (this.isFuzzy()) {\n      let s = this.state.start.toDate();\n      let e = this.state.end.toDate();\n\n      if (s.getMonth() === 0 && e.getMonth() === 11 && s.getDate() === 1 && e.getDate() === 31) {\n        //the dates span full years\n        if (s.getFullYear() === e.getFullYear()) {\n          return s.getFullYear();\n        } else {\n          return `${s.getFullYear()}-${e.getFullYear()}`;\n        }\n      } else {\n        return `${s.getDate()}/${s.getMonth() + 1}/${s.getFullYear()}-${e.getDate()}/${\n          e.getMonth() + 1\n        }/${e.getFullYear()}`;\n      }\n    } else {\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  getEarliest() {\n    let state = { start: this.state.start };\n    let r = new RoughDate();\n    r.state = state;\n    return r;\n  }\n\n  getLatest() {\n    if (this.state.end) {\n      let state = { start: this.state.end };\n      let r = new RoughDate();\n      r.state = state;\n      return r;\n    } else {\n      return this.getEarliest();\n    }\n  }\n\n  getEarliestDate() {\n    let d = this.getEarliest();\n\n    if (d) {\n      return d.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestDate() {\n    let d = this.getLatest();\n\n    if (d) {\n      return d.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getEarliestString() {\n    let d = this.getEarliest();\n\n    if (d) {\n      return d.toDate().toISOString();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestString() {\n    let d = this.getLatest();\n\n    if (d) {\n      return d.toDate().toISOString();\n    } else {\n      return null;\n    }\n  }\n\n  toRange() {\n    if (this.isNull()) {\n      return new DateRange();\n    } else if (this.isExact()) {\n      return new DateRange({ both: this.state.start });\n    } else {\n      return new DateRange({ start: this.state.start, end: this.state.end });\n    }\n  }\n\n  toDateRange() {\n    if (this.isNull()) {\n      return new DateRange();\n    } else if (this.isFuzzy()) {\n      return new DateRange({ start: this.getEarliest(), end: this.getLatest() });\n    } else {\n      return new DateRange({ both: this.getEarliest() });\n    }\n  }\n\n  toDate() {\n    let m = this.toMoment();\n\n    if (m) {\n      try {\n        return m.toDate();\n      } catch (error) {\n        console.log(`STRANGE ERROR ${error}`);\n        console.log(`m = ${m}`);\n        console.log(m);\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  toMoment() {\n    if (this.isNull()) {\n      return null;\n    } else if (this.isExact()) {\n      return this.state.start;\n    } else {\n      throw ValueError(`Cannot extract a single date from an inexact date ${this}`);\n    }\n  }\n\n  getRaw() {\n    return this.state.raw;\n  }\n\n  getStart() {\n    return this.state.start;\n  }\n\n  getEnd() {\n    if (this.state.end) {\n      return this.state.end;\n    } else {\n      return this.state.start;\n    }\n  }\n\n  merge(other) {\n    let state = {\n      start: _get_min(this.getStart(), other.getStart()),\n      end: _get_max(this.getEnd(), other.getEnd()),\n      raw: _merge_raw(this.getRaw(), other.getRaw()),\n    };\n\n    let date = new RoughDate();\n    date.state = state;\n\n    return date;\n  }\n}\n\nRoughDate.unDry = function (value) {\n  return new RoughDate(value);\n};\n\nDry.registerClass(\"Date\", RoughDate);\n\nexport default RoughDate;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport RoughDate from \"./RoughDate\";\nimport { ValueError } from \"./Errors\";\n\nfunction _clean(val) {\n  if (!val || val._isADateRangeObject) {\n    return val;\n  } else if (val._isARoughDateObject) {\n    return val.toDateRange();\n  } else if (\n    Object.prototype.hasOwnProperty.call(val, \"start\") ||\n    Object.prototype.hasOwnProperty.call(val, \"end\") ||\n    Object.prototype.hasOwnProperty.call(val, \"both\") ||\n    Object.prototype.hasOwnProperty.call(val, \"value\")\n  ) {\n    return new DateRange(val);\n  } else {\n    return new DateRange({ both: new RoughDate(val) });\n  }\n}\n\nclass DateRange {\n  constructor(state) {\n    this.state = {\n      start: null,\n      end: null,\n    };\n\n    this.setState(state);\n    this._isADateRangeObject = true;\n  }\n\n  toString() {\n    if (this.hasBounds()) {\n      if (this.isInstant()) {\n        return `DateRange(${this.getStartString()})`;\n      } else {\n        return `DateRange(${this.getStartString()} to ${this.getEndString()})`;\n      }\n    } else {\n      return \"DateRange::unbounded\";\n    }\n  }\n\n  toSimpleString() {\n    if (this.hasBounds()) {\n      if (this.isInstant()) {\n        return this.getStart().toSimpleString();\n      } else {\n        return this.getEarliestStart().merge(this.getLatestEnd()).toSimpleString();\n      }\n    } else if (this.hasStart()) {\n      return `${this.getStart().toSimpleString()}<=>future`;\n    } else if (this.hasEnd()) {\n      return `past<=>${this.getEnd().toSimpleString()}`;\n    } else {\n      return \"past<=>future\";\n    }\n  }\n\n  static clone(item) {\n    let d = new DateRange();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static eq(item, other) {\n    if (item === other) {\n      return true;\n    }\n\n    if (item.hasStart() && other.hasStart()) {\n      if (!RoughDate.eq(item.getStart(), other.getStart())) {\n        return false;\n      }\n    } else if (item.hasStart() || other.hasStart()) {\n      return false;\n    }\n\n    if (item.hasEnd() && other.hasEnd()) {\n      if (!RoughDate.eq(item.getEnd(), other.getEnd())) {\n        return false;\n      }\n    } else if (item.hasEnd() || other.hasEnd()) {\n      return false;\n    }\n\n    return true;\n  }\n\n  static mergeAll(dates) {\n    if (!dates) {\n      return null;\n    } else if (dates._isARoughDateObject || dates._isARoughDateObject) {\n      return dates;\n    }\n\n    if (!dates.length || dates.length === 0) {\n      return null;\n    }\n\n    let date = dates[0];\n\n    if (dates.length > 1) {\n      for (let i = 1; i < dates.length; ++i) {\n        if (!dates[i].isNull()) {\n          if (date.isNull()) {\n            date = dates[i];\n          } else {\n            date = date.merge(dates[i]);\n          }\n        }\n      }\n    }\n\n    if (date.isNull()) {\n      return null;\n    } else {\n      return date;\n    }\n  }\n\n  merge(other) {\n    if (!other) {\n      return this;\n    } else if (other._isARoughDateObject) {\n      other = other.toDateRange();\n    }\n\n    return new DateRange({\n      start: RoughDate.min(this.getEarliestStart(), other.getEarliestStart()),\n      end: RoughDate.max(this.getLatestEnd(), other.getLatestEnd()),\n    });\n  }\n\n  hasBounds() {\n    return this.hasStart() && this.hasEnd();\n  }\n\n  hasEnd() {\n    if (this.state.end) {\n      return !this.state.end.isNull();\n    } else {\n      return false;\n    }\n  }\n\n  hasStart() {\n    if (this.state.start) {\n      return !this.state.start.isNull();\n    } else {\n      return false;\n    }\n  }\n\n  isInstant() {\n    return this.hasStart() && this.state.start === this.state.end;\n  }\n\n  toDate() {\n    if (this.hasStart()) {\n      if (this.hasEnd()) {\n        return this.getStart().merge(this.getEnd());\n      } else {\n        return this.getStart();\n      }\n    } else {\n      return this.getEnd();\n    }\n  }\n\n  contains(date) {\n    date = _clean(date);\n\n    if (!date) {\n      return true;\n    } else if (date._isADateRangeObject) {\n      const my_start = this.getEarliestStart();\n      const other_start = date.getEarliestStart();\n\n      if (my_start && other_start) {\n        if (RoughDate.gt(my_start, other_start)) {\n          return false;\n        }\n      } else if (other_start) {\n        return false;\n      }\n\n      const my_end = this.getLatestEnd();\n      const other_end = date.getLatestEnd();\n\n      if (my_end && other_end) {\n        if (RoughDate.lt(my_end, other_end)) {\n          return false;\n        }\n      } else if (my_end) {\n        return false;\n      }\n\n      return true;\n    } else {\n      throw new ValueError(`Invalid Date ${date}`);\n    }\n  }\n\n  intersect(other) {\n    other = _clean(other);\n\n    if (!other) {\n      return this;\n    }\n\n    if (!other.hasBounds()) {\n      return this;\n    } else if (!this.hasBounds()) {\n      return other;\n    }\n\n    const start = RoughDate.max(this.getStart(), other.getStart());\n\n    if (!this.contains(start)) {\n      return null;\n    }\n\n    const end = RoughDate.min(this.getEnd(), other.getEnd());\n\n    if (!this.contains(end)) {\n      return null;\n    }\n\n    if (RoughDate.eq(start, end)) {\n      return new DateRange({ both: start });\n    } else {\n      return new DateRange({ start: start, end: end });\n    }\n  }\n\n  union(other) {\n    other = _clean(other);\n    if (!other) {\n      return this;\n    } else if (!other._isADateRangeObject) {\n      other = new DateRange({ value: other });\n    }\n\n    const start = RoughDate.min(this.getStart(), other.getStart());\n    const end = RoughDate.max(this.getEnd(), other.getEnd());\n\n    if (RoughDate.eq(start, end)) {\n      return new DateRange({ both: start });\n    } else {\n      return new DateRange({ start: start, end: end });\n    }\n  }\n\n  getDelta() {\n    if (this.hasStart() && this.hasEnd()) {\n      try {\n        return this.getLatestEnd().toDate() - this.getEarliestStart().toDate();\n      } catch (error) {\n        console.log(error);\n        console.log(this.hasStart(), this.hasEnd());\n        console.log(this.getStart(), this.getEnd());\n        console.log(this.getLatestEnd(), this.getEarliestStart());\n        throw error;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  zoomIn(scale = 1) {\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null) {\n      delta = this.getDelta() / (2.0 + scale);\n    } else {\n      delta = 3600000;\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(-delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  zoomOut(scale = 1) {\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null) {\n      delta = this.getDelta() * scale;\n    } else {\n      delta = 3600000;\n    }\n\n    if (state.start) {\n      state.start.add(-delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftEarlier(delta = null) {\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null) {\n      if (state.start !== null && state.end !== null) {\n        delta = -this.getDelta(); //milliseconds\n      } else {\n        delta = -3600000; //milliseconds\n      }\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftLater(delta = null) {\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null) {\n      if (state.start !== null && state.end !== null) {\n        delta = this.getDelta(); //milliseconds\n      } else {\n        delta = 3600000; //milliseconds\n      }\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  getStart() {\n    return this.state.start;\n  }\n\n  getEnd() {\n    return this.state.end;\n  }\n\n  getEarliestStart() {\n    if (this.hasStart()) {\n      return this.getStart().getEarliest();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestEnd() {\n    if (this.hasEnd()) {\n      return this.getEnd().getLatest();\n    } else {\n      return null;\n    }\n  }\n\n  getStartDate() {\n    let e = this.getEarliestStart();\n    if (e) {\n      return e.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getEndDate() {\n    let e = this.getLatestEnd();\n    if (e) {\n      return e.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getStartString() {\n    if (this.state.start) {\n      return this.state.start.toString();\n    } else {\n      return \"unbounded\";\n    }\n  }\n\n  getEndString() {\n    if (this.state.end) {\n      return this.state.end.toString();\n    } else {\n      return \"unbounded\";\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      if (state === \"null\" || state === null) {\n        this.state = { start: null, end: null };\n        return;\n      } else if (state._isADateRangeObject) {\n        this.state = { ...state.state };\n      } else if (state._isARoughDateObject) {\n        this.state = { start: state, end: state };\n      } else if (Object.prototype.hasOwnProperty.call(state, \"value\")) {\n        this.setState(state.value);\n        return;\n      } else if (Object.prototype.hasOwnProperty.call(state, \"both\")) {\n        this.state.start = new RoughDate(state.both);\n        this.state.end = this.state.start;\n      } else if (typeof state === \"string\") {\n        this.state.start = new RoughDate(state);\n        this.state.end = this.state.start;\n      } else {\n        let start = null;\n\n        if (state.start) {\n          start = new RoughDate(state.start);\n\n          if (start.isNull()) {\n            start = null;\n          }\n        }\n\n        let end = null;\n\n        if (state.end) {\n          end = new RoughDate(state.end);\n\n          if (end.isNull()) {\n            end = null;\n          }\n        }\n\n        if (start && end) {\n          if (RoughDate.gt(start, end)) {\n            let tmp = start;\n            start = end;\n            end = tmp;\n          }\n\n          if (RoughDate.gt(start, end)) {\n            let tmp = RoughDate.min(start, end);\n            end = RoughDate.max(start, end);\n            start = tmp;\n          }\n        }\n\n        this.state.start = start;\n        this.state.end = end;\n      }\n    } else {\n      this.state.start = null;\n      this.state.end = null;\n    }\n  }\n\n  toDry() {\n    return this.state;\n  }\n}\n\nDateRange.unDry = function (value) {\n  return new DateRange(value);\n};\n\nDry.registerClass(\"DateRange\", DateRange);\n\nexport default DateRange;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport DateRangeButton from \"./DateRangeButton\";\nimport DateRange from \"../model/DateRange\";\nimport DefaultButton from \"./DefaultButton\";\n\nimport { ResponsiveList, ResponsiveListItem } from \"./ResponsiveList\";\n\nimport styles from \"./SourceList.module.css\";\n\nfunction _null_function() {}\n\nfunction SourceList(props) {\n  let social = props.social;\n  let sources = props.sources;\n  let emitSelected = props.emitSelected;\n  let title = props.title;\n\n  if (!social || !sources) {\n    return null;\n  }\n\n  if (!emitSelected) {\n    emitSelected = _null_function;\n  }\n\n  let output = Object.keys(sources).map((key) => {\n    let source = social.get(key);\n    let daterange = DateRange.mergeAll(sources[key]);\n\n    if (daterange) {\n      return (\n        <ResponsiveListItem key={source.getName()}>\n          <DefaultButton\n            onClick={() => {\n              emitSelected(source);\n            }}\n            style={{ width: \"50%\" }}\n          >\n            {source.getName()}\n          </DefaultButton>\n          <DateRangeButton style={{ width: \"40%\" }} value={daterange} emitSelected={emitSelected} />\n        </ResponsiveListItem>\n      );\n    } else {\n      return (\n        <ResponsiveListItem key={source.getName()}>\n          <DefaultButton\n            onClick={() => {\n              emitSelected(source);\n            }}\n          >\n            {source.getName()}\n          </DefaultButton>\n        </ResponsiveListItem>\n      );\n    }\n  });\n\n  if (!output || output.length === 0) {\n    return null;\n  }\n\n  if (title) {\n    return (\n      <div className={styles.container}>\n        <div className={styles.title}>{title}</div>\n        <div className={styles.body}>\n          <ResponsiveList>{output}</ResponsiveList>\n        </div>\n      </div>\n    );\n  } else {\n    return <ResponsiveList>{output}</ResponsiveList>;\n  }\n}\n\nSourceList.propTypes = {\n  emitSelected: PropTypes.func.isRequired,\n  social: PropTypes.func.isRequired,\n  sources: PropTypes.object.isRequired,\n  title: PropTypes.string\n}\n\nexport default SourceList;\n","import React from \"react\";\n\nimport DefaultButton from \"./DefaultButton\";\nimport CheckBox from \"./CheckBox\";\n\nimport styles from \"./WeightsList.module.css\";\n\nfunction null_function() {}\n\nfunction WeightsList({\n  weights,\n  title = null,\n  emitSelected = null_function,\n  emitToggleFilter = null_function,\n  social = null,\n  type = null,\n}) {\n  if (!weights) {\n    return null;\n  }\n\n  let projects = [];\n\n  Object.keys(weights).forEach((key) => {\n    let project = social.get(key);\n    let is_filtered = social.isFiltered(project);\n\n    let weight = weights[key];\n\n    projects.push(\n      <div className={styles.project} key={project.getName()}>\n        <div className={styles.projectHeader}>\n          <DefaultButton\n            style={{ width: \"75%\" }}\n            onClick={() => {\n              emitSelected(project);\n            }}\n          >\n            {project.getName()}\n          </DefaultButton>\n          <CheckBox\n            onChange={() => {\n              emitToggleFilter(project);\n            }}\n            style={{ width: \"20%\" }}\n            checked={is_filtered}\n          />\n        </div>\n        <div className={styles.projectBody}>\n          Weight = {weight}, Type = {type}\n        </div>\n      </div>\n    );\n  });\n\n  if (title) {\n    return (\n      <div>\n        <div className={styles.title}>{title}</div>\n        {projects}\n      </div>\n    );\n  } else {\n    return projects;\n  }\n}\n\nexport default WeightsList;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nfunction _filterProject(values, project) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    if (!(key in project)) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nclass Person {\n  constructor(props) {\n    this.state = {\n      name: null,\n      titles: [],\n      firstnames: [],\n      surnames: [],\n      suffixes: [],\n      id: null,\n      positions: {},\n      affiliations: {},\n      projects: {},\n      sources: {},\n      alive: null,\n      gender: null,\n      notes: [],\n      orig_name: null,\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPersonObject = true;\n  }\n\n  static clone(item) {\n    let c = new Person();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode() {\n    return true;\n  }\n\n  inGroup(group) {\n    if (group.getID) {\n      let ids = {};\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key) => {\n      for (let index in this.state.affiliations[key]) {\n        if (this.state.affiliations[key][index] in group) {\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    Object.keys(this.state.positions).forEach((key) => {\n      for (let index in this.state.positions[key]) {\n        if (this.state.positions[key][index] in group) {\n          seen[this.state.positions[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key) => {\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id) => {\n        if (s.includes(source_id)) {\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects) {\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n    let positions = _filterProject(this.state.positions, project);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions) {\n      let person = new Person();\n      person.state = { ...this.state };\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    window = window.intersect(this.getAlive());\n\n    if (!window) {\n      return null;\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n    let positions = _filterWindow(this.state.positions, window);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions) {\n      let person = new Person();\n      person.state = { ...this.state };\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.titles = setState(state.titles, []);\n      this.state.firstnames = setState(state.firstnames, []);\n      this.state.surnames = setState(state.surnames, []);\n      this.state.suffixes = setState(state.suffixes, []);\n      this.state.id = setState(state.id);\n      this.state.positions = setState(state.positions, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.projects = setState(state.projects, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.alive = setState(state.alive);\n      this.state.gender = setState(state.gender);\n      this.state.orig_name = setState(state.orig_name);\n      this.state.notes = setState(state.notes, []);\n\n      if (!this.state.orig_name || this.state.orig_name === \"None\") {\n        throw new ValueError(`No name for ${this}`);\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Person(${this.getName()})`;\n  }\n\n  getAlive() {\n    return this.state.alive;\n  }\n\n  getFirstName() {\n    if (this.state.firstnames) {\n      return this.state.firstnames.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getTitle() {\n    if (this.state.titles) {\n      return this.state.titles.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getSurname() {\n    if (this.state.surnames) {\n      return this.state.surnames.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getSuffix() {\n    if (this.state.suffixes) {\n      return this.state.suffixes.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getName() {\n    var parts = [];\n\n    let part = this.getTitle();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getFirstName();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getSurname();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getSuffix();\n    if (part) {\n      parts.push(part);\n    }\n\n    if (parts.length > 0) {\n      return parts.join(\" \");\n    } else {\n      return \"null\";\n    }\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getPositions() {\n    return this.state.positions;\n  }\n\n  getScores() {\n    return this.state.scores;\n  }\n\n  getBorn() {\n    if (this.state.alive) {\n      return this.state.alive.getStart();\n    } else {\n      return null;\n    }\n  }\n\n  getDied() {\n    if (this.state.alive) {\n      return this.state.alive.getEnd();\n    } else {\n      return null;\n    }\n  }\n\n  getTimeLine() {\n    const alive = this.getAlive();\n\n    if (!alive) {\n      return null;\n    } else {\n      return {\n        start: alive.getStart(),\n        end: alive.getEnd(),\n        id: this.getID(),\n        content: this.getName(),\n      };\n    }\n  }\n\n  getNode(is_anchor = false) {\n    let node = {\n      id: this.getID(),\n      label: this.getName(),\n      title: this.getName(),\n      fixed: false,\n      shape: \"circle\",\n    };\n\n    let weight = 10.0;\n\n    if (weight < 5.0) {\n      weight = 5.0;\n    } else if (weight > 20.0) {\n      weight = 20.0;\n    }\n\n    node[\"size\"] = weight;\n\n    let keys = Object.keys(this.state.projects);\n\n    if (keys.length > 0) {\n      node[\"group\"] = keys.sort().join(\":\");\n    } else {\n      node[\"group\"] = \"unknown\";\n    }\n\n    if (is_anchor) {\n      node[\"shape\"] = \"rect\";\n      node[\"fixed\"] = true;\n      node[\"group\"] = \"anchor\";\n      node[\"size\"] = 20.0;\n    }\n\n    return node;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPerson.unDry = function (value) {\n  return new Person(value);\n};\n\nDry.registerClass(\"Person\", Person);\n\nexport default Person;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Person from \"./Person\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_person_uid() {\n  let uid = uuidv4();\n  return \"P\" + uid.substring(uid.length - 7);\n}\n\nclass People {\n  constructor(props) {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPeopleObject = true;\n    this.load(props);\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new People();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Person || item._isAPersonObject;\n  }\n\n  add(person) {\n    if (!this.canAdd(person)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(person.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(person);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    person = Person.clone(person);\n\n    let id = person.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Person ID ${person}`);\n      }\n\n      person._updateHooks(this._getHook);\n      this.state.registry[id] = person;\n    } else {\n      let uid = _generate_person_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_person_uid();\n      }\n\n      person.state.id = uid;\n    }\n\n    person._updateHooks(this._getHook);\n    this._names[person.getName()] = person.getID();\n    this.state.registry[person.getID()] = person;\n\n    return person;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No Person with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Person || name._isAPersonObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No Person matches '${name}. Available People are '${keys}'`);\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n\n      if (person) {\n        for (let i = 0; i < funcs.length; ++i) {\n          person = funcs[i](person);\n          if (!person) {\n            break;\n          }\n        }\n\n        if (person) {\n          registry[key] = person;\n          names[person.getName()] = key;\n        }\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n      if (person) {\n        let timeline = person.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({ anchor = null } = {}) {\n    let nodes = [];\n\n    if (anchor.getID) {\n      anchor = anchor.getID();\n    }\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n\n      if (person) {\n        let node = null;\n        if (key === anchor) {\n          node = person.getNode({ is_anchor: true });\n        } else {\n          node = person.getNode();\n        }\n\n        if (node) {\n          nodes.push(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id) {\n    let person = this.state.registry[id];\n\n    if (!person) {\n      throw new MissingError(`No Person with ID ${id}`);\n    }\n\n    return person;\n  }\n\n  load(data) {\n    if (data) {\n      if (data.array) {\n        data = data.array;\n      }\n      data.forEach((element) => {\n        let person = Person.load(element);\n        this.add(person);\n      });\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPeople.unDry = function (value) {\n  let people = new People();\n  people.state = value;\n  people._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    people._names[v.getName()] = key;\n  });\n\n  return people;\n};\n\nDry.registerClass(\"People\", People);\n\nexport default People;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nfunction _filterProject(values, project) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    if (!(key in project)) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nclass Business {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      projects: {},\n      sources: {},\n      scores: {},\n      affiliations: {},\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isABusinessObject = true;\n  }\n\n  static clone(item) {\n    let c = new Business();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode() {\n    return true;\n  }\n\n  inGroup(group) {\n    if (group.getID) {\n      let ids = {};\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key) => {\n      for (let index in this.state.affiliations[key]) {\n        if (this.state.affiliations[key][index] in group) {\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key) => {\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id) => {\n        if (s.includes(source_id)) {\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects) {\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n\n    if (affiliations !== this.state.affiliations) {\n      let business = new Business();\n      business.state = { ...this.state };\n      business.state.affiliations = affiliations;\n      business._getHook = this._getHook;\n      return business;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n\n    if (affiliations !== this.state.affiliations) {\n      let business = new Business();\n      business.state = { ...this.state };\n      business.state.affiliations = affiliations;\n      business._getHook = this._getHook;\n      return business;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.projects = setState(state.projects, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.scores = setState(state.scores, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.notes = setState(state.notes, []);\n\n      if (!this.state.name) {\n        throw ValueError(\"You cannot have an Business without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Business(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getScores() {\n    return this.state.scores;\n  }\n\n  getNode(is_anchor = false) {\n    let node = { id: this.getID(), label: this.getName(), title: this.getName(), shape: \"circle\" };\n\n    let weight = 10.0;\n\n    if (weight < 5.0) {\n      weight = 5.0;\n    } else if (weight > 20.0) {\n      weight = 20.0;\n    }\n\n    node[\"size\"] = weight;\n\n    let keys = Object.keys(this.state.projects);\n\n    if (keys.length > 0) {\n      node[\"group\"] = keys.sort().join(\":\");\n    } else {\n      node[\"group\"] = \"unknown\";\n    }\n\n    if (is_anchor) {\n      node[\"shape\"] = \"rect\";\n      node[\"physics\"] = false;\n      node[\"group\"] = \"anchor\";\n      node[\"size\"] = 20.0;\n    }\n\n    return node;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nBusiness.unDry = function (value) {\n  return new Business(value);\n};\n\nDry.registerClass(\"Business\", Business);\n\nexport default Business;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Business from \"./Business\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_business_uid() {\n  let uid = uuidv4();\n  return \"B\" + uid.substring(uid.length - 7);\n}\n\nclass Businesses {\n  constructor(props) {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isABusinessesObject = true;\n    this.load(props);\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Businesses();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Business || item._isABusinessObject;\n  }\n\n  add(business) {\n    if (!this.canAdd(business)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(business.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(business);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    business = Business.clone(business);\n\n    let id = business.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Business ID ${business}`);\n      }\n\n      business._updateHooks(this._getHook);\n      this.state.registry[id] = business;\n    } else {\n      let uid = _generate_business_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_business_uid();\n      }\n\n      business.state.id = uid;\n    }\n\n    business._updateHooks(this._getHook);\n    this._names[business.getName()] = business.getID();\n    this.state.registry[business.getID()] = business;\n\n    return business;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw MissingError(`No Business with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Business || name._isABusinessObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No Business matches '${name}. Available Businesses are '${keys}'`);\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n\n      if (business) {\n        for (let i = 0; i < funcs.length; ++i) {\n          business = funcs[i](business);\n          if (!business) {\n            break;\n          }\n        }\n\n        if (business) {\n          registry[key] = business;\n          names[business.getName()] = key;\n        }\n      }\n    });\n\n    let businesses = new Businesses();\n    businesses.state.registry = registry;\n    businesses._names = names;\n    businesses._updateHooks(this._getHook);\n\n    return businesses;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n      if (business) {\n        let timeline = business.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({ anchor = null } = {}) {\n    let nodes = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n\n      if (business) {\n        let node = null;\n        if (key === anchor) {\n          node = business.getNode({ is_anchor: true });\n        } else {\n          node = business.getNode();\n        }\n\n        if (node) {\n          nodes.push(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id) {\n    let business = this.state.registry[id];\n\n    if (!business) {\n      throw new MissingError(`No Business with ID ${id}`);\n    }\n\n    return business;\n  }\n\n  load(data) {\n    if (data) {\n      if (data.array) {\n        data = data.array;\n      }\n      data.forEach((element) => {\n        let business = Business.load(element);\n        this.add(business);\n      });\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nBusinesses.unDry = function (value) {\n  let businesses = new Businesses();\n  businesses.state = value;\n  businesses._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    businesses._names[v.getName()] = key;\n  });\n\n  return businesses;\n};\n\nDry.registerClass(\"Businesses\", Businesses);\n\nexport default Businesses;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _mergeSources(state, other, key) {\n  state = state[key];\n  other = other[key];\n\n  Object.keys(other).forEach((key) => {\n    if (!(key in state)) {\n      state[key] = other[key];\n    } else {\n      for (let item in other[key]) {\n        if (!(item in state[key])) {\n          state[key].push(item);\n        }\n      }\n    }\n  });\n}\n\nclass Connection {\n  constructor(props) {\n    this.state = {\n      id: null,\n      n0: null,\n      n1: null,\n      shared: null,\n      type: null,\n      duration: null,\n      affiliations: null,\n      correspondances: null,\n      projects: null,\n      notes: null,\n    };\n\n    this.setState(props);\n    this._getHook = null;\n    this._isAConnectionObject = true;\n  }\n\n  static clone(item) {\n    let c = new Connection();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  getName() {\n    let n0 = this.state.n0;\n    let n1 = this.state.n1;\n\n    if (n0 <= n1) {\n      return `${n0}<=>${n1}`;\n    } else {\n      return `${n1}<=>${n0}`;\n    }\n  }\n\n  getNode0() {\n    if (this._getHook) {\n      return this._getHook(this.state.n0);\n    } else {\n      return this.state.n0;\n    }\n  }\n\n  getNode1() {\n    if (this._getHook) {\n      return this._getHook(this.state.n1);\n    } else {\n      return this.state.n1;\n    }\n  }\n\n  getNode0ID() {\n    return this.state.n0;\n  }\n\n  getNode1ID() {\n    return this.state.n1;\n  }\n\n  areNodesVisible(n) {\n    return n[this.state.n0] && n[this.state.n1];\n  }\n\n  getNode0Name() {\n    let node0 = this.getNode0();\n\n    try {\n      return node0.getName();\n    } catch (error) {\n      return node0;\n    }\n  }\n\n  getNode1Name() {\n    let node1 = this.getNode1();\n\n    try {\n      return node1.getName();\n    } catch (error) {\n      return node1;\n    }\n  }\n\n  getDuration() {\n    return this.state.duration;\n  }\n\n  getAffiliationSources() {\n    return this.state.affiliations;\n  }\n\n  getCorrespondanceSources() {\n    return this.state.correspondances;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(source).forEach((key) => {\n      if (this.state.affiliations[key] || this.state.correspondances[key]) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (!window) {\n      return this;\n    }\n\n    let duration = this.getDuration();\n\n    if (!duration) {\n      return this;\n    }\n\n    let intersect = window.intersect(duration);\n\n    if (!intersect) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.id = setState(state.id);\n      this.state.n0 = setState(state.n0);\n      this.state.n1 = setState(state.n1);\n      this.state.shared = setState(state.shared, []);\n      this.state.type = setState(state.type);\n      this.state.duration = setState(state.duration);\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.correspondances = setState(state.correspondances, {});\n      this.state.notes = setState(state.notes, []);\n      this.state.weights = setState(state.weights, {});\n      this.state.projects = setState(state.projects, {});\n\n      if (!this.state.n0 || !this.state.n1) {\n        throw new ValueError(`Invalid connection ${this}`);\n      }\n    }\n  }\n\n  merge(other) {\n    if (!this._getHook) {\n      if (other._getHook) {\n        return other.merge(this);\n      }\n    }\n\n    let state = lodash.cloneDeep(this.state);\n\n    Object.keys(other.state.shared).forEach((key) => {\n      if (!(key in state.shared)) {\n        state.shared[key] = other.state.shared[key];\n      }\n    });\n\n    Object.keys(other.state.notes).forEach((key) => {\n      if (!(key in state.notes)) {\n        state.notes[key] = other.state.notes[key];\n      }\n    });\n\n    _mergeSources(state, other.state, \"affiliations\");\n    _mergeSources(state, other.state, \"correspondances\");\n\n    state.duration = state.duration.merge(other.state.duration);\n\n    let c = new Connection();\n    c.state = state;\n    c._getHook = this._getHook;\n\n    return c;\n  }\n\n  toString() {\n    return `Connection(${this.getNode0Name()}<=>${this.getNode1Name()})`;\n  }\n\n  getColorFromType() {\n    switch (this.state.type) {\n      case \"direct\":\n        return \"rgb(180,150,150)\";\n      case \"indirect\":\n        return \"rgb(180,180,180)\";\n      default:\n        console.log(`Unknown type? ${this.state.type}`);\n        return \"red\";\n    }\n  }\n\n  getType() {\n    return this.state.type;\n  }\n\n  getWeights() {\n    return this.state.weights;\n  }\n\n  getWeight() {\n    let weight = 1.0;\n\n    Object.keys(this.state.weights).forEach((key) => {\n      weight += this.state.weights[key];\n    });\n\n    return weight;\n  }\n\n  getWeightFromType() {\n    let weight = this.getWeight();\n\n    switch (this.state.type) {\n      case \"direct\":\n        return 1.0 * weight;\n      case \"indirect\":\n        return 0.5 * weight;\n      default:\n        console.log(`Unknown type? ${this.state.type}`);\n        return 0.5 * weight;\n    }\n  }\n\n  toEdge() {\n    let color = this.getColorFromType();\n    let weight = this.getWeightFromType();\n\n    let edge = {\n      id: this.getID(),\n      source: this.state.n0,\n      target: this.state.n1,\n      value: weight,\n      color: color,\n    };\n\n    return edge;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nConnection.unDry = function (value) {\n  return new Connection(value);\n};\n\nConnection.load = function (data) {\n  return new Connection({ name: data.name });\n};\n\nDry.registerClass(\"Connection\", Connection);\n\nexport default Connection;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Connection from \"./Connection\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_connection_uid() {\n  let uid = uuidv4();\n  return \"C\" + uid.substring(uid.length - 7);\n}\n\nclass Connections {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAConnectionsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Connections();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item) {\n    return item instanceof Connection || item._isAConnectionObject;\n  }\n\n  add(connection) {\n    if (!this.canAdd(connection)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(connection.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(connection);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    connection = Connection.clone(connection);\n\n    let id = connection.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Connection ID ${connection}`);\n      }\n    } else {\n      let uid = _generate_connection_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_connection_uid();\n      }\n\n      connection.state.id = uid;\n    }\n\n    connection._updateHooks(this._getHook);\n    this._names[connection.getName()] = connection.getID();\n    this.state.registry[connection.getID()] = connection;\n\n    return connection;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw MissingError(`No connection with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Connection || name._isAConnectionObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No connection matches '${name}. Available Connections are '${keys}'`);\n  }\n\n  get(id) {\n    let connection = this.state.registry[id];\n\n    if (!connection) {\n      throw new MissingError(`No Connection with ID ${id}`);\n    }\n\n    return connection;\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let connection = this.state.registry[key];\n\n      if (connection) {\n        for (let i = 0; i < funcs.length; ++i) {\n          connection = funcs[i](connection);\n          if (!connection) {\n            break;\n          }\n        }\n\n        if (connection) {\n          registry[key] = connection;\n          names[connection.getName()] = key;\n        }\n      }\n    });\n\n    let connections = new Connections();\n\n    connections.state.registry = registry;\n    connections._names = names;\n    connections._updateHooks(this._getHook);\n\n    return connections;\n  }\n\n  getConnectionsTo(item) {\n    if (item.getID) {\n      let id = item.getID();\n      item = {};\n      item[id] = 1;\n    }\n\n    let nnodes = Object.keys(item).length;\n\n    let seen = {};\n\n    function _add(id) {\n      if (!(id in seen)) {\n        seen[id] = 1;\n      } else {\n        seen[id] += 1;\n      }\n    }\n\n    for (let key in this.state.registry) {\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() in item) {\n        _add(connection.getNode1ID());\n      } else if (connection.getNode1ID() in item) {\n        _add(connection.getNode0ID());\n      }\n    }\n\n    let connections = [];\n\n    if (this._getHook) {\n      Object.keys(seen).forEach((key) => {\n        try {\n          if (seen[key] === nnodes) {\n            connections.push(this._getHook(key));\n          }\n        } catch (error) {\n          console.error(error);\n        }\n      });\n    } else {\n      connections = Object.keys(seen);\n    }\n\n    return connections;\n  }\n\n  getEdges(ids = null) {\n    let edges = [];\n\n    if (ids) {\n      Object.keys(this.state.registry).forEach((key) => {\n        let connection = this.state.registry[key];\n        if (connection.areNodesVisible(ids)) {\n          edges.push(connection.toEdge());\n        }\n      });\n    } else {\n      Object.keys(this.state.registry).forEach((key) => {\n        let connection = this.state.registry[key];\n        edges.push(connection.toEdge());\n      });\n    }\n\n    return edges;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nConnections.unDry = function (value) {\n  let connections = new Connections();\n  connections.state = value;\n  connections._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    connections._names[v.getName()] = key;\n  });\n\n  return connections;\n};\n\nDry.registerClass(\"Connections\", Connections);\n\nexport default Connections;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Position {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPositionObject = true;\n  }\n\n  static clone(item){\n    let c = new Position();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  static makeCanonical(name){\n    if (!name){\n      return null;\n    }\n    else{\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Position.makeCanonical(this.state.name);\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Position without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Position(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPosition.unDry = function(value){\n  return new Position(value);\n}\n\nDry.registerClass(\"Position\", Position);\n\nexport default Position;\n","\nimport Dry from 'json-dry';\nimport { v4 as uuidv4 } from 'uuid';\nimport lodash from 'lodash';\n\nimport Position from './Position';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_position_uid(){\n  let uid = uuidv4();\n  return \"Q\" + uid.substring(uid.length-7);\n}\n\nclass Positions {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPositionsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Positions();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Position) || item._isAPositionObject;\n  }\n\n  add(position){\n    if (!this.canAdd(position)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(position.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(position);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    position = Position.clone(position);\n\n    let id = position.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Position ID ${position}`);\n      }\n\n      position._updateHooks(this._getHook);\n      this.state.registry[id] = position;\n    }\n    else{\n      let uid = _generate_position_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_position_uid();\n      }\n\n      position.state.id = uid;\n    }\n\n    position._updateHooks(this._getHook);\n    this._names[position.getName()] = position.getID();\n    this.state.registry[position.getID()] = position;\n\n    return position;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No position with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Position || name._isApositionObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No position matches '${name}. Available Positions ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let position = this.state.registry[id];\n\n    if (!position){\n      throw new MissingError(`No Position with ID ${id}`);\n    }\n\n    return position;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPositions.unDry = function(value){\n  let positions = new Positions();\n  positions.state = value;\n  positions._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    positions._names[v.getName()] = key;\n  });\n\n  return positions;\n}\n\nDry.registerClass(\"Positions\", Positions);\n\nexport default Positions;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Affiliation {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAAffiliationObject = true;\n  }\n\n  static clone(item) {\n    let c = new Affiliation();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  static makeCanonical(name) {\n    if (!name) {\n      return null;\n    } else {\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Affiliation.makeCanonical(this.state.name);\n\n      if (!this.state.name) {\n        throw ValueError(\"You cannot have an Affiliation without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Affiliation(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nAffiliation.unDry = function (value) {\n  return new Affiliation(value);\n};\n\nDry.registerClass(\"Affiliation\", Affiliation);\n\nexport default Affiliation;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Affiliation from \"./Affiliation\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_affiliation_uid() {\n  let uid = uuidv4();\n  return \"A\" + uid.substring(uid.length - 7);\n}\n\nclass Affiliations {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAAffiliationsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Affiliations();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Affiliation || item._isAAffiliationObject;\n  }\n\n  add(affiliation) {\n    if (!this.canAdd(affiliation)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(affiliation.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(affiliation);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    affiliation = Affiliation.clone(affiliation);\n\n    let id = affiliation.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Affiliation ID ${affiliation}`);\n      }\n\n      affiliation._updateHooks(this._getHook);\n      this.state.registry[id] = affiliation;\n    } else {\n      let uid = _generate_affiliation_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_affiliation_uid();\n      }\n\n      affiliation.state.id = uid;\n    }\n\n    affiliation._updateHooks(this._getHook);\n    this._names[affiliation.getName()] = affiliation.getID();\n    this.state.registry[affiliation.getID()] = affiliation;\n\n    return affiliation;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw MissingError(`No affiliation with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Affiliation || name._isAAffiliationObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No affiliation matches '${name}. Available Affiliations are '${keys}'`);\n  }\n\n  get(id) {\n    let affiliation = this.state.registry[id];\n\n    if (!affiliation) {\n      throw new MissingError(`No Affiliation with ID ${id}`);\n    }\n\n    return affiliation;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nAffiliations.unDry = function (value) {\n  let affiliations = new Affiliations();\n  affiliations.state = value;\n  affiliations._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    affiliations._names[v.getName()] = key;\n  });\n\n  return affiliations;\n};\n\nDry.registerClass(\"Affiliations\", Affiliations);\n\nexport default Affiliations;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport RoughDate from \"./RoughDate\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Source {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      date: null,\n      description: null,\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isASourceObject = true;\n  }\n\n  static clone(item) {\n    let c = new Source();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  getDate() {\n    return this.state.date;\n  }\n\n  updateDate(date, force = false) {\n    if (!(date instanceof RoughDate || date._isARoughDateObject)) {\n      date = new RoughDate(date);\n    }\n\n    if (date.isNull()) {\n      return false;\n    }\n\n    if (this.getDate().isNull()) {\n      this.state.date = date;\n      return true;\n    }\n\n    if (RoughDate.ne(this.getDate(), date)) {\n      if (force) {\n        this.state.date = this.getDate().merge(date);\n        return true;\n      } else {\n        console.log(`Disagreement of date for ${this}: ${this.getDate()} vs ${date}`);\n      }\n    }\n\n    return false;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.description = setState(state.description);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n      this.state.date = setState(state.date, new RoughDate());\n\n      if (!this.state.name) {\n        throw ValueError(\"You cannot have an Source without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Source(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getDescription() {\n    return this.state.description;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSource.unDry = function (value) {\n  return new Source(value);\n};\n\nDry.registerClass(\"Source\", Source);\n\nexport default Source;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Source from \"./Source\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_source_uid() {\n  let uid = uuidv4();\n  return \"S\" + uid.substring(uid.length - 7);\n}\n\nclass Sources {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isASourcesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Sources();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Source || item._isASourceObject;\n  }\n\n  add(source) {\n    if (!this.canAdd(source)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(source.getName());\n    } catch (error) {\n        console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(source);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    source = Source.clone(source);\n\n    let id = source.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Source ID ${source}`);\n      }\n\n      source._updateHooks(this._getHook);\n      this.state.registry[id] = source;\n    } else {\n      let uid = _generate_source_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_source_uid();\n      }\n\n      source.state.id = uid;\n    }\n\n    source._updateHooks(this._getHook);\n    this._names[source.getName()] = source.getID();\n    this.state.registry[source.getID()] = source;\n\n    return source;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw MissingError(`No source with name ${name}`);\n    }\n  }\n\n  search(name) {\n    if (name instanceof Source || name._isASourceObject) {\n      name = name.getName();\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let item = this.state.registry[key];\n\n      let description = item.getDescription();\n\n      if (!description) {\n        description = \"\";\n      }\n\n      try {\n        if (item.getName().toLowerCase().indexOf(name) !== -1) {\n          results.push(item);\n        } else if (description.toLowerCase().indexOf(name) !== -1) {\n          results.push(item);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    } else {\n      return null;\n    }\n  }\n\n  find(name) {\n    if (name instanceof Source || name._isASourceObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No source matches '${name}. Available sources are '${keys}'`);\n  }\n\n  get(id) {\n    let source = this.state.registry[id];\n\n    if (!source) {\n      throw new MissingError(`No Source with ID ${id}`);\n    }\n\n    return source;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSources.unDry = function (value) {\n  let sources = new Sources();\n  sources.state = value;\n  sources._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    sources._names[v.getName()] = key;\n  });\n\n  return sources;\n};\n\nDry.registerClass(\"Sources\", Sources);\n\nexport default Sources;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Note {\n  constructor(props) {\n    this.state = {\n      text: null,\n      id: null,\n      sources: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isANoteObject = true;\n  }\n\n  static clone(item) {\n    let c = new Note();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.text = setState(state.text);\n      this.state.id = setState(state.id);\n      this.state.sources = setState(state.sources, []);\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  toString() {\n    return `Note(${this.getText()})`;\n  }\n\n  getText() {\n    return this.state.text;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nNote.unDry = function (value) {\n  return new Note(value);\n};\n\nDry.registerClass(\"Note\", Note);\n\nexport default Note;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Note from \"./Note\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_note_uid() {\n  let uid = uuidv4();\n  return \"N\" + uid.substring(uid.length - 7);\n}\n\nclass Notes {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isANotesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Notes();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item) {\n    return item instanceof Note || item._isANoteObject;\n  }\n\n  add(note) {\n    if (!this.canAdd(note)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(note.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(note);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    note = note.clone(Note);\n\n    let id = note.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Note ID ${note}`);\n      }\n\n      note._updateHooks(this._getHook);\n      this.state.registry[id] = Note;\n    } else {\n      let uid = _generate_note_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_note_uid();\n      }\n\n      note.state.id = uid;\n    }\n\n    note._updateHooks(this._getHook);\n    this._names[note.getName()] = note.getID();\n    this.state.registry[note.getID()] = note;\n\n    return note;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw MissingError(`No Note with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Note || name._isANoteObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No Note matches '${name}. Available Notes are '${keys}'`);\n  }\n\n  get(id) {\n    let Note = this.state.registry[id];\n\n    if (!Note) {\n      throw new MissingError(`No Note with ID ${id}`);\n    }\n\n    return Note;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nNotes.unDry = function (value) {\n  let notes = new Notes();\n  notes.state = value;\n  notes._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    notes._names[v.getName()] = key;\n  });\n\n  return notes;\n};\n\nDry.registerClass(\"Notes\", Notes);\n\nexport default Notes;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Project {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      url: null,\n      duration: new DateRange(),\n      notes: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAProjectObject = true;\n  }\n\n  static clone(item){\n    let c = new Project();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, {});\n      this.state.url = setState(state.url, null);\n      this.state.duration = new DateRange({value:state.duration});\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have a Project without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Project(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  getURL(){\n      return this.state.url;\n  }\n\n  getDuration(){\n    return this.state.duration;\n  }\n\n  getTimeLine(){\n    const duration = this.getDuration();\n\n    if (duration && duration.hasBounds()){\n      return {start: duration.getEarliestStart().toDate(),\n              end: duration.getLatestEnd().toDate(),\n              id: this.getID(),\n              content: this.getName(),\n             };\n    }\n    else{\n      return null;\n    }\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nProject.unDry = function(value){\n  return new Project(value);\n}\n\nDry.registerClass(\"Project\", Project);\n\nexport default Project;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Project from \"./Project\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_project_uid() {\n  let uid = uuidv4();\n  return \"J\" + uid.substring(uid.length - 7);\n}\n\nclass Projects {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAProjectsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Projects();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  getNames() {\n    return Object.keys(this._names);\n  }\n\n  getIDs() {\n    return Object.values(this._names);\n  }\n\n  getDetails() {\n    return this._names;\n  }\n\n  canAdd(item) {\n    return item instanceof Project || item._isAProjectObject;\n  }\n\n  add(project) {\n    if (!this.canAdd(project)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(project.getName());\n    } catch (error) {\n      console.error(\"Cannot get project\", error);\n    }\n\n    if (existing) {\n      existing = existing.merge(project);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    project = Project.clone(project);\n\n    let id = project.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Project ID ${project}`);\n      }\n\n      project._updateHooks(this._getHook);\n      this.state.registry[id] = project;\n    } else {\n      let uid = _generate_project_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_project_uid();\n      }\n\n      project.state.id = uid;\n    }\n\n    project._updateHooks(this._getHook);\n    this._names[project.getName()] = project.getID();\n    this.state.registry[project.getID()] = project;\n\n    return project;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw MissingError(`No project with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Project || name._isAProjectObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No project matches '${name}. Available projects are '${keys}'`);\n  }\n\n  get(id) {\n    let project = this.state.registry[id];\n\n    if (!project) {\n      throw new MissingError(`No Project with ID ${id}`);\n    }\n\n    return project;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let project = this.state.registry[key];\n      if (project) {\n        let timeline = project.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nProjects.unDry = function (value) {\n  let projects = new Projects();\n  projects.state = value;\n  projects._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    projects._names[v.getName()] = key;\n  });\n\n  return projects;\n};\n\nDry.registerClass(\"Projects\", Projects);\n\nexport default Projects;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nclass Biographies {\n  constructor() {\n    this.state = {\n      bios: {},\n    };\n\n    this._getHook = null;\n    this._isABiographiesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  static clone(item) {\n    let c = new Biographies();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  get(node) {\n    if (!node) {\n      return null;\n    } else if (node.getID) {\n      node = node.getID();\n    }\n\n    return this.state.bios[node];\n  }\n\n  getNode(id) {\n    if (this._getHook) {\n      return this._getHook(id);\n    } else {\n      return id;\n    }\n  }\n\n  search(text) {\n    if (!text) {\n      return null;\n    }\n\n    text = text.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this.state.bios).forEach((key) => {\n      if (this.state.bios[key].toLowerCase().indexOf(text) !== -1) {\n        results.push(this.getNode(key));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    } else {\n      return null;\n    }\n  }\n\n  add(node, biography) {\n    if (!node || !biography) {\n      return null;\n    } else if (node.getID) {\n      node = node.getID();\n    }\n\n    let bio = this.state.bios[node];\n\n    if (bio) {\n      console.log(`There is already a bio for ${this.getNode(node)}`);\n      biography = `${bio}\\n${biography}`;\n    }\n\n    this.state.bios[node] = biography;\n  }\n}\n\nBiographies.unDry = function (value) {\n  let bios = new Biographies();\n  bios.state = value;\n  return bios;\n};\n\nDry.registerClass(\"Biographies\", Biographies);\n\nexport default Biographies;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport People from \"./People\";\nimport Businesses from \"./Businesses\";\nimport Connections from \"./Connections\";\nimport Positions from \"./Positions\";\nimport Affiliations from \"./Affiliations\";\nimport Sources from \"./Sources\";\nimport Notes from \"./Notes\";\nimport Projects from \"./Projects\";\nimport Biographies from \"./Biographies\";\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nconst fast_physics = {\n  enabled: true,\n  timestep: 0.5,\n};\n\nconst slow_physics = { ...fast_physics };\nslow_physics.timestep = 0.1;\n\nfunction _push(values, list) {\n  if (!list) {\n    return;\n  }\n\n  if (values.length) {\n    for (let i = 0; i < values.length; ++i) {\n      list.push(values[i]);\n    }\n  } else {\n    list.push(values);\n  }\n}\n\nclass Social {\n  constructor(props) {\n    if (props) {\n      this.state = props;\n    } else {\n      this.state = {};\n    }\n\n    this.state.anchor = null;\n    this.state.filter = {};\n    this.state.cache = {\n      graph: null,\n      projectTimeLine: null,\n      itemTimeLine: null,\n      node_filters: null,\n      edge_filters: null,\n      people: null,\n      businesses: null,\n      connections: null,\n    };\n    this.state.window = new DateRange();\n    this.state.max_window = new DateRange();\n    this._rebuilding = 0;\n\n    this._isASocialObject = true;\n  }\n\n  static clone(item) {\n    let c = new Social();\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks() {\n    let getHook = (id) => {\n      return this.get(id);\n    };\n\n    let state = { ...this.state };\n\n    if (!(this.state.people instanceof People)) {\n      state.people = new People();\n    } else {\n      state.people = this.state.people;\n    }\n\n    if (!(this.state.businesses instanceof Businesses)) {\n      state.businesses = new Businesses();\n    } else {\n      state.businesses = this.state.businesses;\n    }\n\n    if (!(this.state.connections instanceof Connections)) {\n      state.connections = new Connections();\n    } else {\n      state.connections = this.state.connections;\n    }\n\n    if (!(this.state.positions instanceof Positions)) {\n      state.positions = new Positions();\n    } else {\n      state.positions = this.state.positions;\n    }\n\n    if (!(this.state.affiliations instanceof Affiliations)) {\n      state.affiliations = new Affiliations();\n    } else {\n      state.affiliations = this.state.affiliations;\n    }\n\n    if (!(this.state.sources instanceof Sources)) {\n      state.sources = new Sources();\n    } else {\n      state.sources = this.state.sources;\n    }\n\n    if (!(this.state.notes instanceof Notes)) {\n      state.notes = new Notes();\n    } else {\n      state.notes = this.state.notes;\n    }\n\n    if (!(this.state.projects instanceof Projects)) {\n      state.projects = new Projects();\n    } else {\n      state.projects = this.state.projects;\n    }\n\n    if (!(this.state.biographies instanceof Biographies)) {\n      state.biographies = new Biographies();\n    } else {\n      state.biographies = this.state.biographies;\n    }\n\n    this.state = state;\n\n    for (let key in this.state) {\n      try {\n        this.state[key]._updateHooks(getHook);\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  }\n\n  clearCache() {\n    this.state.cache = {\n      graph: null,\n      projectTimeLine: null,\n      itemTimeLine: null,\n      node_filters: null,\n      edge_filters: null,\n      people: null,\n      businesses: null,\n      connections: null,\n    };\n    this._rebuilding = 0;\n  }\n\n  getNodeFilters() {\n    if (this.state.cache.node_filters) {\n      return this.state.cache.node_filters;\n    }\n\n    this._rebuilding += 1;\n    this.state.cache.node_filters = [];\n\n    // Must do time first, as this can affect all of the other filters!\n    let window = this.getWindow();\n\n    if (window.hasStart() || window.hasEnd()) {\n      this.state.cache.node_filters.push((item) => {\n        try {\n          return item.filterWindow(window);\n        } catch (error) {\n          console.log(`ERROR ${error}: ${item}`);\n          return item;\n        }\n      });\n    }\n\n    const project_filter = this.state.filter.project;\n\n    if (project_filter) {\n      this.state.cache.node_filters.push((item) => {\n        return item.filterProject(project_filter);\n      });\n    }\n\n    const source_filter = this.state.filter.source;\n\n    if (source_filter) {\n      this.state.cache.node_filters.push((item) => {\n        return item.filterSource(source_filter);\n      });\n    }\n\n    const node_filter = this.state.filter.node;\n\n    if (node_filter) {\n      let connections = this.getConnectionsTo(node_filter);\n      let filter = { ...node_filter };\n\n      for (let connection in connections) {\n        let node = connections[connection];\n        filter[node.getID()] = 1;\n      }\n\n      this.state.cache.node_filters.push((item) => {\n        if (item.getID() in filter) {\n          return item;\n        } else {\n          return null;\n        }\n      });\n    }\n\n    const group_filter = this.state.filter.group;\n\n    if (group_filter) {\n      this.state.cache.node_filters.push((item) => {\n        try {\n          if (item.inGroup(group_filter)) {\n            return item;\n          } else {\n            return null;\n          }\n        } catch (error) {\n          console.log(`Filter error: ${error}`);\n          return item;\n        }\n      });\n    }\n\n    this._rebuilding -= 1;\n    return this.state.cache.node_filters;\n  }\n\n  getEdgeFilters() {\n    if (!this.state.cache.edge_filters) {\n      this.state.cache.edge_filters = [];\n\n      // must do time first, as this can affect all of the other filters!\n      let window = this.getWindow();\n\n      if (window.hasStart() || window.hasEnd()) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterWindow(window);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const project_filter = this.state.filter.project;\n\n      if (project_filter) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterProject(project_filter);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const source_filter = this.state.filter.source;\n\n      if (source_filter) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterSource(source_filter);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n    }\n\n    return this.state.cache.edge_filters;\n  }\n\n  getWindow() {\n    return this.state.window;\n  }\n\n  getMaxWindow() {\n    return this.state.max_window;\n  }\n\n  _fitWindow(window) {\n    let new_window = this.state.max_window.intersect(window);\n\n    let delta = window.getDelta();\n\n    if (new_window && new_window.getDelta() === delta) {\n      return window;\n    }\n\n    if (delta > this.state.max_window.getDelta()) {\n      return DateRange.clone(this.state.max_window);\n    }\n\n    if (window.getStartDate() < this.state.max_window.getStartDate()) {\n      return new DateRange({\n        start: this.state.max_window.getStartDate(),\n        end: this.state.max_window.getStartDate() + delta,\n      });\n    } else {\n      return new DateRange({\n        start: this.state.max_window.getEndDate() - delta,\n        end: this.state.max_window.getEndDate(),\n      });\n    }\n  }\n\n  setMaxWindow(window) {\n    if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (window === this.state.max_window) {\n      return;\n    }\n\n    this.state.max_window = window;\n\n    if (this.state.window && this.state.window.hasBounds()) {\n      let fitted = this._fitWindow(this.state.window);\n\n      if (fitted !== this.state.window) {\n        this.setWindow(fitted);\n      }\n    } else {\n      this.state.window = this.state.max_window;\n    }\n  }\n\n  setWindow(window) {\n    if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (DateRange.eq(window, this.state.window)) {\n      return false;\n    }\n\n    let fitted = this._fitWindow(window);\n\n    if (DateRange.eq(fitted, this.state.window)) {\n      return false;\n    }\n\n    this.state.window = fitted;\n    this.clearCache();\n    return true;\n  }\n\n  getPeople(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.people) {\n        console.log(\"REBUILD PEOPLE\");\n        this._rebuilding += 1;\n        this.state.cache.people = this.state.people.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.people;\n    } else {\n      return this.state.people;\n    }\n  }\n\n  getBusinesses(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.businesses) {\n        console.log(\"REBUILD BUSINESSES\");\n        this._rebuilding += 1;\n        this.state.cache.businesses = this.state.businesses.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.businesses;\n    } else {\n      return this.state.businesses;\n    }\n  }\n\n  getConnections(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.connections) {\n        console.log(\"REBUILD CONNECTIONS\");\n        this._rebuilding += 1;\n        this.state.cache.connections = this.state.connections.filter(this.getEdgeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.connections;\n    } else {\n      return this.state.connections;\n    }\n  }\n\n  getBiographies() {\n    return this.state.biographies;\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getPositions() {\n    return this.state.positions;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getNotes() {\n    return this.state.notes;\n  }\n\n  getProjects() {\n    return this.state.projects;\n  }\n\n  getConnectionsTo(item) {\n    return this.getConnections().getConnectionsTo(item);\n  }\n\n  getAnchor() {\n    return this.state.anchor;\n  }\n\n  getFilter() {\n    return { ...this.state.filter };\n  }\n\n  getFilterText() {\n    const filter = [];\n\n    let f = this.state.filter.node;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`connected to ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`connected to (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.source;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`with source ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`with sources (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.group;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`in group ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`in groups (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.project;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`in project ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`in projects (${parts.join(\" and \")})`);\n      }\n    }\n\n    if (filter.length === 1) {\n      return filter[0];\n    } else if (filter.length > 1) {\n      return `[${filter.join(\"] and [\")}]`;\n    } else {\n      return null;\n    }\n  }\n\n  _getType(item) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    if (item[0] === \"P\" || item[0] === \"B\") {\n      return \"node\";\n    } else if (item[0] === \"J\") {\n      return \"project\";\n    } else if (item[0] === \"S\") {\n      return \"source\";\n    } else {\n      return \"group\";\n    }\n  }\n\n  isFiltered(item) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    let type = this._getType(item);\n\n    const filter = this.state.filter[type];\n\n    if (filter) {\n      return item in filter;\n    } else {\n      return false;\n    }\n  }\n\n  find(text) {\n    let result = [];\n\n    try {\n      let items = this.getPeople(false).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getBusinesses(false).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getPositions().find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getAffiliations().find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getSources().search(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getBiographies().search(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    return result;\n  }\n\n  resetFilters() {\n    this.state.filter = {};\n    this.clearCache();\n  }\n\n  setAnchor(anchor) {\n    if (anchor) {\n      anchor = this.getPeople().find(anchor);\n    }\n\n    this.state.anchor = anchor;\n    this.clearCache();\n  }\n\n  toggleFilter(item) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    let type = this._getType(item);\n\n    if (!(type in this.state.filter)) {\n      this.state.filter[type] = {};\n    }\n\n    if (item in this.state.filter[type]) {\n      delete this.state.filter[type][item];\n\n      if (Object.keys(this.state.filter[type]).length === 0) {\n        delete this.state.filter[type];\n      }\n    } else {\n      this.state.filter[type][item] = 1;\n    }\n\n    this.clearCache();\n  }\n\n  getProjectTimeLine() {\n    if (this.state.cache.projectTimeLine !== null) {\n      return this.state.cache.projectTimeLine;\n    }\n\n    let items = this.getProjects().getTimeLine();\n\n    this.state.cache.projectTimeLine = items;\n\n    return this.state.cache.projectTimeLine;\n  }\n\n  getItemTimeLine() {\n    if (this.state.cache.itemTimeLine !== null) {\n      return this.state.cache.itemTimeLine;\n    }\n\n    let items = this.getPeople().getTimeLine();\n\n    let projects = this.getProjects().getTimeLine();\n\n    projects.forEach((item) => {\n      item.type = \"background\";\n      items.push(item);\n    });\n\n    this.state.cache.itemTimeLine = items;\n\n    return this.state.cache.itemTimeLine;\n  }\n\n  getGraph() {\n    if (this.state.cache.graph !== null) {\n      return this.state.cache.graph;\n    }\n\n    const anchor = this.state.anchor;\n    let nodes = this.getPeople().getNodes({ anchor: anchor });\n    nodes = nodes.concat(this.getBusinesses().getNodes());\n\n    let n = {};\n    for (let i in nodes) {\n      n[nodes[i].id] = 1;\n    }\n\n    let edges = this.getConnections().getEdges(n);\n\n    this.state.cache.graph = { nodes: nodes, edges: edges };\n    return this.state.cache.graph;\n  }\n\n  add(item) {\n    if (!item) {\n      return;\n    }\n\n    let added = false;\n\n    Object.keys(this.state).forEach((key) => {\n      if (!added) {\n        let group = this.state[key];\n        if (group && group.canAdd) {\n          if (group.canAdd(item)) {\n            group.add(item);\n            added = true;\n          }\n        }\n      }\n    });\n\n    if (!added) {\n      throw new ValueError(`Do not know how to add ${item} to this Social group`);\n    }\n  }\n\n  get(id, filtered = true) {\n    if (id.getID) {\n      id = id.getID();\n    }\n\n    if (this._rebuilding) {\n      // we cannot get filtered data when rebuilding, else otherwise\n      // we get race conditions and weird results\n      filtered = false;\n    }\n\n    try {\n      if (id[0] === \"C\") {\n        return this.getConnections(filtered).get(id);\n      } else if (id[0] === \"P\") {\n        return this.getPeople(filtered).get(id);\n      } else if (id[0] === \"B\") {\n        return this.getBusinesses(filtered).get(id);\n      } else if (id[0] === \"Q\") {\n        return this.getPositions().get(id);\n      } else if (id[0] === \"A\") {\n        return this.getAffiliations().get(id);\n      } else if (id[0] === \"S\") {\n        return this.getSources().get(id);\n      } else if (id[0] === \"N\") {\n        return this.getNotes().get(id);\n      } else if (id[0] === \"J\") {\n        return this.getProjects().get(id);\n      } else {\n        return id;\n      }\n    } catch (error) {\n      if (filtered) {\n        return this.get(id, false);\n      } else {\n        throw error;\n      }\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSocial.unDry = function (value) {\n  let social = new Social(value);\n  social._updateHooks();\n\n  return social;\n};\n\nDry.registerClass(\"Social\", Social);\n\nexport default Social;\n","import React from \"react\";\n\nimport { Tabs, Tab, TabPanel, TabList } from \"react-web-tabs\";\n\nimport { Accordion, AccordionItem, AccordionTitle, AccordionPanel } from \"./Accordion\";\n\nimport GroupsList from \"./GroupsList\";\nimport ConnectionList from \"./ConnectionList\";\nimport SourceList from \"./SourceList\";\nimport WeightsList from \"./WeightsList\";\nimport DateRangeButton from \"./DateRangeButton\";\nimport DefaultButton from \"./DefaultButton\";\n\nimport Social from \"../model/Social\";\n\nimport styles from \"./InfoBox.module.css\";\n\nimport default_image from \"../images/RHowlett_IKB.jpg\";\nimport person_image from \"../images/IllustriteZeitung_SS_GreatBritain.png\";\nimport business_image from \"../images/320px-SS_Great_Britain_diagram.jpg\";\nimport source_image from \"../images/Sumerian_26th_c_Adab.jpg\";\nimport analysis_image from \"../images/320px-SS_Great_Britain_transverse_section.jpg\";\n\nlet default_title = \"Isambard's Social Network\";\n\nlet default_text = (\n  <div>\n    This is an interactive viewer of Isambard Kingdom Brunel&apos;s social network. Please click in the nodes and have\n    fun!\n  </div>\n);\n\nfunction null_function() {}\n\nfunction getBiography({ item, social, emitSelected = null_function, emitToggleFilter = null_function }) {\n  let pages = [];\n  let affiliations = {};\n  let positions = {};\n  let sources = {};\n  let connections = [];\n\n  try {\n    connections = social.getConnectionsTo(item);\n  } catch (error) {\n    console.log(`CONNECTIONS ERROR ${error}`);\n  }\n\n  if (item.getAffiliations) {\n    affiliations = item.getAffiliations();\n  }\n\n  if (item.getPositions) {\n    positions = item.getPositions();\n  }\n\n  if (item.getSources) {\n    sources = item.getSources();\n  }\n\n  let alive = null;\n\n  if (item.getAlive) {\n    let a = item.getAlive();\n    if (a) {\n      alive = (\n        <p>\n          They were alive from&nbsp;\n          {a.getStartString()}&nbsp; until {a.getEndString()}.\n        </p>\n      );\n    }\n  }\n\n  let bio = null;\n\n  try {\n    bio = social.getBiographies().get(item);\n  } catch (error) {\n    bio = null;\n  }\n\n  pages.push([\n    \"Biography\",\n    <div key=\"biography\">\n      <div>{bio}</div>\n      <div>{alive}</div>\n    </div>,\n  ]);\n\n  if (connections.length > 0) {\n    pages.push([\n      \"Connections\",\n      <div key=\"connections\">\n        <ConnectionList\n          connections={connections}\n          emitSelected={emitSelected}\n          emitToggleFilter={emitToggleFilter}\n          social={social}\n        />\n      </div>,\n    ]);\n  } else {\n    pages.push([\"Connections\", \"None\"]);\n  }\n\n  if (Object.keys(positions).length > 0) {\n    pages.push([\n      \"Positions\",\n      <div key=\"positions\">\n        <GroupsList\n          groups={positions}\n          emitSelected={emitSelected}\n          emitToggleFilter={emitToggleFilter}\n          social={social}\n        />\n      </div>,\n    ]);\n  } else {\n    pages.push([\"Positions\", \"None\"]);\n  }\n\n  if (Object.keys(affiliations).length > 0) {\n    pages.push([\n      \"Affiliations\",\n      <div key=\"affiliations\">\n        <GroupsList\n          groups={affiliations}\n          emitSelected={emitSelected}\n          emitToggleFilter={emitToggleFilter}\n          social={social}\n        />\n      </div>,\n    ]);\n  } else {\n    pages.push([\"Affiliations\", \"None\"]);\n  }\n\n  if (Object.keys(sources).length > 0) {\n    pages.push([\n      \"Sources\",\n      <div key=\"sources\">\n        <GroupsList groups={sources} emitSelected={emitSelected} emitToggleFilter={emitToggleFilter} social={social} />\n      </div>,\n    ]);\n  }\n\n  pages.push([\"Analysis\", <div key=\"analysis\">Here is space for graphs and analysis of {item.getName()}</div>]);\n\n  return pages;\n}\n\nfunction extractData({ item, social, emitSelected = null_function, emitToggleFilter = null_function }) {\n  let data = {\n    title: default_title,\n    image: default_image,\n    pages: [[\"Title\", default_text]],\n  };\n\n  if (!(social instanceof Social)) {\n    return data;\n  }\n\n  if (!item) {\n    return data;\n  }\n\n  //refresh the item in case of updates...\n  if (item.getID) {\n    item = item.getID();\n  }\n\n  try {\n    item = social.get(item);\n  } catch (error) {\n    item = null;\n  }\n\n  if (!item) {\n    return data;\n  }\n\n  if (item._isAPersonObject) {\n    data.title = (\n      <DefaultButton\n        onClick={() => {\n          emitToggleFilter(item);\n        }}\n      >\n        {item.getName()}\n      </DefaultButton>\n    );\n    data.pages = getBiography({\n      item: item,\n      social: social,\n      emitSelected: emitSelected,\n      emitToggleFilter: emitToggleFilter,\n    });\n\n    data.image = person_image;\n  } else if (item._isABusinessObject) {\n    data.title = (\n      <DefaultButton\n        onClick={() => {\n          emitToggleFilter(item);\n        }}\n      >\n        {item.getName()}\n      </DefaultButton>\n    );\n    data.pages = getBiography({\n      item: item,\n      social: social,\n      emitSelected: emitSelected,\n      emitToggleFilter: emitToggleFilter,\n    });\n\n    data.image = business_image;\n  } else if (item._isASourceObject) {\n    data.title = item.getName();\n    let description = item.getDescription();\n    if (!description) {\n      description = \"No description\";\n    }\n    data.pages = [\n      [\"Description\", description],\n      [\"Analysis\", \"Analysis for this source - where else has it been cited?\"],\n    ];\n    data.image = source_image;\n  } else if (item._isAConnectionObject) {\n    data.title = null;\n\n    let n0 = item.getNode0();\n    if (n0.getName) {\n      let node = n0;\n      n0 = (\n        <DefaultButton\n          onClick={() => {\n            emitSelected(node);\n          }}\n        >\n          {n0.getName()}\n        </DefaultButton>\n      );\n    }\n\n    let n1 = item.getNode1();\n    if (n1.getName) {\n      let node = n1;\n      n1 = (\n        <DefaultButton\n          onClick={() => {\n            emitSelected(node);\n          }}\n        >\n          {n1.getName()}\n        </DefaultButton>\n      );\n    }\n\n    let asources = item.getAffiliationSources();\n    let csources = item.getCorrespondanceSources();\n    let duration = item.getDuration();\n\n    if (duration) {\n      duration = (\n        <div>\n          <div>during</div>\n          <DateRangeButton value={duration} emitSelected={emitSelected} />\n        </div>\n      );\n    }\n\n    if (asources) {\n      asources = (\n        <AccordionItem uuid=\"asources\">\n          <AccordionTitle>Affiliation</AccordionTitle>\n          <AccordionPanel>\n            <SourceList social={social} sources={asources} emitSelected={emitSelected} />\n          </AccordionPanel>\n        </AccordionItem>\n      );\n    }\n\n    if (csources) {\n      csources = (\n        <AccordionItem uuid=\"csources\">\n          <AccordionTitle>Correspondance</AccordionTitle>\n          <AccordionPanel>\n            <SourceList social={social} sources={csources} emitSelected={emitSelected} />\n          </AccordionPanel>\n        </AccordionItem>\n      );\n    }\n\n    let accordion = null;\n\n    if (asources || csources) {\n      accordion = (\n        <Accordion allowMultipleExpanded={true} allowZeroExpanded={true} preExpanded={[\"asources\", \"csources\"]}>\n          {asources}\n          {csources}\n        </Accordion>\n      );\n    }\n\n    let pages = [];\n    pages.push([\n      \"Connection\",\n      <div key=\"connection\" style={{ textAlign: \"center\" }}>\n        {n0}\n        <div>||</div>\n        {n1}\n        <div>&nbsp;</div>\n        <div>{duration}</div>\n      </div>,\n    ]);\n\n    pages.push([\"Sources\", <div key=\"sources\">{accordion}</div>]);\n\n    pages.push([\n      \"Projects\",\n      <WeightsList\n        key=\"projects\"\n        weights={item.getWeights()}\n        type={item.getType()}\n        social={social}\n        emitSelected={emitSelected}\n        emitToggleFilter={emitToggleFilter}\n      />,\n    ]);\n\n    pages.push([\"Analysis\", \"Space for analysis of this Connection\"]);\n\n    data.image = analysis_image;\n\n    data.pages = pages;\n  }\n\n  return data;\n}\n\nfunction InfoBox(props) {\n  let data = {};\n\n  try {\n    data = extractData(props);\n  } catch (error) {\n    data = {\n      title: default_title,\n      image: default_image,\n      pages: [[\"Title\", default_text]],\n    };\n    console.log(`ERROR ${error}`);\n  }\n\n  const pages = data.pages;\n\n  if (pages.length > 1) {\n    let tabs = [];\n    let panes = [];\n\n    for (let i = 0; i < pages.length; ++i) {\n      panes.push(\n        <TabPanel key={pages[i][0]} tabId={pages[i][0]} className={styles.tabPanel}>\n          {pages[i][1]}\n        </TabPanel>\n      );\n      tabs.push(\n        <Tab key={pages[i][0]} className={styles.tab} tabFor={pages[i][0]}>\n          {pages[i][0]}\n        </Tab>\n      );\n    }\n\n    return (\n      <div className={styles.container}>\n        <img className={styles.heroImage} alt=\"\" src={data.image} />\n        <div className={styles.title}>{data.title}</div>\n        <Tabs\n          key={panes.length}\n          vertical\n          onChange={(tabId) => {\n            console.log(tabId);\n          }}\n          defaultTab={pages[0][0]}\n          className={styles.tabs}\n        >\n          <TabList className={styles.tablist}>{tabs}</TabList>\n          {panes}\n        </Tabs>\n      </div>\n    );\n  } else {\n    return (\n      <div className={styles.container}>\n        <img className={styles.heroImage} alt=\"\" src={data.image} />\n        <div className={styles.title}>{data.title}</div>\n        {pages[0][1]}\n      </div>\n    );\n  }\n}\n\nexport default InfoBox;\n","import PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nimport Timeline from \"react-visjs-timeline\";\n\nimport DatePicker from \"react-datepicker\";\n\nimport DateRange from \"../model/DateRange\";\n\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nimport styles from \"./TimeLineView.module.css\";\n\nfunction _customOrder(a, b) {\n  // order by id\n  return a.id - b.id;\n}\n\nconst timeline_options = {\n  autoResize: true,\n  horizontalScroll: true,\n  showCurrentTime: false,\n  showTooltips: false,\n  verticalScroll: true,\n  zoomable: false,\n  order: _customOrder,\n};\n\nclass DateInput extends Component {\n  render() {\n    let { value, onClick } = this.props;\n\n    return (\n      <button className={styles.zoomButton} onClick={onClick}>\n        {value}\n      </button>\n    );\n  }\n}\n\nDateInput.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  value: PropTypes.string.isRequired,\n};\n\nclass TimeLineView extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      dimensions: { height: 300, width: 600 },\n    };\n\n    this._is_activated = this.props.is_active;\n  }\n\n  activate() {\n    this._is_activated = true;\n  }\n\n  deactivate() {\n    this._is_activated = false;\n  }\n\n  isActive() {\n    return this._is_activated;\n  }\n\n  updateSize(dimensions) {\n    this.setState({\n      dimensions: {\n        width: dimensions.width - 10,\n        height: dimensions.height - 100,\n      },\n    });\n\n    let timeline = this.getTimeLine();\n    if (timeline) {\n      timeline.redraw();\n    }\n  }\n\n  getTimeLine() {\n    if (this.timeline) {\n      return this.timeline.$el;\n    } else {\n      return null;\n    }\n  }\n\n  selectHandler(props) {\n    if (!this.isActive()) {\n      return;\n    }\n\n    if (this.props.emitSelected) {\n      this.props.emitSelected(props.items[0]);\n    }\n  }\n\n  rangeChangedHandler(props) {\n    let window = null;\n\n    if (props.byUser || this._byUser) {\n      this._byUser = false;\n      window = new DateRange({ start: props.start.toISOString(), end: props.end.toISOString() });\n      if (!window.hasBounds()) {\n        console.log(`Something went wrong? ${window}`);\n        return;\n      }\n    } else {\n      window = this.getWindow();\n    }\n\n    if (window && this.isActive() && this.props.emitWindowChanged) {\n      this.props.emitWindowChanged(window);\n    }\n  }\n\n  setWindow(window) {\n    if (!this.isActive()) {\n      return;\n    }\n\n    if (!window) {\n      return;\n    }\n\n    let old_window = this.getWindow();\n\n    if (DateRange.eq(window, old_window)) {\n      return;\n    }\n\n    this._byUser = true;\n    this.getTimeLine().setWindow(window.getStartDate(), window.getEndDate(), { animation: true });\n  }\n\n  getWindow() {\n    if (this.props.getWindow) {\n      return this.props.getWindow();\n    } else {\n      return null;\n    }\n  }\n\n  setStartDate(date) {\n    if (!date) {\n      return;\n    }\n\n    const window = this.getWindow();\n\n    if (window) {\n      this.setWindow(new DateRange({ start: date, end: window.getEndDate() }));\n    }\n  }\n\n  setEndDate(date) {\n    if (!date) {\n      return;\n    }\n\n    const window = this.getWindow();\n\n    if (window) {\n      this.setWindow(new DateRange({ start: window.getStartDate(), end: date }));\n    }\n  }\n\n  scrollLeft() {\n    const window = this.getWindow();\n\n    if (window) {\n      this.setWindow(window.shiftEarlier());\n    }\n  }\n\n  scrollRight() {\n    const window = this.getWindow();\n\n    if (window) {\n      this.setWindow(window.shiftLater());\n    }\n  }\n\n  zoomIn() {\n    const window = this.getWindow();\n\n    if (window) {\n      this.setWindow(window.zoomIn());\n    }\n  }\n\n  zoomOut() {\n    const window = this.getWindow();\n\n    if (window) {\n      this.setWindow(window.zoomOut());\n    }\n  }\n\n  render() {\n    let height = `${this.state.dimensions.height}px`;\n    let width = `${this.state.dimensions.width}px`;\n\n    let my_options = { ...timeline_options };\n    my_options[\"height\"] = height;\n    my_options[\"width\"] = width;\n\n    let window = this.getWindow();\n    let max_window = window;\n\n    if (this.props.getMaxWindow) {\n      max_window = this.props.getMaxWindow();\n\n      if (max_window.hasBounds()) {\n        my_options[\"max\"] = max_window.getLatestEnd().toDate();\n        my_options[\"min\"] = max_window.getEarliestStart().toDate();\n\n        if (!window) {\n          window = max_window;\n        }\n      } else {\n        console.log(`Unbounded max_window? ${max_window}`);\n        max_window = null;\n      }\n    }\n\n    if (!window) {\n      window = new DateRange({ start: \"2000-01-31\", end: \"2020-12-31\" });\n      console.log(\"NO WINDOW!?!\");\n    }\n\n    let start = window.getEarliestStart();\n    let end = window.getLatestEnd();\n\n    let items = null;\n\n    if (this.isActive()) {\n      if (this.props.getItems) {\n        items = this.props.getItems();\n      }\n    }\n\n    if (items === null || items.length === 0) {\n      items = [];\n    }\n\n    if (start) {\n      start = start.toDate();\n      my_options[\"start\"] = start;\n    }\n\n    if (end) {\n      end = end.toDate();\n      my_options[\"end\"] = end;\n    }\n\n    let timeline = this.getTimeLine();\n\n    if (timeline) {\n      //need to set the window here to prevent animation when\n      //changing tabs\n      let activated = this._is_activated;\n      timeline.setWindow(start, end, { animation: false });\n      this._is_activated = activated;\n    }\n\n    return (\n      <div className={styles.container} style={{ width: width, height: height }}>\n        <Timeline\n          className={styles.timeline}\n          ref={(el) => (this.timeline = el)}\n          rangechangedHandler={(props) => {\n            this.rangeChangedHandler(props);\n          }}\n          selectHandler={(props) => {\n            this.selectHandler(props);\n          }}\n          options={my_options}\n          items={items}\n        />\n        <div className={styles.buttonGroup}>\n          <button\n            className={styles.scrollButton}\n            onClick={() => {\n              this.scrollLeft();\n            }}\n          >\n            &larr;\n          </button>\n          <button\n            className={styles.zoomButton}\n            onClick={() => {\n              this.zoomOut();\n            }}\n          >\n            -\n          </button>\n          <DatePicker\n            className={styles.datePicker}\n            selected={start}\n            openToDate={start}\n            selectsStart\n            startDate={start}\n            endDate={end}\n            dateFormat=\"d MMM yyyy\"\n            showMonthYearPicker\n            showYearDropdown\n            dropdownMode=\"select\"\n            customInput={<DateInput />}\n            onChange={(date) => {\n              this.setStartDate(date);\n            }}\n          />\n          <button\n            className={styles.scrollButton}\n            onClick={() => {\n              this.setWindow(max_window);\n            }}\n          >\n            &harr;\n          </button>\n          <DatePicker\n            className={styles.datePicker}\n            selected={end}\n            openToDate={end}\n            selectsEnd\n            startDate={start}\n            endDate={end}\n            dateFormat=\"d MMM yyyy\"\n            showMonthYearPicker\n            showYearDropdown\n            dropdownMode=\"select\"\n            customInput={<DateInput />}\n            onChange={(date) => {\n              this.setEndDate(date);\n            }}\n          />\n          <button\n            className={styles.zoomButton}\n            onClick={() => {\n              this.zoomIn();\n            }}\n          >\n            +\n          </button>\n          <button\n            className={styles.scrollButton}\n            onClick={() => {\n              this.scrollRight();\n            }}\n          >\n            &rarr;\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nTimeLineView.propTypes = {\n  emitSelected: PropTypes.func.isRequired,\n  emitWindowChanged: PropTypes.func.isRequired,\n  getItems: PropTypes.array,\n  getMaxWindow: PropTypes.instanceOf(DateRange),\n  getWindow: PropTypes.instanceOf(DateRange),\n  is_active: PropTypes.bool,\n};\n\nexport default TimeLineView;\n","import PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nimport { Tabs, Tab, TabPanel, TabList } from \"react-web-tabs\";\n\nimport TimeLineView from \"./TimeLineView\";\n\n\nimport styles from \"./TimeLineBox.module.css\";\n\nclass TimeLineBox extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      dimensions: { height: 300, width: 600 },\n    };\n\n    this.tabs = {};\n    this.container = null;\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", () => {\n      this.updateSize();\n    });\n    this.updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", () => {\n      this.updateSize();\n    });\n  }\n\n  activate(tabId) {\n    Object.keys(this.tabs).forEach((key) => {\n      if (key !== tabId) {\n        let tab = this.tabs[key];\n        if (tab) {\n          tab.deactivate();\n        }\n      }\n    });\n\n    if (this.tabs[tabId]) {\n      this.tabs[tabId].activate();\n    }\n  }\n\n  updateSize() {\n    if (this.container) {\n      this.setState({\n        dimensions: {\n          width: this.container.offsetWidth,\n          height: this.container.offsetHeight,\n        },\n      });\n    }\n\n    Object.keys(this.tabs).forEach((key) => {\n      let tab = this.tabs[key];\n      if (tab) {\n        tab.updateSize(this.state.dimensions);\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div ref={(el) => (this.container = el)} className={styles.container}>\n        <Tabs\n          key=\"timeline-tabs\"\n          onChange={(tabId) => {\n            this.activate(tabId);\n            this.updateSize();\n          }}\n          className={styles.tabs}\n        >\n          <TabList className={styles.tabList}>\n            <Tab className={styles.tab} key=\"items\" tabFor=\"items\">\n              Timeline\n            </Tab>\n            <Tab className={styles.tab} key=\"projects\" tabFor=\"projects\">\n              Projects\n            </Tab>\n            <Tab className={styles.tab} key=\"analysis\" tabFor=\"analysis\">\n              Analysis\n            </Tab>\n          </TabList>\n\n          <TabPanel key=\"projects\" tabId=\"projects\" className={styles.tabPanel}>\n            <TimeLineView\n              ref={(el) => (this.tabs.projects = el)}\n              name=\"projects\"\n              selected={this.props.selected}\n              getMaxWindow={this.props.getMaxWindow}\n              getWindow={this.props.getProjectWindow}\n              getItems={this.props.getProjectTimeLine}\n              emitWindowChanged={this.props.emitWindowChanged}\n              emitSelected={this.props.emitSelected}\n              emitClicked={this.props.emitClicked}\n            />\n          </TabPanel>\n\n          <TabPanel key=\"analysis\" tabId=\"analysis\" className={styles.tabPanel}>\n            <div className={styles.centerContainer}>\n              <p>This will contain tools and graphs for temporal social network analysis.</p>\n            </div>\n          </TabPanel>\n\n          <TabPanel key=\"items\" tabId=\"items\" className={styles.tabPanel}>\n            <TimeLineView\n              ref={(el) => (this.tabs.items = el)}\n              name=\"items\"\n              is_active={true}\n              selected={this.props.selected}\n              getMaxWindow={this.props.getMaxWindow}\n              getWindow={this.props.getItemWindow}\n              getItems={this.props.getItemTimeLine}\n              emitWindowChanged={this.props.emitWindowChanged}\n              emitSelected={this.props.emitSelected}\n              emitClicked={this.props.emitClicked}\n            />\n          </TabPanel>\n        </Tabs>\n      </div>\n    );\n  }\n}\n\nTimeLineBox.propTypes = {\n  emitClicked: PropTypes.func.isRequired,\n  emitSelected: PropTypes.func.isRequired,\n  emitWindowChanged: PropTypes.func.isRequired,\n  getItemTimeLine: PropTypes.func.isRequired,\n  getItemWindow: PropTypes.func.isRequired,\n  getMaxWindow: PropTypes.func.isRequired,\n  getProjectTimeLine: PropTypes.func.isRequired,\n  getProjectWindow: PropTypes.func.isRequired,\n  selected: PropTypes.func,\n};\n\nexport default TimeLineBox;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { Accordion, AccordionItem, AccordionTitle, AccordionPanel } from \"./Accordion\";\n\nimport { ResponsiveList, ResponsiveListItem } from \"./ResponsiveList\";\nimport CheckBox from \"./CheckBox\";\nimport DefaultButton from \"./DefaultButton\";\n\nimport styles from \"./FilterBox.module.css\";\n\nfunction null_function() {}\n\nfunction filterList(items, props) {\n  let social = props.social;\n\n  let emitSelected = props.emitSelected;\n\n  if (!emitSelected) {\n    emitSelected = null_function;\n  }\n\n  let emitToggleFilter = props.emitToggleFilter;\n\n  if (!emitToggleFilter) {\n    emitToggleFilter = null_function;\n  }\n\n  let output = items.values().map((item) => {\n    let is_filtered = social.isFiltered(item);\n\n    return (\n      <ResponsiveListItem key={item.getName()}>\n        <DefaultButton\n          style={{ position: \"relative\", maxWidth: \"80%\" }}\n          onClick={() => {\n            emitSelected(item);\n          }}\n        >\n          {item.getName()}\n        </DefaultButton>\n        &nbsp;\n        <CheckBox\n          checked={is_filtered}\n          onChange={() => {\n            emitToggleFilter(item);\n          }}\n        />\n      </ResponsiveListItem>\n    );\n  });\n\n  return <ResponsiveList>{output}</ResponsiveList>;\n}\n\nfilterList.propTypes = {\n  social: PropTypes.object.isRequired,\n  emitSelected: PropTypes.func,\n  emitToggleFilter: PropTypes.func,\n};\n\nfunction FilterBox(props) {\n  let social = props.social;\n\n  if (!social) {\n    return <div>No social to display!</div>;\n  }\n\n  let filter_text = social.getFilterText();\n\n  if (!filter_text) {\n    filter_text = \"No filters\";\n  }\n\n  let emitClearFilters = props.emitClearFilters;\n\n  if (!emitClearFilters) {\n    emitClearFilters = null_function;\n  }\n\n  let filter_info = (\n    <AccordionItem uuid=\"filterinfo\">\n      <AccordionTitle>Current Filter</AccordionTitle>\n      <AccordionPanel>\n        <div className={styles.filterContainer}>\n          <div className={styles.filterText}>{filter_text}</div>\n          <div>\n            <DefaultButton onClick={emitClearFilters}>Clear Filters</DefaultButton>\n          </div>\n        </div>\n      </AccordionPanel>\n    </AccordionItem>\n  );\n\n  let projects = filterList(social.getProjects(false), props);\n  let sources = filterList(social.getSources(false), props);\n  let positions = filterList(social.getPositions(false), props);\n  let affiliations = filterList(social.getAffiliations(false), props);\n  let people = filterList(social.getPeople(false), props);\n  let businesses = filterList(social.getBusinesses(false), props);\n\n  return (\n    <Accordion allowMultipleExpanded={false} allowZeroExpanded={true}>\n      {filter_info}\n\n      <AccordionItem uuid=\"projects\">\n        <AccordionTitle>Projects</AccordionTitle>\n        <AccordionPanel>{projects}</AccordionPanel>\n      </AccordionItem>\n\n      <AccordionItem uuid=\"sources\">\n        <AccordionTitle>Sources</AccordionTitle>\n        <AccordionPanel>{sources}</AccordionPanel>\n      </AccordionItem>\n\n      <AccordionItem uuid=\"people\">\n        <AccordionTitle>People</AccordionTitle>\n        <AccordionPanel>{people}</AccordionPanel>\n      </AccordionItem>\n\n      <AccordionItem uuid=\"businesses\">\n        <AccordionTitle>Businesses</AccordionTitle>\n        <AccordionPanel>{businesses}</AccordionPanel>\n      </AccordionItem>\n\n      <AccordionItem uuid=\"positions\">\n        <AccordionTitle>Positions</AccordionTitle>\n        <AccordionPanel>{positions}</AccordionPanel>\n      </AccordionItem>\n\n      <AccordionItem uuid=\"affiliations\">\n        <AccordionTitle>Affiliations</AccordionTitle>\n        <AccordionPanel>{affiliations}</AccordionPanel>\n      </AccordionItem>\n    </Accordion>\n  );\n}\n\nFilterBox.propTypes = {\n  social: PropTypes.object.isRequired,\n  emitSelected: PropTypes.func,\n  emitClearFilters: PropTypes.func,\n};\n\nexport default FilterBox;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { CSSTransition } from \"react-transition-group\";\n\nimport styles from \"./SlidingPanel.module.css\";\nimport SlideFromLeft from \"./transitions/SlideFromLeft.module.css\";\nimport SlideFromRight from \"./transitions/SlideFromRight.module.css\";\nimport SlideFromBottom from \"./transitions/SlideFromBottom.module.css\";\nimport SlideFromTop from \"./transitions/SlideFromTop.module.css\";\n\nfunction SlidingPanel({\n  children,\n  isOpen = false,\n  position = \"right\",\n  size = \"40%\",\n  minSize = \"300px\",\n  maxSize = null,\n}) {\n  let container = styles.rightContainer;\n  let transition = SlideFromRight;\n  let horiz_size = { width: size, minWidth: minSize };\n  let vert_size = { height: size, minHeight: minSize };\n\n  if (maxSize) {\n    horiz_size.maxWidth = maxSize;\n    vert_size.maxHeight = maxSize;\n  }\n\n  let style = horiz_size;\n\n  if (position === \"right\") {\n    container = styles.rightContainer;\n    transition = SlideFromRight;\n  } else if (position === \"bottom\") {\n    container = styles.bottomContainer;\n    transition = SlideFromBottom;\n    style = vert_size;\n  } else if (position === \"top\") {\n    container = styles.topContainer;\n    transition = SlideFromTop;\n    style = vert_size;\n  } else if (position === \"left\") {\n    container = styles.leftContainer;\n    transition = SlideFromLeft;\n  }\n\n  container = `${container} ${styles.container}`;\n\n  return (\n    <CSSTransition in={isOpen} timeout={200} classNames={transition} unmountOnExit>\n      <div className={container} style={style}>\n        {children}\n      </div>\n    </CSSTransition>\n  );\n}\n\nSlidingPanel.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.array, PropTypes.object]).isRequired,\n  isOpen: PropTypes.bool,\n  maxSize: PropTypes.string,\n  minSize: PropTypes.string,\n  position: PropTypes.string,\n  size: PropTypes.string,\n};\n\nexport default SlidingPanel;\n","import React from \"react\";\nimport Spinner from \"react-spinkit\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./OverlayBox.module.css\";\n\nclass OverlayBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n    };\n  }\n\n  hideSpinner() {\n    this.setState({\n      loading: false,\n    });\n  }\n\n  render() {\n    let item = this.props.item;\n\n    let url = null;\n\n    if (item && item.getURL) {\n      url = item.getURL();\n    }\n\n    if (!url) {\n      return (\n        <div className={styles.container}>\n          <div className={styles.centerContainer}>\n            {item}\n            <div>\n              <button className={styles.button} onClick={this.props.emitClose}>\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.url}>{url}</div>\n        {this.state.loading ? (\n          <div className={styles.centerContainer}>\n            <div>Loading page...</div>\n            <div>\n              <Spinner name=\"ball-grid-pulse\" color=\"green\" fadeIn=\"none\" />\n            </div>\n          </div>\n        ) : null}\n        <iframe\n          src={url}\n          title={url}\n          width=\"100%\"\n          height=\"95%\"\n          onLoad={() => {\n            this.hideSpinner();\n          }}\n          frameBorder=\"0\"\n          marginHeight=\"0\"\n          marginWidth=\"0\"\n          sandbox=\"allow-scripts\"\n          position=\"absolute\"\n        />\n      </div>\n    );\n  }\n}\n\nOverlayBox.propTypes = {\n  item: PropTypes.elementType,\n  emitClose: PropTypes.func.isRequired,\n};\nexport default OverlayBox;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport Spinner from \"react-spinkit\";\n\nimport DefaultButton from \"./DefaultButton\";\n\nimport styles from \"./SearchBar.module.css\";\n\n// This class is heavily inspired by react-search-field\n// from https://github.com/nutboltu/react-search-field\n\nfunction _null_function() {}\n\nfunction SearchResults(props) {\n  let results = props.results;\n\n  if (!results) {\n    return null;\n  }\n\n  let items = [];\n\n  results.forEach((item, index) => {\n    items.push(<li key={index}>{item}</li>);\n  });\n\n  return <ul>{items}</ul>;\n}\n\nSearchResults.propTypes = {\n  results: PropTypes.any,\n};\n\nclass SearchBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: \"\",\n      suggestions: null,\n      searching: null,\n      results: null,\n    };\n  }\n\n  componentDidUpdate(nextProps) {\n    if (this.props.searchText !== nextProps.searchText) {\n      this.setState({\n        value: nextProps.searchText,\n      });\n    }\n  }\n\n  setResults(results) {\n    this.setState({ searching: null, suggestions: null, results: results });\n  }\n\n  setSuggestions(suggestions) {\n    this.setState({ searching: null, suggestions: suggestions, results: null });\n  }\n\n  startSuggestion(text) {\n    let social = this.props.social;\n    if (!social) {\n      return;\n    }\n\n    let items = null;\n\n    try {\n      items = social.find(text);\n    } catch (error) {\n      items = null;\n    }\n\n    let emitSelected = this.props.emitSelected;\n\n    if (!emitSelected) {\n      emitSelected = _null_function;\n    }\n\n    if (items) {\n      let results = items.map((item, index) => {\n        let name = item.getName();\n        return (\n          <DefaultButton\n            key={name.concat(\"_\", index)}\n            onClick={() => {\n              emitSelected(item);\n            }}\n            style={{ width: \"100%\" }}\n          >\n            {name}\n          </DefaultButton>\n        );\n      });\n\n      this.setSuggestions(results);\n    } else {\n      this.setSuggestions(null);\n    }\n  }\n\n  startSearch(text) {\n    let social = this.props.social;\n\n    if (!social) {\n      this.setResults([<div key=\"noresults\">No results!</div>]);\n      return;\n    }\n\n    let items = null;\n\n    try {\n      items = social.find(text);\n    } catch (error) {\n      console.error(error);\n      items = null;\n    }\n\n    let emitSelected = this.props.emitSelected;\n\n    if (!emitSelected) {\n      emitSelected = _null_function;\n    }\n\n    if (items) {\n      let results = items.map((item, index) => {\n        let name = item.getName();\n        return (\n          <DefaultButton\n            key={name.concat(\"_\", index)}\n            onClick={() => {\n              emitSelected(item);\n            }}\n            style={{ width: \"100%\" }}\n          >\n            {name}\n          </DefaultButton>\n        );\n      });\n\n      this.setResults(results);\n    } else {\n      this.setResults([<div key=\"rnoresults\">Really no results!</div>]);\n    }\n  }\n\n  searchFor(text) {\n    if (text && text.length > 0) {\n      this.setState({ searching: text, suggestions: null, results: null });\n\n      setTimeout(() => {\n        this.startSearch(text);\n      }, 10);\n    } else {\n      this.setState({ suggestions: null, searching: null, results: null });\n    }\n  }\n\n  autocomplete(text) {\n    if (text && text.length > 0) {\n      this.startSuggestion(text);\n    } else {\n      this.setState({ suggestions: null, searching: null, results: null });\n    }\n  }\n\n  isSearching() {\n    return this.state.searching !== null;\n  }\n\n  isSuggesting() {\n    return this.state.suggestions !== null;\n  }\n\n  hasResults() {\n    return this.state.results !== null;\n  }\n\n  stopSearch() {\n    this.setState({ searching: null, suggestions: null, results: null });\n  }\n\n  onChange(event) {\n    if (this.isSearching()) {\n      return;\n    }\n\n    this.setState({ value: event.target.value });\n    this.autocomplete(event.target.value);\n  }\n\n  onEnter(event) {\n    if (this.isSearching() || this.isEmpty()) {\n      return;\n    }\n\n    const enterKey = 13;\n    const isEnterPressed = event.which === enterKey || event.keyCode === enterKey;\n\n    if (isEnterPressed) {\n      this.searchFor(event.target.value);\n    }\n  }\n\n  onSearch() {\n    if (this.isSearching() || this.isEmpty()) {\n      return;\n    }\n\n    this.searchFor(this.state.value);\n  }\n\n  isEmpty() {\n    return !(this.state.value && this.state.value.length > 0);\n  }\n\n  render() {\n    let button_style = styles.searchButton;\n\n    if (this.isSearching() || this.isEmpty()) {\n      button_style = styles.disabledButton;\n    }\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.searchContainer}>\n          <button className={styles.hamburgerButton} onClick={this.props.emitHamburgerClicked}>\n            ☰\n          </button>\n          <input\n            className={styles.searchBox}\n            onChange={(event) => {\n              this.onChange(event);\n            }}\n            onKeyPress={(event) => {\n              this.onEnter(event);\n            }}\n            placeholder={this.props.placeholder}\n            type=\"text\"\n            value={this.state.value}\n          />\n          <div\n            className={button_style}\n            onClick={() => {\n              this.onSearch();\n            }}\n          >\n            <div className={styles.magnifier}>⚲</div>\n          </div>\n        </div>\n        {this.isSearching() ? (\n          <div className={styles.searchContainer}>\n            <div className={styles.resultContainer}>\n              <div\n                className={styles.closeResultButton}\n                onClick={() => {\n                  this.stopSearch();\n                }}\n              >\n                X\n              </div>\n              <div className={styles.searchPending}>\n                <div>Searching for &quot;{this.state.searching}&quot;...</div>\n                <div style={{ display: \"inline-block\" }}>\n                  <Spinner name=\"ball-grid-pulse\" color=\"green\" fadeIn=\"none\" />\n                </div>\n              </div>\n              <div\n                className={styles.closeResultButton}\n                onClick={() => {\n                  this.stopSearch();\n                }}\n              >\n                X\n              </div>\n            </div>\n          </div>\n        ) : null}\n        {this.isSuggesting() ? (\n          <div className={styles.searchContainer}>\n            <div className={styles.resultContainer}>\n              <div\n                className={styles.closeResultButton}\n                onClick={() => {\n                  this.setState({ suggestions: null });\n                }}\n              >\n                X\n              </div>\n              <div className={styles.searchResult}>\n                <SearchResults results={this.state.suggestions} />\n              </div>\n              <div\n                className={styles.closeResultButton}\n                onClick={() => {\n                  this.setState({ suggestions: null });\n                }}\n              >\n                X\n              </div>\n            </div>\n          </div>\n        ) : null}\n        {this.hasResults() ? (\n          <div className={styles.searchContainer}>\n            <div className={styles.resultContainer}>\n              <div\n                className={styles.closeResultButton}\n                onClick={() => {\n                  this.setState({ results: null });\n                }}\n              >\n                X\n              </div>\n              <div className={styles.searchResult}>\n                <SearchResults results={this.state.results} />\n              </div>\n              <div\n                className={styles.closeResultButton}\n                onClick={() => {\n                  this.setState({ results: null });\n                }}\n              >\n                X\n              </div>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\n// TODO - finish this\nSearchBar.propTypes = {\n  emitHamburgerClicked: PropTypes.func.isRequired,\n  emitSelected: PropTypes.func.isRequired,\n  // This is currently unused\n  placeholder: PropTypes.any,\n  searchText: PropTypes.string,\n  social: PropTypes.object.isRequired,\n};\n\nexport default SearchBar;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./BrunelMenu.module.css\";\n\nfunction BrunelMenu(props) {\n  if (!props.items) {\n    return <div>No menu</div>;\n  }\n\n  let buttons = [];\n\n  props.items.forEach((item, index) => {\n    let func = item[1];\n\n    if (props.emitClose) {\n      func = () => {\n        props.emitClose();\n        item[1]();\n      };\n    }\n\n    buttons.push(\n      <button\n        key={index}\n        className={styles.menuItem}\n        onClick={() => {\n          func();\n        }}\n      >\n        {item[0]}\n      </button>\n    );\n  });\n\n  return <div className={styles.menu}>{buttons}</div>;\n}\n\nBrunelMenu.propTypes = {\n  items: PropTypes.array,\n  emitClose: PropTypes.func,\n};\n\nexport default BrunelMenu;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport DefaultButton from \"./DefaultButton\";\n\nclass ShipSelector extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { lastShip: \"\" };\n  }\n\n  setFilter(item) {\n    // First check if the ship is the same as the last one clicked\n    const shipName = item.getName();\n\n    if (shipName === this.state.lastShip) {\n      this.props.resetFilters();\n      // Allows the ship to be selected again\n      this.setState({ lastShip: \"\" });\n      return;\n    }\n\n    this.setState({ lastShip: shipName });\n    this.props.shipFilter(item);\n  }\n\n  render() {\n    let projects = this.props.projects;\n\n    // TODO - rework this ?\n    let output = projects.values().map((item) => {\n      return (\n        <DefaultButton\n          key={item.getName()}\n          style={{ position: \"relative\", maxWidth: \"80%\" }}\n          onClick={() => this.setFilter(item)}\n        >\n          {item.getName()}\n        </DefaultButton>\n      );\n    });\n\n    return output;\n  }\n}\n\nShipSelector.propTypes = {\n  projects: PropTypes.object.isRequired,\n  resetFilters: PropTypes.func.isRequired,\n  shipFilter: PropTypes.func.isRequired,\n};\n\nexport default ShipSelector;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./ShipTitle.module.css\";\n\nfunction ShipTitle(props) {\n  if (props.name == null) {\n    return null;\n  } else {\n    return (\n      <button href=\"#\" className={styles.button} style={props.style}>\n        {props.name}\n      </button>\n    );\n  }\n}\n\nShipTitle.propTypes = {\n  shipTitle: PropTypes.string,\n  style: PropTypes.string,\n};\n\nexport default ShipTitle;\n","// package imports\nimport React from \"react\";\nimport Dry from \"json-dry\";\nimport ReactModal from \"react-modal\";\n\n// Brunel components\nimport SocialGraph from \"./components/SocialGraph\";\nimport InfoBox from \"./components/InfoBox\";\nimport TimeLineBox from \"./components/TimeLineBox\";\nimport FilterBox from \"./components/FilterBox\";\nimport SlidingPanel from \"./components/SlidingPanel\";\nimport OverlayBox from \"./components/OverlayBox\";\nimport SearchBar from \"./components/SearchBar\";\nimport BrunelMenu from \"./components/BrunelMenu\";\nimport DefaultButton from \"./components/DefaultButton\";\nimport ShipSelector from \"./components/ShipSelector\";\nimport ShipTitle from \"./components/ShipTitle\";\n\n// Brunel model\nimport Social from \"./model/Social\";\n\n// Data for import\nimport graph_data from \"./data.json\";\n\n// Styling for the app\nimport styles from \"./SocialApp.module.css\";\nimport DateRange from \"./model/DateRange\";\n\nclass SocialApp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.toggleWobble = this.toggleWobble.bind(this);\n    this.resetFilters = this.resetFilters.bind(this);\n\n    // Load in the Dried graph data from JSON\n    let social = Dry.parse(graph_data);\n    console.log(social);\n\n    if (!(social instanceof Social)) {\n      console.log(\"Could not parse!\");\n      social = new Social();\n    }\n\n    // Special cases for Brunel project...\n    social.setAnchor(\"Brunel\");\n    social.setMaxWindow(new DateRange({ start: \"1800-01-01\", end: \"1860-12-31\" }));\n\n    this.state = {\n      social: social,\n      highlighted_item: null,\n      selected_item: null,\n      overlay_item: null,\n      isInfoPanelOpen: false,\n      isTimeLinePanelOpen: false,\n      isFilterPanelOpen: false,\n      isHamburgerMenuOpen: false,\n      timeline: new TimeLineBox(),\n      isOverlayOpen: false,\n      wobbleEnabled: true,\n      selectedShip: null,\n    };\n\n    this.socialGraph = null;\n  }\n\n  resetFilters() {\n    let social = this.state.social;\n    social.resetFilters();\n    this.setState({ social: social, \"selectedShip\": null });\n  }\n\n  closePanels() {\n    this.setState({\n      isInfoPanelOpen: false,\n      isTimeLinePanelOpen: false,\n      isHamburgerMenuOpen: false,\n      isFilterPanelOpen: false,\n      highlighted_item: null,\n    });\n  }\n\n  closeOverlay() {\n    this.setState({\n      isOverlayOpen: false,\n      overlay_item: null,\n    });\n  }\n\n  showInfo(item) {\n    if (item._isAProjectObject) {\n      this.setState({\n        overlay_item: item,\n        isOverlayOpen: true,\n      });\n    } else {\n      this.setState({\n        selected_item: item,\n        isInfoPanelOpen: true,\n      });\n    }\n  }\n\n  slotClearFilters() {\n    this.resetFilters();\n  }\n\n  slotSetFilter(item) {\n    this.resetFilters();\n    this.slotToggleFilter(item);\n    this.setState({ selectedShip: item.getName() });\n  }\n\n  slotToggleFilter(item) {\n    if (!item) {\n      return;\n    }\n\n    let social = this.state.social;\n    social.toggleFilter(item);\n\n    this.setState(social);\n  }\n\n  slotHighlighted(id) {\n    if (!id) {\n      return;\n    }\n\n    if (id._isADateRangeObject) {\n      return;\n    }\n\n    this.setState({ highlighted_item: id });\n  }\n\n  slotSelected(id) {\n    if (!id) {\n      this.closePanels();\n      return;\n    }\n\n    if (id._isADateRangeObject) {\n      let social = this.state.social;\n      if (social.setWindow(id)) {\n        this.setState({ social: social });\n      }\n      return;\n    }\n\n    const social = this.state.social;\n    const item = social.get(id);\n    this.showInfo(item);\n  }\n\n  slotWindowChanged(window) {\n    let social = this.state.social;\n\n    if (social.setWindow(window)) {\n      this.setState({ social: social });\n    }\n  }\n\n  //   getMethods = (obj) => {\n  //     let properties = new Set();\n  //     let currentObj = obj;\n  //     do {\n  //       Object.getOwnPropertyNames(currentObj).map((item) =>\n  //         properties.add(item)\n  //       );\n  //     } while ((currentObj = Object.getPrototypeOf(currentObj)));\n  //     return [...properties.keys()].filter(\n  //       (item) => typeof obj[item] === \"function\"\n  //     );\n  //   };\n\n  toggleInfoPanel() {\n    this.setState({ isInfoPanelOpen: !this.state.isInfoPanelOpen });\n  }\n\n  toggleTimeLinePanel() {\n    this.setState({\n      isFilterPanelOpen: false,\n      isTimeLinePanelOpen: !this.state.isTimeLinePanelOpen,\n    });\n  }\n\n  toggleFilterPanel() {\n    this.setState({\n      isTimeLinePanelOpen: false,\n      isFilterPanelOpen: !this.state.isFilterPanelOpen,\n    });\n  }\n\n  toggleWobble() {\n    this.setState({ wobbleEnabled: !this.state.wobbleEnabled });\n  }\n\n//   changeShipTitle() {\n\n//   }\n\n  viewAbout() {\n    let item = (\n      <div>\n        <div>\n          This is a demo of the application to view Brunel&apos;s temporal social network. This is an incomplete\n          application containing incomplete data and should not be relied on or viewed as being accurate.\n        </div>\n        <div>\n          If you want more information, then please visit the{\" \"}\n          <a href=\"https://github.com/chryswoods/brunel\">GitHub repository</a>\n        </div>\n      </div>\n    );\n    this.setState({\n      overlay_item: item,\n      isOverlayOpen: true,\n    });\n  }\n\n  viewSource() {\n    console.log(\"View source\");\n    var win = window.open(\"https://github.com/chryswoods/brunel\", \"_blank\");\n    win.focus();\n  }\n\n  resetAll() {\n    console.log(\"Reset all\");\n    window.location.reload(true);\n  }\n\n  render() {\n    const selected = this.state.selected_item;\n    const highlighted = this.state.highlighted_item;\n    const overlay_item = this.state.overlay_item;\n    const social = this.state.social;\n\n    let menu = [];\n\n    // let timeline_text = \"Timeline\";\n\n    // if (social) {\n    //   timeline_text = `Timeline : ${social.getWindow().toSimpleString()}`;\n    // }\n\n    menu.push([\n      \"About\",\n      () => {\n        this.viewAbout();\n      },\n    ]);\n    menu.push([\n      \"View Source\",\n      () => {\n        this.viewSource();\n      },\n    ]);\n    menu.push([\n      \"Reset\",\n      () => {\n        this.resetAll();\n      },\n    ]);\n\n    return (\n      <div>\n        <ReactModal\n          isOpen={this.state.isOverlayOpen}\n          onRequestClose={() => {\n            this.closeOverlay();\n          }}\n          contentLabel=\"Information overlay\"\n          className={styles.modal}\n          overlayClassName={{\n            base: styles.modalOverlay,\n            afterOpen: styles.modalOverlayAfterOpen,\n            beforeClose: styles.modalOverlayBeforeClose,\n          }}\n          closeTimeoutMS={200}\n          appElement={document.getElementById(\"root\")}\n        >\n          <div\n            className={styles.closeOverlayButton}\n            onClick={() => {\n              this.closeOverlay();\n            }}\n          >\n            X\n          </div>\n          <OverlayBox\n            item={overlay_item}\n            emitClose={() => {\n              this.closeOverlay();\n            }}\n          />\n        </ReactModal>\n\n        <SearchBar\n          social={social}\n          emitHamburgerClicked={() => {\n            this.setState({\n              isHamburgerMenuOpen: !this.state.isHamburgerMenuOpen,\n            });\n          }}\n          emitSelected={(item) => {\n            this.slotSelected(item);\n          }}\n          emitHighlighted={(item) => {\n            this.slotHighlighted(item);\n          }}\n          emitClicked={(item) => {\n            this.slotClicked(item);\n          }}\n        />\n\n        <SlidingPanel isOpen={this.state.isTimeLinePanelOpen} position=\"bottom\">\n          <span\n            className={styles.closePanelButton}\n            onClick={() => {\n              this.setState({ isTimeLinePanelOpen: false });\n            }}\n          >\n            X\n          </span>\n          <TimeLineBox\n            selected={selected}\n            getMaxWindow={() => {\n              return this.state.social.getMaxWindow();\n            }}\n            getProjectWindow={() => {\n              return this.state.social.getWindow();\n            }}\n            getItemWindow={() => {\n              return this.state.social.getWindow();\n            }}\n            getProjectTimeLine={() => {\n              return this.state.social.getProjectTimeLine();\n            }}\n            getItemTimeLine={() => {\n              return this.state.social.getItemTimeLine();\n            }}\n            emitClicked={(item) => {\n              this.slotClicked(item);\n            }}\n            emitSelected={(item) => {\n              this.slotSelected(item);\n            }}\n            emitHighlighted={(item) => {\n              this.slotHighlighted(item);\n            }}\n            emitWindowChanged={(window) => {\n              this.slotWindowChanged(window);\n            }}\n          />\n        </SlidingPanel>\n\n        {/* Info panel on the RHS */}\n        <SlidingPanel isOpen={this.state.isInfoPanelOpen} position=\"right\">\n          <span\n            className={styles.closePanelButton}\n            onClick={() => {\n              this.setState({ isInfoPanelOpen: false });\n            }}\n          >\n            X\n          </span>\n          <InfoBox\n            item={selected}\n            social={social}\n            emitSelected={(item) => {\n              this.slotSelected(item);\n            }}\n            emitHighlighted={(item) => {\n              this.slotHighlighted(item);\n            }}\n            emitToggleFilter={(item) => {\n              this.slotToggleFilter(item);\n            }}\n          />\n        </SlidingPanel>\n\n        {/* Filter on bottom of page */}\n        <SlidingPanel isOpen={this.state.isFilterPanelOpen} position=\"bottom\">\n          <span\n            className={styles.closePanelButton}\n            onClick={() => {\n              this.setState({ isFilterPanelOpen: false });\n            }}\n          >\n            X\n          </span>\n          <FilterBox\n            social={social}\n            emitToggleFilter={(item) => {\n              this.slotToggleFilter(item);\n            }}\n            emitSelected={(item) => {\n              this.slotSelected(item);\n            }}\n            emitHighlighted={(item) => {\n              this.slotHighlighted(item);\n            }}\n            emitClearFilters={() => {\n              this.slotClearFilters();\n            }}\n          />\n        </SlidingPanel>\n\n        {/* This creates the menu on the LHS opened by the hamburger */}\n        <SlidingPanel isOpen={this.state.isHamburgerMenuOpen} position=\"left\" size=\"100px\" minSize=\"100px\">\n          <BrunelMenu\n            emitClose={() => {\n              this.setState({ isHamburgerMenuOpen: false });\n            }}\n            items={menu}\n          />\n        </SlidingPanel>\n\n        {/* The social graph itself */}\n        <div className={styles.graphContainer}>\n          <SocialGraph\n            social={this.state.social}\n            selected={selected}\n            highlighted={highlighted}\n            emitClicked={(id) => this.slotSelected(id)}\n            wobble={this.state.wobbleEnabled}\n          />\n        </div>\n\n        <div className={styles.shipNameContainer}>\n          <ShipTitle name={this.state.selectedShip} />\n        </div>\n\n        <div className={styles.bottomContainer}>\n          <ShipSelector\n            projects={this.state.social.getProjects()}\n            shipFilter={(item) => this.slotSetFilter(item)}\n            resetFilters={this.resetFilters}\n          />\n        </div>\n\n        {/* Some side panel */}\n        <div className={styles.sidePanel}>\n          <div>\n            <DefaultButton\n              onClick={() => {\n                this.toggleFilterPanel();\n              }}\n            >\n              Filters\n            </DefaultButton>\n          </div>\n          <div>\n            <DefaultButton onClick={() => this.toggleTimeLinePanel()}>{\"Timeline\"}</DefaultButton>\n          </div>\n          <div>\n            <DefaultButton onClick={this.toggleWobble}>Wobble</DefaultButton>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SocialApp;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TimeLineBox_container__3XwaK\",\"centerContainer\":\"TimeLineBox_centerContainer__16Ujh\",\"tabs\":\"TimeLineBox_tabs__yHSvr\",\"tablist\":\"TimeLineBox_tablist__yB2UA\",\"tab\":\"TimeLineBox_tab__157Wu\",\"tabPanel\":\"TimeLineBox_tabPanel__3u0d3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filterContainer\":\"FilterBox_filterContainer__2KAxt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SlidingPanel_container__360Fr\",\"leftContainer\":\"SlidingPanel_leftContainer__hQNC6\",\"rightContainer\":\"SlidingPanel_rightContainer__57qYr\",\"topContainer\":\"SlidingPanel_topContainer__YiYRz\",\"bottomContainer\":\"SlidingPanel_bottomContainer__2dEzd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromLeft_enter__jKjRY\",\"enterActive\":\"SlideFromLeft_enterActive__159kE\",\"exit\":\"SlideFromLeft_exit___gRJ9\",\"exitActive\":\"SlideFromLeft_exitActive__YfXDY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromRight_enter__3at5G\",\"enterActive\":\"SlideFromRight_enterActive__qhcn3\",\"exit\":\"SlideFromRight_exit__C9Did\",\"exitActive\":\"SlideFromRight_exitActive__2HcMW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromBottom_enter__1iOKm\",\"enterActive\":\"SlideFromBottom_enterActive__248cg\",\"exit\":\"SlideFromBottom_exit__1SBqa\",\"exitActive\":\"SlideFromBottom_exitActive__1TiIq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromTop_enter__2sGUw\",\"enterActive\":\"SlideFromTop_enterActive__3jElj\",\"exit\":\"SlideFromTop_exit__28rU4\",\"exitActive\":\"SlideFromTop_exitActive__2_Nxz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"OverlayBox_container__2H63R\",\"centerContainer\":\"OverlayBox_centerContainer__bl7gf\",\"button\":\"OverlayBox_button__V4JvO\",\"url\":\"OverlayBox_url__aN8n5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SearchBar_container__1nsMW\",\"searchContainer\":\"SearchBar_searchContainer__2xOxT\",\"resultContainer\":\"SearchBar_resultContainer__1_9Lx\",\"searchPending\":\"SearchBar_searchPending__1uhP9\",\"searchResult\":\"SearchBar_searchResult__1iaaf\",\"hamburgerButton\":\"SearchBar_hamburgerButton__1PuEk\",\"searchBox\":\"SearchBar_searchBox__3PHmH\",\"disabledButton\":\"SearchBar_disabledButton__2PWwO\",\"searchButton\":\"SearchBar_searchButton__1GItM\",\"magnifier\":\"SearchBar_magnifier__2xBEb\",\"closeResultButton\":\"SearchBar_closeResultButton__MIs2K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"BrunelMenu_menu__2QqAJ\",\"menuItem\":\"BrunelMenu_menuItem__Adzvp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"ShipTitle_button__1T70e\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"module\":\"SocialApp_module__3Cefy\",\"graphContainer\":\"SocialApp_graphContainer__1fIZ_\",\"shipNameContainer\":\"SocialApp_shipNameContainer__3G7ll\",\"controlButton\":\"SocialApp_controlButton__dd05U\",\"analysisButtons\":\"SocialApp_analysisButtons__1quBU\",\"bottomContainer\":\"SocialApp_bottomContainer__7teeO\",\"sidePanel\":\"SocialApp_sidePanel__1czli\",\"filterText\":\"SocialApp_filterText__12DDf\",\"citationText\":\"SocialApp_citationText__m100A\",\"closePanelButton\":\"SocialApp_closePanelButton__S0EAB\",\"closeOverlayButton\":\"SocialApp_closeOverlayButton__38BCO\",\"modal\":\"SocialApp_modal__7Dp7u\",\"modalOverlay\":\"SocialApp_modalOverlay__8objV\",\"modalOverlayAfterOpen\":\"SocialApp_modalOverlayAfterOpen__3azyt\",\"modalOverlayBeforeClose\":\"SocialApp_modalOverlayBeforeClose__3K48w\"};"],"sourceRoot":""}