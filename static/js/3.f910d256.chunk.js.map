{"version":3,"sources":["components/ForceGraph.module.css","components/Accordion.module.css","components/DefaultButton.module.css","components/CheckBox.module.css","components/ResponsiveList.module.css","components/GroupsList.module.css","components/ConnectionList.module.css","components/WeightsList.module.css","components/InfoBox.module.css","components/d3/ForceGraph.d3.js","components/ForceGraph.js","components/SocialGraph.js","components/Accordion.js","components/DefaultButton.js","components/CheckBox.js","components/ResponsiveList.js","components/GroupsList.js","components/ConnectionList.js","components/DateRangeButton.js","model/Errors.js","model/RoughDate.js","model/DateRange.js","components/SourceList.js","components/WeightsList.js","model/Person.js","model/People.js","model/Business.js","model/Businesses.js","model/Connection.js","model/Connections.js","model/Position.js","model/Positions.js","model/Affiliation.js","model/Affiliations.js","model/Source.js","model/Sources.js","model/Note.js","model/Notes.js","model/Project.js","model/Projects.js","model/Biographies.js","model/Social.js","components/InfoBox.js","components/TimeLineView.js","components/TimeLineBox.js","components/FilterBox.js","components/SlidingPanel.js","components/OverlayBox.js","components/SearchBar.js","components/BrunelMenu.js","SocialApp.js","components/TimeLineView.module.css","components/TimeLineBox.module.css","components/FilterBox.module.css","components/SlidingPanel.module.css","components/transitions/SlideFromLeft.module.css","components/transitions/SlideFromRight.module.css","components/transitions/SlideFromBottom.module.css","components/transitions/SlideFromTop.module.css","components/OverlayBox.module.css","components/SearchBar.module.css","components/BrunelMenu.module.css","SocialApp.module.css"],"names":["module","exports","_null_function","params","constrain","x","w","r","Math","max","min","drag","THIS","simulation","_simulation","d3","on","d","active","alphaTarget","restart","fx","fy","y","passive","state","width","h","height","fixed","handleMouseClick","svg","_mainGroup","node","this","raise","id","attr","items","selectAll","classed","styles","highlight","signalClicked","stopPropagation","handleMouseOver","each","i","target_id","target","source_id","source","signalMouseOver","handleMouseOut","signalMouseOut","_resolve","item","getID","ForceGraphD3","props","uid","uuidv4","social","selected","highlighted","colors","color","last_color","group_to_color","slice","length","_size_changed","_graph_changed","update","size_changed","hasOwnProperty","graph","getGraph","l","lodash","cloneDeep","edges","edge","n","nodes","old_nodes","old","_graph","o","group","data","select","join","enter","append","size","getGroupColor","call","text","node_text","label","link","index","dx","dy","dragLink","stop","force","strength","links","distance","iterations","radius","_link","_node","_label","console","log","className","remove","container","mainGroup","_updateSimulation","_updateLink","_updateNode","_updateNodeText","_is_drawn","drawFromScratch","update_simulation","ForceGraph","_updateSize","bind","window","addEventListener","removeEventListener","updateSize","draw","offsetWidth","offsetHeight","s","ref","el","style","React","Component","SocialGraph","getNetwork","emitClicked","BAccordion","accordion","preExpanded","allowMultipleExpanded","allowZeroExpanded","children","BAccordionItem","accordionItem","uuid","BAccordionTitle","accordionButton","BAccordionPanel","DefaultButton","href","button","onClick","CheckBox","checkBox","type","checked","onChange","checkMark","ResponsiveList","list","ResponsiveListItem","key","null_function","GroupsList","groups","title","emitSelected","emitToggleFilter","projects","Object","keys","forEach","_i","get","is_filtered","isFiltered","push","getName","event","project","projectHeader","projectBody","minWidth","ConnectionList","connections","listitems","map","name","date","DateRangeButton","value","_isARoughDateObject","_isADateRangeObject","isNull","toSimpleString","toDateRange","KeyError","args","Error","captureStackTrace","ValueError","MissingError","_toDate","val","def","_isAMomentObject","moment","isValid","_get_min","d1","d2","toDate","_get_max","RoughDate","start","end","raw","setState","toISOString","delta","add","isFuzzy","format","e","getMonth","getDate","getFullYear","getEarliest","getLatest","DateRange","isExact","both","m","toMoment","error","other","s1","s2","getStart","getEnd","getRaw","getLatestDate","getEarliestDate","getEarliestString","getLatestString","eq","lt","gt","unDry","Dry","registerClass","_clean","hasBounds","isInstant","getStartString","getEndString","getEarliestStart","merge","getLatestEnd","hasStart","hasEnd","my_start","other_start","my_end","other_end","contains","scale","getDelta","toString","tmp","dates","SourceList","sources","output","daterange","mergeAll","body","WeightsList","weights","weight","_filterWindow","values","ret","intersect","_filterProject","Person","titles","firstnames","surnames","suffixes","positions","affiliations","alive","gender","notes","orig_name","_getHook","_isAPersonObject","ids","seen","nsources","includes","nprojects","person","getAlive","hook","parts","part","getTitle","getFirstName","getSurname","getSuffix","scores","content","is_anchor","shape","sort","c","_generate_person_uid","substring","People","registry","_names","_isAPeopleObject","load","_updateHooks","names","canAdd","existing","getByName","clone","trim","toLowerCase","results","indexOf","funcs","people","timeline","getTimeLine","anchor","getNode","array","element","v","Business","_isABusinessObject","business","_generate_business_uid","Businesses","_isABusinessesObject","businesses","_mergeSources","Connection","n0","n1","shared","duration","correspondances","_isAConnectionObject","node0","getNode0","node1","getNode1","getDuration","getNode0Name","getNode1Name","getWeight","getColorFromType","getWeightFromType","scaling","arrows","to","middle","from","_generate_connection_uid","Connections","_isAConnectionsObject","connection","nnodes","_add","getNode0ID","getNode1ID","areNodesVisible","toEdge","Position","_isAPositionObject","canonical","makeCanonical","_generate_position_uid","Positions","_isAPositionsObject","position","_isApositionObject","Affiliation","_isAAffiliationObject","_generate_affiliation_uid","Affiliations","_isAAffiliationsObject","affiliation","Source","description","_isASourceObject","ne","_generate_source_uid","Sources","_isASourcesObject","getDescription","Note","_isANoteObject","getText","_generate_note_uid","Notes","_isANotesObject","note","Project","url","_isAProjectObject","_generate_project_uid","Projects","_isAProjectsObject","Biographies","bios","_isABiographiesObject","biography","bio","_push","enabled","timestep","Social","filter","cache","projectTimeLine","itemTimeLine","node_filters","edge_filters","max_window","_rebuilding","_isASocialObject","getHook","biographies","getWindow","filterWindow","project_filter","filterProject","source_filter","filterSource","node_filter","getConnectionsTo","group_filter","inGroup","new_window","getStartDate","getEndDate","fitted","_fitWindow","setWindow","clearCache","filtered","getNodeFilters","getEdgeFilters","getConnections","f","_getType","result","getPeople","find","getBusinesses","getPositions","getAffiliations","getSources","search","getBiographies","getProjects","getNodes","concat","getEdges","added","getNotes","default_image","default_text","getBiography","pages","a","InfoBox","image","asources","getAffiliationSources","csources","getCorrespondanceSources","textAlign","getWeights","getType","extractData","tabs","panes","tabId","tabPanel","tab","tabFor","heroImage","alt","src","vertical","defaultTab","tablist","timeline_options","autoResize","horizontalScroll","showCurrentTime","showTooltips","verticalScroll","zoomable","order","b","DateInput","zoomButton","TimeLineView","dimensions","_is_activated","is_active","redraw","$el","isActive","byUser","_byUser","emitWindowChanged","old_window","animation","shiftEarlier","shiftLater","zoomIn","zoomOut","my_options","getMaxWindow","getItems","activated","rangechangedHandler","rangeChangedHandler","selectHandler","options","buttonGroup","scrollButton","scrollLeft","datePicker","openToDate","selectsStart","startDate","endDate","dateFormat","showMonthYearPicker","showYearDropdown","dropdownMode","customInput","setStartDate","selectsEnd","setEndDate","scrollRight","TimeLineBox","deactivate","activate","tabList","getProjectWindow","getProjectTimeLine","centerContainer","getItemWindow","getItemTimeLine","filterList","maxWidth","FilterBox","filter_text","getFilterText","emitClearFilters","filter_info","filterContainer","filterText","SlidingPanel","isOpen","minSize","maxSize","rightContainer","transition","SlideFromRight","horiz_size","vert_size","minHeight","maxHeight","bottomContainer","SlideFromBottom","topContainer","SlideFromTop","leftContainer","SlideFromLeft","CSSTransition","in","timeout","classNames","unmountOnExit","OverlayBox","loading","getURL","fadeIn","onLoad","hideSpinner","frameBorder","marginHeight","marginWidth","sandbox","emitClose","SearchResults","SearchBar","suggestions","searching","nextProps","searchText","setSuggestions","setResults","setTimeout","startSearch","startSuggestion","isSearching","autocomplete","isEmpty","which","keyCode","searchFor","button_style","searchButton","disabledButton","searchContainer","hamburgerButton","emitHamburgerClicked","searchBox","onKeyPress","onEnter","placeholder","onSearch","magnifier","resultContainer","closeResultButton","stopSearch","searchPending","display","isSuggesting","searchResult","hasResults","BrunelMenu","buttons","func","menuItem","menu","SocialApp","parse","graph_data","setAnchor","setMaxWindow","highlighted_item","selected_item","overlay_item","isInfoPanelOpen","isTimeLinePanelOpen","isFilterPanelOpen","isHamburgerMenuOpen","isOverlayOpen","socialGraph","resetFilters","toggleFilter","showInfo","closePanels","open","focus","location","reload","timeline_text","viewAbout","viewSource","resetAll","backgroundImage","onRequestClose","closeOverlay","contentLabel","modal","overlayClassName","base","modalOverlay","afterOpen","modalOverlayAfterOpen","beforeClose","modalOverlayBeforeClose","closeTimeoutMS","appElement","document","getElementById","closeOverlayButton","slotSelected","emitHighlighted","slotHighlighted","slotClicked","closePanelButton","slotWindowChanged","slotToggleFilter","slotClearFilters","graphContainer","toggleFilterPanel","toggleTimeLinePanel"],"mappings":"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","file":"static/js/3.f910d256.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ForceGraph_container__TQtWA\",\"graph\":\"ForceGraph_graph__wst6B\",\"node\":\"ForceGraph_node__27s5W\",\"highlight\":\"ForceGraph_highlight__DhZbw\",\"link\":\"ForceGraph_link__2qaVU\",\"node_text\":\"ForceGraph_node_text__3ovHB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"accordion\":\"Accordion_accordion__34t4_\",\"accordionItem\":\"Accordion_accordionItem__VO6pK\",\"accordionButton\":\"Accordion_accordionButton__hVXWw\",\"accordionPanel\":\"Accordion_accordionPanel__1rZAH\",\"fadein\":\"Accordion_fadein__2cKpJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"DefaultButton_button__1Uv_G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"checkBox\":\"CheckBox_checkBox__36R4T\",\"checkMark\":\"CheckBox_checkMark__2h9Jd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"ResponsiveList_list__1-ZoE\",\"item\":\"ResponsiveList_item__3jhI7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"project\":\"GroupsList_project__1pnkG\",\"projectHeader\":\"GroupsList_projectHeader__1YDl_\",\"projectBody\":\"GroupsList_projectBody__2Joe0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"connections\":\"ConnectionList_connections__2QbO3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"project\":\"WeightsList_project__3m0SJ\",\"projectHeader\":\"WeightsList_projectHeader__25IKl\",\"projectBody\":\"WeightsList_projectBody__3JVF3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"InfoBox_container__2EWGz\",\"heroImage\":\"InfoBox_heroImage__34BXw\",\"title\":\"InfoBox_title__2rO4Z\",\"button\":\"InfoBox_button__3w2z7\",\"tabs\":\"InfoBox_tabs__32XI5\",\"tablist\":\"InfoBox_tablist__3mBju\",\"tab\":\"InfoBox_tab__qp9XR\",\"tabPanel\":\"InfoBox_tabPanel__3FpOY\"};","\nimport * as d3 from 'd3';\n\nimport lodash from 'lodash';\n\nimport { v4 as uuidv4 } from 'uuid';\n\nimport styles from '../ForceGraph.module.css';\n\nfunction _null_function(params){};\n\nfunction constrain(x, w, r=20){\n  return Math.max(r, Math.min(w - r, x));\n}\n\nfunction dragLink(THIS){\n  let simulation = THIS._simulation;\n\n  function dragstarted(d) {\n    if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n\n    //find the two nodes connected to this edge\n    let source = THIS._graph.nodes[d.source.index];\n    let target = THIS._graph.nodes[d.target.index];\n\n    //fix those nodes in place\n    source.fx = source.x;\n    source.fy = source.y;\n\n    target.fx = target.x;\n    target.fy = target.y;\n  }\n\n  function dragged(d) {\n    //find the two nodes connected to this edge\n    let source = THIS._graph.nodes[d.source.index];\n    let target = THIS._graph.nodes[d.target.index];\n\n    //moves those nodes with the event - move the center point of the\n    //line connecting these two nodes...\n    let dx = 0.5 * (target.x - source.x);\n    let dy = 0.5 * (target.y - source.y);\n\n    source.fx = constrain(d3.event.x - dx, THIS.state.width, source.r);\n    source.fy = constrain(d3.event.y - dy, THIS.state.height, source.r);\n\n    target.fx = constrain(d3.event.x + dx, THIS.state.width, target.r);\n    target.fy = constrain(d3.event.y + dy, THIS.state.height, target.r);\n  }\n\n  function dragended(d) {\n    if (!d3.event.active) simulation.alphaTarget(0);\n\n    //find the two nodes connected to this edge\n    let source = THIS._graph.nodes[d.source.index];\n    let target = THIS._graph.nodes[d.target.index];\n\n    if (!source.fixed){\n      source.fx = null;\n      source.fy = null;\n    }\n\n    if (!target.fixed){\n      target.fx = null;\n      target.fy = null;\n    }\n  }\n\n  return d3.drag()\n      .on(\"start\", dragstarted, {passive: true})\n      .on(\"drag\", dragged, {passive: true})\n      .on(\"end\", dragended, {passive: true});\n};\n\nfunction drag(THIS) {\n  let simulation = THIS._simulation;\n\n  function dragstarted(d) {\n    if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n    d.fx = d.x;\n    d.fy = d.y;\n  }\n\n  function dragged(d) {\n    let w = THIS.state.width;\n    let h = THIS.state.height;\n\n    d.fx = constrain(d3.event.x, w, d.r);\n    d.fy = constrain(d3.event.y, h, d.r);\n  }\n\n  function dragended(d) {\n    if (!d3.event.active) simulation.alphaTarget(0);\n    if (!d.fixed){\n      d.fx = null;\n      d.fy = null;\n    }\n  }\n\n  return d3.drag()\n      .on(\"start\", dragstarted, {passive: true})\n      .on(\"drag\", dragged, {passive: true})\n      .on(\"end\", dragended, {passive: true});\n};\n\nfunction handleMouseClick(THIS){\n  function handle(){\n    let svg = THIS._mainGroup;\n    if (!svg){\n      return;\n    }\n\n    let node = d3.select(this);\n    node.raise();\n\n    let id = node.attr(\"id\");\n\n    if (!id){\n      return;\n    }\n\n    let items = svg.selectAll(`#${id}`);\n\n    items.classed(styles.highlight, true);\n\n    items = svg.selectAll(`[source_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    items = svg.selectAll(`[target_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    THIS.state.signalClicked(id);\n    d3.event.stopPropagation();\n  }\n\n  return handle;\n}\n\nfunction handleMouseOver(THIS) {\n  function handle(){\n    let svg = THIS._mainGroup;\n    if (!svg){\n      return;\n    }\n\n    let node = d3.select(this);\n    node.raise();\n\n    let id = node.attr(\"id\");\n\n    if (!id){\n      return;\n    }\n\n    //highlight the node\n    let items = svg.selectAll(`#${id}`);\n    items.classed(styles.highlight, true);\n\n    //highlight the connection lines with this node as a source\n    items = svg.selectAll(`[source_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    //highlight the nodes with this node as a target\n    items.each((d, i)=>{\n      let target_id = d.target.id;\n      svg.selectAll(`#${target_id}`).classed(styles.highlight, true);\n    });\n\n    //highlight the connection lines with this node as a target\n    items = svg.selectAll(`[target_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    //highlight the nodes with this node as a source\n    items.each((d, i)=>{\n      let source_id = d.source.id;\n      svg.selectAll(`#${source_id}`).classed(styles.highlight, true);\n    });\n\n    if (node.attr(\"source_id\")){\n      svg.selectAll(`#${node.attr(\"source_id\")}`)\n        .classed(styles.highlight, true);\n\n      svg.selectAll(`#${node.attr(\"target_id\")}`)\n        .classed(styles.highlight, true);\n    }\n\n    THIS.state.signalMouseOver(id);\n  }\n\n  return handle;\n}\n\nfunction handleMouseOut(THIS) {\n  function handle(){\n    let svg = THIS._mainGroup;\n    if (!svg){\n      return;\n    }\n\n    let node = d3.select(this);\n    let id = node.attr(\"id\");\n\n    let items = svg.selectAll(`#${id}`);\n\n    items.classed(styles.highlight, false);\n\n    //highlight the connection lines with this node as a source\n    items = svg.selectAll(`[source_id=${id}]`);\n    items.classed(styles.highlight, false);\n\n    //highlight the nodes with this node as a target\n    items.each((d, i)=>{\n      let target_id = d.target.id;\n      svg.selectAll(`#${target_id}`).classed(styles.highlight, false);\n    });\n\n    //highlight the connection lines with this node as a target\n    items = svg.selectAll(`[target_id=${id}]`);\n    items.classed(styles.highlight, false);\n\n    //highlight the nodes with this node as a source\n    items.each((d, i)=>{\n      let source_id = d.source.id;\n      svg.selectAll(`#${source_id}`).classed(styles.highlight, false);\n    });\n\n    if (node.attr(\"source_id\")){\n      svg.selectAll(`#${node.attr(\"source_id\")}`)\n        .classed(styles.highlight, false);\n\n      svg.selectAll(`#${node.attr(\"target_id\")}`)\n        .classed(styles.highlight, false);\n    }\n\n    THIS.state.signalMouseOut(id);\n  }\n\n  return handle;\n}\n\nfunction _resolve(item){\n  if (!item){\n    return null;\n  }\n  else if (item.getID){\n    return item.getID();\n  }\n  else{\n    return item;\n  }\n}\n\n/** The main class that renders the graph in the ForceGraph */\nclass ForceGraphD3 {\n  constructor(props){\n    // generate a UID for this graph so that we don't clash\n    // with any other graphs on the same page\n    let uid = uuidv4();\n\n    this.state = {width: 600,\n                  height: 400,\n                  social: null,\n                  selected: null,\n                  highlighted: null,\n                  signalClicked: _null_function,\n                  signalMouseOut: _null_function,\n                  signalMouseOver: _null_function,\n                  colors: {color: d3.scaleOrdinal(d3.schemeCategory10),\n                           last_color: -1,\n                           group_to_color: {}},\n                  uid: uid.slice(uid.length-8)\n                 };\n\n    this._size_changed = true;\n    this._graph_changed = true;\n\n    this.update(props);\n  }\n\n  update(props){\n    let size_changed = false;\n\n    if (props.hasOwnProperty(\"width\")){\n      if (this.state.width !== props.width){\n        this.state.width = props.width;\n        size_changed = true;\n      }\n    }\n\n    if (props.hasOwnProperty(\"height\")){\n      if (this.state.height !== props.height){\n        this.state.height = props.height;\n        size_changed = true;\n      }\n    }\n\n    if (size_changed){\n      this._size_changed = true;\n    }\n\n    if (props.hasOwnProperty(\"signalClicked\")){\n      if (this.state.signalClicked){\n        this.state.signalClicked = props.signalClicked;\n      }\n      else{\n        this.state.signalClicked = _null_function;\n      }\n    }\n\n    if (props.hasOwnProperty(\"signalMouseOut\")){\n      if (this.state.signalMouseOut){\n        this.state.signalMouseOut = props.signalMouseOut;\n      }\n      else{\n        this.state.signalMouseOut = _null_function;\n      }\n    }\n\n    if (props.hasOwnProperty(\"signalMouseOver\")){\n      if (this.state.signalMouseOver){\n        this.state.signalMouseOver = props.signalMouseOver;\n      }\n      else{\n        this.state.signalMouseOver = _null_function;\n      }\n    }\n\n    if (props.hasOwnProperty(\"social\")){\n      let graph = null;\n\n      if (props.social){\n        graph = props.social.getGraph();\n      }\n\n      //the social object will cache the 'getGraph' result, meaning\n      //that any change in this object signals that the graph needs\n      //to be redrawn\n      if (graph !== this.state.graph){\n        //save the cached graph\n        this.state.graph = graph;\n\n        //this view needs to clone its own copy of the graph, as\n        //D3 will update the graph object. We need to clone in case\n        //two ForceGraph.d3 views are viewing the same Social graph\n        graph = lodash.cloneDeep(this.state.graph);\n\n        // need to update IDs so that the edges refer to the index\n        // of the node in the nodes array - this could be optimised!\n        for (let l in graph.edges){\n          let edge = graph.edges[l];\n          for (let n in graph.nodes){\n            let node = graph.nodes[n];\n            if (edge.source === node.id){\n              edge.source = n;\n              edge.source_id = node.id;\n            }\n            else if (edge.target === node.id){\n              edge.target = n;\n              edge.target_id = node.id;\n            }\n          }\n        }\n\n        //index any old nodes\n        let old_nodes = [];\n        let old = {};\n\n        if (this._graph){\n          old_nodes = this._graph.nodes;\n\n          for (let n in old_nodes){\n            old[old_nodes[n].id] = n;\n          }\n        }\n\n        for (let n in graph.nodes){\n          let node = graph.nodes[n];\n\n          let i = old[node.id];\n\n          if (i){\n            let o = old_nodes[i];\n            node.x = o.x;\n            node.y = o.y;\n          }\n\n          if (node.fixed){\n            if (i){\n              node.fx = node.x;\n              node.fy = node.y;\n            }\n            else{\n              node.fx = this.state.width / 2;\n              node.fy = this.state.height / 2;\n            }\n          }\n        }\n\n        this._graph = graph;\n        this._graph_changed = true;\n      }\n    }\n\n    if (props.hasOwnProperty(\"selected\")){\n      this.state.selected = _resolve(props.selected);\n    }\n\n    if (props.hasOwnProperty(\"highlighted\")){\n      this.state.highlighted = _resolve(props.highlighted);\n    }\n  }\n\n  className(){\n    return `ForceGraphD3-${this.state.uid}`;\n  }\n\n  getGroupColor(group){\n    let color = this.state.colors.group_to_color[group];\n\n    if (!color){\n      this.state.colors.last_color += 1;\n      color = this.state.colors.last_color;\n      this.state.colors.group_to_color[group] = color;\n    }\n\n    return this.state.colors.color(color);\n  }\n\n  _updateNode(data){\n    let node = this._mainGroup.select(\".node-group\").selectAll(\".node\");\n\n    node = node.data(data, d=>d.id)\n               .join(\n                 enter => enter.append(\"circle\")\n                               .attr(\"class\", `node ${styles.node}`),\n                 update => update.attr(\"class\",\n                                       `node ${styles.node}`)\n               )\n               .attr(\"r\", d=>{return d.size})\n               .attr(\"id\", d=>{return d.id})\n               .attr(\"fill\", d=>{return this.getGroupColor(d.group)})\n               .on(\"click\", handleMouseClick(this), {passive: true})\n               .on(\"mouseover\", handleMouseOver(this), {passive: true})\n               .on(\"mouseout\", handleMouseOut(this), {passive: true})\n               .call(drag(this));\n\n    return node;\n  }\n\n  _updateNodeText(data){\n    let text = this._mainGroup.select(\".node_text-group\")\n                              .selectAll(\".node_text\");\n\n    text = text.data(data, d=>d.id)\n               .join(\n                 enter => enter.append(\"text\")\n                               .attr(\"class\", `node_text ${styles.node_text}`),\n                 update => update.attr(\"class\",\n                                       `node_text ${styles.node_text}`)\n               )\n               .text(d => d.label)\n               .attr(\"id\", d=>{return d.id})\n               .on(\"click\", handleMouseClick(this), {passive: true})\n               .on(\"mouseover\", handleMouseOver(this), {passive: true})\n               .on(\"mouseout\", handleMouseOut(this), {passive: true})\n               .call(drag(this));\n\n    return text;\n  }\n\n  _updateLink(data){\n    let link = this._mainGroup.select(\".link-group\").selectAll(\".link\");\n\n    link = link.data(data, d=>d.id)\n               .join(\n                 enter => enter.append(\"line\")\n                               .attr(\"class\", `link ${styles.link}`),\n                 update => update.attr(\"class\",\n                                       `link ${styles.link}`)\n               )\n               .attr(\"class\", `link ${styles.link}`)\n               .attr(\"id\", d=>{return d.id})\n               .attr(\"source_id\", d=>{return d.source_id})\n               .attr(\"target_id\", d=>{return d.target_id})\n               .on(\"click\", handleMouseClick(this), {passive: true})\n               .on(\"mouseover\", handleMouseOver(this), {passive: true})\n               .on(\"mouseout\", handleMouseOut(this), {passive: true})\n               .call(dragLink(this));\n\n    return link;\n  }\n\n  _updateSimulation(){\n    if (this._simulation){\n      this._simulation.stop();\n      this._simulation = null;\n    }\n\n    let w = this.state.width;\n    let h = this.state.height;\n\n    let THIS = this;\n\n    function ticked(){\n      THIS._link\n        .attr(\"x1\", d => d.source.x)\n        .attr(\"y1\", d => d.source.y)\n        .attr(\"x2\", d => d.target.x)\n        .attr(\"y2\", d => d.target.y);\n\n      THIS._node\n        .attr(\"cx\", d => { return d.x = constrain(d.x, w, d.r) })\n        .attr(\"cy\", d => { return d.y = constrain(d.y, h, d.r) });\n\n      THIS._label\n        .attr(\"x\", d => d.x)\n        .attr(\"y\", d => d.y);\n    }\n\n    let simulation = d3.forceSimulation(this._graph.nodes)\n      //.force('center', d3.forceCenter(w/2, h/2))\n      .force('charge', d3.forceManyBody().strength(-50))\n      .force('link', d3.forceLink().links(this._graph.edges).distance(150).iterations(20))\n      .force('collision', d3.forceCollide().radius(25).iterations(20))\n      .on('tick', ticked);\n\n    // save the simulation so that we can update it later...\n    this._simulation = simulation;\n  }\n\n  drawFromScratch(){\n    console.log(\"DRAW FROM SCRATCH\");\n    let graph = this._graph;\n\n    if (!graph){\n      console.log(\"Nothing to draw...\");\n      return;\n    }\n\n    d3.select(`.${this.className()} > *`).remove();\n\n    let container = d3.select(`.${this.className()}`);\n\n    if (!container){\n      console.log(`Cannot find container element class ${this.className()}`);\n      return;\n    }\n\n    const width = this.state.width;\n    const height = this.state.height;\n\n    console.log(`REDRAW ${width}x${height}`);\n\n    if (!width || !height){\n      console.log(`Invalid width or height? ${width} x ${height}`);\n      return;\n    }\n\n    let svg = container.append('svg')\n      .attr('height', height)\n      .attr('width', width)\n      .attr('id', 'svg-viz')\n      .on(\"click\", ()=>{this.state.signalClicked(null)}, {passive: true});\n\n    let mainGroup = svg;\n    this._mainGroup = mainGroup;\n\n    this._updateSimulation();\n\n    mainGroup.append(\"g\").attr(\"class\", \"link-group\");\n    mainGroup.append(\"g\").attr(\"class\", \"node-group\");\n    mainGroup.append(\"g\").attr(\"class\", \"node_text-group\");\n\n    this._link = this._updateLink(graph.edges);\n    this._node = this._updateNode(graph.nodes);\n    this._label = this._updateNodeText(graph.nodes);\n\n    this._is_drawn = true;\n  }\n\n  draw(){\n    if (!this._is_drawn){\n      this.drawFromScratch();\n      this._size_changed = false;\n      this._graph_changed = false;\n      return;\n    }\n\n    let update_simulation = false;\n\n    if (this._size_changed){\n      let container = d3.select(`.${this.className()}`);\n      container.selectAll(\"svg\")\n               .attr(\"width\", this.state.width)\n               .attr(\"height\", this.state.height);\n      this._size_changed = false;\n      update_simulation = true;\n    }\n\n    if (this._graph_changed){\n      this._node = this._updateNode(this._graph.nodes);\n      this._label = this._updateNodeText(this._graph.nodes);\n      this._link = this._updateLink(this._graph.edges);\n      this._graph_changed = false;\n      update_simulation = true;\n    }\n\n    if (update_simulation){\n      this._updateSimulation();\n    }\n  }\n};\n\nexport default ForceGraphD3;\n","\nimport React from 'react';\n\nimport ForceGraphD3 from './d3/ForceGraph.d3.js';\n\nimport styles from './ForceGraph.module.css';\n\nclass ForceGraph extends React.Component {\n  constructor(props){\n    super(props);\n\n    this._graph = new ForceGraphD3(props);\n    this._updateSize = this._updateSize.bind(this);\n  }\n\n  componentDidMount(){\n    window.addEventListener('resize', this._updateSize);\n    this._updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.updateSize);\n  }\n\n  componentDidUpdate(){\n    this._graph.update(this.props);\n    this._graph.draw();\n  }\n\n  _updateSize(){\n    if (this.container && this._graph){\n      this._graph.update({width: this.container.offsetWidth,\n                          height: this.container.offsetHeight});\n      this._graph.draw();\n    }\n  }\n\n  render(){\n    let s = `${styles.graph} ${this._graph.className()}`;\n\n    return <div ref={el => (this.container = el)}\n                style={{width:\"100%\", height:\"100%\"}}>\n             <div className={s} />\n           </div>;\n  }\n}\n\nexport default ForceGraph;\n","import React from \"react\";\n\nimport ForceGraph from './ForceGraph';\n\nclass SocialGraph extends React.Component {\n  getGraph(){\n    const social = this.props.social;\n\n    if (social){\n      return social.getGraph();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getNetwork(){\n    const social = this.props.social;\n\n    if (social){\n      return social.getNetwork();\n    }\n    else{\n      return null;\n    }\n  }\n\n  render(){\n    if (this.props.social){\n      return (<div style={{width:\"100%\", height:\"100%\"}}>\n                <ForceGraph\n                     social={this.props.social}\n                     signalClicked={this.props.emitClicked}\n                     highlighted={this.props.highlighted}\n                     selected={this.props.selected} />\n              </div>\n             );\n    }\n    else{\n      return (<div>\n                No data to display!!!\n              </div>);\n    }\n  }\n};\n\nexport default SocialGraph;\n","\nimport React from 'react';\n\nimport {\n  Accordion,\n  AccordionItem,\n  AccordionItemHeading,\n  AccordionItemButton,\n  AccordionItemPanel,\n} from 'react-accessible-accordion';\n\nimport styles from './Accordion.module.css';\n\nfunction BAccordion(props){\n  return <Accordion className={styles.accordion}\n                    preExpanded={props.preExpanded}\n                    allowMultipleExpanded={props.allowMultipleExpanded}\n                    allowZeroExpanded={props.allowZeroExpanded}>\n           {props.children}\n         </Accordion>;\n}\n\nfunction BAccordionItem(props){\n  return <AccordionItem className={styles.accordionItem}\n                        style={props.style}\n                        uuid={props.uuid}>\n           {props.children}\n         </AccordionItem>;\n}\n\nfunction BAccordionTitle(props){\n  return <AccordionItemHeading style={props.style}>\n           <AccordionItemButton className={styles.accordionButton}>\n             {props.children}\n           </AccordionItemButton>\n         </AccordionItemHeading>;\n}\n\nfunction BAccordionPanel(props){\n  return <AccordionItemPanel style={props.style}>\n           {props.children}\n         </AccordionItemPanel>;\n}\n\nexport {BAccordion as Accordion,\n        BAccordionItem as AccordionItem,\n        BAccordionTitle as AccordionTitle,\n        BAccordionPanel as AccordionPanel,\n        BAccordion as default};\n","\nimport React from 'react';\n\nimport styles from './DefaultButton.module.css';\n\nfunction DefaultButton(props){\n  return <button href=\"#\" className={styles.button}\n                 onClick={props.onClick}\n                 style={props.style}>\n          {props.children}\n         </button>;\n}\n\nexport default DefaultButton;\n","\nimport React from 'react';\n\nimport styles from './CheckBox.module.css';\n\nfunction CheckBox(props){\n  return <label className={styles.checkBox} style={props.style}>\n           <input type=\"checkbox\"\n             checked={props.checked}\n             onChange={props.onChange}/>\n           <span className={styles.checkMark}/>\n         </label>;\n}\n\nexport default CheckBox;\n","\nimport React from 'react';\n\nimport styles from './ResponsiveList.module.css';\n\nfunction ResponsiveList(props){\n  return <div className={styles.list}>\n           {props.children}\n         </div>;\n}\n\nfunction ResponsiveListItem(props){\n  return <div className={styles.item} key={props.key}>\n           {props.children}\n         </div>;\n}\n\nexport {ResponsiveListItem,\n        ResponsiveList,\n        ResponsiveList as default};\n","\nimport React from 'react';\n\nimport DefaultButton from './DefaultButton';\nimport CheckBox from './CheckBox';\nimport {ResponsiveList, ResponsiveListItem} from './ResponsiveList';\n\nimport styles from './GroupsList.module.css';\n\nfunction null_function(item){}\n\nfunction GroupsList({groups, title=null, emitSelected=null_function,\n                     emitToggleFilter=null_function, social=null}) {\n\n  if (!groups) {\n    return null;\n  }\n\n  let projects = [];\n\n  Object.keys(groups).forEach((key, _i)=>{\n    let items = [];\n\n    for (let index in groups[key]){\n      let group = social.get(groups[key][index]);\n      let is_filtered = social.isFiltered(group);\n\n      items.push(<ResponsiveListItem key={group.getName()}>\n                  <DefaultButton onClick={()=>{emitSelected(group);}}\n                                 style={{width:\"70%\"}}>\n                    {group.getName()}\n                  </DefaultButton>\n                  <CheckBox onChange={(event)=>{emitToggleFilter(group);}}\n                            style={{width:\"20%\"}}\n                            checked={is_filtered}/>\n                 </ResponsiveListItem>);\n    }\n\n    let project = social.get(key);\n    let is_filtered = social.isFiltered(project);\n\n    projects.push(\n      <div className={styles.project} key={project.getName()}>\n        <div className={styles.projectHeader}>\n          <DefaultButton style={{width:\"75%\"}}\n                         onClick={()=>{emitSelected(project);}}>\n            {project.getName()}\n          </DefaultButton>\n          <CheckBox onChange={(event)=>{emitToggleFilter(project);}}\n                    style={{width:\"20%\"}}\n                    checked={is_filtered}/>\n        </div>\n        <div className={styles.projectBody}>\n          <ResponsiveList style={{minWidth:\"100%\"}}>\n            {items}\n          </ResponsiveList>\n        </div>\n      </div>\n    );\n  });\n\n  if (title){\n    return (<div>\n              <div className={styles.title}>{title}</div>\n              {projects}\n            </div>);\n  }\n  else {\n    return projects;\n  }\n}\n\nexport default GroupsList;\n","\nimport React from 'react';\n\nimport DefaultButton from './DefaultButton';\nimport CheckBox from './CheckBox';\n\nimport {ResponsiveList, ResponsiveListItem} from './ResponsiveList';\n\nimport styles from './ConnectionList.module.css';\n\nfunction null_function(item){}\n\nfunction ConnectionList({connections, title, emitSelected=null_function,\n                         emitToggleFilter=null_function,\n                         social=null}) {\n  if (!connections || connections.length === 0) {\n    return null;\n  }\n\n  const listitems = connections.map((item) => {\n    let i = item;\n    let name = item.getName();\n\n    let is_filtered = false;\n\n    if (social){\n      is_filtered = social.isFiltered(item);\n    }\n\n    return (\n      <ResponsiveListItem key={name}>\n        <DefaultButton onClick={()=>{emitSelected(i);}}\n                       style={{width:\"70%\"}}>\n          {name}\n        </DefaultButton>\n        <CheckBox onChange={(event)=>{emitToggleFilter(i);}}\n                  checked={is_filtered}\n                  style={{width:\"20%\"}}/>\n      </ResponsiveListItem>);\n  });\n\n  if (title){\n    return (<div className={styles.connections}>\n              <div className={styles.title}>{title}</div>\n              <ResponsiveList>{listitems}</ResponsiveList>\n            </div>);\n  }\n  else{\n    return (<div className={styles.connections}>\n              <ResponsiveList>{listitems}</ResponsiveList>\n            </div>);\n  }\n}\n\nexport default ConnectionList;\n","\nimport React from 'react';\n\nimport DefaultButton from './DefaultButton';\n\nfunction _null_function(date){};\n\nfunction DateRangeButton(props){\n  let d = props.value;\n\n  if (!d){\n    return null;\n  }\n\n  if (!(d._isARoughDateObject || d._isADateRangeObject)){\n    return null;\n  }\n\n  if (d.isNull()){\n    return null;\n  }\n\n  let emitSelected = props.emitSelected;\n\n  if (!emitSelected){\n    emitSelected = _null_function;\n  }\n\n  let s = d.toSimpleString();\n\n  if (d._isARoughDateObject){\n    d = d.toDateRange();\n  }\n\n  return <DefaultButton onClick={()=>{emitSelected(d)}} style={props.style}>\n           {s}\n         </DefaultButton>;\n}\n\nexport default DateRangeButton;\n","\nclass KeyError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, KeyError)\n    }\n}\n\nclass ValueError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, ValueError)\n    }\n}\n\nclass DuplicateError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, DuplicateError)\n    }\n}\n\nclass MissingError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, MissingError)\n    }\n}\n\nexport {KeyError, ValueError, DuplicateError, MissingError};\n","\nimport Dry from 'json-dry';\nimport moment from 'moment';\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction _toDate(val, def=null){\n  if (val){\n    if (val._isAMomentObject){\n      return val;\n    }\n\n    /*if (val.toISOString){\n      val = val.toISOString();\n    }*/\n\n    let date = moment(val);\n\n    if (!date.isValid()){\n      console.log(`Invalid Date ${val}`);\n      throw new ValueError(`Invalid Date ${val}`);\n    }\n\n    return date;\n  }\n  else {\n    if (!def){\n      return null;\n    }\n    else{\n      return _toDate(def);\n    }\n  }\n}\n\n// NOTE FOR FUTURE - moment(x) < moment(y) === true\n//            even though moment(x).toDate() < moment(y).toDate() === false\n//   MOMENT COMPARISONS ARE BROKEN!\n\nfunction _get_min(d1, d2){\n  if (d1){\n    if (d2){\n      if (d1.toDate() < d2.toDate()){\n        return d1;\n      }\n      else{\n        return d2;\n      }\n    }\n    else{\n      return d1;\n    }\n  }\n  else{\n    return d2;\n  }\n}\n\nfunction _get_max(d1, d2){\n  if (d1){\n    if (d2){\n      if (d1.toDate() > d2.toDate()){\n        return d1;\n      }\n      else{\n        return d2;\n      }\n    }\n    else{\n      return d1;\n    }\n  }\n  else{\n    return d2;\n  }\n}\n\nfunction _merge_raw(s1, s2){\n  if (!s1){\n    return s2;\n  }\n  else if (!s2){\n    return s1;\n  }\n\n  return `${s1} + ${s2}`;\n}\n\nclass RoughDate{\n  constructor(state){\n    this.state = {\n      start: null,\n      end: null,\n      raw: null,\n    };\n\n    this.setState(state);\n\n    this._isARoughDateObject = true;\n  }\n\n  setState(state){\n    if (!state || state === \"null\" || state === null){\n      this.state = {start:null};\n      return;\n    }\n    else if (state._isARoughDateObject){\n      this.state = {...state.state};\n      return;\n    }\n    else if (state._isADateRangeObject){\n      this.state = state.toDate();\n      return;\n    }\n    else if (state._isAMomentObject){\n      this.state = {start: _toDate(state)};\n      return;\n    }\n    else if (state.toISOString){\n      this.state = {start:_toDate(state)};\n      return;\n    }\n    else if (state.hasOwnProperty(\"value\")){\n      this.state = {start:state.value};\n      return;\n    }\n    else if (typeof(state) === \"string\"){\n      this.state = {start:_toDate(state), raw:state};\n      return;\n    }\n\n    let start = _toDate(state.start);\n    let end = _toDate(state.end);\n\n    if (!start){\n      this.state = {start: null};\n      return;\n    }\n\n    this.state.start = start;\n    this.state.end = end;\n    this.state.raw = state.raw;\n\n    if (this.isNull()){\n      console.log(\"NULL RoughDate?\");\n      console.log(state);\n    }\n  }\n\n  static clone(item){\n    let d = new RoughDate();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static max(d1, d2){\n    return new RoughDate(_get_max(d1.getLatest(), d2.getLatest()));\n  }\n\n  static min(d1, d2){\n    return new RoughDate(_get_min(d1.getEarliest(), d2.getEarliest()));\n  }\n\n  static delta(d1, d2){\n    return d1.getLatestDate() - d2.getEarliestDate();\n  }\n\n  static getDelta(d1, d2){\n    return RoughDate.delta(d1, d2);\n  }\n\n  static eq(item, other){\n    if (item._isARoughDateObject && other._isARoughDateObject){\n      return item.getEarliestString() === other.getEarliestString() &&\n             item.getLatestString() === other.getLatestString();\n    }\n    else{\n      return false;\n    }\n  }\n\n  static lt(d1, d2){\n    if (d1.isNull() || d2.isNull()){\n      return false;\n    }\n    else{\n      return d1.getEarliestDate() < d2.getEarliestDate();\n    }\n  }\n\n  static gt(d1, d2){\n    if (d1.isNull() || d2.isNull()){\n      return false;\n    }\n    else {\n      return d1.getEarliestDate() > d2.getEarliestDate();\n    }\n  }\n\n  static le(d1, d2){\n    return RoughDate.eq(d1, d2) || RoughDate.lt(d1, d2);\n  }\n\n  static ge(d1, d2){\n    return RoughDate.eq(d1, d2) || RoughDate.gt(d1, d2);\n  }\n\n  static ne(d1, d2){\n    return !(RoughDate.eq(d1, d2));\n  }\n\n  add(delta){\n    if (this.state.start){\n      this.state.start.add(delta);\n    }\n\n    if (this.state.end){\n      this.state.end.add(delta);\n    }\n\n    this.state.raw = null;\n  }\n\n  sub(delta){\n    this.add(-delta);\n  }\n\n  isNull(){\n    if (this.state.start){\n      return false;\n    }\n    else{\n      return true;\n    }\n  }\n\n  isFuzzy(){\n    if (this.state.end){\n      return true;\n    }\n    else{\n      return false;\n    }\n  }\n\n  isExact(){\n    return !(this.isNull() || this.isFuzzy());\n  }\n\n  toString(){\n    if (this.isNull()){\n      return \"Date:unknown\";\n    }\n    else if (this.isFuzzy()){\n      return `~${this.state.start.format(\"LL\")}-${this.state.end.format(\"LL\")}`;\n    }\n    else{\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  toSimpleString(){\n    if (this.isNull()){\n      return \"unknown\";\n    }\n    else if (this.isFuzzy()){\n      let s = this.state.start.toDate();\n      let e = this.state.end.toDate();\n\n      if (s.getMonth() === 0 && e.getMonth() === 11 &&\n          s.getDate() === 1 && e.getDate() === 31){\n        //the dates span full years\n        if (s.getFullYear() === e.getFullYear()){\n          return s.getFullYear();\n        }\n        else{\n          return `${s.getFullYear()}-${e.getFullYear()}`;\n        }\n      }\n      else{\n        return `${s.getDate()}/${s.getMonth()+1}/${s.getFullYear()}-${e.getDate()}/${e.getMonth()+1}/${e.getFullYear()}`;\n      }\n    }\n    else{\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  getEarliest(){\n    let state = {\"start\": this.state.start};\n    let r = new RoughDate();\n    r.state = state;\n    return r;\n  }\n\n  getLatest(){\n    if (this.state.end){\n      let state = {\"start\": this.state.end};\n      let r = new RoughDate();\n      r.state = state;\n      return r;\n    }\n    else{\n      return this.getEarliest();\n    }\n  }\n\n  getEarliestDate(){\n    let d = this.getEarliest();\n\n    if (d){\n      return d.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getLatestDate(){\n    let d = this.getLatest();\n\n    if (d){\n      return d.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getEarliestString(){\n    let d = this.getEarliest();\n\n    if (d){\n      return d.toDate().toISOString();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getLatestString(){\n    let d = this.getLatest();\n\n    if (d){\n      return d.toDate().toISOString();\n    }\n    else{\n      return null;\n    }\n  }\n\n  toRange(){\n    if (this.isNull()){\n      return new DateRange();\n    }\n    else if (this.isExact()){\n      return new DateRange({both:this.state.start});\n    }\n    else{\n      return new DateRange({start:this.state.start, end:this.state.end});\n    }\n  }\n\n  toDateRange(){\n    if (this.isNull()){\n      return new DateRange();\n    }\n    else if (this.isFuzzy()){\n      return new DateRange({start:this.getEarliest(), end:this.getLatest()});\n    }\n    else{\n      return new DateRange({both:this.getEarliest()});\n    }\n  }\n\n  toDate(){\n    let m = this.toMoment();\n\n    if (m){\n      try{\n        return m.toDate();\n      }\n      catch(error){\n        console.log(`STRANGE ERROR ${error}`);\n        console.log(`m = ${m}`);\n        console.log(m);\n        return null;\n      }\n    }\n    else{\n      return null;\n    }\n  }\n\n  toMoment(){\n    if (this.isNull()){\n      return null;\n    }\n    else if (this.isExact()){\n      return this.state.start;\n    }\n    else{\n      throw ValueError(\n        `Cannot extract a single date from an inexact date ${this}`);\n    }\n  }\n\n  getRaw(){\n    return this.state.raw;\n  }\n\n  getStart(){\n    return this.state.start;\n  }\n\n  getEnd(){\n    if (this.state.end){\n      return this.state.end;\n    }\n    else {\n      return this.state.start;\n    }\n  }\n\n  merge(other){\n    let state = {start: _get_min(this.getStart(), other.getStart()),\n                 end: _get_max(this.getEnd(), other.getEnd()),\n                 raw: _merge_raw(this.getRaw(), other.getRaw())};\n\n    let date = new RoughDate();\n    date.state = state;\n\n    return date;\n  }\n}\n\nRoughDate.unDry = function(value){\n  return new RoughDate(value);\n}\n\nDry.registerClass(\"Date\", RoughDate);\n\nexport default RoughDate;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\nimport RoughDate from './RoughDate';\nimport {ValueError} from './Errors';\n\nfunction _clean(val){\n  if (!val || val._isADateRangeObject){\n    return val;\n  }\n  else if (val._isARoughDateObject){\n    return val.toDateRange();\n  }\n  else if (val.hasOwnProperty(\"start\") || val.hasOwnProperty(\"end\") ||\n           val.hasOwnProperty(\"both\") || val.hasOwnProperty(\"value\")){\n    return new DateRange(val);\n  }\n  else{\n    return new DateRange({both:new RoughDate(val)});\n  }\n}\n\nclass DateRange{\n  constructor(state){\n    this.state = {\n      start: null,\n      end: null\n    }\n\n    this.setState(state);\n    this._isADateRangeObject = true;\n  }\n\n  toString(){\n    if (this.hasBounds()){\n      if (this.isInstant()){\n        return `DateRange(${this.getStartString()})`;\n      }\n      else{\n        return `DateRange(${this.getStartString()} to ${this.getEndString()})`;\n      }\n    }\n    else{\n      return \"DateRange::unbounded\";\n    }\n  }\n\n  toSimpleString(){\n    if (this.hasBounds()){\n      if (this.isInstant()){\n        return this.getStart().toSimpleString();\n      }\n      else{\n        return this.getEarliestStart().merge(this.getLatestEnd()).toSimpleString();\n      }\n    }\n    else if (this.hasStart()){\n      return `${this.getStart().toSimpleString()}<=>future`;\n    }\n    else if (this.hasEnd()){\n      return `past<=>${this.getEnd().toSimpleString()}`;\n    }\n    else{\n      return \"past<=>future\";\n    }\n  }\n\n  static clone(item){\n    let d = new DateRange();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static eq(item, other){\n    if (item === other){\n      return true;\n    }\n\n    if (item.hasStart() && other.hasStart()){\n      if (!RoughDate.eq(item.getStart(), other.getStart())){\n        return false;\n      }\n    }\n    else if (item.hasStart() || other.hasStart()){\n      return false;\n    }\n\n    if (item.hasEnd() && other.hasEnd()){\n      if (!RoughDate.eq(item.getEnd(), other.getEnd())){\n        return false;\n      }\n    }\n    else if (item.hasEnd() || other.hasEnd()){\n      return false;\n    }\n\n    return true;\n  }\n\n  static mergeAll(dates){\n    if (!dates){\n      return null;\n    }\n    else if (dates._isARoughDateObject || dates._isARoughDateObject){\n      return dates;\n    }\n\n    if (!dates.length || dates.length === 0){\n      return null;\n    }\n\n    let date = dates[0];\n\n    if (dates.length > 1){\n      for (let i=1; i<dates.length; ++i){\n        if (!dates[i].isNull()){\n          if (date.isNull()){\n            date = dates[i];\n          }\n          else{\n            date = date.merge(dates[i]);\n          }\n        }\n      }\n    }\n\n    if (date.isNull()){\n      return null;\n    }\n    else{\n      return date;\n    }\n  }\n\n  merge(other){\n    if (!other){\n      return this;\n    }\n    else if (other._isARoughDateObject){\n      other = other.toDateRange();\n    }\n\n    return new DateRange({start: RoughDate.min(this.getEarliestStart(),\n                                               other.getEarliestStart()),\n                          end: RoughDate.max(this.getLatestEnd(),\n                                             other.getLatestEnd())});\n  }\n\n  hasBounds(){\n    return this.hasStart() && this.hasEnd();\n  }\n\n  hasEnd(){\n    if (this.state.end){\n      return !(this.state.end.isNull());\n    }\n    else{\n      return false;\n    }\n  }\n\n  hasStart(){\n    if (this.state.start){\n      return !(this.state.start.isNull());\n    }\n    else{\n      return false;\n    }\n  }\n\n  isInstant(){\n    return this.hasStart() && (this.state.start === this.state.end);\n  }\n\n  toDate(){\n    if (this.hasStart()){\n      if (this.hasEnd()){\n        return this.getStart().merge(this.getEnd());\n      }\n      else{\n        return this.getStart();\n      }\n    }\n    else{\n      return this.getEnd();\n    }\n  }\n\n  contains(date){\n    date = _clean(date);\n\n    if (!date){\n      return true;\n    }\n    else if (date._isADateRangeObject){\n      const my_start = this.getEarliestStart();\n      const other_start = date.getEarliestStart();\n\n      if (my_start && other_start){\n        if (RoughDate.gt(my_start, other_start)){ return false;}\n      }\n      else if (other_start){\n        return false;\n      }\n\n      const my_end = this.getLatestEnd();\n      const other_end = date.getLatestEnd();\n\n      if (my_end && other_end){\n        if (RoughDate.lt(my_end, other_end)){ return false;}\n      }\n      else if (my_end){\n        return false;\n      }\n\n      return true;\n    }\n    else {\n      throw new ValueError(`Invalid Date ${date}`);\n    }\n  }\n\n  intersect(other){\n    other = _clean(other);\n\n    if (!other){\n      return this;\n    }\n\n    if (!other.hasBounds()){\n      return this;\n    }\n    else if (!this.hasBounds()){\n      return other;\n    }\n\n    const start = RoughDate.max(this.getStart(), other.getStart());\n\n    if (!this.contains(start)){\n      return null;\n    }\n\n    const end = RoughDate.min(this.getEnd(), other.getEnd());\n\n    if (!this.contains(end)){\n      return null;\n    }\n\n    if (RoughDate.eq(start, end)){\n      return new DateRange({both:start});\n    }\n    else{\n      return new DateRange({start:start, end:end});\n    }\n  }\n\n  union(other){\n    other = _clean(other);\n    if (!other){\n      return this;\n    }\n    else if (!(other._isADateRangeObject)){\n      other = new DateRange({value:other});\n    }\n\n    const start = RoughDate.min(this.getStart(), other.getStart());\n    const end = RoughDate.max(this.getEnd(), other.getEnd());\n\n    if (RoughDate.eq(start, end)){\n      return new DateRange({both:start});\n    }\n    else{\n      return new DateRange({start:start, end:end});\n    }\n  }\n\n  getDelta(){\n    if (this.hasStart() && this.hasEnd()){\n      try{\n        return this.getLatestEnd().toDate() - this.getEarliestStart().toDate();\n      }\n      catch(error){\n        console.log(error);\n        console.log(this.hasStart(), this.hasEnd());\n        console.log(this.getStart(), this.getEnd());\n        console.log(this.getLatestEnd(), this.getEarliestStart());\n        throw error;\n      }\n    }\n    else{\n      return null;\n    }\n  }\n\n  zoomIn(scale=1){\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null){\n      delta = this.getDelta() / (2.0+scale);\n    }\n    else{\n      delta = 3600000;\n    }\n\n    if (state.start){\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(-delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  zoomOut(scale=1){\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null){\n      delta = this.getDelta() * scale;\n    }\n    else{\n      delta = 3600000;\n    }\n\n    if (state.start){\n      state.start.add(-delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftEarlier(delta=null){\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null){\n      if (state.start !== null && state.end !== null){\n        delta = -(this.getDelta());     //milliseconds\n      }\n      else{\n        delta = -3600000;     //milliseconds\n      }\n    }\n\n    if (state.start){\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftLater(delta=null){\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null){\n      if (state.start !== null && state.end !== null){\n        delta = this.getDelta();     //milliseconds\n      }\n      else{\n        delta = 3600000;     //milliseconds\n      }\n    }\n\n    if (state.start){\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  getStart(){\n    return this.state.start;\n  }\n\n  getEnd(){\n    return this.state.end;\n  }\n\n  getEarliestStart(){\n    if (this.hasStart()){\n      return this.getStart().getEarliest();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getLatestEnd(){\n    if (this.hasEnd()){\n      return this.getEnd().getLatest();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getStartDate(){\n    let e = this.getEarliestStart();\n    if (e){\n      return e.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getEndDate(){\n    let e = this.getLatestEnd();\n    if (e){\n      return e.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getStartString(){\n    if (this.state.start){\n      return this.state.start.toString();\n    }\n    else{\n      return \"unbounded\";\n    }\n  }\n\n  getEndString(){\n    if (this.state.end){\n      return this.state.end.toString();\n    }\n    else{\n      return \"unbounded\";\n    }\n  }\n\n  setState(state){\n    if (state){\n      if (state === \"null\" || state === null){\n        this.state = {\"start\":null, \"end\":null};\n        return;\n      }\n      else if (state._isADateRangeObject){\n        this.state = {...state.state};\n      }\n      else if (state._isARoughDateObject){\n        this.state = {\"start\":state, \"end\": state};\n      }\n      else if (state.hasOwnProperty(\"value\")){\n        this.setState(state.value);\n        return;\n      }\n      else if (state.hasOwnProperty(\"both\")){\n        this.state.start = new RoughDate(state.both);\n        this.state.end = this.state.start;\n      }\n      else if (typeof state === \"string\"){\n        this.state.start = new RoughDate(state);\n        this.state.end = this.state.start;\n      }\n      else {\n        let start = null;\n\n        if (state.start){\n          start = new RoughDate(state.start);\n\n          if (start.isNull()){\n            start = null;\n          }\n        }\n\n        let end = null;\n\n        if (state.end){\n          end = new RoughDate(state.end);\n\n          if (end.isNull()){\n            end = null;\n          }\n        }\n\n        if (start && end){\n          if (RoughDate.gt(start, end)){\n            let tmp = start;\n            start = end;\n            end = tmp;\n          }\n\n          if (RoughDate.gt(start, end)){\n            let tmp = RoughDate.min(start, end);\n            end = RoughDate.max(start, end);\n            start = tmp;\n          }\n        }\n\n        this.state.start = start;\n        this.state.end = end;\n      }\n    }\n    else{\n      this.state.start = null;\n      this.state.end = null;\n    }\n  }\n\n  toDry(){\n    return this.state;\n  }\n}\n\nDateRange.unDry = function(value){\n  return new DateRange(value);\n}\n\nDry.registerClass(\"DateRange\", DateRange);\n\nexport default DateRange;\n","\nimport React from 'react';\n\nimport DateRangeButton from './DateRangeButton';\nimport DateRange from '../model/DateRange';\nimport DefaultButton from './DefaultButton';\n\nimport {ResponsiveList, ResponsiveListItem} from './ResponsiveList';\n\nimport styles from './SourceList.module.css';\n\nfunction _null_function(item){}\n\nfunction SourceList(props){\n  let social = props.social;\n  let sources = props.sources;\n  let emitSelected = props.emitSelected;\n  let title = props.title;\n\n  if (!social || !sources){\n    return null;\n  }\n\n  if (!emitSelected){\n    emitSelected = _null_function;\n  }\n\n  let output = Object.keys(sources).map((key, index)=>{\n    let source = social.get(key);\n    let daterange = DateRange.mergeAll(sources[key]);\n\n    if (daterange){\n      return <ResponsiveListItem key={source.getName()}>\n               <DefaultButton onClick={()=>{emitSelected(source)}}\n                              style={{width:\"50%\"}}>\n                 {source.getName()}\n               </DefaultButton>\n               <DateRangeButton style={{width:\"40%\"}}\n                                value={daterange}\n                                emitSelected={emitSelected}/>\n             </ResponsiveListItem>;\n    }\n    else{\n      return <ResponsiveListItem key={source.getName()}>\n               <DefaultButton onClick={()=>{emitSelected(source)}}>\n                 {source.getName()}\n               </DefaultButton>\n             </ResponsiveListItem>;\n    }\n  });\n\n  if (!output || output.length === 0){\n    return null;\n  }\n\n  if (title){\n    return <div className={styles.container}>\n             <div className={styles.title}>{title}</div>\n             <div className={styles.body}>\n               <ResponsiveList>\n                 {output}\n               </ResponsiveList>\n             </div>\n           </div>;\n  }\n  else{\n    return <ResponsiveList>\n              {output}\n           </ResponsiveList>;\n  }\n}\n\nexport default SourceList;\n","\nimport React from 'react';\n\nimport DefaultButton from './DefaultButton';\nimport CheckBox from './CheckBox';\n\nimport styles from './WeightsList.module.css';\n\nfunction null_function(item){}\n\nfunction WeightsList({weights, title=null, emitSelected=null_function,\n                      emitToggleFilter=null_function, social=null,\n                      type=null}) {\n\n  if (!weights) {\n    return null;\n  }\n\n  let projects = [];\n\n  Object.keys(weights).forEach((key, _i)=>{\n    let project = social.get(key);\n    let is_filtered = social.isFiltered(project);\n\n    let weight = weights[key];\n\n    projects.push(\n      <div className={styles.project} key={project.getName()}>\n        <div className={styles.projectHeader}>\n          <DefaultButton style={{width:\"75%\"}}\n                         onClick={()=>{emitSelected(project);}}>\n            {project.getName()}\n          </DefaultButton>\n          <CheckBox onChange={(event)=>{emitToggleFilter(project);}}\n                    style={{width:\"20%\"}}\n                    checked={is_filtered}/>\n        </div>\n        <div className={styles.projectBody}>\n         Weight = {weight}, Type = {type}\n        </div>\n      </div>\n    );\n  });\n\n  if (title){\n    return (<div>\n              <div className={styles.title}>{title}</div>\n              {projects}\n            </div>);\n  }\n  else {\n    return projects;\n  }\n}\n\nexport default WeightsList;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nfunction _filterProject(values, project){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    if (!(key in project)){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nclass Person {\n  constructor(props){\n    this.state = {\n      name: null,\n      titles: [],\n      firstnames: [],\n      surnames: [],\n      suffixes: [],\n      id: null,\n      positions: {},\n      affiliations: {},\n      projects: {},\n      sources: {},\n      alive: null,\n      gender: null,\n      notes: [],\n      orig_name: null,\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPersonObject = true;\n  }\n\n  static clone(item){\n    let c = new Person();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode(){\n    return true;\n  }\n\n  inGroup(group){\n    if (group.getID){\n      let ids = {}\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key, _i)=>{\n      for (let index in this.state.affiliations[key]){\n        if (this.state.affiliations[key][index] in group){\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    Object.keys(this.state.positions).forEach((key, index)=>{\n      for (let index in this.state.positions[key]){\n        if (this.state.positions[key][index] in group){\n          seen[this.state.positions[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  filterSource(source){\n    if (source.getID){\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key, index)=>{\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id, index)=>{\n        if (s.includes(source_id)){\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources){\n      return null;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterProject(project){\n    if (project.getID)\n    {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key, index)=>{\n      if (key in project){\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects){\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n    let positions = _filterProject(this.state.positions, project);\n\n    if (affiliations !== this.state.affiliations ||\n      positions !== this.state.positions){\n      let person = new Person();\n      person.state = {...this.state};\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterWindow(window){\n    if (!window){\n      return this;\n    }\n    else if (!(window._isADateRangeObject)){\n      window = new DateRange(window);\n    }\n\n    window = window.intersect(this.getAlive());\n\n    if (!window){\n      return null;\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n    let positions = _filterWindow(this.state.positions, window);\n\n    if (affiliations !== this.state.affiliations ||\n        positions !== this.state.positions){\n      let person = new Person();\n      person.state = {...this.state};\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    }\n    else{\n      return this;\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.titles = setState(state.titles, []);\n      this.state.firstnames = setState(state.firstnames, []);\n      this.state.surnames = setState(state.surnames, []);\n      this.state.suffixes = setState(state.suffixes, []);\n      this.state.id = setState(state.id);\n      this.state.positions = setState(state.positions, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.projects = setState(state.projects, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.alive = setState(state.alive);\n      this.state.gender = setState(state.gender);\n      this.state.orig_name = setState(state.orig_name);\n      this.state.notes = setState(state.notes, [])\n\n      if (!this.state.orig_name || this.state.orig_name === \"None\"){\n         throw new ValueError(`No name for ${this}`);\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Person(${this.getName()})`;\n  }\n\n  getAlive(){\n    return this.state.alive;\n  }\n\n  getFirstName(){\n    if (this.state.firstnames){\n      return this.state.firstnames.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getTitle(){\n    if (this.state.titles){\n      return this.state.titles.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getSurname(){\n    if (this.state.surnames){\n      return this.state.surnames.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getSuffix(){\n    if (this.state.suffixes){\n      return this.state.suffixes.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getName(){\n    var parts = [];\n\n    let part = this.getTitle();\n    if (part){\n      parts.push(part);\n    }\n\n    part = this.getFirstName();\n    if (part){\n      parts.push(part);\n    }\n\n    part = this.getSurname();\n    if (part){\n      parts.push(part);\n    }\n\n    part = this.getSuffix();\n    if (part){\n      parts.push(part);\n    }\n\n    if (parts.length > 0){\n       return parts.join(\" \");\n    }\n    else{\n      return \"null\";\n    }\n  }\n\n  getAffiliations(){\n    return this.state.affiliations;\n  }\n\n  getSources(){\n    return this.state.sources;\n  }\n\n  getPositions(){\n    return this.state.positions;\n  }\n\n  getScores(){\n    return this.state.scores;\n  }\n\n  getBorn(){\n    if (this.state.alive){\n      return this.state.alive.getStart();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getDied(){\n    if (this.state.alive){\n      return this.state.alive.getEnd();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getTimeLine(){\n    const alive = this.getAlive();\n\n    if (!alive){\n      return null;\n    }\n    else{\n      return {start: alive.getStart(),\n              end: alive.getEnd(),\n              id: this.getID(),\n              content: this.getName(),\n             };\n    }\n  }\n\n  getNode(is_anchor=false){\n    let node = {id: this.getID(),\n                label: this.getName(),\n                title: this.getName(),\n                fixed: false,\n                shape: \"circle\",\n               };\n\n    let weight = 10.0;\n\n    if (weight < 5.0){\n      weight = 5.0;\n    }\n    else if (weight > 20.0){\n      weight = 20.0;\n    }\n\n    node[\"size\"] = weight;\n\n    let keys = Object.keys(this.state.projects);\n\n    if (keys.length > 0){\n      node[\"group\"] = keys.sort().join(\":\");\n    }\n    else{\n      node[\"group\"] = \"unknown\";\n    }\n\n    if (is_anchor){\n      node[\"shape\"] = \"rect\";\n      node[\"fixed\"] = true;\n      node[\"group\"] = \"anchor\";\n      node[\"size\"] = 20.0;\n    }\n\n    return node;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPerson.unDry = function(value){\n  return new Person(value);\n}\n\nDry.registerClass(\"Person\", Person);\n\nexport default Person;\n","\nimport Dry from 'json-dry';\nimport { v4 as uuidv4 } from 'uuid';\nimport lodash from 'lodash';\n\nimport Person from './Person';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_person_uid(){\n  let uid = uuidv4();\n  return \"P\" + uid.substring(uid.length-7);\n}\n\nclass People {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPeopleObject = true;\n    this.load(props);\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new People();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Person) || item._isAPersonObject;\n  }\n\n  add(person){\n    if (!this.canAdd(person)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(person.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(person);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    person = Person.clone(person);\n\n    let id = person.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Person ID ${person}`);\n      }\n\n      person._updateHooks(this._getHook);\n      this.state.registry[id] = person;\n    }\n    else{\n      let uid = _generate_person_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_person_uid();\n      }\n\n      person.state.id = uid;\n    }\n\n    person._updateHooks(this._getHook);\n    this._names[person.getName()] = person.getID();\n    this.state.registry[person.getID()] = person;\n\n    return person;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw new MissingError(`No Person with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Person || name._isAPersonObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No Person matches '${name}. Available People ` +\n                           `are '${keys}'`);\n  }\n\n  filter(funcs = []){\n    if (funcs.length === 0){\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let person = this.state.registry[key];\n\n      if (person){\n        for (let i=0; i<funcs.length; ++i){\n          person = funcs[i](person);\n          if (!person){\n            break;\n          }\n        }\n\n        if (person){\n          registry[key] = person;\n          names[person.getName()] = key;\n        }\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  getTimeLine(){\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let person = this.state.registry[key];\n      if (person){\n        let timeline = person.getTimeLine();\n        if (timeline){\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({anchor=null} = {}){\n    let nodes = [];\n\n    if (anchor.getID){\n      anchor = anchor.getID();\n    }\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let person = this.state.registry[key];\n\n      if (person){\n        let node = null;\n        if (key === anchor){\n          node = person.getNode({is_anchor:true});\n        }\n        else{\n          node = person.getNode();\n        }\n\n        if (node){\n          nodes.push(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id){\n    let person = this.state.registry[id];\n\n    if (!person){\n      throw new MissingError(`No Person with ID ${id}`);\n    }\n\n    return person;\n  }\n\n  load(data){\n    if (data){\n      if (data.array){ data = data.array; }\n      data.forEach(element => {\n        let person = Person.load(element);\n        this.add(person);\n      });\n    }\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPeople.unDry = function(value){\n  let people = new People();\n  people.state = value;\n  people._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    people._names[v.getName()] = key;\n  });\n\n  return people;\n}\n\nDry.registerClass(\"People\", People);\n\nexport default People;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nfunction _filterProject(values, project){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    if (!(key in project)){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nclass Business {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      projects: {},\n      sources: {},\n      scores: {},\n      affiliations: {},\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isABusinessObject = true;\n  }\n\n  static clone(item){\n    let c = new Business();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode(){\n    return true;\n  }\n\n  inGroup(group){\n    if (group.getID){\n      let ids = {}\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key, _i)=>{\n      for (let index in this.state.affiliations[key]){\n        if (this.state.affiliations[key][index] in group){\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n\n  filterSource(source){\n    if (source.getID){\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key, index)=>{\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id, index)=>{\n        if (s.includes(source_id)){\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources){\n      return null;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterProject(project){\n    if (project.getID)\n    {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key, index)=>{\n      if (key in project){\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects){\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n\n    if (affiliations !== this.state.affiliations){\n      let business = new Business();\n      business.state = {...this.state};\n      business.state.affiliations = affiliations;\n      business._getHook = this._getHook;\n      return business;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterWindow(window){\n    if (!window){\n      return this;\n    }\n    else if (!(window._isADateRangeObject)){\n      window = new DateRange(window);\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n\n    if (affiliations !== this.state.affiliations){\n      let business = new Business();\n      business.state = {...this.state};\n      business.state.affiliations = affiliations;\n      business._getHook = this._getHook;\n      return business;\n    }\n    else{\n      return this;\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.projects = setState(state.projects, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.scores = setState(state.scores, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.notes = setState(state.notes, []);\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Business without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Business(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  getAffiliations(){\n    return this.state.affiliations;\n  }\n\n  getSources(){\n    return this.state.sources;\n  }\n\n  getScores(){\n    return this.state.scores;\n  }\n\n  getNode(is_anchor=false){\n    let node = {id: this.getID(),\n      label: this.getName(),\n      title: this.getName(),\n      shape: \"circle\",\n     };\n\n    let weight = 10.0;\n\n    if (weight < 5.0){\n      weight = 5.0;\n    }\n    else if (weight > 20.0){\n      weight = 20.0;\n    }\n\n    node[\"size\"] = weight;\n\n    let keys = Object.keys(this.state.projects);\n\n    if (keys.length > 0){\n      node[\"group\"] = keys.sort().join(\":\");\n    }\n    else{\n      node[\"group\"] = \"unknown\";\n    }\n\n    if (is_anchor){\n      node[\"shape\"] = \"rect\";\n      node[\"physics\"] = false;\n      node[\"group\"] = \"anchor\";\n      node[\"size\"] = 20.0;\n    }\n\n    return node;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nBusiness.unDry = function(value){\n  return new Business(value);\n}\n\nDry.registerClass(\"Business\", Business);\n\nexport default Business;\n","\nimport Dry from 'json-dry';\nimport { v4 as uuidv4 } from 'uuid';\nimport lodash from 'lodash';\n\nimport Business from './Business';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_business_uid(){\n  let uid = uuidv4();\n  return \"B\" + uid.substring(uid.length-7);\n}\n\nclass Businesses {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isABusinessesObject = true;\n    this.load(props);\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Businesses();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Business) || item._isABusinessObject;\n  }\n\n  add(business){\n    if (!this.canAdd(business)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(business.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(business);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    business = Business.clone(business);\n\n    let id = business.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Business ID ${business}`);\n      }\n\n      business._updateHooks(this._getHook);\n      this.state.registry[id] = business;\n    }\n    else{\n      let uid = _generate_business_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_business_uid();\n      }\n\n      business.state.id = uid;\n    }\n\n    business._updateHooks(this._getHook);\n    this._names[business.getName()] = business.getID();\n    this.state.registry[business.getID()] = business;\n\n    return business;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No Business with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Business || name._isABusinessObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No Business matches '${name}. Available Businesses ` +\n                       `are '${keys}'`);\n  }\n\n  filter(funcs = []){\n    if (funcs.length === 0){\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let business = this.state.registry[key];\n\n      if (business){\n        for (let i=0; i<funcs.length; ++i){\n          business = funcs[i](business);\n          if (!business){\n            break;\n          }\n        }\n\n        if (business){\n          registry[key] = business;\n          names[business.getName()] = key;\n        }\n      }\n    });\n\n    let businesses = new Businesses();\n    businesses.state.registry = registry;\n    businesses._names = names;\n    businesses._updateHooks(this._getHook);\n\n    return businesses;\n  }\n\n  getTimeLine(){\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let business = this.state.registry[key];\n      if (business){\n        let timeline = business.getTimeLine();\n        if (timeline){\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({anchor=null} = {}){\n    let nodes = [];\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let business = this.state.registry[key];\n\n      if (business){\n        let node = null;\n        if (key === anchor){\n          node = business.getNode({is_anchor:true});\n        }\n        else{\n          node = business.getNode();\n        }\n\n        if (node){\n          nodes.push(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id){\n    let business = this.state.registry[id];\n\n    if (!business){\n      throw new MissingError(`No Business with ID ${id}`);\n    }\n\n    return business;\n  }\n\n  load(data){\n    if (data){\n      if (data.array){ data = data.array; }\n      data.forEach(element => {\n        let business = Business.load(element);\n        this.add(business);\n      });\n    }\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nBusinesses.unDry = function(value){\n  let businesses = new Businesses();\n  businesses.state = value;\n  businesses._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    businesses._names[v.getName()] = key;\n  });\n\n  return businesses;\n}\n\nDry.registerClass(\"Businesses\", Businesses);\n\nexport default Businesses;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _mergeSources(state, other, key){\n  state = state[key];\n  other = other[key]\n\n  Object.keys(other).forEach((key, index) => {\n    if (!(key in state)){\n      state[key] = other[key];\n    }\n    else{\n      for (let item in other[key]){\n        if (!(item in state[key])){\n          state[key].push(item);\n        }\n      }\n    }\n  });\n}\n\nclass Connection {\n  constructor(props){\n    this.state = {\n      id: null,\n      n0: null,\n      n1: null,\n      shared: null,\n      type: null,\n      duration: null,\n      affiliations: null,\n      correspondances: null,\n      projects: null,\n      notes: null,\n    };\n\n    this.setState(props);\n    this._getHook = null;\n    this._isAConnectionObject = true;\n  }\n\n  static clone(item){\n    let c = new Connection();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  getName(){\n    let n0 = this.state.n0;\n    let n1 = this.state.n1;\n\n    if (n0 <= n1){\n      return `${n0}<=>${n1}`;\n    }\n    else{\n      return `${n1}<=>${n0}`;\n    }\n  }\n\n  getNode0(){\n    if (this._getHook){\n      return this._getHook(this.state.n0);\n    }\n    else {\n      return this.state.n0;\n    }\n  }\n\n  getNode1(){\n    if (this._getHook){\n      return this._getHook(this.state.n1);\n    }\n    else {\n      return this.state.n1;\n    }\n  }\n\n  getNode0ID(){\n    return this.state.n0;\n  }\n\n  getNode1ID(){\n    return this.state.n1;\n  }\n\n  areNodesVisible(n){\n    return n[this.state.n0] && n[this.state.n1];\n  }\n\n  getNode0Name(){\n    let node0 = this.getNode0();\n\n    try{\n      return node0.getName();\n    }\n    catch(error){\n      return node0;\n    }\n  }\n\n  getNode1Name(){\n    let node1 = this.getNode1();\n\n    try{\n      return node1.getName();\n    }\n    catch(error){\n      return node1;\n    }\n  }\n\n  getDuration(){\n    return this.state.duration;\n  }\n\n  getAffiliationSources(){\n    return this.state.affiliations;\n  }\n\n  getCorrespondanceSources(){\n    return this.state.correspondances;\n  }\n\n  filterSource(source){\n    if (source.getID){\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(source).forEach((key, index)=>{\n      if (this.state.affiliations[key] || this.state.correspondances[key]){\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nsources){\n      return null;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterProject(project){\n    if (project.getID){\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key, index)=>{\n      if (key in project){\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects){\n      return null;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterWindow(window){\n    if (!window){\n      return this;\n    }\n    else if (!(window._isADateRangeObject)){\n      window = new DateRange(window);\n    }\n\n    if (!window){\n      return this;\n    }\n\n    let duration = this.getDuration();\n\n    if (!duration){\n      return this;\n    }\n\n    let intersect = window.intersect(duration);\n\n    if (!intersect){\n      return null;\n    }\n    else{\n      return this;\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.id = setState(state.id);\n      this.state.n0 = setState(state.n0);\n      this.state.n1 = setState(state.n1);\n      this.state.shared = setState(state.shared, []);\n      this.state.type = setState(state.type);\n      this.state.duration = setState(state.duration);\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.correspondances = setState(state.correspondances, {});\n      this.state.notes = setState(state.notes, []);\n      this.state.weights = setState(state.weights, {});\n      this.state.projects = setState(state.projects, {});\n\n      if (!this.state.n0 || !this.state.n1){\n        throw new ValueError(`Invalid connection ${this}`);\n      }\n    }\n  }\n\n  merge(other){\n    if (!this._getHook){\n      if (other._getHook){\n        return other.merge(this);\n      }\n    }\n\n    let state = lodash.cloneDeep(this.state);\n\n    Object.keys(other.state.shared).forEach((key, index) => {\n      if (!(key in state.shared)){\n        state.shared[key] = other.state.shared[key];\n      }\n    });\n\n    Object.keys(other.state.notes).forEach((key, index) => {\n      if (!(key in state.notes)){\n        state.notes[key] = other.state.notes[key];\n      }\n    });\n\n    _mergeSources(state, other.state, \"affiliations\");\n    _mergeSources(state, other.state, \"correspondances\");\n\n    state.duration = state.duration.merge(other.state.duration);\n\n    let c = new Connection();\n    c.state = state;\n    c._getHook = this._getHook;\n\n    return c;\n  }\n\n  toString(){\n    return `Connection(${this.getNode0Name()}<=>${this.getNode1Name()})`;\n  }\n\n  getColorFromType(){\n    switch(this.state.type){\n      case \"direct\":\n        return \"rgb(180,150,150)\";\n      case \"indirect\":\n        return \"rgb(180,180,180)\";\n      default:\n        console.log(`Unknown type? ${this.state.type}`);\n        return \"red\";\n    }\n  }\n\n  getType(){\n    return this.state.type;\n  }\n\n  getWeights(){\n    return this.state.weights;\n  }\n\n  getWeight(){\n    let weight = 1.0;\n\n    Object.keys(this.state.weights).forEach((key, index)=>{\n      weight += this.state.weights[key];\n    });\n\n    return weight;\n  }\n\n  getWeightFromType(){\n    let weight = this.getWeight();\n\n    switch(this.state.type){\n      case \"direct\":\n        return 1.0 * weight;\n      case \"indirect\":\n        return 0.5 * weight;\n      default:\n        console.log(`Unknown type? ${this.state.type}`);\n        return 0.5 * weight;\n    }\n  }\n\n  toEdge(){\n    let color = this.getColorFromType();\n    let weight = this.getWeightFromType();\n\n    let edge = {\n      id:this.getID(),\n      source:this.state.n0,\n      target:this.state.n1,\n      value:weight,\n      color:color,\n      scaling:{min:0.5, max:2},\n      arrows:{to:false, middle:false, from:false},\n    };\n\n    return edge;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nConnection.unDry = function(value){\n  return new Connection(value);\n}\n\nConnection.load = function(data, people=null){\n  return new Connection({name: data.name});\n}\n\nDry.registerClass(\"Connection\", Connection);\n\nexport default Connection;\n","\nimport Dry from 'json-dry';\nimport { v4 as uuidv4 } from 'uuid';\nimport lodash from 'lodash';\n\nimport Connection from './Connection';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_connection_uid(){\n  let uid = uuidv4();\n  return \"C\" + uid.substring(uid.length-7);\n}\n\nclass Connections {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAConnectionsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Connections();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Connection) || item._isAConnectionObject;\n  }\n\n  add(connection){\n    if (!this.canAdd(connection)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(connection.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(connection);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    connection = Connection.clone(connection);\n\n    let id = connection.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Connection ID ${connection}`);\n      }\n    }\n    else{\n      let uid = _generate_connection_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_connection_uid();\n      }\n\n      connection.state.id = uid;\n    }\n\n    connection._updateHooks(this._getHook);\n    this._names[connection.getName()] = connection.getID();\n    this.state.registry[connection.getID()] = connection;\n\n    return connection;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No connection with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Connection || name._isAConnectionObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No connection matches '${name}. Available Connections ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let connection = this.state.registry[id];\n\n    if (!connection){\n      throw new MissingError(`No Connection with ID ${id}`);\n    }\n\n    return connection;\n  }\n\n  filter(funcs = []){\n    if (funcs.length === 0){\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let connection = this.state.registry[key];\n\n      if (connection){\n        for (let i=0; i<funcs.length; ++i){\n          connection = funcs[i](connection);\n          if (!connection){\n            break;\n          }\n        }\n\n        if (connection){\n          registry[key] = connection;\n          names[connection.getName()] = key;\n        }\n      }\n    });\n\n    let connections = new Connections();\n\n    connections.state.registry = registry;\n    connections._names = names;\n    connections._updateHooks(this._getHook);\n\n    return connections;\n  }\n\n  getConnectionsTo(item){\n    if (item.getID){\n      let id = item.getID();\n      item = {};\n      item[id] = 1;\n    }\n\n    let nnodes = Object.keys(item).length;\n\n    let seen = {};\n\n    function _add(id){\n      if (!(id in seen)){\n        seen[id] = 1;\n      }\n      else{\n        seen[id] += 1;\n      }\n    }\n\n    for (let key in this.state.registry){\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() in item){\n        _add(connection.getNode1ID());\n      }\n      else if (connection.getNode1ID() in item){\n        _add(connection.getNode0ID());\n      }\n    }\n\n    let connections = [];\n\n    if (this._getHook){\n      Object.keys(seen).forEach((key, index)=>{\n        try{\n          if (seen[key] === nnodes){\n            connections.push(this._getHook(key));\n          }\n        }\n        catch(error){}\n      });\n    }\n    else{\n      connections = Object.keys(seen);\n    }\n\n    return connections;\n  }\n\n  getEdges(ids=null){\n    let edges = [];\n\n    if (ids){\n      Object.keys(this.state.registry).forEach((key, index)=>{\n        let connection = this.state.registry[key];\n        if (connection.areNodesVisible(ids)){\n          edges.push(connection.toEdge());\n        }\n      });\n    }\n    else{\n      Object.keys(this.state.registry).forEach((key, index)=>{\n        let connection = this.state.registry[key];\n        edges.push(connection.toEdge());\n      });\n    }\n\n    return edges;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nConnections.unDry = function(value){\n  let connections = new Connections();\n  connections.state = value;\n  connections._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    connections._names[v.getName()] = key;\n  });\n\n  return connections;\n}\n\nDry.registerClass(\"Connections\", Connections);\n\nexport default Connections;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Position {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPositionObject = true;\n  }\n\n  static clone(item){\n    let c = new Position();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  static makeCanonical(name){\n    if (!name){\n      return null;\n    }\n    else{\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Position.makeCanonical(this.state.name);\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Position without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Position(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPosition.unDry = function(value){\n  return new Position(value);\n}\n\nDry.registerClass(\"Position\", Position);\n\nexport default Position;\n","\nimport Dry from 'json-dry';\nimport { v4 as uuidv4 } from 'uuid';\nimport lodash from 'lodash';\n\nimport Position from './Position';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_position_uid(){\n  let uid = uuidv4();\n  return \"Q\" + uid.substring(uid.length-7);\n}\n\nclass Positions {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPositionsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Positions();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Position) || item._isAPositionObject;\n  }\n\n  add(position){\n    if (!this.canAdd(position)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(position.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(position);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    position = Position.clone(position);\n\n    let id = position.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Position ID ${position}`);\n      }\n\n      position._updateHooks(this._getHook);\n      this.state.registry[id] = position;\n    }\n    else{\n      let uid = _generate_position_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_position_uid();\n      }\n\n      position.state.id = uid;\n    }\n\n    position._updateHooks(this._getHook);\n    this._names[position.getName()] = position.getID();\n    this.state.registry[position.getID()] = position;\n\n    return position;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No position with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Position || name._isApositionObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No position matches '${name}. Available Positions ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let position = this.state.registry[id];\n\n    if (!position){\n      throw new MissingError(`No Position with ID ${id}`);\n    }\n\n    return position;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPositions.unDry = function(value){\n  let positions = new Positions();\n  positions.state = value;\n  positions._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    positions._names[v.getName()] = key;\n  });\n\n  return positions;\n}\n\nDry.registerClass(\"Positions\", Positions);\n\nexport default Positions;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Affiliation {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAAffiliationObject = true;\n  }\n\n  static clone(item){\n    let c = new Affiliation();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  static makeCanonical(name){\n    if (!name){\n      return null;\n    }\n    else{\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Affiliation.makeCanonical(this.state.name);\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Affiliation without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Affiliation(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nAffiliation.unDry = function(value){\n  return new Affiliation(value);\n}\n\nDry.registerClass(\"Affiliation\", Affiliation);\n\nexport default Affiliation;\n","\nimport Dry from 'json-dry';\nimport { v4 as uuidv4 } from 'uuid';\nimport lodash from 'lodash';\n\nimport Affiliation from './Affiliation';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_affiliation_uid(){\n  let uid = uuidv4();\n  return \"A\" + uid.substring(uid.length-7);\n}\n\nclass Affiliations {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAAffiliationsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Affiliations();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Affiliation) || item._isAAffiliationObject;\n  }\n\n  add(affiliation){\n    if (!this.canAdd(affiliation)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(affiliation.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(affiliation);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    affiliation = Affiliation.clone(affiliation);\n\n    let id = affiliation.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Affiliation ID ${affiliation}`);\n      }\n\n      affiliation._updateHooks(this._getHook);\n      this.state.registry[id] = affiliation;\n    }\n    else{\n      let uid = _generate_affiliation_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_affiliation_uid();\n      }\n\n      affiliation.state.id = uid;\n    }\n\n    affiliation._updateHooks(this._getHook);\n    this._names[affiliation.getName()] = affiliation.getID();\n    this.state.registry[affiliation.getID()] = affiliation;\n\n    return affiliation;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No affiliation with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Affiliation || name._isAAffiliationObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No affiliation matches '${name}. Available Affiliations ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let affiliation = this.state.registry[id];\n\n    if (!affiliation){\n      throw new MissingError(`No Affiliation with ID ${id}`);\n    }\n\n    return affiliation;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nAffiliations.unDry = function(value){\n  let affiliations = new Affiliations();\n  affiliations.state = value;\n  affiliations._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    affiliations._names[v.getName()] = key;\n  });\n\n  return affiliations;\n}\n\nDry.registerClass(\"Affiliations\", Affiliations);\n\nexport default Affiliations;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport RoughDate from './RoughDate';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Source {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      date: null,\n      description: null,\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isASourceObject = true;\n  }\n\n  static clone(item){\n    let c = new Source();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  getDate(){\n    return this.state.date;\n  }\n\n  updateDate(date, force=false){\n    if (!(date instanceof RoughDate || date._isARoughDateObject)){\n      date = new RoughDate(date);\n    }\n\n    if (date.isNull()){\n      return false;\n    }\n\n    if (this.getDate().isNull()){\n      this.state.date = date;\n      return true;\n    }\n\n    if (RoughDate.ne(this.getDate(), date)){\n      if (force){\n        this.state.date = this.getDate().merge(date);\n        return true;\n      }\n      else{\n        console.log(`Disagreement of date for ${this}: ` +\n                    `${this.getDate()} vs ${date}`);\n      }\n    }\n\n    return false;\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.description = setState(state.description);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n      this.state.date = setState(state.date, new RoughDate());\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Source without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Source(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  getDescription(){\n    return this.state.description;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nSource.unDry = function(value){\n  return new Source(value);\n}\n\nDry.registerClass(\"Source\", Source);\n\nexport default Source;\n","\nimport Dry from 'json-dry';\nimport { v4 as uuidv4 } from 'uuid';\nimport lodash from 'lodash';\n\nimport Source from './Source';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_source_uid(){\n  let uid = uuidv4();\n  return \"S\" + uid.substring(uid.length-7);\n}\n\nclass Sources {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isASourcesObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Sources();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Source) || item._isASourceObject;\n  }\n\n  add(source){\n    if (!this.canAdd(source)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(source.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(source);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    source = Source.clone(source);\n\n    let id = source.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Source ID ${source}`);\n      }\n\n      source._updateHooks(this._getHook);\n      this.state.registry[id] = source;\n    }\n    else{\n      let uid = _generate_source_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_source_uid();\n      }\n\n      source.state.id = uid;\n    }\n\n    source._updateHooks(this._getHook);\n    this._names[source.getName()] = source.getID();\n    this.state.registry[source.getID()] = source;\n\n    return source;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No source with name ${name}`);\n    }\n  }\n\n  search(name){\n    if (name instanceof Source || name._isASourceObject){\n      name = name.getName();\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this.state.registry).forEach((key, index) => {\n      let item = this.state.registry[key];\n\n      let description = item.getDescription();\n\n      if (!description){\n        description = \"\";\n      }\n\n      try{\n        if (item.getName().toLowerCase().indexOf(name) !== -1){\n          results.push(item);\n        }\n        else if (description.toLowerCase().indexOf(name) !== -1){\n          results.push(item);\n        }\n      }\n      catch(error){\n        console.log(error);\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n    else{\n      return null;\n    }\n  }\n\n  find(name){\n    if (name instanceof Source || name._isASourceObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No source matches '${name}. Available sources ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let source = this.state.registry[id];\n\n    if (!source){\n      throw new MissingError(`No Source with ID ${id}`);\n    }\n\n    return source;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nSources.unDry = function(value){\n  let sources = new Sources();\n  sources.state = value;\n  sources._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    sources._names[v.getName()] = key;\n  });\n\n  return sources;\n}\n\nDry.registerClass(\"Sources\", Sources);\n\nexport default Sources;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Note {\n  constructor(props){\n    this.state = {\n      text: null,\n      id: null,\n      sources: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isANoteObject = true;\n  }\n\n  static clone(item){\n    let c = new Note();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  setState(state){\n    if (state){\n      this.state.text = setState(state.text);\n      this.state.id = setState(state.id);\n      this.state.sources = setState(state.sources, []);\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  toString(){\n    return `Note(${this.getText()})`;\n  }\n\n  getText(){\n    return this.state.text;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nNote.unDry = function(value){\n  return new Note(value);\n}\n\nDry.registerClass(\"Note\", Note);\n\nexport default Note;\n","\nimport Dry from 'json-dry';\nimport { v4 as uuidv4 } from 'uuid';\nimport lodash from 'lodash';\n\nimport Note from './Note';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_note_uid(){\n  let uid = uuidv4();\n  return \"N\" + uid.substring(uid.length-7);\n}\n\nclass Notes {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isANotesObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Notes();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Note) || item._isANoteObject;\n  }\n\n  add(note){\n    if (!this.canAdd(note)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(note.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(note);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    note = note.clone(Note);\n\n    let id = note.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Note ID ${note}`);\n      }\n\n      note._updateHooks(this._getHook);\n      this.state.registry[id] = Note;\n    }\n    else{\n      let uid = _generate_note_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_note_uid();\n      }\n\n      note.state.id = uid;\n    }\n\n    note._updateHooks(this._getHook);\n    this._names[note.getName()] = note.getID();\n    this.state.registry[note.getID()] = note;\n\n    return note;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No Note with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Note || name._isANoteObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No Note matches '${name}. Available Notes ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let Note = this.state.registry[id];\n\n    if (!Note){\n      throw new MissingError(`No Note with ID ${id}`);\n    }\n\n    return Note;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nNotes.unDry = function(value){\n  let notes = new Notes();\n  notes.state = value;\n  notes._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    notes._names[v.getName()] = key;\n  });\n\n  return notes;\n}\n\nDry.registerClass(\"Notes\", Notes);\n\nexport default Notes;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Project {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      url: null,\n      duration: new DateRange(),\n      notes: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAProjectObject = true;\n  }\n\n  static clone(item){\n    let c = new Project();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, {});\n      this.state.url = setState(state.url, null);\n      this.state.duration = new DateRange({value:state.duration});\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have a Project without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Project(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  getURL(){\n      return this.state.url;\n  }\n\n  getDuration(){\n    return this.state.duration;\n  }\n\n  getTimeLine(){\n    const duration = this.getDuration();\n\n    if (duration && duration.hasBounds()){\n      return {start: duration.getEarliestStart().toDate(),\n              end: duration.getLatestEnd().toDate(),\n              id: this.getID(),\n              content: this.getName(),\n             };\n    }\n    else{\n      return null;\n    }\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nProject.unDry = function(value){\n  return new Project(value);\n}\n\nDry.registerClass(\"Project\", Project);\n\nexport default Project;\n","\nimport Dry from 'json-dry';\nimport { v4 as uuidv4 } from 'uuid';\nimport lodash from 'lodash';\n\nimport Project from './Project';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_project_uid(){\n  let uid = uuidv4();\n  return \"J\" + uid.substring(uid.length-7);\n}\n\nclass Projects {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAProjectsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Projects();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Project) || item._isAProjectObject;\n  }\n\n  add(project){\n    if (!this.canAdd(project)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(project.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(project);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    project = Project.clone(project);\n\n    let id = project.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Project ID ${project}`);\n      }\n\n      project._updateHooks(this._getHook);\n      this.state.registry[id] = project;\n    }\n    else{\n      let uid = _generate_project_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_project_uid();\n      }\n\n      project.state.id = uid;\n    }\n\n    project._updateHooks(this._getHook);\n    this._names[project.getName()] = project.getID();\n    this.state.registry[project.getID()] = project;\n\n    return project;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No project with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Project || name._isAProjectObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No project matches '${name}. Available projects ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let project = this.state.registry[id];\n\n    if (!project){\n      throw new MissingError(`No Project with ID ${id}`);\n    }\n\n    return project;\n  }\n\n  getTimeLine(){\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let project = this.state.registry[key];\n      if (project){\n        let timeline = project.getTimeLine();\n        if (timeline){\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nProjects.unDry = function(value){\n  let projects = new Projects();\n  projects.state = value;\n  projects._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    projects._names[v.getName()] = key;\n  });\n\n  return projects;\n}\n\nDry.registerClass(\"Projects\", Projects);\n\nexport default Projects;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\n\nclass Biographies{\n  constructor(){\n    this.state = {\n      bios: {}\n    };\n\n    this._getHook = null;\n    this._isABiographiesObject = true;\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  static clone(item){\n    let c = new Biographies();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  get(node){\n    if (!node){\n      return null;\n    }\n    else if (node.getID){\n      node = node.getID();\n    }\n\n    return this.state.bios[node];\n  }\n\n  getNode(id){\n    if (this._getHook){\n      return this._getHook(id);\n    }\n    else{\n      return id;\n    }\n  }\n\n  search(text){\n    if (!text){\n      return null;\n    }\n\n    text = text.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this.state.bios).forEach((key, index)=>{\n      if (this.state.bios[key].toLowerCase().indexOf(text) !== -1){\n        results.push(this.getNode(key));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n    else{\n      return null;\n    }\n  }\n\n  add(node, biography){\n    if (!node || !biography){\n      return null;\n    }\n    else if (node.getID){\n      node = node.getID();\n    }\n\n    let bio = this.state.bios[node];\n\n    if (bio){\n      console.log(`There is already a bio for ${this.getNode(node)}`);\n      biography = `${bio}\\n${biography}`;\n    }\n\n    this.state.bios[node] = biography;\n  }\n}\n\nBiographies.unDry = function(value){\n  let bios = new Biographies();\n  bios.state = value;\n  return bios;\n}\n\nDry.registerClass(\"Biographies\", Biographies);\n\nexport default Biographies;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\nimport People from './People';\nimport Businesses from './Businesses';\nimport Connections from './Connections';\nimport Positions from './Positions';\nimport Affiliations from './Affiliations';\nimport Sources from './Sources';\nimport Notes from './Notes';\nimport Projects from './Projects';\nimport Biographies from './Biographies';\nimport DateRange from './DateRange';\n\nimport { ValueError } from './Errors';\n\nconst fast_physics = {\n  enabled: true,\n  timestep: 0.5,\n};\n\nconst slow_physics = {...fast_physics};\nslow_physics.timestep = 0.1;\n\nfunction _push(values, list){\n  if (!list){\n    return;\n  }\n\n  if (values.length){\n    for (let i=0; i<values.length; ++i){\n      list.push(values[i]);\n    }\n  }\n  else{\n    list.push(values);\n  }\n}\n\nclass Social {\n  constructor(props) {\n    if (props){\n      this.state = props;\n    }\n    else{\n      this.state = {};\n    }\n\n    this.state.anchor = null;\n    this.state.filter = {};\n    this.state.cache = {graph:null,\n                        projectTimeLine:null,\n                        itemTimeLine:null,\n                        node_filters:null,\n                        edge_filters:null,\n                        people:null,\n                        businesses:null,\n                        connections:null};\n    this.state.window = new DateRange();\n    this.state.max_window = new DateRange();\n    this._rebuilding = 0;\n\n    this._isASocialObject = true;\n  }\n\n  static clone(item){\n    let c = new Social();\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks() {\n    let getHook = (id) => { return this.get(id); };\n\n    let state = { ...this.state };\n\n    if (!(this.state.people instanceof People)) {\n      state.people = new People();\n    }\n    else {\n      state.people = this.state.people;\n    }\n\n    if (!(this.state.businesses instanceof Businesses)) {\n      state.businesses = new Businesses();\n    }\n    else {\n      state.businesses = this.state.businesses;\n    }\n\n    if (!(this.state.connections instanceof Connections)) {\n      state.connections = new Connections();\n    } else {\n      state.connections = this.state.connections;\n    }\n\n    if (!(this.state.positions instanceof Positions)) {\n      state.positions = new Positions();\n    }\n    else {\n      state.positions = this.state.positions;\n    }\n\n    if (!(this.state.affiliations instanceof Affiliations)) {\n      state.affiliations = new Affiliations();\n    }\n    else {\n      state.affiliations = this.state.affiliations;\n    }\n\n    if (!(this.state.sources instanceof Sources)) {\n      state.sources = new Sources();\n    }\n    else {\n      state.sources = this.state.sources;\n    }\n\n    if (!(this.state.notes instanceof Notes)) {\n      state.notes = new Notes();\n    }\n    else {\n      state.notes = this.state.notes;\n    }\n\n    if (!(this.state.projects instanceof Projects)){\n      state.projects = new Projects();\n    }\n    else {\n      state.projects = this.state.projects;\n    }\n\n    if (!(this.state.biographies instanceof Biographies)){\n      state.biographies = new Biographies();\n    }\n    else{\n      state.biographies = this.state.biographies;\n    }\n\n    this.state = state;\n\n    for (let key in this.state) {\n      try{\n        this.state[key]._updateHooks(getHook);\n      }\n      catch(error){}\n    }\n  }\n\n  clearCache(){\n    this.state.cache = {graph:null,\n                        projectTimeLine:null,\n                        itemTimeLine:null,\n                        node_filters:null,\n                        edge_filters:null,\n                        people:null,\n                        businesses:null,\n                        connections:null};\n    this._rebuilding = 0;\n  }\n\n  getNodeFilters(){\n    if (this.state.cache.node_filters){\n      return this.state.cache.node_filters;\n    }\n\n    this._rebuilding += 1;\n    this.state.cache.node_filters = [];\n\n    // must do time first, as this can affect all of the other filters!\n    let window = this.getWindow();\n\n    if (window.hasStart() || window.hasEnd()){\n      this.state.cache.node_filters.push((item)=>{\n        try{\n          return item.filterWindow(window);\n        }\n        catch(error){\n          console.log(`ERROR ${error}: ${item}`);\n          return item;\n        }\n      });\n    }\n\n    const project_filter = this.state.filter.project;\n\n    if (project_filter){\n      this.state.cache.node_filters.push((item)=>{\n        return item.filterProject(project_filter);\n      });\n    }\n\n    const source_filter = this.state.filter.source;\n\n    if (source_filter){\n      this.state.cache.node_filters.push((item)=>{\n        return item.filterSource(source_filter);\n      });\n    }\n\n    const node_filter = this.state.filter.node;\n\n    if (node_filter) {\n      let connections = this.getConnectionsTo(node_filter);\n      let filter = {...node_filter};\n\n      for (let connection in connections) {\n        let node = connections[connection];\n        filter[node.getID()] = 1;\n      }\n\n      this.state.cache.node_filters.push((item)=>{\n        if (item.getID() in filter){\n          return item;\n        }\n        else{\n          return null;\n        }\n      });\n    }\n\n    const group_filter = this.state.filter.group;\n\n    if (group_filter){\n      this.state.cache.node_filters.push((item)=>{\n        try{\n          if (item.inGroup(group_filter)){\n            return item;\n          }\n          else{\n            return null;\n          }\n        }\n        catch(error){\n          console.log(`Filter error: ${error}`);\n          return item;\n        }\n      });\n    }\n\n    this._rebuilding -= 1;\n    return this.state.cache.node_filters;\n  }\n\n  getEdgeFilters(){\n    if (!this.state.cache.edge_filters){\n      this.state.cache.edge_filters = [];\n\n      // must do time first, as this can affect all of the other filters!\n      let window = this.getWindow();\n\n      if (window.hasStart() || window.hasEnd()){\n        this.state.cache.edge_filters.push((item)=>{\n          try{\n            return item.filterWindow(window);\n          }\n          catch(error){\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const project_filter = this.state.filter.project;\n\n      if (project_filter){\n        this.state.cache.edge_filters.push((item)=>{\n          try{\n            return item.filterProject(project_filter);\n          }\n          catch(error){\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const source_filter = this.state.filter.source;\n\n      if (source_filter){\n        this.state.cache.edge_filters.push((item)=>{\n          try{\n            return item.filterSource(source_filter);\n          }\n          catch(error){\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n    }\n\n    return this.state.cache.edge_filters;\n  }\n\n  getWindow(){\n    return this.state.window;\n  }\n\n  getMaxWindow(){\n    return this.state.max_window;\n  }\n\n  _fitWindow(window){\n    let new_window = this.state.max_window.intersect(window);\n\n    let delta = window.getDelta();\n\n    if (new_window && (new_window.getDelta() === delta)){\n      return window;\n    }\n\n    if (delta > this.state.max_window.getDelta()){\n      return DateRange.clone(this.state.max_window);\n    }\n\n    if (window.getStartDate() < this.state.max_window.getStartDate()){\n      return new DateRange({start:this.state.max_window.getStartDate(),\n                            end:this.state.max_window.getStartDate()+delta});\n    }\n    else{\n      return new DateRange({start:this.state.max_window.getEndDate()-delta,\n                            end:this.state.max_window.getEndDate()});\n    }\n  }\n\n  setMaxWindow(window){\n    if (!window._isADateRangeObject){\n      window = new DateRange(window);\n    }\n\n    if (window === this.state.max_window){\n      return;\n    }\n\n    this.state.max_window = window;\n\n    if (this.state.window && this.state.window.hasBounds()){\n      let fitted = this._fitWindow(this.state.window);\n\n      if (fitted !== this.state.window){\n        this.setWindow(fitted);\n      }\n    }\n    else{\n      this.state.window = this.state.max_window;\n    }\n  }\n\n  setWindow(window){\n    if (!window._isADateRangeObject){\n      window = new DateRange(window);\n    }\n\n    if (DateRange.eq(window, this.state.window)){\n      return false;\n    }\n\n    let fitted = this._fitWindow(window);\n\n    if (DateRange.eq(fitted, this.state.window)){\n      return false;\n    }\n\n    this.state.window = fitted;\n    this.clearCache();\n    return true;\n  }\n\n  getPeople(filtered=true) {\n    if (this._rebuilding){\n      filtered = false;\n    }\n\n    if (filtered){\n      if (!this.state.cache.people){\n        console.log(\"REBUILD PEOPLE\");\n        this._rebuilding += 1;\n        this.state.cache.people =\n              this.state.people.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.people;\n    }\n    else{\n      return this.state.people;\n    }\n  }\n\n  getBusinesses(filtered=true) {\n    if (this._rebuilding){\n      filtered = false;\n    }\n\n    if (filtered){\n      if (!this.state.cache.businesses){\n        console.log(\"REBUILD BUSINESSES\");\n        this._rebuilding += 1;\n        this.state.cache.businesses =\n              this.state.businesses.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.businesses;\n    }\n    else{\n      return this.state.businesses;\n    }\n  }\n\n  getConnections(filtered=true) {\n    if (this._rebuilding){\n      filtered = false;\n    }\n\n    if (filtered){\n      if (!this.state.cache.connections){\n        console.log(\"REBUILD CONNECTIONS\");\n        this._rebuilding += 1;\n        this.state.cache.connections =\n              this.state.connections.filter(this.getEdgeFilters());\n        this._rebuilding -=1;\n      }\n\n      return this.state.cache.connections;\n    }\n    else{\n      return this.state.connections;\n    }\n  }\n\n  getBiographies(filtered=true){\n    return this.state.biographies;\n  }\n\n  getAffiliations(filtered=true) {\n    return this.state.affiliations;\n  }\n\n  getPositions(filtered=true) {\n    return this.state.positions;\n  }\n\n  getSources(filtered=true) {\n    return this.state.sources;\n  }\n\n  getNotes(filtered=true) {\n    return this.state.notes;\n  }\n\n  getProjects(filtered=true) {\n    return this.state.projects;\n  }\n\n  getConnectionsTo(item) {\n    return this.getConnections().getConnectionsTo(item);\n  }\n\n  getAnchor() {\n    return this.state.anchor;\n  }\n\n  getFilter() {\n    return {...this.state.filter};\n  }\n\n  getFilterText(){\n    const filter = [];\n\n    let f = this.state.filter.node;\n\n    if (f){\n      let parts = [];\n\n      Object.keys(f).forEach((key, index)=>{\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1){\n        filter.push(`connected to ${parts[0]}`);\n      }\n      else if (parts.length > 1){\n        filter.push(`connected to (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.source;\n\n    if (f){\n      let parts = [];\n\n      Object.keys(f).forEach((key, index)=>{\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1){\n        filter.push(`with source ${parts[0]}`);\n      }\n      else if (parts.length > 1){\n        filter.push(`with sources (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.group;\n\n    if (f){\n      let parts = [];\n\n      Object.keys(f).forEach((key, index)=>{\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1){\n        filter.push(`in group ${parts[0]}`);\n      }\n      else if (parts.length > 1){\n        filter.push(`in groups (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.project;\n\n    if (f){\n      let parts = [];\n\n      Object.keys(f).forEach((key, index)=>{\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1){\n        filter.push(`in project ${parts[0]}`);\n      }\n      else if (parts.length > 1){\n        filter.push(`in projects (${parts.join(\" and \")})`);\n      }\n    }\n\n    if (filter.length === 1){\n      return filter[0];\n    }\n    else if (filter.length > 1){\n      return `[${filter.join(\"] and [\")}]`;\n    }\n    else{\n      return null;\n    }\n  }\n\n  _getType(item){\n    if (item.getID){\n      item = item.getID();\n    }\n\n    if (item[0] === \"P\" || item[0] === \"B\"){\n      return \"node\";\n    }\n    else if (item[0] === \"J\"){\n      return \"project\";\n    }\n    else if (item[0] === \"S\"){\n      return \"source\";\n    }\n    else{\n      return \"group\";\n    }\n  }\n\n  isFiltered(item){\n    if (item.getID){\n      item = item.getID();\n    }\n\n    let type = this._getType(item);\n\n    const filter = this.state.filter[type];\n\n    if (filter){\n      return item in filter;\n    }\n    else{\n      return false;\n    }\n  }\n\n  find(text){\n    let result = [];\n\n    try{\n      let items = this.getPeople(false).find(text);\n      _push(items, result);\n    }\n    catch(error)\n    {}\n\n    try{\n      let items = this.getBusinesses(false).find(text);\n      _push(items, result);\n    }\n    catch(error)\n    {}\n\n    try{\n      let items = this.getPositions(false).find(text);\n      _push(items, result);\n    }\n    catch(error)\n    {}\n\n    try{\n      let items = this.getAffiliations(false).find(text);\n      _push(items, result);\n    }\n    catch(error)\n    {}\n\n    try{\n      let items = this.getSources(false).search(text);\n      _push(items, result);\n    }\n    catch(error)\n    {}\n\n    try{\n      let items = this.getBiographies(false).search(text);\n      _push(items, result);\n    }\n    catch(error)\n    {}\n\n    return result;\n  }\n\n  resetFilters(){\n    this.state.filter = {};\n    this.clearCache();\n  }\n\n  setAnchor(anchor) {\n    if (anchor) {\n      anchor = this.getPeople().find(anchor);\n    }\n\n    this.state.anchor = anchor;\n    this.clearCache();\n  }\n\n  toggleFilter(item){\n    if (item.getID){\n      item = item.getID();\n    }\n\n    let type = this._getType(item);\n\n    if (!(type in this.state.filter)){\n      this.state.filter[type] = {};\n    }\n\n    if (item in this.state.filter[type]){\n      delete this.state.filter[type][item];\n\n      if (Object.keys(this.state.filter[type]).length === 0){\n        delete this.state.filter[type];\n      }\n    }\n    else{\n      this.state.filter[type][item] = 1;\n    }\n\n    console.log(this.state.filter);\n\n    this.clearCache();\n  }\n\n  getProjectTimeLine(){\n    if (this.state.cache.projectTimeLine !== null){\n      return this.state.cache.projectTimeLine;\n    }\n\n    let items = this.getProjects().getTimeLine();\n\n    this.state.cache.projectTimeLine = items;\n\n    return this.state.cache.projectTimeLine;\n  }\n\n  getItemTimeLine(){\n    if (this.state.cache.itemTimeLine !== null){\n      return this.state.cache.itemTimeLine;\n    }\n\n    let items = this.getPeople().getTimeLine();\n\n    let projects = this.getProjects().getTimeLine();\n\n    projects.forEach((item)=>{\n      item.type = \"background\";\n      items.push(item);\n    });\n\n    this.state.cache.itemTimeLine = items;\n\n    return this.state.cache.itemTimeLine;\n  }\n\n  getGraph() {\n    if (this.state.cache.graph !== null){\n      return this.state.cache.graph;\n    }\n\n    const anchor = this.state.anchor;\n    let nodes = this.getPeople().getNodes({anchor: anchor});\n    nodes = nodes.concat(this.getBusinesses().getNodes());\n\n    let n = {};\n    for (let i in nodes){\n      n[nodes[i].id] = 1;\n    }\n\n    let edges = this.getConnections().getEdges(n);\n\n    this.state.cache.graph = {\"nodes\": nodes, \"edges\": edges};\n    return this.state.cache.graph;\n  }\n\n  add(item){\n    if (!item){\n      return;\n    }\n\n    let added = false;\n\n    Object.keys(this.state).forEach((key, index)=>{\n      if (!added){\n        let group = this.state[key];\n        if (group && group.canAdd){\n          if (group.canAdd(item)){\n            group.add(item);\n            added = true;\n          }\n        }\n      }\n    });\n\n    if (!added){\n      throw new ValueError(\n          `Do not know how to add ${item} to this Social group`);\n    }\n  }\n\n  get(id, filtered=true) {\n    if (id.getID){\n      id = id.getID();\n    }\n\n    if (this._rebuilding){\n      // we cannot get filtered data when rebuilding, else otherwise\n      // we get race conditions and weird results\n      filtered = false;\n    }\n\n    try{\n      if (id[0] === \"C\") {\n        return this.getConnections(filtered).get(id);\n      }\n      else if (id[0] === \"P\") {\n        return this.getPeople(filtered).get(id);\n      }\n      else if (id[0] === \"B\") {\n        return this.getBusinesses(filtered).get(id);\n      }\n      else if (id[0] === \"Q\") {\n        return this.getPositions(filtered).get(id);\n      }\n      else if (id[0] === \"A\") {\n        return this.getAffiliations(filtered).get(id);\n      }\n      else if (id[0] === \"S\") {\n        return this.getSources(filtered).get(id);\n      }\n      else if (id[0] === \"N\") {\n        return this.getNotes(filtered).get(id);\n      }\n      else if (id[0] === \"J\") {\n        return this.getProjects(filtered).get(id);\n      }\n      else {\n        return id;\n      }\n    }\n    catch(error){\n      if (filtered){\n        return this.get(id, false);\n      }\n      else{\n        throw error;\n      }\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSocial.unDry = function (value) {\n  let social = new Social(value);\n  social._updateHooks();\n\n  return social;\n}\n\nDry.registerClass(\"Social\", Social);\n\nexport default Social;\n","import React from \"react\";\n\nimport { Tabs, Tab, TabPanel, TabList } from 'react-web-tabs';\n\nimport {\n  Accordion,\n  AccordionItem,\n  AccordionTitle,\n  AccordionPanel,\n} from './Accordion';\n\nimport GroupsList from './GroupsList';\nimport ConnectionList from './ConnectionList';\nimport SourceList from './SourceList';\nimport WeightsList from './WeightsList';\nimport DateRangeButton from './DateRangeButton';\nimport DefaultButton from './DefaultButton';\n\nimport Social from '../model/Social';\n\nimport styles from './InfoBox.module.css';\n\nlet default_title = \"Isambard's Social Network\";\nlet default_image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Robert_Howlett_-_Isambard_Kingdom_Brunel_and_the_launching_chains_of_the_Great_Eastern_-_Google_Art_Project.jpg/256px-Robert_Howlett_-_Isambard_Kingdom_Brunel_and_the_launching_chains_of_the_Great_Eastern_-_Google_Art_Project.jpg\";\nlet default_text = <div>\n                      This is an interactive viewer of Isambard Kingdom Brunel's\n                      social network. Please click in the nodes and have fun!\n                    </div>;\n\nfunction null_function(item){}\n\nfunction getBiography({item, social, emitSelected=null_function,\n                       emitToggleFilter=null_function}){\n  let pages = [];\n  let affiliations = {};\n  let positions = {};\n  let sources = {};\n  let connections = [];\n\n  try{\n    connections = social.getConnectionsTo(item);\n  }\n  catch(error){\n    console.log(`CONNECTIONS ERROR ${error}`);\n  }\n\n  if (item.getAffiliations){\n    affiliations = item.getAffiliations();\n  }\n\n  if (item.getPositions){\n    positions = item.getPositions();\n  }\n\n  if (item.getSources){\n    sources = item.getSources();\n  }\n\n  let alive = null;\n\n  if (item.getAlive){\n    let a = item.getAlive();\n    if (a){\n      alive = <p>\n                They were alive from&nbsp;\n                {a.getStartString()}&nbsp;\n                until {a.getEndString()}.\n              </p>;\n    }\n  }\n\n  let bio = null;\n\n  try{\n    bio = social.getBiographies().get(item);\n  }\n  catch(error){\n    bio = null;\n  }\n\n  pages.push([\"Biography\",\n              (<div>\n                 <div>{bio}</div>\n                 <div>{alive}</div>\n               </div>)]);\n\n  if (connections.length > 0){\n    pages.push([\"Connections\", <div>\n                                  <ConnectionList\n                                      connections={connections}\n                                      emitSelected={emitSelected}\n                                      emitToggleFilter={emitToggleFilter}\n                                      social={social}/>\n                               </div>]);\n  }\n  else{\n    pages.push([\"Connections\", \"None\"]);\n  }\n\n  if (Object.keys(positions).length > 0){\n    pages.push([\"Positions\",\n                <div>\n                  <GroupsList groups={positions}\n                              emitSelected={emitSelected}\n                              emitToggleFilter={emitToggleFilter}\n                              social={social}/>\n                </div>]);\n  }\n  else{\n    pages.push([\"Positions\", \"None\"]);\n  }\n\n  if (Object.keys(affiliations).length > 0){\n    pages.push([\"Affiliations\",\n                <div>\n                  <GroupsList groups={affiliations}\n                              emitSelected={emitSelected}\n                              emitToggleFilter={emitToggleFilter}\n                              social={social}/>\n                </div>]);\n  }\n  else{\n    pages.push([\"Affiliations\", \"None\"]);\n  }\n\n  if (Object.keys(sources).length > 0){\n    pages.push([\"Sources\",\n                <div>\n                  <GroupsList groups={sources}\n                              emitSelected={emitSelected}\n                              emitToggleFilter={emitToggleFilter}\n                              social={social}/>\n                </div>]);\n  }\n\n  pages.push([\"Analysis\",\n              <div>\n                Here is space for graphs and analysis of {item.getName()}\n              </div>]);\n\n  return pages;\n}\n\nfunction extractData({item, social, emitSelected=null_function,\n                      emitToggleFilter=null_function}){\n  let data = {title:default_title, image:default_image,\n              pages:[[\"Title\", default_text]]};\n\n  if (!(social instanceof Social)){\n    return data;\n  }\n\n  if (!item){\n    return data;\n  }\n\n  //refresh the item in case of updates...\n  if (item.getID){\n    item = item.getID();\n  }\n\n  try{\n    item = social.get(item);\n  }\n  catch(error){\n    item = null;\n  }\n\n  if (!item){\n    return data;\n  }\n\n  if (item._isAPersonObject){\n    data.title = <DefaultButton onClick={()=>{emitToggleFilter(item);}}>\n                  {item.getName()}\n                 </DefaultButton>\n    data.pages = getBiography({item:item, social:social,\n                               emitSelected:emitSelected,\n                               emitToggleFilter:emitToggleFilter});\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Illustrirte_Zeitung_%281843%29_21_332_1_Das_vom_Stapellaufen_des_Great-Britain.PNG/640px-Illustrirte_Zeitung_%281843%29_21_332_1_Das_vom_Stapellaufen_des_Great-Britain.PNG\";\n  }\n  else if (item._isABusinessObject){\n    data.title = <DefaultButton onClick={()=>{emitToggleFilter(item);}}>\n                  {item.getName()}\n                 </DefaultButton>\n    data.pages = getBiography({item:item, social:social,\n                               emitSelected:emitSelected,\n                               emitToggleFilter:emitToggleFilter});\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/SS_Great_Britain_diagram.jpg/320px-SS_Great_Britain_diagram.jpg\";\n  }\n  else if (item._isASourceObject){\n    data.title = item.getName();\n    let description = item.getDescription();\n    if (!description){\n      description = \"No description\";\n    }\n    data.pages = [[\"Description\", description],\n                  [\"Analysis\", \"Analysis for this source - where else has it been cited?\"]];\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/9/91/Sumerian_26th_c_Adab.jpg\";\n  }\n  else if (item._isAConnectionObject){\n    data.title = null;\n\n    let n0 = item.getNode0();\n    if (n0.getName){\n      let node = n0;\n      n0 = <DefaultButton onClick={()=>{emitSelected(node)}}>\n                  {n0.getName()}\n           </DefaultButton>\n    }\n\n    let n1 = item.getNode1();\n    if (n1.getName){\n      let node = n1;\n      n1 = <DefaultButton onClick={()=>{emitSelected(node)}}>\n            {n1.getName()}\n           </DefaultButton>;\n    }\n\n    let asources = item.getAffiliationSources();\n    let csources = item.getCorrespondanceSources();\n    let duration = item.getDuration();\n\n    if (duration){\n      duration = <div>\n                   <div>during</div>\n                   <DateRangeButton value={duration}\n                                    emitSelected={emitSelected}/>\n                 </div>\n    }\n\n    if (asources){\n      asources = <AccordionItem uuid=\"asources\">\n                   <AccordionTitle>\n                     Affiliation\n                   </AccordionTitle>\n                   <AccordionPanel>\n                     <SourceList social={social} sources={asources}\n                                 emitSelected={emitSelected}/>\n                   </AccordionPanel>\n                 </AccordionItem>;\n    }\n\n    if (csources){\n      csources = <AccordionItem uuid=\"csources\">\n                   <AccordionTitle>\n                     Correspondance\n                   </AccordionTitle>\n                   <AccordionPanel>\n                     <SourceList social={social} sources={csources}\n                                 emitSelected={emitSelected}/>\n                   </AccordionPanel>\n                 </AccordionItem>;\n    }\n\n    let accordion = null;\n\n    if (asources || csources){\n      accordion = <Accordion allowMultipleExpanded={true}\n                             allowZeroExpanded={true}\n                             preExpanded={[\"asources\", \"csources\"]}>\n                    {asources}\n                    {csources}\n                  </Accordion>;\n    }\n\n    let pages = [];\n    pages.push([\"Connection\",\n               <div style={{textAlign:\"center\"}}>\n                  {n0}\n                  <div>||</div>\n                  {n1}\n                  <div>&nbsp;</div>\n                  <div>{duration}</div>\n                </div>]);\n\n    pages.push([\"Sources\", <div>{accordion}</div>]);\n\n    pages.push([\"Projects\", <WeightsList weights={item.getWeights()}\n                                         type={item.getType()}\n                                         social={social}\n                                         emitSelected={emitSelected}\n                                         emitToggleFilter={emitToggleFilter}/>]);\n\n    pages.push([\"Analysis\", \"Space for analysis of this Connection\"]);\n\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/SS_Great_Britain_transverse_section.jpg/320px-SS_Great_Britain_transverse_section.jpg\";\n\n    data.pages = pages;\n  }\n\n  return data;\n}\n\nfunction InfoBox(props) {\n  let data = {};\n\n  try{\n    data = extractData(props);\n  }\n  catch(error){\n    data = {title:default_title, image:default_image,\n            pages:[[\"Title\", default_text]]};\n    console.log(`ERROR ${error}`);\n  }\n\n  const pages = data.pages;\n\n  if (pages.length > 1){\n    let tabs = [];\n    let panes = [];\n\n    for (let i=0; i<pages.length; ++i){\n      panes.push(<TabPanel key={pages[i][0]} tabId={pages[i][0]}\n                           className={styles.tabPanel}>\n                   {pages[i][1]}\n                 </TabPanel>);\n      tabs.push(<Tab key={pages[i][0]} className={styles.tab}\n                     tabFor={pages[i][0]}>{pages[i][0]}</Tab>);\n    }\n\n    return (\n      <div className={styles.container}>\n        <img className={styles.heroImage} alt=\"\" src={data.image}/>\n        <div className={styles.title}>{data.title}</div>\n        <Tabs\n          key={panes.length}\n          vertical\n          onChange={(tabId) => { console.log(tabId); }}\n          defaultTab={pages[0][0]}\n          className={styles.tabs}\n        >\n          <TabList className={styles.tablist}>\n            {tabs}\n          </TabList>\n          {panes}\n        </Tabs>\n      </div>\n    );\n  }\n  else{\n    return (\n      <div className={styles.container}>\n        <img className={styles.heroImage} alt=\"\" src={data.image}/>\n        <div className={styles.title}>{data.title}</div>\n        {pages[0][1]}\n      </div>\n    );\n  }\n};\n\nexport default InfoBox;\n","import React, { Component } from 'react';\nimport Timeline from 'react-visjs-timeline';\n\nimport DatePicker from 'react-datepicker';\n\nimport DateRange from '../model/DateRange';\n\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nimport styles from './TimeLineView.module.css';\n\nfunction _customOrder(a, b) {\n  // order by id\n  return a.id - b.id;\n}\n\nconst timeline_options = {\n  autoResize: true,\n  horizontalScroll: true,\n  showCurrentTime: false,\n  showTooltips: false,\n  verticalScroll: true,\n  zoomable: false,\n  order: _customOrder,\n}\n\nclass DateInput extends Component {\n   render(){\n     let {value, onClick} = this.props;\n\n     return (<button className={styles.zoomButton} onClick={onClick}>\n              {value}\n             </button>);\n   }\n};\n\nclass TimeLineView extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      dimensions: {height:300, width:600},\n    }\n\n    this._is_activated = this.props.is_active;\n  }\n\n  activate(){\n    this._is_activated = true;\n  }\n\n  deactivate(){\n    this._is_activated = false;\n  }\n\n  isActive(){\n    return this._is_activated;\n  }\n\n  updateSize(dimensions) {\n    this.setState({\n      dimensions: {\n        width: dimensions.width - 10,\n        height: dimensions.height - 100,\n      }\n    });\n\n    let timeline = this.getTimeLine();\n    if (timeline){\n      timeline.redraw();\n    }\n  }\n\n  getTimeLine(){\n    if (this.timeline){\n      return this.timeline.$el;\n    }\n    else{\n      return null;\n    }\n  }\n\n  selectHandler(props){\n    if (!this.isActive()){\n      return;\n    }\n\n    if (this.props.emitSelected){\n      this.props.emitSelected(props.items[0]);\n    }\n  }\n\n  rangeChangedHandler(props){\n    let window = null;\n\n    if (props.byUser || this._byUser){\n      this._byUser = false;\n      window = new DateRange({start:props.start.toISOString(),\n                              end:props.end.toISOString()});\n      if (!window.hasBounds()){\n        console.log(`Something went wrong? ${window}`);\n        return;\n      }\n    }\n    else{\n      window = this.getWindow();\n    }\n\n    if (window && this.isActive() && this.props.emitWindowChanged){\n      this.props.emitWindowChanged(window);\n    }\n  }\n\n  setWindow(window){\n    if (!this.isActive()){\n      return;\n    }\n\n\n    if (!window){\n      return;\n    }\n\n    let old_window = this.getWindow();\n\n    if (DateRange.eq(window, old_window)){\n      return;\n    }\n\n    this._byUser = true;\n    this.getTimeLine().setWindow(window.getStartDate(), window.getEndDate(),\n                                 {animation:true});\n  }\n\n  getWindow(){\n    if (this.props.getWindow){\n      return this.props.getWindow();\n    }\n    else{\n      return null;\n    }\n  }\n\n  setStartDate(date){\n    if (!date){\n      return;\n    }\n\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(new DateRange({start:date, end:window.getEndDate()}));\n    }\n  }\n\n  setEndDate(date){\n    if (!date){\n      return;\n    }\n\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(new DateRange({start:window.getStartDate(), end:date}));\n    }\n  }\n\n  scrollLeft(){\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(window.shiftEarlier());\n    }\n  }\n\n  scrollRight(){\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(window.shiftLater());\n    }\n  }\n\n  zoomIn(){\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(window.zoomIn());\n    }\n  }\n\n  zoomOut(){\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(window.zoomOut());\n    }\n  }\n\n  render() {\n    let height = `${this.state.dimensions.height}px`;\n    let width = `${this.state.dimensions.width}px`;\n\n    let my_options = {...timeline_options};\n    my_options[\"height\"] = height;\n    my_options[\"width\"] = width;\n\n    let window = this.getWindow();\n    let max_window = window;\n\n    if (this.props.getMaxWindow){\n      max_window = this.props.getMaxWindow();\n\n      if (max_window.hasBounds()){\n        my_options[\"max\"] = max_window.getLatestEnd().toDate();\n        my_options[\"min\"] = max_window.getEarliestStart().toDate();\n\n        if (!window){\n          window = max_window;\n        }\n      }\n      else{\n        console.log(`Unbounded max_window? ${max_window}`);\n        max_window = null;\n      }\n    }\n\n    if (!window){\n      window = new DateRange({start:\"2000-01-31\", end:\"2020-12-31\"});\n      console.log(\"NO WINDOW!?!\");\n    }\n\n    let start = window.getEarliestStart();\n    let end = window.getLatestEnd();\n\n    let items = null;\n\n    if (this.isActive()){\n      if (this.props.getItems){\n        items = this.props.getItems();\n      }\n    }\n\n    if (items === null || items.length === 0){\n      items = [];\n    }\n\n    if (start){\n      start = start.toDate();\n      my_options[\"start\"] = start;\n    }\n\n    if (end){\n      end = end.toDate();\n      my_options[\"end\"] = end;\n    }\n\n    let timeline = this.getTimeLine();\n\n    if (timeline){\n      //need to set the window here to prevent animation when\n      //changing tabs\n      let activated = this._is_activated;\n      timeline.setWindow(start, end, {animation:false});\n      this._is_activated = activated;\n    }\n\n    return (\n      <div className={styles.container}\n           style={{width:width, height:height}}>\n        <Timeline className={styles.timeline}\n                  ref={el => (this.timeline = el)}\n                  rangechangedHandler={(props)=>{this.rangeChangedHandler(props)}}\n                  selectHandler={(props)=>{this.selectHandler(props)}}\n                  options={my_options}\n                  items={items}/>\n        <div className={styles.buttonGroup}>\n          <button className={styles.scrollButton}\n                  onClick={()=>{this.scrollLeft()}}>&larr;</button>\n          <button className={styles.zoomButton}\n                  onClick={()=>{this.zoomOut()}}>-</button>\n          <DatePicker className={styles.datePicker}\n                      selected={start}\n                      openToDate={start}\n                      selectsStart\n                      startDate={start}\n                      endDate={end}\n                      dateFormat=\"d MMM yyyy\"\n                      showMonthYearPicker\n                      showYearDropdown\n                      dropdownMode=\"select\"\n                      customInput={<DateInput />}\n                      onChange={(date)=>{this.setStartDate(date)}}/>\n          <button className={styles.scrollButton}\n                  onClick={()=>{this.setWindow(max_window)}}>&harr;</button>\n          <DatePicker className={styles.datePicker}\n                      selected={end}\n                      openToDate={end}\n                      selectsEnd\n                      startDate={start}\n                      endDate={end}\n                      dateFormat=\"d MMM yyyy\"\n                      showMonthYearPicker\n                      showYearDropdown\n                      dropdownMode=\"select\"\n                      customInput={<DateInput />}\n                      onChange={(date)=>{this.setEndDate(date)}}/>\n          <button className={styles.zoomButton}\n                  onClick={()=>{this.zoomIn()}}>+</button>\n          <button className={styles.scrollButton}\n                  onClick={()=>{this.scrollRight()}}>&rarr;</button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TimeLineView\n","import React, { Component } from 'react';\nimport { Tabs, Tab, TabPanel, TabList } from 'react-web-tabs';\n\nimport TimeLineView from './TimeLineView';\n\nimport styles from './TimeLineBox.module.css';\n\nclass TimeLineBox extends Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n      dimensions: {height:300, width:600},\n    }\n\n    this.tabs = {};\n    this.container = null;\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', ()=>{this.updateSize()});\n    this.updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', ()=>{this.updateSize()});\n  }\n\n  activate(tabId){\n    Object.keys(this.tabs).forEach((key, index) =>{\n      if (key !== tabId){\n        let tab = this.tabs[key];\n        if (tab){\n          tab.deactivate();\n        }\n      }\n    });\n\n    if (this.tabs[tabId]){\n      this.tabs[tabId].activate();\n    }\n  }\n\n  updateSize(){\n    if (this.container){\n      this.setState({\n        dimensions: {\n          width: this.container.offsetWidth,\n          height: this.container.offsetHeight,\n        }\n      });\n    }\n\n    Object.keys(this.tabs).forEach((key, index) =>{\n      let tab = this.tabs[key];\n      if (tab){\n        tab.updateSize(this.state.dimensions);\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div ref={el => (this.container = el)}\n           className={styles.container}>\n        <Tabs key=\"timeline-tabs\"\n              onChange={(tabId) => { this.activate(tabId); this.updateSize(); }}\n              className={styles.tabs}>\n          <TabList className={styles.tabList}>\n            <Tab className={styles.tab}\n                 key=\"items\"\n                 tabFor=\"items\">Timeline</Tab>\n            <Tab className={styles.tab}\n                 key=\"projects\"\n                 tabFor=\"projects\">Projects</Tab>\n            <Tab className={styles.tab}\n                 key=\"analysis\"\n                 tabFor=\"analysis\">Analysis</Tab>\n          </TabList>\n\n          <TabPanel key=\"projects\" tabId=\"projects\"\n                    className={styles.tabPanel}>\n            <TimeLineView ref={el => (this.tabs.projects = el)}\n                          name=\"projects\"\n                          selected={this.props.selected}\n                          getMaxWindow={this.props.getMaxWindow}\n                          getWindow={this.props.getProjectWindow}\n                          getItems={this.props.getProjectTimeLine}\n                          emitWindowChanged={this.props.emitWindowChanged}\n                          emitSelected={this.props.emitSelected}\n                          emitClicked={this.props.emitClicked}/>\n          </TabPanel>\n\n          <TabPanel key=\"analysis\" tabId=\"analysis\" className={styles.tabPanel}>\n            <div className={styles.centerContainer}>\n              <p>\n                This will contain tools and graphs for temporal social\n                network analysis.\n              </p>\n            </div>\n          </TabPanel>\n\n          <TabPanel key=\"items\" tabId=\"items\" className={styles.tabPanel}>\n            <TimeLineView ref={el => (this.tabs.items = el)}\n                          name=\"items\"\n                          is_active={true}\n                          selected={this.props.selected}\n                          getMaxWindow={this.props.getMaxWindow}\n                          getWindow={this.props.getItemWindow}\n                          getItems={this.props.getItemTimeLine}\n                          emitWindowChanged={this.props.emitWindowChanged}\n                          emitSelected={this.props.emitSelected}\n                          emitClicked={this.props.emitClicked}/>\n          </TabPanel>\n        </Tabs>\n      </div>\n    );\n  }\n}\n\nexport default TimeLineBox\n","\nimport React from 'react';\n\nimport {\n  Accordion,\n  AccordionItem,\n  AccordionTitle,\n  AccordionPanel,\n} from './Accordion';\n\nimport {ResponsiveList, ResponsiveListItem} from './ResponsiveList';\nimport CheckBox from './CheckBox';\nimport DefaultButton from './DefaultButton';\n\nimport styles from './FilterBox.module.css';\n\nfunction null_function(args=null){}\n\nfunction filterList(items, props){\n  let social = props.social;\n\n  let emitSelected = props.emitSelected;\n\n  if (!emitSelected){\n    emitSelected = null_function;\n  }\n\n  let emitToggleFilter = props.emitToggleFilter;\n\n  if (!emitToggleFilter){\n    emitToggleFilter = null_function;\n  }\n\n  let output = items.values().map((item)=>{\n    let is_filtered = social.isFiltered(item);\n\n    return <ResponsiveListItem key={item.getName()}>\n              <DefaultButton style={{position:\"relative\",\n                                     maxWidth:\"80%\"}}\n                             onClick={()=>{emitSelected(item);}}>\n                {item.getName()}\n              </DefaultButton>&nbsp;\n              <CheckBox checked={is_filtered}\n                        onChange={(event)=>{emitToggleFilter(item);}}/>\n           </ResponsiveListItem>;\n  });\n\n  return <ResponsiveList>{output}</ResponsiveList>;\n}\n\nfunction FilterBox(props){\n  let social = props.social;\n\n  if (!social){\n    return <div>No social to display!</div>;\n  }\n\n  let filter_text = social.getFilterText();\n\n  if (!filter_text){\n    filter_text = \"No filters\";\n  }\n\n  let emitClearFilters = props.emitClearFilters;\n\n  if (!emitClearFilters){\n    emitClearFilters = null_function;\n  }\n\n  let filter_info = <AccordionItem uuid=\"filterinfo\">\n                      <AccordionTitle>\n                        Current Filter\n                      </AccordionTitle>\n                      <AccordionPanel>\n                        <div className={styles.filterContainer}>\n                          <div className={styles.filterText}>\n                            {filter_text}\n                          </div>\n                          <div>\n                            <DefaultButton onClick={emitClearFilters}>\n                              Clear Filters\n                            </DefaultButton>\n                          </div>\n                        </div>\n                      </AccordionPanel>\n                    </AccordionItem>;\n\n  let projects = filterList(social.getProjects(false), props);\n  let sources = filterList(social.getSources(false), props);\n  let positions = filterList(social.getPositions(false), props);\n  let affiliations = filterList(social.getAffiliations(false), props);\n  let people = filterList(social.getPeople(false), props);\n  let businesses = filterList(social.getBusinesses(false), props);\n\n  console.log(sources);\n\n  return <Accordion allowMultipleExpanded={false}\n                    allowZeroExpanded={true}>\n          {filter_info}\n\n          <AccordionItem uuid=\"projects\">\n            <AccordionTitle>\n                Projects\n            </AccordionTitle>\n            <AccordionPanel>\n              {projects}\n            </AccordionPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"sources\">\n            <AccordionTitle>\n                Sources\n            </AccordionTitle>\n            <AccordionPanel>\n              {sources}\n            </AccordionPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"people\">\n            <AccordionTitle>\n              People\n            </AccordionTitle>\n            <AccordionPanel>\n              {people}\n            </AccordionPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"businesses\">\n            <AccordionTitle>\n              Businesses\n            </AccordionTitle>\n            <AccordionPanel>\n              {businesses}\n            </AccordionPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"positions\">\n            <AccordionTitle>\n              Positions\n            </AccordionTitle>\n            <AccordionPanel>\n              {positions}\n            </AccordionPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"affiliations\">\n            <AccordionTitle>\n              Affiliations\n            </AccordionTitle>\n            <AccordionPanel>\n              {affiliations}\n            </AccordionPanel>\n          </AccordionItem>\n\n        </Accordion>;\n}\n\nexport default FilterBox;\n","\nimport React from \"react\";\nimport {CSSTransition} from \"react-transition-group\";\n\nimport styles from './SlidingPanel.module.css'\nimport SlideFromLeft from './transitions/SlideFromLeft.module.css';\nimport SlideFromRight from './transitions/SlideFromRight.module.css';\nimport SlideFromBottom from './transitions/SlideFromBottom.module.css';\nimport SlideFromTop from './transitions/SlideFromTop.module.css';\n\nfunction SlidingPanel({children, isOpen=false, position=\"right\",\n                       size=\"40%\", minSize=\"300px\", maxSize=null, }){\n  let container = styles.rightContainer;\n  let transition = SlideFromRight;\n  let horiz_size = {width:size, minWidth:minSize};\n  let vert_size = {height:size, minHeight:minSize};\n\n  if (maxSize){\n    horiz_size.maxWidth = maxSize;\n    vert_size.maxHeight = maxSize;\n  }\n\n  let style = horiz_size;\n\n  if (position === \"right\"){\n    container = styles.rightContainer;\n    transition = SlideFromRight;\n  }\n  else if (position === \"bottom\"){\n    container = styles.bottomContainer;\n    transition = SlideFromBottom;\n    style = vert_size;\n  }\n  else if (position === \"top\"){\n    container = styles.topContainer;\n    transition = SlideFromTop;\n    style = vert_size;\n  }\n  else if (position === \"left\"){\n    container = styles.leftContainer;\n    transition = SlideFromLeft;\n  }\n\n  container = `${container} ${styles.container}`;\n\n  return (<CSSTransition in={isOpen}\n                         timeout={200}\n                         classNames={transition}\n                         unmountOnExit>\n            <div className={container} style={style}>\n              {children}\n            </div>\n          </CSSTransition>);\n};\n\nexport default SlidingPanel;\n","\nimport React from 'react';\nimport Spinner from 'react-spinkit';\n\nimport styles from './OverlayBox.module.css';\n\nclass OverlayBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true\n    };\n  }\n\n  hideSpinner() {\n    this.setState({\n      loading: false\n    });\n  }\n\n  render() {\n    let item = this.props.item;\n\n    let url = null;\n\n    if (item && item.getURL){\n      url = item.getURL();\n    }\n\n    if (!url){\n      return (<div className={styles.container}>\n                <div className={styles.centerContainer}>\n                  {item}\n                  <div>\n                    <button className={styles.button}\n                            onClick={this.props.emitClose}>Close</button>\n                  </div>\n                </div>\n              </div>);\n    }\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.url}>{url}</div>\n        {this.state.loading ? (\n          <div className={styles.centerContainer}>\n            <div>Loading page...</div>\n            <div>\n              <Spinner\n                name=\"ball-grid-pulse\"\n                color=\"green\"\n                fadeIn=\"none\"\n              />\n            </div>\n          </div>\n        ) : null}\n        <iframe\n          src={url}\n          title={url}\n          width=\"100%\"\n          height=\"95%\"\n          onLoad={()=>{this.hideSpinner()}}\n          frameBorder=\"0\"\n          marginHeight=\"0\"\n          marginWidth=\"0\"\n          sandbox=\"allow-scripts\"\n          position=\"absolute\"\n        />\n      </div>\n    );\n  }\n}\n\n\nexport default OverlayBox;\n","\nimport React from 'react';\nimport Spinner from 'react-spinkit';\n\nimport DefaultButton from './DefaultButton';\n\nimport styles from './SearchBar.module.css';\n\n// This class is heavily inspired by react-search-field\n// from https://github.com/nutboltu/react-search-field\n\nfunction _null_function(item){}\n\n\nfunction SearchResults(props){\n  let results = props.results;\n\n  if (!results){\n    return null;\n  }\n\n  let items = []\n\n  results.forEach((item, index)=>{\n    items.push(<li key={index}>{item}</li>);\n  });\n\n  return (<ul>{items}</ul>);\n}\n\nclass SearchBar extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {value: \"\",\n                  suggestions: null,\n                  searching: null,\n                  results: null};\n  }\n\n  componentDidUpdate(nextProps) {\n    if (this.props.searchText !== nextProps.searchText) {\n      this.setState({\n        value: nextProps.searchText,\n      });\n    }\n  }\n\n  setResults(results){\n    this.setState({searching:null,\n                   suggestions:null,\n                   results:results});\n  }\n\n  setSuggestions(suggestions){\n    this.setState({searching:null,\n                   suggestions:suggestions,\n                   results:null});\n  }\n\n  startSuggestion(text){\n    let social = this.props.social;\n    if (!social){\n      return;\n    }\n\n    let items = null;\n\n    try{\n      items = social.find(text);\n    }\n    catch(error){\n      items = null;\n    }\n\n    let emitSelected = this.props.emitSelected;\n\n    if (!emitSelected){\n      emitSelected = _null_function;\n    }\n\n    let emitToggleFilter = this.props.emitToggleFilter;\n\n    if (!emitToggleFilter){\n      emitToggleFilter = _null_function;\n    }\n\n    if (items){\n      let results = items.map((item)=>{\n        let name = item.getName();\n        return <DefaultButton onClick={()=>{emitSelected(item)}}\n                              style={{width:\"100%\"}}>\n                {name}\n               </DefaultButton>\n      });\n\n      this.setSuggestions(results);\n    }\n    else{\n      this.setSuggestions(null);\n    }\n  }\n\n  startSearch(text){\n    let social = this.props.social;\n\n    if (!social){\n      this.setResults([<div>No results!</div>]);\n      return;\n    }\n\n    let items = null;\n\n    try{\n      items = social.find(text);\n    }\n    catch(error){\n      items = null;\n    }\n\n    let emitSelected = this.props.emitSelected;\n\n    if (!emitSelected){\n      emitSelected = _null_function;\n    }\n\n    if (items){\n      let results = items.map((item)=>{\n        let name = item.getName();\n        return <DefaultButton onClick={()=>{emitSelected(item)}}\n                              style={{width:\"100%\"}}>\n                {name}\n               </DefaultButton>\n      });\n\n      this.setResults(results);\n    }\n    else{\n      this.setResults([<div>Really no results!</div>]);\n    }\n  }\n\n  searchFor(text){\n    if (text && text.length > 0){\n      this.setState({searching:text,\n                     suggestions:null,\n                     results:null});\n\n      setTimeout(()=>{this.startSearch(text)}, 10);\n    }\n    else{\n      this.setState({suggestions:null,\n        searching:null,\n        results:null});\n    }\n  }\n\n  autocomplete(text){\n    if (text && text.length > 0){\n      this.startSuggestion(text);\n    }\n    else{\n      this.setState({suggestions:null,\n                     searching:null,\n                     results:null});\n    }\n  }\n\n  isSearching(){\n    return this.state.searching !== null;\n  }\n\n  isSuggesting(){\n    return this.state.suggestions !== null;\n  }\n\n  hasResults(){\n    return this.state.results !== null;\n  }\n\n  stopSearch(){\n    this.setState({searching:null,\n                   suggestions:null,\n                   results:null});\n  }\n\n  onChange(event){\n    if (this.isSearching()){\n      return;\n    }\n\n    this.setState({value: event.target.value});\n    this.autocomplete(event.target.value);\n  }\n\n  onEnter(event){\n    if (this.isSearching() || this.isEmpty()){\n      return;\n    }\n\n    const enterKey = 13;\n    const isEnterPressed = event.which === enterKey || event.keyCode === enterKey;\n\n    if (isEnterPressed){\n      this.searchFor(event.target.value);\n    }\n  }\n\n  onSearch(){\n    if (this.isSearching() || this.isEmpty()){\n      return;\n    }\n\n    this.searchFor(this.state.value);\n  }\n\n  isEmpty(){\n    return !(this.state.value && this.state.value.length > 0);\n  }\n\n  render(){\n    let button_style = styles.searchButton;\n\n    if (this.isSearching() || this.isEmpty()){\n      button_style = styles.disabledButton;\n    }\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.searchContainer}>\n          <button className={styles.hamburgerButton}\n                  onClick={this.props.emitHamburgerClicked}>\n            \n          </button>\n          <input\n            className={styles.searchBox}\n            onChange={(event)=>{this.onChange(event)}}\n            onKeyPress={(event)=>{this.onEnter(event)}}\n            placeholder={this.props.placeholder}\n            type=\"text\"\n            value={this.state.value}\n          />\n          <div className={button_style}\n              onClick={()=>{this.onSearch()}}>\n            <div className={styles.magnifier}></div>\n          </div>\n        </div>\n        {this.isSearching() ? (\n          <div className={styles.searchContainer}>\n            <div className={styles.resultContainer}>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.stopSearch()}}>X</div>\n              <div className={styles.searchPending}>\n                <div>Searching for '{this.state.searching}'...</div>\n                <div style={{display:\"inline-block\"}}>\n                  <Spinner\n                    name=\"ball-grid-pulse\"\n                    color=\"green\"\n                    fadeIn=\"none\"\n                  />\n                </div>\n              </div>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.stopSearch()}}>X</div>\n            </div>\n          </div>\n        ) : null}\n        {this.isSuggesting() ? (\n          <div className={styles.searchContainer}>\n            <div className={styles.resultContainer}>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({suggestions:null})}}>X</div>\n              <div className={styles.searchResult}>\n                <SearchResults results={this.state.suggestions} />\n              </div>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({suggestions:null})}}>X</div>\n            </div>\n          </div>\n        ) : null}\n        {this.hasResults() ? (\n          <div className={styles.searchContainer}>\n            <div className={styles.resultContainer}>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({results:null})}}>X</div>\n              <div className={styles.searchResult}>\n                <SearchResults results={this.state.results} />\n              </div>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({results:null})}}>X</div>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default SearchBar;\n","\nimport React from 'react';\n\nimport styles from './BrunelMenu.module.css';\n\nfunction BrunelMenu(props){\n  if (!props.items){\n    return (<div>No menu</div>);\n  }\n\n  let buttons = [];\n\n  props.items.forEach((item, index)=>{\n    let func = item[1];\n\n    if (props.emitClose){\n      func = ()=>{props.emitClose(); item[1]() };\n    }\n\n    buttons.push(<button key={index}\n                         className={styles.menuItem}\n                         onClick={()=>{func()}}>\n                  {item[0]}\n                 </button>);\n  });\n\n  if (props.emitClose){\n    buttons.push(<button key=\"close\"\n                         className={styles.menuItem}\n                         onClick={()=>{props.emitClose()}}>\n                  Close\n                </button>);\n  }\n\n  return (\n    <div className={styles.menu}>\n      {buttons}\n    </div>\n  );\n}\n\nexport default BrunelMenu;\n","\n// package imports\nimport React from 'react';\nimport Dry from 'json-dry';\nimport ReactModal from 'react-modal';\n\n// Brunel components\nimport SocialGraph from \"./components/SocialGraph\";\nimport InfoBox from \"./components/InfoBox\";\nimport TimeLineBox from './components/TimeLineBox';\nimport FilterBox from './components/FilterBox';\nimport SlidingPanel from './components/SlidingPanel';\nimport OverlayBox from './components/OverlayBox';\nimport SearchBar from './components/SearchBar';\nimport BrunelMenu from './components/BrunelMenu';\nimport DefaultButton from './components/DefaultButton';\n\n// Brunel model\nimport Social from './model/Social';\n\n// Data for import\nimport graph_data from './data.json';\n\n// Styling for the app\nimport styles from './SocialApp.module.css'\nimport DateRange from './model/DateRange';\n\nclass SocialApp extends React.Component {\n  constructor(props){\n    super(props);\n\n    let social = Dry.parse(graph_data);\n    console.log(social);\n\n    if (!(social instanceof Social )){\n      console.log(\"Could not parse!\");\n      social = new Social();\n    }\n\n    // special cases for Brunel project...\n    social.setAnchor(\"Brunel\");\n    social.setMaxWindow(new DateRange({start:\"1800-01-01\", end:\"1860-12-31\"}));\n\n    this.state = {\n      social: social,\n      highlighted_item: null,\n      selected_item: null,\n      overlay_item: null,\n      isInfoPanelOpen: false,\n      isTimeLinePanelOpen: false,\n      isFilterPanelOpen: false,\n      isHamburgerMenuOpen: false,\n      timeline: new TimeLineBox(),\n      isOverlayOpen: false\n    };\n\n    this.socialGraph = null;\n  }\n\n  resetFilters(){\n    let social = this.state.social;\n    social.resetFilters();\n    this.setState({social:social});\n  }\n\n  closePanels(){\n    this.setState({isInfoPanelOpen:false,\n                   isTimeLinePanelOpen:false,\n                   isHamburgerMenuOpen:false,\n                   isFilterPanelOpen:false,\n                   highlighted_item:null,\n                  });\n  }\n\n  closeOverlay(){\n    this.setState({isOverlayOpen:false,\n                   overlay_item:null});\n  }\n\n  showInfo(item){\n    if (item._isAProjectObject){\n      this.setState({overlay_item:item,\n                     isOverlayOpen:true});\n    }\n    else{\n      this.setState({selected_item:item,\n                     isInfoPanelOpen:true});\n    }\n  }\n\n  slotClearFilters(){\n    this.resetFilters();\n  }\n\n  slotToggleFilter(item){\n    if (!item){\n      return;\n    }\n\n    let social = this.state.social;\n    social.toggleFilter(item);\n\n    this.setState(social);\n  }\n\n  slotHighlighted(id){\n    if (!id){\n      return;\n    }\n\n    if (id._isADateRangeObject){\n      return;\n    }\n\n    this.setState({highlighted_item:id});\n  }\n\n  slotSelected(id){\n    if (!id){\n      this.closePanels();\n      return;\n    }\n\n    if (id._isADateRangeObject){\n      let social = this.state.social;\n      if (social.setWindow(id)){\n        this.setState({social:social});\n      }\n      return;\n    }\n\n    const social = this.state.social;\n    const item = social.get(id);\n    this.showInfo(item);\n  }\n\n  slotWindowChanged(window){\n    let social = this.state.social;\n\n    if (social.setWindow(window)){\n      this.setState({social:social});\n    }\n  }\n\n  toggleInfoPanel(){\n    this.setState({isInfoPanelOpen: !(this.state.isInfoPanelOpen)});\n  }\n\n  toggleTimeLinePanel(){\n    this.setState({isFilterPanelOpen: false,\n                   isTimeLinePanelOpen: !(this.state.isTimeLinePanelOpen)});\n}\n\n  toggleFilterPanel(){\n    this.setState({isTimeLinePanelOpen: false,\n                   isFilterPanelOpen: !(this.state.isFilterPanelOpen)});\n  }\n\n  viewAbout(){\n    let item = <div>\n                 <div>\n                   This is a demo of the application to view\n                   Brunel's temporal social network. This is an\n                   incomplete application containing incomplete\n                   data and should not be relied on or viewed as\n                   being accurate.\n                 </div>\n                 <div>If you want more information, then please\n                      visit the <a href=\"https://github.com/chryswoods/brunel\">\n                        GitHub repository\n                      </a>\n                 </div>\n               </div>;\n    this.setState({\"overlay_item\": item,\n                   \"isOverlayOpen\": true});\n  }\n\n  viewSource(){\n    console.log(\"View source\");\n    var win = window.open(\"https://github.com/chryswoods/brunel\", '_blank');\n    win.focus();\n  }\n\n  resetAll(){\n    console.log(\"Reset all\");\n    window.location.reload(true);\n  }\n\n  render(){\n    const selected = this.state.selected_item;\n    const highlighted = this.state.highlighted_item;\n    const overlay_item = this.state.overlay_item;\n    const social = this.state.social;\n\n    let menu = [];\n\n    let timeline_text = \"Timeline\";\n\n    if (social){\n      timeline_text = `Timeline : ${social.getWindow().toSimpleString()}`;\n    }\n\n    menu.push([\"About\", ()=>{this.viewAbout()}]);\n    menu.push([\"View Source\", ()=>{this.viewSource()}]);\n    menu.push([\"Reset\", ()=>{this.resetAll()}]);\n\n    return (\n      <div>\n        <div className={styles.backgroundImage} />\n        <ReactModal isOpen={this.state.isOverlayOpen}\n                    onRequestClose={()=>{this.closeOverlay()}}\n                    contentLabel='Information overlay'\n                    className={styles.modal}\n                    overlayClassName={{base:styles.modalOverlay,\n                                       afterOpen:styles.modalOverlayAfterOpen,\n                                       beforeClose:styles.modalOverlayBeforeClose}}\n                    closeTimeoutMS={200}\n                    appElement={document.getElementById('root')}\n                    >\n          <div className={styles.closeOverlayButton}\n                onClick={()=>{this.closeOverlay()}}>X</div>\n          <OverlayBox item={overlay_item}\n                      emitClose={()=>{this.closeOverlay()}}/>\n        </ReactModal>\n\n        <SearchBar social={social}\n                   emitHamburgerClicked={()=>{this.setState({isHamburgerMenuOpen:true})}}\n                   emitSelected={(item)=>{this.slotSelected(item)}}\n                   emitHighlighted={(item)=>{this.slotHighlighted(item)}}\n                   emitClicked={(item)=>{this.slotClicked(item)}}/>\n\n        <SlidingPanel isOpen={this.state.isTimeLinePanelOpen}\n                      position='bottom'>\n          <span className={styles.closePanelButton}\n                onClick={()=>{this.setState({isTimeLinePanelOpen:false})}}>X</span>\n          <TimeLineBox selected={selected}\n                       getMaxWindow={()=>{return this.state.social.getMaxWindow()}}\n                       getProjectWindow={()=>{return this.state.social.getWindow()}}\n                       getItemWindow={()=>{return this.state.social.getWindow()}}\n                       getProjectTimeLine={()=>{return this.state.social.getProjectTimeLine()}}\n                       getItemTimeLine={()=>{return this.state.social.getItemTimeLine()}}\n                       emitClicked={(item)=>{this.slotClicked(item)}}\n                       emitSelected={(item)=>{this.slotClicked(item)}}\n                       emitHighlighted={(item)=>{this.slotHighlighted(item)}}\n                       emitWindowChanged={(window)=>{\n                                    this.slotWindowChanged(window)}}/>\n        </SlidingPanel>\n\n        <SlidingPanel isOpen={this.state.isInfoPanelOpen}\n                      position='right'>\n          <span className={styles.closePanelButton}\n                onClick={()=>{this.setState({isInfoPanelOpen:false})}}>X</span>\n          <InfoBox item={selected} social={social}\n                   emitSelected={(item)=>{this.slotSelected(item)}}\n                   emitHighlighted={(item)=>{this.slotHighlighted(item)}}\n                   emitToggleFilter={(item)=>{this.slotToggleFilter(item)}}/>\n        </SlidingPanel>\n\n        <SlidingPanel isOpen={this.state.isFilterPanelOpen}\n                      position='bottom'>\n          <span className={styles.closePanelButton}\n                onClick={()=>{this.setState({isFilterPanelOpen:false})}}>X</span>\n          <FilterBox social={social}\n                     emitToggleFilter={(item)=>{this.slotToggleFilter(item)}}\n                     emitSelected={(item)=>{this.slotSelected(item)}}\n                     emitHighlighted={(item)=>{this.slotHighlighted(item)}}\n                     emitClearFilters={()=>{this.slotClearFilters()}}/>\n        </SlidingPanel>\n\n        <SlidingPanel isOpen={this.state.isHamburgerMenuOpen}\n                      position='left'\n                      size=\"100px\" minSize=\"100px\">\n          <BrunelMenu emitClose={()=>{this.setState({isHamburgerMenuOpen:false})}}\n                      items={menu} />\n        </SlidingPanel>\n\n        <div className={styles.graphContainer}>\n          <SocialGraph social={this.state.social}\n                       selected={selected}\n                       highlighted={highlighted}\n                       emitClicked={(id)=>this.slotSelected(id)} />\n        </div>\n\n        <div className={styles.bottomContainer}>\n          <DefaultButton onClick={()=>{this.toggleFilterPanel()}}>\n            Filters\n          </DefaultButton>\n          <DefaultButton onClick={()=>this.toggleTimeLinePanel()}>\n            {timeline_text}\n          </DefaultButton>\n        </div>\n\n      </div>\n    );\n  }\n};\n\nexport default SocialApp;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonGroup\":\"TimeLineView_buttonGroup__2GQ9k\",\"datePicker\":\"TimeLineView_datePicker__1VM6E\",\"zoomButton\":\"TimeLineView_zoomButton__2X6JE\",\"scrollButton\":\"TimeLineView_scrollButton__pbyum\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TimeLineBox_container__3XwaK\",\"centerContainer\":\"TimeLineBox_centerContainer__16Ujh\",\"tabs\":\"TimeLineBox_tabs__yHSvr\",\"tablist\":\"TimeLineBox_tablist__yB2UA\",\"tab\":\"TimeLineBox_tab__157Wu\",\"tabPanel\":\"TimeLineBox_tabPanel__3u0d3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filterContainer\":\"FilterBox_filterContainer__2KAxt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SlidingPanel_container__360Fr\",\"leftContainer\":\"SlidingPanel_leftContainer__hQNC6\",\"rightContainer\":\"SlidingPanel_rightContainer__57qYr\",\"topContainer\":\"SlidingPanel_topContainer__YiYRz\",\"bottomContainer\":\"SlidingPanel_bottomContainer__2dEzd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromLeft_enter__jKjRY\",\"enterActive\":\"SlideFromLeft_enterActive__159kE\",\"exit\":\"SlideFromLeft_exit___gRJ9\",\"exitActive\":\"SlideFromLeft_exitActive__YfXDY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromRight_enter__3at5G\",\"enterActive\":\"SlideFromRight_enterActive__qhcn3\",\"exit\":\"SlideFromRight_exit__C9Did\",\"exitActive\":\"SlideFromRight_exitActive__2HcMW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromBottom_enter__1iOKm\",\"enterActive\":\"SlideFromBottom_enterActive__248cg\",\"exit\":\"SlideFromBottom_exit__1SBqa\",\"exitActive\":\"SlideFromBottom_exitActive__1TiIq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromTop_enter__2sGUw\",\"enterActive\":\"SlideFromTop_enterActive__3jElj\",\"exit\":\"SlideFromTop_exit__28rU4\",\"exitActive\":\"SlideFromTop_exitActive__2_Nxz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"OverlayBox_container__2H63R\",\"centerContainer\":\"OverlayBox_centerContainer__bl7gf\",\"button\":\"OverlayBox_button__V4JvO\",\"url\":\"OverlayBox_url__aN8n5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SearchBar_container__1nsMW\",\"searchContainer\":\"SearchBar_searchContainer__2xOxT\",\"resultContainer\":\"SearchBar_resultContainer__1_9Lx\",\"searchPending\":\"SearchBar_searchPending__1uhP9\",\"searchResult\":\"SearchBar_searchResult__1iaaf\",\"hamburgerButton\":\"SearchBar_hamburgerButton__1PuEk\",\"searchBox\":\"SearchBar_searchBox__3PHmH\",\"disabledButton\":\"SearchBar_disabledButton__2PWwO\",\"searchButton\":\"SearchBar_searchButton__1GItM\",\"magnifier\":\"SearchBar_magnifier__2xBEb\",\"closeResultButton\":\"SearchBar_closeResultButton__MIs2K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"BrunelMenu_menu__2QqAJ\",\"menuItem\":\"BrunelMenu_menuItem__Adzvp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"module\":\"SocialApp_module__3Cefy\",\"backgroundImage\":\"SocialApp_backgroundImage__3Kw9P\",\"graphContainer\":\"SocialApp_graphContainer__1fIZ_\",\"controlButton\":\"SocialApp_controlButton__dd05U\",\"bottomContainer\":\"SocialApp_bottomContainer__7teeO\",\"filterText\":\"SocialApp_filterText__12DDf\",\"citationText\":\"SocialApp_citationText__m100A\",\"closePanelButton\":\"SocialApp_closePanelButton__S0EAB\",\"closeOverlayButton\":\"SocialApp_closeOverlayButton__38BCO\",\"modal\":\"SocialApp_modal__7Dp7u\",\"modalOverlay\":\"SocialApp_modalOverlay__8objV\",\"modalOverlayAfterOpen\":\"SocialApp_modalOverlayAfterOpen__3azyt\",\"modalOverlayBeforeClose\":\"SocialApp_modalOverlayBeforeClose__3K48w\"};"],"sourceRoot":""}