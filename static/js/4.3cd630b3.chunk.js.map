{"version":3,"sources":["components/Accordion.module.css","components/DefaultButton.module.css","components/CheckBox.module.css","components/ResponsiveList.module.css","components/SocialGraph.js","components/Accordion.js","components/DefaultButton.js","components/CheckBox.js","components/ResponsiveList.js","components/GroupsList.js","components/ConnectionList.js","components/DateRangeButton.js","model/Errors.js","model/RoughDate.js","model/DateRange.js","components/SourceList.js","components/WeightsList.js","model/Person.js","model/People.js","model/Business.js","model/Businesses.js","model/Connection.js","model/Connections.js","model/Position.js","model/Positions.js","model/Affiliation.js","model/Affiliations.js","model/Source.js","model/Sources.js","model/Note.js","model/Notes.js","model/Project.js","model/Projects.js","model/Biographies.js","model/Social.js","components/InfoBox.js","components/TimeLineView.js","components/TimeLineBox.js","components/FilterBox.js","components/SlidingPanel.js","components/OverlayBox.js","components/SearchBar.js","components/BrunelMenu.js","SocialApp.js","components/GroupsList.module.css","components/ConnectionList.module.css","components/WeightsList.module.css","components/InfoBox.module.css","components/TimeLineView.module.css","components/TimeLineBox.module.css","components/FilterBox.module.css","components/SlidingPanel.module.css","components/transitions/SlideFromLeft.module.css","components/transitions/SlideFromRight.module.css","components/transitions/SlideFromBottom.module.css","components/transitions/SlideFromTop.module.css","components/OverlayBox.module.css","components/SearchBar.module.css","components/BrunelMenu.module.css","SocialApp.module.css"],"names":["module","exports","fast_physics","enabled","timestep","options","height","width","layout","randomSeed","manipulation","initiallyActive","interaction","navigationButtons","edges","shadow","smooth","type","roundness","physics","SocialGraph","props","state","dimensions","this","container","console","log","setState","offsetWidth","offsetHeight","window","addEventListener","updateSize","removeEventListener","social","getGraph","getNetwork","network","setNetwork","params","emitClicked","graph","id","nodes","length","get","fit","my_options","events","click","handleClick","resize","handleResize","ref","el","style","React","Component","BAccordion","className","styles","accordion","preExpanded","allowMultipleExpanded","allowZeroExpanded","children","BAccordionItem","accordionItem","uuid","BAccordionTitle","accordionButton","BAccordionPanel","DefaultButton","href","button","onClick","CheckBox","checkBox","checked","onChange","checkMark","ResponsiveList","list","ResponsiveListItem","item","key","null_function","GroupsList","groups","title","emitSelected","emitToggleFilter","projects","Object","keys","forEach","_i","items","index","group","is_filtered","isFiltered","push","getName","event","project","projectHeader","projectBody","minWidth","ConnectionList","connections","listitems","map","i","name","_null_function","date","DateRangeButton","d","value","_isARoughDateObject","_isADateRangeObject","isNull","s","toSimpleString","toDateRange","KeyError","args","Error","captureStackTrace","ValueError","MissingError","_toDate","val","def","_isAMomentObject","moment","isValid","_get_min","d1","d2","toDate","_get_max","RoughDate","start","end","raw","toISOString","hasOwnProperty","delta","add","isFuzzy","format","e","getMonth","getDate","getFullYear","r","getEarliest","getLatest","DateRange","isExact","both","m","toMoment","error","other","s1","s2","getStart","getEnd","getRaw","lodash","cloneDeep","getLatestDate","getEarliestDate","getEarliestString","getLatestString","eq","lt","gt","unDry","Dry","registerClass","_clean","hasBounds","isInstant","getStartString","getEndString","getEarliestStart","merge","getLatestEnd","hasStart","hasEnd","min","max","my_start","other_start","my_end","other_end","contains","scale","getDelta","toString","tmp","dates","SourceList","sources","output","source","daterange","mergeAll","body","WeightsList","weights","weight","_filterWindow","values","ret","intersect","_filterProject","Person","titles","firstnames","surnames","suffixes","positions","affiliations","alive","gender","notes","orig_name","_getHook","_isAPersonObject","getID","ids","seen","nsources","source_id","includes","nprojects","person","getAlive","hook","join","parts","part","getTitle","getFirstName","getSurname","getSuffix","scores","content","is_anchor","node","label","shape","sort","c","_generate_person_uid","uid","uuidv4","substring","People","registry","_names","_isAPeopleObject","load","_updateHooks","names","canAdd","existing","getByName","clone","trim","toLowerCase","results","indexOf","funcs","people","timeline","getTimeLine","anchor","vis","DataSet","getNode","data","array","element","v","Business","_isABusinessObject","business","_generate_business_uid","Businesses","_isABusinessesObject","businesses","_mergeSources","Connection","n0","n1","shared","duration","correspondances","_isAConnectionObject","node0","getNode0","node1","getNode1","getDuration","getNode0Name","getNode1Name","getWeight","color","getColorFromType","getWeightFromType","from","to","scaling","arrows","middle","_generate_connection_uid","Connections","_isAConnectionsObject","connection","nnodes","_add","getNode0ID","getNode1ID","toEdge","Position","_isAPositionObject","canonical","makeCanonical","_generate_position_uid","Positions","_isAPositionsObject","position","_isApositionObject","Affiliation","_isAAffiliationObject","_generate_affiliation_uid","Affiliations","_isAAffiliationsObject","affiliation","Source","description","_isASourceObject","force","ne","_generate_source_uid","Sources","_isASourcesObject","Note","text","_isANoteObject","getText","_generate_note_uid","Notes","_isANotesObject","note","Project","url","_isAProjectObject","_generate_project_uid","Projects","_isAProjectsObject","Biographies","bios","_isABiographiesObject","biography","bio","slow_physics","Social","filter","cache","projectTimeLine","itemTimeLine","node_filters","edge_filters","max_window","_rebuilding","_isASocialObject","getHook","biographies","getWindow","filterWindow","project_filter","filterProject","source_filter","filterSource","node_filter","getConnectionsTo","group_filter","inGroup","new_window","getStartDate","getEndDate","fitted","_fitWindow","setWindow","clearCache","filtered","getNodeFilters","getEdgeFilters","getConnections","f","_getType","getPeople","find","getProjects","getNodes","getBusinesses","getEdges","setOptions","setTimeout","added","getPositions","getAffiliations","getSources","getNotes","default_image","default_text","getBiography","pages","a","getBiographies","InfoBox","image","getDescription","asources","getAffiliationSources","csources","getCorrespondanceSources","textAlign","getWeights","getType","extractData","tabs","panes","tabId","tabPanel","tab","tabFor","heroImage","alt","src","vertical","defaultTab","tablist","timeline_options","autoResize","horizontalScroll","showCurrentTime","showTooltips","verticalScroll","zoomable","order","b","DateInput","zoomButton","TimeLineView","_is_activated","is_active","redraw","$el","isActive","byUser","_byUser","emitWindowChanged","old_window","animation","shiftEarlier","shiftLater","zoomIn","zoomOut","getMaxWindow","getItems","activated","rangechangedHandler","rangeChangedHandler","selectHandler","buttonGroup","scrollButton","scrollLeft","datePicker","selected","openToDate","selectsStart","startDate","endDate","dateFormat","showMonthYearPicker","showYearDropdown","dropdownMode","customInput","setStartDate","selectsEnd","setEndDate","scrollRight","TimeLineBox","deactivate","activate","tabList","getProjectWindow","getProjectTimeLine","centerContainer","getItemWindow","getItemTimeLine","filterList","maxWidth","FilterBox","filter_text","getFilterText","emitClearFilters","filter_info","filterContainer","filterText","SlidingPanel","isOpen","size","minSize","maxSize","rightContainer","transition","SlideFromRight","horiz_size","vert_size","minHeight","maxHeight","bottomContainer","SlideFromBottom","topContainer","SlideFromTop","leftContainer","SlideFromLeft","CSSTransition","in","timeout","classNames","unmountOnExit","OverlayBox","loading","getURL","fadeIn","onLoad","hideSpinner","frameBorder","marginHeight","marginWidth","sandbox","emitClose","SearchResults","SearchBar","suggestions","searching","nextProps","searchText","setResults","setSuggestions","isSearching","target","autocomplete","isEmpty","which","keyCode","searchFor","button_style","searchButton","disabledButton","searchContainer","hamburgerButton","emitHamburgerClicked","searchBox","onKeyPress","onEnter","placeholder","onSearch","magnifier","resultContainer","closeResultButton","stopSearch","searchPending","display","isSuggesting","searchResult","hasResults","BrunelMenu","buttons","func","menuItem","menu","SocialApp","parse","graph_data","setAnchor","setMaxWindow","selected_item","overlay_item","isInfoPanelOpen","isTimeLinePanelOpen","isFilterPanelOpen","isHamburgerMenuOpen","isOverlayOpen","socialGraph","resetFilters","toggleFilter","selection","getSelection","selectNodes","setSelection","showInfo","closePanels","open","focus","location","reload","timeline_text","viewAbout","viewSource","resetAll","backgroundImage","onRequestClose","closeOverlay","contentLabel","modal","overlayClassName","base","modalOverlay","afterOpen","modalOverlayAfterOpen","beforeClose","modalOverlayBeforeClose","closeTimeoutMS","appElement","document","getElementById","closeOverlayButton","slotSelected","slotClicked","closePanelButton","slotWindowChanged","slotToggleFilter","slotClearFilters","graphContainer","toggleFilterPanel","toggleTimeLinePanel"],"mappings":"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","file":"static/js/4.3cd630b3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"accordion\":\"Accordion_accordion__34t4_\",\"accordionItem\":\"Accordion_accordionItem__VO6pK\",\"accordionButton\":\"Accordion_accordionButton__hVXWw\",\"accordionPanel\":\"Accordion_accordionPanel__1rZAH\",\"fadein\":\"Accordion_fadein__2cKpJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"DefaultButton_button__1Uv_G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"checkBox\":\"CheckBox_checkBox__36R4T\",\"checkMark\":\"CheckBox_checkMark__2h9Jd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"ResponsiveList_list__1-ZoE\",\"item\":\"ResponsiveList_item__3jhI7\"};","import React from \"react\";\nimport Graph from \"react-graph-vis\";\n\nconst fast_physics = {\n  enabled: true,\n  timestep: 0.5,\n};\n\nconst slow_physics = {...fast_physics};\nslow_physics.timestep = 0.1;\n\nconst options = {\n  height: \"200px\",\n  width: \"200px\",\n  layout:{\n    randomSeed: 42,\n  },\n  manipulation:{\n    enabled: false,\n    initiallyActive: false,\n  },\n  interaction:{\n    navigationButtons: true,\n  },\n  edges:{\n    shadow: false,\n    smooth: {\n      enabled: true,\n      type: \"continuous\",\n      roundness: 0.3,\n    },\n    width: 0.5,\n  },\n  physics: fast_physics,\n};\n\nclass SocialGraph extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      dimensions: {height:300, width:600},\n    };\n  }\n\n  componentDidMount() {\n    if (!this.container){\n      console.log(\"resize without container?\");\n    }\n\n    this.setState({\n      dimensions: {\n        width: this.container.offsetWidth,\n        height: this.container.offsetHeight,\n      },\n    });\n    window.addEventListener('resize', ()=>{this.updateSize()});\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', ()=>{this.updateSize()});\n  }\n\n  updateSize() {\n    this.setState({\n      dimensions: {\n        width: this.container.offsetWidth,\n        height: this.container.offsetHeight,\n      }\n    });\n  }\n\n  getGraph(){\n    const social = this.props.social;\n\n    if (social){\n      return social.getGraph();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getNetwork(){\n    const social = this.props.social;\n\n    if (social){\n      return social.getNetwork();\n    }\n    else{\n      return null;\n    }\n  }\n\n  setNetwork(network){\n    let social = this.props.social;\n\n    if (social){\n      social.setNetwork(network);\n    }\n  }\n\n  handleClick(params) {\n    let emitClicked = this.props.emitClicked;\n\n    if (emitClicked)\n    {\n      let graph = this.props.social.getGraph();\n\n      let id = null;\n\n      if (params.nodes.length > 0)\n      {\n        let node = graph.nodes.get(params.nodes[0]);\n        id = node.id;\n      }\n      else if (params.edges.length > 0)\n      {\n        let edge = graph.edges.get(params.edges[0]);\n        id = edge.id;\n      }\n\n      emitClicked(id);\n    }\n  }\n\n  handleResize(params){\n    // need to do this or else the network is rendered off-screen!\n    let network = this.getNetwork();\n    if (network){\n      network.fit();\n    }\n  }\n\n  render(){\n    let graph = this.getGraph();\n    let my_options = {...options};\n\n    // seem to need to do this so that the network will auto-scale\n    // as the screen is redrawn\n    my_options[\"height\"] = `${this.state.dimensions.height}px`;\n    my_options[\"width\"] = `${this.state.dimensions.width}px`;\n\n    if (graph){\n      let events = {click: (params) => {this.handleClick(params)},\n                    resize: (params) => {this.handleResize(params)}};\n\n      // need to enclose in a div that is set to take up 100% of the parent\n      // space and that holds a reference so that we can resize the\n      // graph as the parent resizes\n      return (<div ref={el => (this.container = el)}\n                   style={{width:\"100%\", height:\"100%\"}}>\n                <Graph\n                     graph={{nodes:graph.nodes.get(),\n                             edges:graph.edges.get()}}\n                     options={my_options}\n                     events={events}\n                     getNetwork={(network)=>{\n                                  this.setNetwork(network)}}/>\n              </div>\n             );\n    }\n    else{\n      return (<div ref={el => (this.container = el)}>\n                No data to display!!!\n              </div>);\n    }\n  }\n};\n\nexport default SocialGraph;\n","\nimport React from 'react';\n\nimport {\n  Accordion,\n  AccordionItem,\n  AccordionItemHeading,\n  AccordionItemButton,\n  AccordionItemPanel,\n} from 'react-accessible-accordion';\n\nimport styles from './Accordion.module.css';\n\nfunction BAccordion(props){\n  return <Accordion className={styles.accordion}\n                    preExpanded={props.preExpanded}\n                    allowMultipleExpanded={props.allowMultipleExpanded}\n                    allowZeroExpanded={props.allowZeroExpanded}>\n           {props.children}\n         </Accordion>;\n}\n\nfunction BAccordionItem(props){\n  return <AccordionItem className={styles.accordionItem}\n                        style={props.style}\n                        uuid={props.uuid}>\n           {props.children}\n         </AccordionItem>;\n}\n\nfunction BAccordionTitle(props){\n  return <AccordionItemHeading style={props.style}>\n           <AccordionItemButton className={styles.accordionButton}>\n             {props.children}\n           </AccordionItemButton>\n         </AccordionItemHeading>;\n}\n\nfunction BAccordionPanel(props){\n  return <AccordionItemPanel style={props.style}>\n           {props.children}\n         </AccordionItemPanel>;\n}\n\nexport {BAccordion as Accordion,\n        BAccordionItem as AccordionItem,\n        BAccordionTitle as AccordionTitle,\n        BAccordionPanel as AccordionPanel,\n        BAccordion as default};\n","\nimport React from 'react';\n\nimport styles from './DefaultButton.module.css';\n\nfunction DefaultButton(props){\n  return <button href=\"#\" className={styles.button}\n                 onClick={props.onClick}\n                 style={props.style}>\n          {props.children}\n         </button>;\n}\n\nexport default DefaultButton;\n","\nimport React from 'react';\n\nimport styles from './CheckBox.module.css';\n\nfunction CheckBox(props){\n  return <label className={styles.checkBox} style={props.style}>\n           <input type=\"checkbox\"\n             checked={props.checked}\n             onChange={props.onChange}/>\n           <span className={styles.checkMark}/>\n         </label>;\n}\n\nexport default CheckBox;\n","\nimport React from 'react';\n\nimport styles from './ResponsiveList.module.css';\n\nfunction ResponsiveList(props){\n  return <div className={styles.list}>\n           {props.children}\n         </div>;\n}\n\nfunction ResponsiveListItem(props){\n  return <div className={styles.item} key={props.key}>\n           {props.children}\n         </div>;\n}\n\nexport {ResponsiveListItem,\n        ResponsiveList,\n        ResponsiveList as default};\n","\nimport React from 'react';\n\nimport DefaultButton from './DefaultButton';\nimport CheckBox from './CheckBox';\nimport {ResponsiveList, ResponsiveListItem} from './ResponsiveList';\n\nimport styles from './GroupsList.module.css';\n\nfunction null_function(item){}\n\nfunction GroupsList({groups, title=null, emitSelected=null_function,\n                     emitToggleFilter=null_function, social=null}) {\n\n  if (!groups) {\n    return null;\n  }\n\n  let projects = [];\n\n  Object.keys(groups).forEach((key, _i)=>{\n    let items = [];\n\n    for (let index in groups[key]){\n      let group = social.get(groups[key][index]);\n      let is_filtered = social.isFiltered(group);\n\n      items.push(<ResponsiveListItem key={group.getName()}>\n                  <DefaultButton onClick={()=>{emitSelected(group);}}\n                                 style={{width:\"70%\"}}>\n                    {group.getName()}\n                  </DefaultButton>\n                  <CheckBox onChange={(event)=>{emitToggleFilter(group);}}\n                            style={{width:\"20%\"}}\n                            checked={is_filtered}/>\n                 </ResponsiveListItem>);\n    }\n\n    let project = social.get(key);\n    let is_filtered = social.isFiltered(project);\n\n    projects.push(\n      <div className={styles.project} key={project.getName()}>\n        <div className={styles.projectHeader}>\n          <DefaultButton style={{width:\"75%\"}}\n                         onClick={()=>{emitSelected(project);}}>\n            {project.getName()}\n          </DefaultButton>\n          <CheckBox onChange={(event)=>{emitToggleFilter(project);}}\n                    style={{width:\"20%\"}}\n                    checked={is_filtered}/>\n        </div>\n        <div className={styles.projectBody}>\n          <ResponsiveList style={{minWidth:\"100%\"}}>\n            {items}\n          </ResponsiveList>\n        </div>\n      </div>\n    );\n  });\n\n  if (title){\n    return (<div>\n              <div className={styles.title}>{title}</div>\n              {projects}\n            </div>);\n  }\n  else {\n    return projects;\n  }\n}\n\nexport default GroupsList;\n","\nimport React from 'react';\n\nimport DefaultButton from './DefaultButton';\nimport CheckBox from './CheckBox';\n\nimport {ResponsiveList, ResponsiveListItem} from './ResponsiveList';\n\nimport styles from './ConnectionList.module.css';\n\nfunction null_function(item){}\n\nfunction ConnectionList({connections, title, emitSelected=null_function,\n                         emitToggleFilter=null_function,\n                         social=null}) {\n  if (!connections || connections.length === 0) {\n    return null;\n  }\n\n  const listitems = connections.map((item) => {\n    let i = item;\n    let name = item.getName();\n\n    let is_filtered = false;\n\n    if (social){\n      is_filtered = social.isFiltered(item);\n    }\n\n    return (\n      <ResponsiveListItem key={name}>\n        <DefaultButton onClick={()=>{emitSelected(i);}}\n                       style={{width:\"70%\"}}>\n          {name}\n        </DefaultButton>\n        <CheckBox onChange={(event)=>{emitToggleFilter(i);}}\n                  checked={is_filtered}\n                  style={{width:\"20%\"}}/>\n      </ResponsiveListItem>);\n  });\n\n  if (title){\n    return (<div className={styles.connections}>\n              <div className={styles.title}>{title}</div>\n              <ResponsiveList>{listitems}</ResponsiveList>\n            </div>);\n  }\n  else{\n    return (<div className={styles.connections}>\n              <ResponsiveList>{listitems}</ResponsiveList>\n            </div>);\n  }\n}\n\nexport default ConnectionList;\n","\nimport React from 'react';\n\nimport DefaultButton from './DefaultButton';\n\nfunction _null_function(date){};\n\nfunction DateRangeButton(props){\n  let d = props.value;\n\n  if (!d){\n    return null;\n  }\n\n  if (!(d._isARoughDateObject || d._isADateRangeObject)){\n    return null;\n  }\n\n  if (d.isNull()){\n    return null;\n  }\n\n  let emitSelected = props.emitSelected;\n\n  if (!emitSelected){\n    emitSelected = _null_function;\n  }\n\n  let s = d.toSimpleString();\n\n  if (d._isARoughDateObject){\n    d = d.toDateRange();\n  }\n\n  return <DefaultButton onClick={()=>{emitSelected(d)}} style={props.style}>\n           {s}\n         </DefaultButton>;\n}\n\nexport default DateRangeButton;\n","\nclass KeyError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, KeyError)\n    }\n}\n\nclass ValueError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, ValueError)\n    }\n}\n\nclass DuplicateError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, DuplicateError)\n    }\n}\n\nclass MissingError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, MissingError)\n    }\n}\n\nexport {KeyError, ValueError, DuplicateError, MissingError};\n","\nimport Dry from 'json-dry';\nimport moment from 'moment';\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction _toDate(val, def=null){\n  if (val){\n    if (val._isAMomentObject){\n      return val;\n    }\n\n    /*if (val.toISOString){\n      val = val.toISOString();\n    }*/\n\n    let date = moment(val);\n\n    if (!date.isValid()){\n      console.log(`Invalid Date ${val}`);\n      throw new ValueError(`Invalid Date ${val}`);\n    }\n\n    return date;\n  }\n  else {\n    if (!def){\n      return null;\n    }\n    else{\n      return _toDate(def);\n    }\n  }\n}\n\n// NOTE FOR FUTURE - moment(x) < moment(y) === true\n//            even though moment(x).toDate() < moment(y).toDate() === false\n//   MOMENT COMPARISONS ARE BROKEN!\n\nfunction _get_min(d1, d2){\n  if (d1){\n    if (d2){\n      if (d1.toDate() < d2.toDate()){\n        return d1;\n      }\n      else{\n        return d2;\n      }\n    }\n    else{\n      return d1;\n    }\n  }\n  else{\n    return d2;\n  }\n}\n\nfunction _get_max(d1, d2){\n  if (d1){\n    if (d2){\n      if (d1.toDate() > d2.toDate()){\n        return d1;\n      }\n      else{\n        return d2;\n      }\n    }\n    else{\n      return d1;\n    }\n  }\n  else{\n    return d2;\n  }\n}\n\nfunction _merge_raw(s1, s2){\n  if (!s1){\n    return s2;\n  }\n  else if (!s2){\n    return s1;\n  }\n\n  return `${s1} + ${s2}`;\n}\n\nclass RoughDate{\n  constructor(state){\n    this.state = {\n      start: null,\n      end: null,\n      raw: null,\n    };\n\n    this.setState(state);\n\n    this._isARoughDateObject = true;\n  }\n\n  setState(state){\n    if (!state || state === \"null\" || state === null){\n      this.state = {start:null};\n      return;\n    }\n    else if (state._isARoughDateObject){\n      this.state = {...state.state};\n      return;\n    }\n    else if (state._isADateRangeObject){\n      this.state = state.toDate();\n      return;\n    }\n    else if (state._isAMomentObject){\n      this.state = {start: _toDate(state)};\n      return;\n    }\n    else if (state.toISOString){\n      this.state = {start:_toDate(state)};\n      return;\n    }\n    else if (state.hasOwnProperty(\"value\")){\n      this.state = {start:state.value};\n      return;\n    }\n    else if (typeof(state) === \"string\"){\n      this.state = {start:_toDate(state), raw:state};\n      return;\n    }\n\n    let start = _toDate(state.start);\n    let end = _toDate(state.end);\n\n    if (!start){\n      this.state = {start: null};\n      return;\n    }\n\n    this.state.start = start;\n    this.state.end = end;\n    this.state.raw = state.raw;\n\n    if (this.isNull()){\n      console.log(\"NULL RoughDate?\");\n      console.log(state);\n    }\n  }\n\n  static clone(item){\n    let d = new RoughDate();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static max(d1, d2){\n    return new RoughDate(_get_max(d1.getLatest(), d2.getLatest()));\n  }\n\n  static min(d1, d2){\n    return new RoughDate(_get_min(d1.getEarliest(), d2.getEarliest()));\n  }\n\n  static delta(d1, d2){\n    return d1.getLatestDate() - d2.getEarliestDate();\n  }\n\n  static getDelta(d1, d2){\n    return RoughDate.delta(d1, d2);\n  }\n\n  static eq(item, other){\n    if (item._isARoughDateObject && other._isARoughDateObject){\n      return item.getEarliestString() === other.getEarliestString() &&\n             item.getLatestString() === other.getLatestString();\n    }\n    else{\n      return false;\n    }\n  }\n\n  static lt(d1, d2){\n    if (d1.isNull() || d2.isNull()){\n      return false;\n    }\n    else{\n      return d1.getEarliestDate() < d2.getEarliestDate();\n    }\n  }\n\n  static gt(d1, d2){\n    if (d1.isNull() || d2.isNull()){\n      return false;\n    }\n    else {\n      return d1.getEarliestDate() > d2.getEarliestDate();\n    }\n  }\n\n  static le(d1, d2){\n    return RoughDate.eq(d1, d2) || RoughDate.lt(d1, d2);\n  }\n\n  static ge(d1, d2){\n    return RoughDate.eq(d1, d2) || RoughDate.gt(d1, d2);\n  }\n\n  static ne(d1, d2){\n    return !(RoughDate.eq(d1, d2));\n  }\n\n  add(delta){\n    if (this.state.start){\n      this.state.start.add(delta);\n    }\n\n    if (this.state.end){\n      this.state.end.add(delta);\n    }\n\n    this.state.raw = null;\n  }\n\n  sub(delta){\n    this.add(-delta);\n  }\n\n  isNull(){\n    if (this.state.start){\n      return false;\n    }\n    else{\n      return true;\n    }\n  }\n\n  isFuzzy(){\n    if (this.state.end){\n      return true;\n    }\n    else{\n      return false;\n    }\n  }\n\n  isExact(){\n    return !(this.isNull() || this.isFuzzy());\n  }\n\n  toString(){\n    if (this.isNull()){\n      return \"Date:unknown\";\n    }\n    else if (this.isFuzzy()){\n      return `~${this.state.start.format(\"LL\")}-${this.state.end.format(\"LL\")}`;\n    }\n    else{\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  toSimpleString(){\n    if (this.isNull()){\n      return \"unknown\";\n    }\n    else if (this.isFuzzy()){\n      let s = this.state.start.toDate();\n      let e = this.state.end.toDate();\n\n      if (s.getMonth() === 0 && e.getMonth() === 11 &&\n          s.getDate() === 1 && e.getDate() === 31){\n        //the dates span full years\n        if (s.getFullYear() === e.getFullYear()){\n          return s.getFullYear();\n        }\n        else{\n          return `${s.getFullYear()}-${e.getFullYear()}`;\n        }\n      }\n      else{\n        return `${s.getDate()}/${s.getMonth()+1}/${s.getFullYear()}-${e.getDate()}/${e.getMonth()+1}/${e.getFullYear()}`;\n      }\n    }\n    else{\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  getEarliest(){\n    let state = {\"start\": this.state.start};\n    let r = new RoughDate();\n    r.state = state;\n    return r;\n  }\n\n  getLatest(){\n    if (this.state.end){\n      let state = {\"start\": this.state.end};\n      let r = new RoughDate();\n      r.state = state;\n      return r;\n    }\n    else{\n      return this.getEarliest();\n    }\n  }\n\n  getEarliestDate(){\n    let d = this.getEarliest();\n\n    if (d){\n      return d.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getLatestDate(){\n    let d = this.getLatest();\n\n    if (d){\n      return d.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getEarliestString(){\n    let d = this.getEarliest();\n\n    if (d){\n      return d.toDate().toISOString();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getLatestString(){\n    let d = this.getLatest();\n\n    if (d){\n      return d.toDate().toISOString();\n    }\n    else{\n      return null;\n    }\n  }\n\n  toRange(){\n    if (this.isNull()){\n      return new DateRange();\n    }\n    else if (this.isExact()){\n      return new DateRange({both:this.state.start});\n    }\n    else{\n      return new DateRange({start:this.state.start, end:this.state.end});\n    }\n  }\n\n  toDateRange(){\n    if (this.isNull()){\n      return new DateRange();\n    }\n    else if (this.isFuzzy()){\n      return new DateRange({start:this.getEarliest(), end:this.getLatest()});\n    }\n    else{\n      return new DateRange({both:this.getEarliest()});\n    }\n  }\n\n  toDate(){\n    let m = this.toMoment();\n\n    if (m){\n      try{\n        return m.toDate();\n      }\n      catch(error){\n        console.log(`STRANGE ERROR ${error}`);\n        console.log(`m = ${m}`);\n        console.log(m);\n        return null;\n      }\n    }\n    else{\n      return null;\n    }\n  }\n\n  toMoment(){\n    if (this.isNull()){\n      return null;\n    }\n    else if (this.isExact()){\n      return this.state.start;\n    }\n    else{\n      throw ValueError(\n        `Cannot extract a single date from an inexact date ${this}`);\n    }\n  }\n\n  getRaw(){\n    return this.state.raw;\n  }\n\n  getStart(){\n    return this.state.start;\n  }\n\n  getEnd(){\n    if (this.state.end){\n      return this.state.end;\n    }\n    else {\n      return this.state.start;\n    }\n  }\n\n  merge(other){\n    let state = {start: _get_min(this.getStart(), other.getStart()),\n                 end: _get_max(this.getEnd(), other.getEnd()),\n                 raw: _merge_raw(this.getRaw(), other.getRaw())};\n\n    let date = new RoughDate();\n    date.state = state;\n\n    return date;\n  }\n}\n\nRoughDate.unDry = function(value){\n  return new RoughDate(value);\n}\n\nDry.registerClass(\"Date\", RoughDate);\n\nexport default RoughDate;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\nimport RoughDate from './RoughDate';\nimport {ValueError} from './Errors';\n\nfunction _clean(val){\n  if (!val || val._isADateRangeObject){\n    return val;\n  }\n  else if (val._isARoughDateObject){\n    return val.toDateRange();\n  }\n  else if (val.hasOwnProperty(\"start\") || val.hasOwnProperty(\"end\") ||\n           val.hasOwnProperty(\"both\") || val.hasOwnProperty(\"value\")){\n    return new DateRange(val);\n  }\n  else{\n    return new DateRange({both:new RoughDate(val)});\n  }\n}\n\nclass DateRange{\n  constructor(state){\n    this.state = {\n      start: null,\n      end: null\n    }\n\n    this.setState(state);\n    this._isADateRangeObject = true;\n  }\n\n  toString(){\n    if (this.hasBounds()){\n      if (this.isInstant()){\n        return `DateRange(${this.getStartString()})`;\n      }\n      else{\n        return `DateRange(${this.getStartString()} to ${this.getEndString()})`;\n      }\n    }\n    else{\n      return \"DateRange::unbounded\";\n    }\n  }\n\n  toSimpleString(){\n    if (this.hasBounds()){\n      if (this.isInstant()){\n        return this.getStart().toSimpleString();\n      }\n      else{\n        return this.getEarliestStart().merge(this.getLatestEnd()).toSimpleString();\n      }\n    }\n    else if (this.hasStart()){\n      return `${this.getStart().toSimpleString()}<=>future`;\n    }\n    else if (this.hasEnd()){\n      return `past<=>${this.getEnd().toSimpleString()}`;\n    }\n    else{\n      return \"past<=>future\";\n    }\n  }\n\n  static clone(item){\n    let d = new DateRange();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static eq(item, other){\n    if (item === other){\n      return true;\n    }\n\n    if (item.hasStart() && other.hasStart()){\n      if (!RoughDate.eq(item.getStart(), other.getStart())){\n        return false;\n      }\n    }\n    else if (item.hasStart() || other.hasStart()){\n      return false;\n    }\n\n    if (item.hasEnd() && other.hasEnd()){\n      if (!RoughDate.eq(item.getEnd(), other.getEnd())){\n        return false;\n      }\n    }\n    else if (item.hasEnd() || other.hasEnd()){\n      return false;\n    }\n\n    return true;\n  }\n\n  static mergeAll(dates){\n    if (!dates){\n      return null;\n    }\n    else if (dates._isARoughDateObject || dates._isARoughDateObject){\n      return dates;\n    }\n\n    if (!dates.length || dates.length === 0){\n      return null;\n    }\n\n    let date = dates[0];\n\n    if (dates.length > 1){\n      for (let i=1; i<dates.length; ++i){\n        if (!dates[i].isNull()){\n          if (date.isNull()){\n            date = dates[i];\n          }\n          else{\n            date = date.merge(dates[i]);\n          }\n        }\n      }\n    }\n\n    if (date.isNull()){\n      return null;\n    }\n    else{\n      return date;\n    }\n  }\n\n  merge(other){\n    if (!other){\n      return this;\n    }\n    else if (other._isARoughDateObject){\n      other = other.toDateRange();\n    }\n\n    return new DateRange({start: RoughDate.min(this.getEarliestStart(),\n                                               other.getEarliestStart()),\n                          end: RoughDate.max(this.getLatestEnd(),\n                                             other.getLatestEnd())});\n  }\n\n  hasBounds(){\n    return this.hasStart() && this.hasEnd();\n  }\n\n  hasEnd(){\n    if (this.state.end){\n      return !(this.state.end.isNull());\n    }\n    else{\n      return false;\n    }\n  }\n\n  hasStart(){\n    if (this.state.start){\n      return !(this.state.start.isNull());\n    }\n    else{\n      return false;\n    }\n  }\n\n  isInstant(){\n    return this.hasStart() && (this.state.start === this.state.end);\n  }\n\n  toDate(){\n    if (this.hasStart()){\n      if (this.hasEnd()){\n        return this.getStart().merge(this.getEnd());\n      }\n      else{\n        return this.getStart();\n      }\n    }\n    else{\n      return this.getEnd();\n    }\n  }\n\n  contains(date){\n    date = _clean(date);\n\n    if (!date){\n      return true;\n    }\n    else if (date._isADateRangeObject){\n      const my_start = this.getEarliestStart();\n      const other_start = date.getEarliestStart();\n\n      if (my_start && other_start){\n        if (RoughDate.gt(my_start, other_start)){ return false;}\n      }\n      else if (other_start){\n        return false;\n      }\n\n      const my_end = this.getLatestEnd();\n      const other_end = date.getLatestEnd();\n\n      if (my_end && other_end){\n        if (RoughDate.lt(my_end, other_end)){ return false;}\n      }\n      else if (my_end){\n        return false;\n      }\n\n      return true;\n    }\n    else {\n      throw new ValueError(`Invalid Date ${date}`);\n    }\n  }\n\n  intersect(other){\n    other = _clean(other);\n\n    if (!other){\n      return this;\n    }\n\n    if (!other.hasBounds()){\n      return this;\n    }\n    else if (!this.hasBounds()){\n      return other;\n    }\n\n    const start = RoughDate.max(this.getStart(), other.getStart());\n\n    if (!this.contains(start)){\n      return null;\n    }\n\n    const end = RoughDate.min(this.getEnd(), other.getEnd());\n\n    if (!this.contains(end)){\n      return null;\n    }\n\n    if (RoughDate.eq(start, end)){\n      return new DateRange({both:start});\n    }\n    else{\n      return new DateRange({start:start, end:end});\n    }\n  }\n\n  union(other){\n    other = _clean(other);\n    if (!other){\n      return this;\n    }\n    else if (!(other._isADateRangeObject)){\n      other = new DateRange({value:other});\n    }\n\n    const start = RoughDate.min(this.getStart(), other.getStart());\n    const end = RoughDate.max(this.getEnd(), other.getEnd());\n\n    if (RoughDate.eq(start, end)){\n      return new DateRange({both:start});\n    }\n    else{\n      return new DateRange({start:start, end:end});\n    }\n  }\n\n  getDelta(){\n    if (this.hasStart() && this.hasEnd()){\n      try{\n        return this.getLatestEnd().toDate() - this.getEarliestStart().toDate();\n      }\n      catch(error){\n        console.log(error);\n        console.log(this.hasStart(), this.hasEnd());\n        console.log(this.getStart(), this.getEnd());\n        console.log(this.getLatestEnd(), this.getEarliestStart());\n        throw error;\n      }\n    }\n    else{\n      return null;\n    }\n  }\n\n  zoomIn(scale=1){\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null){\n      delta = this.getDelta() / (2.0+scale);\n    }\n    else{\n      delta = 3600000;\n    }\n\n    if (state.start){\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(-delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  zoomOut(scale=1){\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null){\n      delta = this.getDelta() * scale;\n    }\n    else{\n      delta = 3600000;\n    }\n\n    if (state.start){\n      state.start.add(-delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftEarlier(delta=null){\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null){\n      if (state.start !== null && state.end !== null){\n        delta = -(this.getDelta());     //milliseconds\n      }\n      else{\n        delta = -3600000;     //milliseconds\n      }\n    }\n\n    if (state.start){\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftLater(delta=null){\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null){\n      if (state.start !== null && state.end !== null){\n        delta = this.getDelta();     //milliseconds\n      }\n      else{\n        delta = 3600000;     //milliseconds\n      }\n    }\n\n    if (state.start){\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  getStart(){\n    return this.state.start;\n  }\n\n  getEnd(){\n    return this.state.end;\n  }\n\n  getEarliestStart(){\n    if (this.hasStart()){\n      return this.getStart().getEarliest();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getLatestEnd(){\n    if (this.hasEnd()){\n      return this.getEnd().getLatest();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getStartDate(){\n    let e = this.getEarliestStart();\n    if (e){\n      return e.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getEndDate(){\n    let e = this.getLatestEnd();\n    if (e){\n      return e.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getStartString(){\n    if (this.state.start){\n      return this.state.start.toString();\n    }\n    else{\n      return \"unbounded\";\n    }\n  }\n\n  getEndString(){\n    if (this.state.end){\n      return this.state.end.toString();\n    }\n    else{\n      return \"unbounded\";\n    }\n  }\n\n  setState(state){\n    if (state){\n      if (state === \"null\" || state === null){\n        this.state = {\"start\":null, \"end\":null};\n        return;\n      }\n      else if (state._isADateRangeObject){\n        this.state = {...state.state};\n      }\n      else if (state._isARoughDateObject){\n        this.state = {\"start\":state, \"end\": state};\n      }\n      else if (state.hasOwnProperty(\"value\")){\n        this.setState(state.value);\n        return;\n      }\n      else if (state.hasOwnProperty(\"both\")){\n        this.state.start = new RoughDate(state.both);\n        this.state.end = this.state.start;\n      }\n      else if (typeof state === \"string\"){\n        this.state.start = new RoughDate(state);\n        this.state.end = this.state.start;\n      }\n      else {\n        let start = null;\n\n        if (state.start){\n          start = new RoughDate(state.start);\n\n          if (start.isNull()){\n            start = null;\n          }\n        }\n\n        let end = null;\n\n        if (state.end){\n          end = new RoughDate(state.end);\n\n          if (end.isNull()){\n            end = null;\n          }\n        }\n\n        if (start && end){\n          if (RoughDate.gt(start, end)){\n            let tmp = start;\n            start = end;\n            end = tmp;\n          }\n\n          if (RoughDate.gt(start, end)){\n            let tmp = RoughDate.min(start, end);\n            end = RoughDate.max(start, end);\n            start = tmp;\n          }\n        }\n\n        this.state.start = start;\n        this.state.end = end;\n      }\n    }\n    else{\n      this.state.start = null;\n      this.state.end = null;\n    }\n  }\n\n  toDry(){\n    return this.state;\n  }\n}\n\nDateRange.unDry = function(value){\n  return new DateRange(value);\n}\n\nDry.registerClass(\"DateRange\", DateRange);\n\nexport default DateRange;\n","\nimport React from 'react';\n\nimport DateRangeButton from './DateRangeButton';\nimport DateRange from '../model/DateRange';\nimport DefaultButton from './DefaultButton';\n\nimport {ResponsiveList, ResponsiveListItem} from './ResponsiveList';\n\nimport styles from './SourceList.module.css';\n\nfunction _null_function(item){}\n\nfunction SourceList(props){\n  let social = props.social;\n  let sources = props.sources;\n  let emitSelected = props.emitSelected;\n  let title = props.title;\n\n  if (!social || !sources){\n    return null;\n  }\n\n  if (!emitSelected){\n    emitSelected = _null_function;\n  }\n\n  let output = Object.keys(sources).map((key, index)=>{\n    let source = social.get(key);\n    let daterange = DateRange.mergeAll(sources[key]);\n\n    if (daterange){\n      return <ResponsiveListItem key={source.getName()}>\n               <DefaultButton onClick={()=>{emitSelected(source)}}\n                              style={{width:\"50%\"}}>\n                 {source.getName()}\n               </DefaultButton>\n               <DateRangeButton style={{width:\"40%\"}}\n                                value={daterange}\n                                emitSelected={emitSelected}/>\n             </ResponsiveListItem>;\n    }\n    else{\n      return <ResponsiveListItem key={source.getName()}>\n               <DefaultButton onClick={()=>{emitSelected(source)}}>\n                 {source.getName()}\n               </DefaultButton>\n             </ResponsiveListItem>;\n    }\n  });\n\n  if (!output || output.length === 0){\n    return null;\n  }\n\n  if (title){\n    return <div className={styles.container}>\n             <div className={styles.title}>{title}</div>\n             <div className={styles.body}>\n               <ResponsiveList>\n                 {output}\n               </ResponsiveList>\n             </div>\n           </div>;\n  }\n  else{\n    return <ResponsiveList>\n              {output}\n           </ResponsiveList>;\n  }\n}\n\nexport default SourceList;\n","\nimport React from 'react';\n\nimport DefaultButton from './DefaultButton';\nimport CheckBox from './CheckBox';\n\nimport styles from './WeightsList.module.css';\n\nfunction null_function(item){}\n\nfunction WeightsList({weights, title=null, emitSelected=null_function,\n                      emitToggleFilter=null_function, social=null,\n                      type=null}) {\n\n  if (!weights) {\n    return null;\n  }\n\n  let projects = [];\n\n  Object.keys(weights).forEach((key, _i)=>{\n    let project = social.get(key);\n    let is_filtered = social.isFiltered(project);\n\n    let weight = weights[key];\n\n    projects.push(\n      <div className={styles.project} key={project.getName()}>\n        <div className={styles.projectHeader}>\n          <DefaultButton style={{width:\"75%\"}}\n                         onClick={()=>{emitSelected(project);}}>\n            {project.getName()}\n          </DefaultButton>\n          <CheckBox onChange={(event)=>{emitToggleFilter(project);}}\n                    style={{width:\"20%\"}}\n                    checked={is_filtered}/>\n        </div>\n        <div className={styles.projectBody}>\n         Weight = {weight}, Type = {type}\n        </div>\n      </div>\n    );\n  });\n\n  if (title){\n    return (<div>\n              <div className={styles.title}>{title}</div>\n              {projects}\n            </div>);\n  }\n  else {\n    return projects;\n  }\n}\n\nexport default WeightsList;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nfunction _filterProject(values, project){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    if (!(key in project)){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nclass Person {\n  constructor(props){\n    this.state = {\n      name: null,\n      titles: [],\n      firstnames: [],\n      surnames: [],\n      suffixes: [],\n      id: null,\n      positions: {},\n      affiliations: {},\n      projects: {},\n      sources: {},\n      alive: null,\n      gender: null,\n      notes: [],\n      orig_name: null,\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPersonObject = true;\n  }\n\n  static clone(item){\n    let c = new Person();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode(){\n    return true;\n  }\n\n  inGroup(group){\n    if (group.getID){\n      let ids = {}\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key, _i)=>{\n      for (let index in this.state.affiliations[key]){\n        if (this.state.affiliations[key][index] in group){\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    Object.keys(this.state.positions).forEach((key, index)=>{\n      for (let index in this.state.positions[key]){\n        if (this.state.positions[key][index] in group){\n          seen[this.state.positions[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  filterSource(source){\n    if (source.getID){\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key, index)=>{\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id, index)=>{\n        if (s.includes(source_id)){\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources){\n      return null;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterProject(project){\n    if (project.getID)\n    {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key, index)=>{\n      if (key in project){\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects){\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n    let positions = _filterProject(this.state.positions, project);\n\n    if (affiliations !== this.state.affiliations ||\n      positions !== this.state.positions){\n      let person = new Person();\n      person.state = {...this.state};\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterWindow(window){\n    if (!window){\n      return this;\n    }\n    else if (!(window._isADateRangeObject)){\n      window = new DateRange(window);\n    }\n\n    window = window.intersect(this.getAlive());\n\n    if (!window){\n      return null;\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n    let positions = _filterWindow(this.state.positions, window);\n\n    if (affiliations !== this.state.affiliations ||\n        positions !== this.state.positions){\n      let person = new Person();\n      person.state = {...this.state};\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    }\n    else{\n      return this;\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.titles = setState(state.titles, []);\n      this.state.firstnames = setState(state.firstnames, []);\n      this.state.surnames = setState(state.surnames, []);\n      this.state.suffixes = setState(state.suffixes, []);\n      this.state.id = setState(state.id);\n      this.state.positions = setState(state.positions, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.projects = setState(state.projects, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.alive = setState(state.alive);\n      this.state.gender = setState(state.gender);\n      this.state.orig_name = setState(state.orig_name);\n      this.state.notes = setState(state.notes, [])\n\n      if (!this.state.orig_name || this.state.orig_name === \"None\"){\n         throw new ValueError(`No name for ${this}`);\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Person(${this.getName()})`;\n  }\n\n  getAlive(){\n    return this.state.alive;\n  }\n\n  getFirstName(){\n    if (this.state.firstnames){\n      return this.state.firstnames.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getTitle(){\n    if (this.state.titles){\n      return this.state.titles.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getSurname(){\n    if (this.state.surnames){\n      return this.state.surnames.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getSuffix(){\n    if (this.state.suffixes){\n      return this.state.suffixes.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getName(){\n    var parts = [];\n\n    let part = this.getTitle();\n    if (part){\n      parts.push(part);\n    }\n\n    part = this.getFirstName();\n    if (part){\n      parts.push(part);\n    }\n\n    part = this.getSurname();\n    if (part){\n      parts.push(part);\n    }\n\n    part = this.getSuffix();\n    if (part){\n      parts.push(part);\n    }\n\n    if (parts.length > 0){\n       return parts.join(\" \");\n    }\n    else{\n      return \"null\";\n    }\n  }\n\n  getAffiliations(){\n    return this.state.affiliations;\n  }\n\n  getSources(){\n    return this.state.sources;\n  }\n\n  getPositions(){\n    return this.state.positions;\n  }\n\n  getScores(){\n    return this.state.scores;\n  }\n\n  getBorn(){\n    if (this.state.alive){\n      return this.state.alive.getStart();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getDied(){\n    if (this.state.alive){\n      return this.state.alive.getEnd();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getTimeLine(){\n    const alive = this.getAlive();\n\n    if (!alive){\n      return null;\n    }\n    else{\n      return {start: alive.getStart(),\n              end: alive.getEnd(),\n              id: this.getID(),\n              content: this.getName(),\n             };\n    }\n  }\n\n  getNode(is_anchor=false){\n    let node = {id: this.getID(),\n                label: this.getName(),\n                title: this.getName(),\n                shape: \"dot\",\n               };\n\n    let weight = 10.0;\n\n    if (weight < 5.0){\n      weight = 5.0;\n    }\n    else if (weight > 20.0){\n      weight = 20.0;\n    }\n\n    node[\"size\"] = weight;\n\n    let keys = Object.keys(this.state.projects);\n\n    if (keys.length > 0){\n      node[\"group\"] = keys.sort().join(\":\");\n    }\n    else{\n      node[\"group\"] = \"unknown\";\n    }\n\n    if (is_anchor){\n      node[\"shape\"] = \"star\";\n      node[\"physics\"] = false;\n      node[\"group\"] = \"anchor\";\n      node[\"size\"] = 20.0;\n    }\n\n    return node;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPerson.unDry = function(value){\n  return new Person(value);\n}\n\nDry.registerClass(\"Person\", Person);\n\nexport default Person;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport vis from 'vis-network';\nimport lodash from 'lodash';\n\nimport Person from './Person';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_person_uid(){\n  let uid = uuidv4();\n  return \"P\" + uid.substring(uid.length-7);\n}\n\nclass People {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPeopleObject = true;\n    this.load(props);\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new People();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Person) || item._isAPersonObject;\n  }\n\n  add(person){\n    if (!this.canAdd(person)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(person.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(person);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    person = Person.clone(person);\n\n    let id = person.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Person ID ${person}`);\n      }\n\n      person._updateHooks(this._getHook);\n      this.state.registry[id] = person;\n    }\n    else{\n      let uid = _generate_person_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_person_uid();\n      }\n\n      person.state.id = uid;\n    }\n\n    person._updateHooks(this._getHook);\n    this._names[person.getName()] = person.getID();\n    this.state.registry[person.getID()] = person;\n\n    return person;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw new MissingError(`No Person with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Person || name._isAPersonObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No Person matches '${name}. Available People ` +\n                           `are '${keys}'`);\n  }\n\n  filter(funcs = []){\n    if (funcs.length === 0){\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let person = this.state.registry[key];\n\n      if (person){\n        for (let i=0; i<funcs.length; ++i){\n          person = funcs[i](person);\n          if (!person){\n            break;\n          }\n        }\n\n        if (person){\n          registry[key] = person;\n          names[person.getName()] = key;\n        }\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  getTimeLine(){\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let person = this.state.registry[key];\n      if (person){\n        let timeline = person.getTimeLine();\n        if (timeline){\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({anchor=null} = {}){\n    let nodes = new vis.DataSet();\n\n    if (anchor.getID){\n      anchor = anchor.getID();\n    }\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let person = this.state.registry[key];\n\n      if (person){\n        let node = null;\n        if (key === anchor){\n          node = person.getNode({is_anchor:true});\n        }\n        else{\n          node = person.getNode();\n        }\n\n        if (node){\n          nodes.add(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id){\n    let person = this.state.registry[id];\n\n    if (!person){\n      throw new MissingError(`No Person with ID ${id}`);\n    }\n\n    return person;\n  }\n\n  load(data){\n    if (data){\n      if (data.array){ data = data.array; }\n      data.forEach(element => {\n        let person = Person.load(element);\n        this.add(person);\n      });\n    }\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPeople.unDry = function(value){\n  let people = new People();\n  people.state = value;\n  people._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    people._names[v.getName()] = key;\n  });\n\n  return people;\n}\n\nDry.registerClass(\"People\", People);\n\nexport default People;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nfunction _filterProject(values, project){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    if (!(key in project)){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nclass Business {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      projects: {},\n      sources: {},\n      scores: {},\n      affiliations: {},\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isABusinessObject = true;\n  }\n\n  static clone(item){\n    let c = new Business();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode(){\n    return true;\n  }\n\n  inGroup(group){\n    if (group.getID){\n      let ids = {}\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key, _i)=>{\n      for (let index in this.state.affiliations[key]){\n        if (this.state.affiliations[key][index] in group){\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n\n  filterSource(source){\n    if (source.getID){\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key, index)=>{\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id, index)=>{\n        if (s.includes(source_id)){\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources){\n      return null;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterProject(project){\n    if (project.getID)\n    {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key, index)=>{\n      if (key in project){\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects){\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n\n    if (affiliations !== this.state.affiliations){\n      let business = new Business();\n      business.state = {...this.state};\n      business.state.affiliations = affiliations;\n      business._getHook = this._getHook;\n      return business;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterWindow(window){\n    if (!window){\n      return this;\n    }\n    else if (!(window._isADateRangeObject)){\n      window = new DateRange(window);\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n\n    if (affiliations !== this.state.affiliations){\n      let business = new Business();\n      business.state = {...this.state};\n      business.state.affiliations = affiliations;\n      business._getHook = this._getHook;\n      return business;\n    }\n    else{\n      return this;\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.projects = setState(state.projects, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.scores = setState(state.scores, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.notes = setState(state.notes, []);\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Business without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Business(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  getAffiliations(){\n    return this.state.affiliations;\n  }\n\n  getSources(){\n    return this.state.sources;\n  }\n\n  getScores(){\n    return this.state.scores;\n  }\n\n  getNode(is_anchor=false){\n    let node = {id: this.getID(),\n      label: this.getName(),\n      title: this.getName(),\n      shape: \"diamond\",\n     };\n\n    let weight = 10.0;\n\n    if (weight < 5.0){\n      weight = 5.0;\n    }\n    else if (weight > 20.0){\n      weight = 20.0;\n    }\n\n    node[\"size\"] = weight;\n\n    let keys = Object.keys(this.state.projects);\n\n    if (keys.length > 0){\n      node[\"group\"] = keys.sort().join(\":\");\n    }\n    else{\n      node[\"group\"] = \"unknown\";\n    }\n\n    if (is_anchor){\n      node[\"shape\"] = \"star\";\n      node[\"physics\"] = false;\n      node[\"group\"] = \"anchor\";\n      node[\"size\"] = 20.0;\n    }\n\n    return node;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nBusiness.unDry = function(value){\n  return new Business(value);\n}\n\nDry.registerClass(\"Business\", Business);\n\nexport default Business;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport vis from 'vis-network';\nimport lodash from 'lodash';\n\nimport Business from './Business';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_business_uid(){\n  let uid = uuidv4();\n  return \"B\" + uid.substring(uid.length-7);\n}\n\nclass Businesses {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isABusinessesObject = true;\n    this.load(props);\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Businesses();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Business) || item._isABusinessObject;\n  }\n\n  add(business){\n    if (!this.canAdd(business)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(business.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(business);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    business = Business.clone(business);\n\n    let id = business.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Business ID ${business}`);\n      }\n\n      business._updateHooks(this._getHook);\n      this.state.registry[id] = business;\n    }\n    else{\n      let uid = _generate_business_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_business_uid();\n      }\n\n      business.state.id = uid;\n    }\n\n    business._updateHooks(this._getHook);\n    this._names[business.getName()] = business.getID();\n    this.state.registry[business.getID()] = business;\n\n    return business;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No Business with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Business || name._isABusinessObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No Business matches '${name}. Available Businesses ` +\n                       `are '${keys}'`);\n  }\n\n  filter(funcs = []){\n    if (funcs.length === 0){\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let business = this.state.registry[key];\n\n      if (business){\n        for (let i=0; i<funcs.length; ++i){\n          business = funcs[i](business);\n          if (!business){\n            break;\n          }\n        }\n\n        if (business){\n          registry[key] = business;\n          names[business.getName()] = key;\n        }\n      }\n    });\n\n    let businesses = new Businesses();\n    businesses.state.registry = registry;\n    businesses._names = names;\n    businesses._updateHooks(this._getHook);\n\n    return businesses;\n  }\n\n  getTimeLine(){\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let business = this.state.registry[key];\n      if (business){\n        let timeline = business.getTimeLine();\n        if (timeline){\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({anchor=null} = {}){\n    let nodes = new vis.DataSet();\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let business = this.state.registry[key];\n\n      if (business){\n        let node = null;\n        if (key === anchor){\n          node = business.getNode({is_anchor:true});\n        }\n        else{\n          node = business.getNode();\n        }\n\n        if (node){\n          nodes.add(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id){\n    let business = this.state.registry[id];\n\n    if (!business){\n      throw new MissingError(`No Business with ID ${id}`);\n    }\n\n    return business;\n  }\n\n  load(data){\n    if (data){\n      if (data.array){ data = data.array; }\n      data.forEach(element => {\n        let business = Business.load(element);\n        this.add(business);\n      });\n    }\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nBusinesses.unDry = function(value){\n  let businesses = new Businesses();\n  businesses.state = value;\n  businesses._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    businesses._names[v.getName()] = key;\n  });\n\n  return businesses;\n}\n\nDry.registerClass(\"Businesses\", Businesses);\n\nexport default Businesses;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _mergeSources(state, other, key){\n  state = state[key];\n  other = other[key]\n\n  Object.keys(other).forEach((key, index) => {\n    if (!(key in state)){\n      state[key] = other[key];\n    }\n    else{\n      for (let item in other[key]){\n        if (!(item in state[key])){\n          state[key].push(item);\n        }\n      }\n    }\n  });\n}\n\nclass Connection {\n  constructor(props){\n    this.state = {\n      id: null,\n      n0: null,\n      n1: null,\n      shared: null,\n      type: null,\n      duration: null,\n      affiliations: null,\n      correspondances: null,\n      projects: null,\n      notes: null,\n    };\n\n    this.setState(props);\n    this._getHook = null;\n    this._isAConnectionObject = true;\n  }\n\n  static clone(item){\n    let c = new Connection();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  getName(){\n    let n0 = this.state.n0;\n    let n1 = this.state.n1;\n\n    if (n0 <= n1){\n      return `${n0}<=>${n1}`;\n    }\n    else{\n      return `${n1}<=>${n0}`;\n    }\n  }\n\n  getNode0(){\n    if (this._getHook){\n      return this._getHook(this.state.n0);\n    }\n    else {\n      return this.state.n0;\n    }\n  }\n\n  getNode1(){\n    if (this._getHook){\n      return this._getHook(this.state.n1);\n    }\n    else {\n      return this.state.n1;\n    }\n  }\n\n  getNode0ID(){\n    return this.state.n0;\n  }\n\n  getNode1ID(){\n    return this.state.n1;\n  }\n\n  getNode0Name(){\n    let node0 = this.getNode0();\n\n    try{\n      return node0.getName();\n    }\n    catch(error){\n      return node0;\n    }\n  }\n\n  getNode1Name(){\n    let node1 = this.getNode1();\n\n    try{\n      return node1.getName();\n    }\n    catch(error){\n      return node1;\n    }\n  }\n\n  getDuration(){\n    return this.state.duration;\n  }\n\n  getAffiliationSources(){\n    return this.state.affiliations;\n  }\n\n  getCorrespondanceSources(){\n    return this.state.correspondances;\n  }\n\n  filterSource(source){\n    if (source.getID){\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(source).forEach((key, index)=>{\n      if (this.state.affiliations[key] || this.state.correspondances[key]){\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nsources){\n      return null;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterProject(project){\n    if (project.getID){\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key, index)=>{\n      if (key in project){\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects){\n      return null;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterWindow(window){\n    if (!window){\n      return this;\n    }\n    else if (!(window._isADateRangeObject)){\n      window = new DateRange(window);\n    }\n\n    if (!window){\n      return this;\n    }\n\n    let duration = this.getDuration();\n\n    if (!duration){\n      return this;\n    }\n\n    let intersect = window.intersect(duration);\n\n    if (!intersect){\n      return null;\n    }\n    else{\n      return this;\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.id = setState(state.id);\n      this.state.n0 = setState(state.n0);\n      this.state.n1 = setState(state.n1);\n      this.state.shared = setState(state.shared, []);\n      this.state.type = setState(state.type);\n      this.state.duration = setState(state.duration);\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.correspondances = setState(state.correspondances, {});\n      this.state.notes = setState(state.notes, []);\n      this.state.weights = setState(state.weights, {});\n      this.state.projects = setState(state.projects, {});\n\n      if (!this.state.n0 || !this.state.n1){\n        throw new ValueError(`Invalid connection ${this}`);\n      }\n    }\n  }\n\n  merge(other){\n    if (!this._getHook){\n      if (other._getHook){\n        return other.merge(this);\n      }\n    }\n\n    let state = lodash.cloneDeep(this.state);\n\n    Object.keys(other.state.shared).forEach((key, index) => {\n      if (!(key in state.shared)){\n        state.shared[key] = other.state.shared[key];\n      }\n    });\n\n    Object.keys(other.state.notes).forEach((key, index) => {\n      if (!(key in state.notes)){\n        state.notes[key] = other.state.notes[key];\n      }\n    });\n\n    _mergeSources(state, other.state, \"affiliations\");\n    _mergeSources(state, other.state, \"correspondances\");\n\n    state.duration = state.duration.merge(other.state.duration);\n\n    let c = new Connection();\n    c.state = state;\n    c._getHook = this._getHook;\n\n    return c;\n  }\n\n  toString(){\n    return `Connection(${this.getNode0Name()}<=>${this.getNode1Name()})`;\n  }\n\n  getColorFromType(){\n    switch(this.state.type){\n      case \"direct\":\n        return \"rgb(180,150,150)\";\n      case \"indirect\":\n        return \"rgb(180,180,180)\";\n      default:\n        console.log(`Unknown type? ${this.state.type}`);\n        return \"red\";\n    }\n  }\n\n  getType(){\n    return this.state.type;\n  }\n\n  getWeights(){\n    return this.state.weights;\n  }\n\n  getWeight(){\n    let weight = 1.0;\n\n    Object.keys(this.state.weights).forEach((key, index)=>{\n      weight += this.state.weights[key];\n    });\n\n    return weight;\n  }\n\n  getWeightFromType(){\n    let weight = this.getWeight();\n\n    switch(this.state.type){\n      case \"direct\":\n        return 1.0 * weight;\n      case \"indirect\":\n        return 0.5 * weight;\n      default:\n        console.log(`Unknown type? ${this.state.type}`);\n        return 0.5 * weight;\n    }\n  }\n\n  toEdge(){\n    let color = this.getColorFromType();\n    let weight = this.getWeightFromType();\n\n    let edge = {\n      id:this.getID(),\n      from:this.state.n0,\n      to:this.state.n1,\n      value:weight,\n      color:color,\n      scaling:{min:0.5, max:2},\n      arrows:{to:false, middle:false, from:false},\n    };\n\n    return edge;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nConnection.unDry = function(value){\n  return new Connection(value);\n}\n\nConnection.load = function(data, people=null){\n  return new Connection({name: data.name});\n}\n\nDry.registerClass(\"Connection\", Connection);\n\nexport default Connection;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport vis from 'vis-network';\nimport lodash from 'lodash';\n\nimport Connection from './Connection';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_connection_uid(){\n  let uid = uuidv4();\n  return \"C\" + uid.substring(uid.length-7);\n}\n\nclass Connections {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAConnectionsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Connections();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Connection) || item._isAConnectionObject;\n  }\n\n  add(connection){\n    if (!this.canAdd(connection)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(connection.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(connection);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    connection = Connection.clone(connection);\n\n    let id = connection.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Connection ID ${connection}`);\n      }\n    }\n    else{\n      let uid = _generate_connection_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_connection_uid();\n      }\n\n      connection.state.id = uid;\n    }\n\n    connection._updateHooks(this._getHook);\n    this._names[connection.getName()] = connection.getID();\n    this.state.registry[connection.getID()] = connection;\n\n    return connection;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No connection with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Connection || name._isAConnectionObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No connection matches '${name}. Available Connections ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let connection = this.state.registry[id];\n\n    if (!connection){\n      throw new MissingError(`No Connection with ID ${id}`);\n    }\n\n    return connection;\n  }\n\n  filter(funcs = []){\n    if (funcs.length === 0){\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let connection = this.state.registry[key];\n\n      if (connection){\n        for (let i=0; i<funcs.length; ++i){\n          connection = funcs[i](connection);\n          if (!connection){\n            break;\n          }\n        }\n\n        if (connection){\n          registry[key] = connection;\n          names[connection.getName()] = key;\n        }\n      }\n    });\n\n    let connections = new Connections();\n    connections.state.registry = registry;\n    connections._names = names;\n    connections._updateHooks(this._getHook);\n\n    return connections;\n  }\n\n  getConnectionsTo(item){\n    if (item.getID){\n      let id = item.getID();\n      item = {};\n      item[id] = 1;\n    }\n\n    let nnodes = Object.keys(item).length;\n\n    let seen = {};\n\n    function _add(id){\n      if (!(id in seen)){\n        seen[id] = 1;\n      }\n      else{\n        seen[id] += 1;\n      }\n    }\n\n    for (let key in this.state.registry){\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() in item){\n        _add(connection.getNode1ID());\n      }\n      else if (connection.getNode1ID() in item){\n        _add(connection.getNode0ID());\n      }\n    }\n\n    let connections = [];\n\n    if (this._getHook){\n      Object.keys(seen).forEach((key, index)=>{\n        try{\n          if (seen[key] === nnodes){\n            connections.push(this._getHook(key));\n          }\n        }\n        catch(error){}\n      });\n    }\n    else{\n      connections = Object.keys(seen);\n    }\n\n    return connections;\n  }\n\n  getEdges(){\n    let edges = new vis.DataSet();\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let connection = this.state.registry[key];\n      edges.add(connection.toEdge());\n    });\n\n    return edges;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nConnections.unDry = function(value){\n  let connections = new Connections();\n  connections.state = value;\n  connections._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    connections._names[v.getName()] = key;\n  });\n\n  return connections;\n}\n\nDry.registerClass(\"Connections\", Connections);\n\nexport default Connections;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Position {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPositionObject = true;\n  }\n\n  static clone(item){\n    let c = new Position();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  static makeCanonical(name){\n    if (!name){\n      return null;\n    }\n    else{\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Position.makeCanonical(this.state.name);\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Position without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Position(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPosition.unDry = function(value){\n  return new Position(value);\n}\n\nDry.registerClass(\"Position\", Position);\n\nexport default Position;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Position from './Position';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_position_uid(){\n  let uid = uuidv4();\n  return \"Q\" + uid.substring(uid.length-7);\n}\n\nclass Positions {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPositionsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Positions();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Position) || item._isAPositionObject;\n  }\n\n  add(position){\n    if (!this.canAdd(position)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(position.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(position);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    position = Position.clone(position);\n\n    let id = position.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Position ID ${position}`);\n      }\n\n      position._updateHooks(this._getHook);\n      this.state.registry[id] = position;\n    }\n    else{\n      let uid = _generate_position_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_position_uid();\n      }\n\n      position.state.id = uid;\n    }\n\n    position._updateHooks(this._getHook);\n    this._names[position.getName()] = position.getID();\n    this.state.registry[position.getID()] = position;\n\n    return position;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No position with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Position || name._isApositionObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No position matches '${name}. Available Positions ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let position = this.state.registry[id];\n\n    if (!position){\n      throw new MissingError(`No Position with ID ${id}`);\n    }\n\n    return position;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPositions.unDry = function(value){\n  let positions = new Positions();\n  positions.state = value;\n  positions._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    positions._names[v.getName()] = key;\n  });\n\n  return positions;\n}\n\nDry.registerClass(\"Positions\", Positions);\n\nexport default Positions;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Affiliation {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAAffiliationObject = true;\n  }\n\n  static clone(item){\n    let c = new Affiliation();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  static makeCanonical(name){\n    if (!name){\n      return null;\n    }\n    else{\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Affiliation.makeCanonical(this.state.name);\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Affiliation without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Affiliation(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nAffiliation.unDry = function(value){\n  return new Affiliation(value);\n}\n\nDry.registerClass(\"Affiliation\", Affiliation);\n\nexport default Affiliation;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Affiliation from './Affiliation';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_affiliation_uid(){\n  let uid = uuidv4();\n  return \"A\" + uid.substring(uid.length-7);\n}\n\nclass Affiliations {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAAffiliationsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Affiliations();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Affiliation) || item._isAAffiliationObject;\n  }\n\n  add(affiliation){\n    if (!this.canAdd(affiliation)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(affiliation.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(affiliation);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    affiliation = Affiliation.clone(affiliation);\n\n    let id = affiliation.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Affiliation ID ${affiliation}`);\n      }\n\n      affiliation._updateHooks(this._getHook);\n      this.state.registry[id] = affiliation;\n    }\n    else{\n      let uid = _generate_affiliation_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_affiliation_uid();\n      }\n\n      affiliation.state.id = uid;\n    }\n\n    affiliation._updateHooks(this._getHook);\n    this._names[affiliation.getName()] = affiliation.getID();\n    this.state.registry[affiliation.getID()] = affiliation;\n\n    return affiliation;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No affiliation with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Affiliation || name._isAAffiliationObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No affiliation matches '${name}. Available Affiliations ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let affiliation = this.state.registry[id];\n\n    if (!affiliation){\n      throw new MissingError(`No Affiliation with ID ${id}`);\n    }\n\n    return affiliation;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nAffiliations.unDry = function(value){\n  let affiliations = new Affiliations();\n  affiliations.state = value;\n  affiliations._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    affiliations._names[v.getName()] = key;\n  });\n\n  return affiliations;\n}\n\nDry.registerClass(\"Affiliations\", Affiliations);\n\nexport default Affiliations;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport RoughDate from './RoughDate';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Source {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      date: null,\n      description: null,\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isASourceObject = true;\n  }\n\n  static clone(item){\n    let c = new Source();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  getDate(){\n    return this.state.date;\n  }\n\n  updateDate(date, force=false){\n    if (!(date instanceof RoughDate || date._isARoughDateObject)){\n      date = new RoughDate(date);\n    }\n\n    if (date.isNull()){\n      return false;\n    }\n\n    if (this.getDate().isNull()){\n      this.state.date = date;\n      return true;\n    }\n\n    if (RoughDate.ne(this.getDate(), date)){\n      if (force){\n        this.state.date = this.getDate().merge(date);\n        return true;\n      }\n      else{\n        console.log(`Disagreement of date for ${this}: ` +\n                    `${this.getDate()} vs ${date}`);\n      }\n    }\n\n    return false;\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.description = setState(state.description);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n      this.state.date = setState(state.date, new RoughDate());\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Source without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Source(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  getDescription(){\n    return this.state.description;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nSource.unDry = function(value){\n  return new Source(value);\n}\n\nDry.registerClass(\"Source\", Source);\n\nexport default Source;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Source from './Source';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_source_uid(){\n  let uid = uuidv4();\n  return \"S\" + uid.substring(uid.length-7);\n}\n\nclass Sources {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isASourcesObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Sources();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Source) || item._isASourceObject;\n  }\n\n  add(source){\n    if (!this.canAdd(source)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(source.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(source);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    source = Source.clone(source);\n\n    let id = source.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Source ID ${source}`);\n      }\n\n      source._updateHooks(this._getHook);\n      this.state.registry[id] = source;\n    }\n    else{\n      let uid = _generate_source_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_source_uid();\n      }\n\n      source.state.id = uid;\n    }\n\n    source._updateHooks(this._getHook);\n    this._names[source.getName()] = source.getID();\n    this.state.registry[source.getID()] = source;\n\n    return source;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No source with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Source || name._isASourceObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No source matches '${name}. Available sources ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let source = this.state.registry[id];\n\n    if (!source){\n      throw new MissingError(`No Source with ID ${id}`);\n    }\n\n    return source;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nSources.unDry = function(value){\n  let sources = new Sources();\n  sources.state = value;\n  sources._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    sources._names[v.getName()] = key;\n  });\n\n  return sources;\n}\n\nDry.registerClass(\"Sources\", Sources);\n\nexport default Sources;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Note {\n  constructor(props){\n    this.state = {\n      text: null,\n      id: null,\n      sources: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isANoteObject = true;\n  }\n\n  static clone(item){\n    let c = new Note();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  setState(state){\n    if (state){\n      this.state.text = setState(state.text);\n      this.state.id = setState(state.id);\n      this.state.sources = setState(state.sources, []);\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  toString(){\n    return `Note(${this.getText()})`;\n  }\n\n  getText(){\n    return this.state.text;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nNote.unDry = function(value){\n  return new Note(value);\n}\n\nDry.registerClass(\"Note\", Note);\n\nexport default Note;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Note from './Note';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_note_uid(){\n  let uid = uuidv4();\n  return \"N\" + uid.substring(uid.length-7);\n}\n\nclass Notes {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isANotesObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Notes();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Note) || item._isANoteObject;\n  }\n\n  add(note){\n    if (!this.canAdd(note)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(note.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(note);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    note = note.clone(Note);\n\n    let id = note.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Note ID ${note}`);\n      }\n\n      note._updateHooks(this._getHook);\n      this.state.registry[id] = Note;\n    }\n    else{\n      let uid = _generate_note_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_note_uid();\n      }\n\n      note.state.id = uid;\n    }\n\n    note._updateHooks(this._getHook);\n    this._names[note.getName()] = note.getID();\n    this.state.registry[note.getID()] = note;\n\n    return note;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No Note with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Note || name._isANoteObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No Note matches '${name}. Available Notes ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let Note = this.state.registry[id];\n\n    if (!Note){\n      throw new MissingError(`No Note with ID ${id}`);\n    }\n\n    return Note;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nNotes.unDry = function(value){\n  let notes = new Notes();\n  notes.state = value;\n  notes._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    notes._names[v.getName()] = key;\n  });\n\n  return notes;\n}\n\nDry.registerClass(\"Notes\", Notes);\n\nexport default Notes;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Project {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      url: null,\n      duration: new DateRange(),\n      notes: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAProjectObject = true;\n  }\n\n  static clone(item){\n    let c = new Project();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, {});\n      this.state.url = setState(state.url, null);\n      this.state.duration = new DateRange({value:state.duration});\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have a Project without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Project(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  getURL(){\n      return this.state.url;\n  }\n\n  getDuration(){\n    return this.state.duration;\n  }\n\n  getTimeLine(){\n    const duration = this.getDuration();\n\n    if (duration && duration.hasBounds()){\n      return {start: duration.getEarliestStart().toDate(),\n              end: duration.getLatestEnd().toDate(),\n              id: this.getID(),\n              content: this.getName(),\n             };\n    }\n    else{\n      return null;\n    }\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nProject.unDry = function(value){\n  return new Project(value);\n}\n\nDry.registerClass(\"Project\", Project);\n\nexport default Project;\n","\nimport Dry from 'json-dry';\nimport uuidv4 from 'uuid';\nimport lodash from 'lodash';\n\nimport Project from './Project';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_project_uid(){\n  let uid = uuidv4();\n  return \"J\" + uid.substring(uid.length-7);\n}\n\nclass Projects {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAProjectsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Projects();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Project) || item._isAProjectObject;\n  }\n\n  add(project){\n    if (!this.canAdd(project)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(project.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(project);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    project = Project.clone(project);\n\n    let id = project.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Project ID ${project}`);\n      }\n\n      project._updateHooks(this._getHook);\n      this.state.registry[id] = project;\n    }\n    else{\n      let uid = _generate_project_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_project_uid();\n      }\n\n      project.state.id = uid;\n    }\n\n    project._updateHooks(this._getHook);\n    this._names[project.getName()] = project.getID();\n    this.state.registry[project.getID()] = project;\n\n    return project;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No project with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Project || name._isAProjectObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No project matches '${name}. Available projects ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let project = this.state.registry[id];\n\n    if (!project){\n      throw new MissingError(`No Project with ID ${id}`);\n    }\n\n    return project;\n  }\n\n  getTimeLine(){\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let project = this.state.registry[key];\n      if (project){\n        let timeline = project.getTimeLine();\n        if (timeline){\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nProjects.unDry = function(value){\n  let projects = new Projects();\n  projects.state = value;\n  projects._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    projects._names[v.getName()] = key;\n  });\n\n  return projects;\n}\n\nDry.registerClass(\"Projects\", Projects);\n\nexport default Projects;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\n\nclass Biographies{\n  constructor(){\n    this.state = {\n      bios: {}\n    };\n\n    this._getHook = null;\n    this._isABiographiesObject = true;\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  static clone(item){\n    let c = new Biographies();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  get(node){\n    if (!node){\n      return null;\n    }\n    else if (node.getID){\n      node = node.getID();\n    }\n\n    return this.state.bios[node];\n  }\n\n  getNode(id){\n    if (this._getHook){\n      return this._getHook(id);\n    }\n    else{\n      return id;\n    }\n  }\n\n  add(node, biography){\n    if (!node || !biography){\n      return null;\n    }\n    else if (node.getID){\n      node = node.getID();\n    }\n\n    let bio = this.state.bios[node];\n\n    if (bio){\n      console.log(`There is already a bio for ${this.getNode(node)}`);\n      biography = `${bio}\\n${biography}`;\n    }\n\n    this.state.bios[node] = biography;\n  }\n}\n\nBiographies.unDry = function(value){\n  let bios = new Biographies();\n  bios.state = value;\n  return bios;\n}\n\nDry.registerClass(\"Biographies\", Biographies);\n\nexport default Biographies;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\nimport People from './People';\nimport Businesses from './Businesses';\nimport Connections from './Connections';\nimport Positions from './Positions';\nimport Affiliations from './Affiliations';\nimport Sources from './Sources';\nimport Notes from './Notes';\nimport Projects from './Projects';\nimport Biographies from './Biographies';\nimport DateRange from './DateRange';\n\nimport { ValueError } from './Errors';\n\nconst fast_physics = {\n  enabled: true,\n  timestep: 0.5,\n};\n\nconst slow_physics = {...fast_physics};\nslow_physics.timestep = 0.1;\n\nclass Social {\n  constructor(props) {\n    if (props){\n      this.state = props;\n    }\n    else{\n      this.state = {};\n    }\n\n    this.state.anchor = null;\n    this.state.filter = {};\n    this.state.cache = {graph:null,\n                        projectTimeLine:null,\n                        itemTimeLine:null,\n                        node_filters:null,\n                        edge_filters:null,\n                        people:null,\n                        businesses:null,\n                        connections:null};\n    this.state.network = null;\n    this.state.window = new DateRange();\n    this.state.max_window = new DateRange();\n    this._rebuilding = 0;\n\n    this._isASocialObject = true;\n  }\n\n  static clone(item){\n    let c = new Social();\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks() {\n    let getHook = (id) => { return this.get(id); };\n\n    let state = { ...this.state };\n\n    if (!(this.state.people instanceof People)) {\n      state.people = new People();\n    }\n    else {\n      state.people = this.state.people;\n    }\n\n    if (!(this.state.businesses instanceof Businesses)) {\n      state.businesses = new Businesses();\n    }\n    else {\n      state.businesses = this.state.businesses;\n    }\n\n    if (!(this.state.connections instanceof Connections)) {\n      state.connections = new Connections();\n    } else {\n      state.connections = this.state.connections;\n    }\n\n    if (!(this.state.positions instanceof Positions)) {\n      state.positions = new Positions();\n    }\n    else {\n      state.positions = this.state.positions;\n    }\n\n    if (!(this.state.affiliations instanceof Affiliations)) {\n      state.affiliations = new Affiliations();\n    }\n    else {\n      state.affiliations = this.state.affiliations;\n    }\n\n    if (!(this.state.sources instanceof Sources)) {\n      state.sources = new Sources();\n    }\n    else {\n      state.sources = this.state.sources;\n    }\n\n    if (!(this.state.notes instanceof Notes)) {\n      state.notes = new Notes();\n    }\n    else {\n      state.notes = this.state.notes;\n    }\n\n    if (!(this.state.projects instanceof Projects)){\n      state.projects = new Projects();\n    }\n    else {\n      state.projects = this.state.projects;\n    }\n\n    if (!(this.state.biographies instanceof Biographies)){\n      state.biographies = new Biographies();\n    }\n    else{\n      state.biographies = this.state.biographies;\n    }\n\n    this.state = state;\n\n    for (let key in this.state) {\n      try{\n        this.state[key]._updateHooks(getHook);\n      }\n      catch(error){}\n    }\n  }\n\n  clearCache(){\n    this.state.cache = {graph:null,\n                        projectTimeLine:null,\n                        itemTimeLine:null,\n                        node_filters:null,\n                        edge_filters:null,\n                        people:null,\n                        businesses:null,\n                        connections:null};\n    this._rebuilding = 0;\n  }\n\n  getNodeFilters(){\n    if (this.state.cache.node_filters){\n      return this.state.cache.node_filters;\n    }\n\n    this._rebuilding += 1;\n    this.state.cache.node_filters = [];\n\n    // must do time first, as this can affect all of the other filters!\n    let window = this.getWindow();\n\n    if (window.hasStart() || window.hasEnd()){\n      this.state.cache.node_filters.push((item)=>{\n        try{\n          return item.filterWindow(window);\n        }\n        catch(error){\n          console.log(`ERROR ${error}: ${item}`);\n          return item;\n        }\n      });\n    }\n\n    const project_filter = this.state.filter.project;\n\n    if (project_filter){\n      this.state.cache.node_filters.push((item)=>{\n        return item.filterProject(project_filter);\n      });\n    }\n\n    const source_filter = this.state.filter.source;\n\n    if (source_filter){\n      this.state.cache.node_filters.push((item)=>{\n        return item.filterSource(source_filter);\n      });\n    }\n\n    const node_filter = this.state.filter.node;\n\n    if (node_filter) {\n      let connections = this.getConnectionsTo(node_filter);\n      let filter = {...node_filter};\n\n      for (let connection in connections) {\n        let node = connections[connection];\n        filter[node.getID()] = 1;\n      }\n\n      this.state.cache.node_filters.push((item)=>{\n        if (item.getID() in filter){\n          return item;\n        }\n        else{\n          return null;\n        }\n      });\n    }\n\n    const group_filter = this.state.filter.group;\n\n    if (group_filter){\n      this.state.cache.node_filters.push((item)=>{\n        try{\n          if (item.inGroup(group_filter)){\n            return item;\n          }\n          else{\n            return null;\n          }\n        }\n        catch(error){\n          console.log(`Filter error: ${error}`);\n          return item;\n        }\n      });\n    }\n\n    this._rebuilding -= 1;\n    return this.state.cache.node_filters;\n  }\n\n  getEdgeFilters(){\n    if (!this.state.cache.edge_filters){\n      this.state.cache.edge_filters = [];\n\n      // must do time first, as this can affect all of the other filters!\n      let window = this.getWindow();\n\n      if (window.hasStart() || window.hasEnd()){\n        this.state.cache.edge_filters.push((item)=>{\n          try{\n            return item.filterWindow(window);\n          }\n          catch(error){\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const project_filter = this.state.filter.project;\n\n      if (project_filter){\n        this.state.cache.edge_filters.push((item)=>{\n          try{\n            return item.filterProject(project_filter);\n          }\n          catch(error){\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const source_filter = this.state.filter.source;\n\n      if (source_filter){\n        this.state.cache.edge_filters.push((item)=>{\n          try{\n            return item.filterSource(source_filter);\n          }\n          catch(error){\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n    }\n\n    return this.state.cache.edge_filters;\n  }\n\n  getWindow(){\n    return this.state.window;\n  }\n\n  getMaxWindow(){\n    return this.state.max_window;\n  }\n\n  _fitWindow(window){\n    let new_window = this.state.max_window.intersect(window);\n\n    let delta = window.getDelta();\n\n    if (new_window && (new_window.getDelta() === delta)){\n      return window;\n    }\n\n    if (delta > this.state.max_window.getDelta()){\n      return DateRange.clone(this.state.max_window);\n    }\n\n    if (window.getStartDate() < this.state.max_window.getStartDate()){\n      return new DateRange({start:this.state.max_window.getStartDate(),\n                            end:this.state.max_window.getStartDate()+delta});\n    }\n    else{\n      return new DateRange({start:this.state.max_window.getEndDate()-delta,\n                            end:this.state.max_window.getEndDate()});\n    }\n  }\n\n  setMaxWindow(window){\n    if (!window._isADateRangeObject){\n      window = new DateRange(window);\n    }\n\n    if (window === this.state.max_window){\n      return;\n    }\n\n    this.state.max_window = window;\n\n    if (this.state.window && this.state.window.hasBounds()){\n      let fitted = this._fitWindow(this.state.window);\n\n      if (fitted !== this.state.window){\n        this.setWindow(fitted);\n      }\n    }\n    else{\n      this.state.window = this.state.max_window;\n    }\n  }\n\n  setWindow(window){\n    if (!window._isADateRangeObject){\n      window = new DateRange(window);\n    }\n\n    if (DateRange.eq(window, this.state.window)){\n      return false;\n    }\n\n    let fitted = this._fitWindow(window);\n\n    if (DateRange.eq(fitted, this.state.window)){\n      return false;\n    }\n\n    this.state.window = fitted;\n    this.clearCache();\n    return true;\n  }\n\n  getPeople(filtered=true) {\n    if (this._rebuilding){\n      filtered = false;\n    }\n\n    if (filtered){\n      if (!this.state.cache.people){\n        console.log(\"REBUILD PEOPLE\");\n        this._rebuilding += 1;\n        this.state.cache.people =\n              this.state.people.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.people;\n    }\n    else{\n      return this.state.people;\n    }\n  }\n\n  getBusinesses(filtered=true) {\n    if (this._rebuilding){\n      filtered = false;\n    }\n\n    if (filtered){\n      if (!this.state.cache.businesses){\n        console.log(\"REBUILD BUSINESSES\");\n        this._rebuilding += 1;\n        this.state.cache.businesses =\n              this.state.businesses.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.businesses;\n    }\n    else{\n      return this.state.businesses;\n    }\n  }\n\n  getConnections(filtered=true) {\n    if (this._rebuilding){\n      filtered = false;\n    }\n\n    if (filtered){\n      if (!this.state.cache.connections){\n        console.log(\"REBUILD CONNECTIONS\");\n        this._rebuilding += 1;\n        this.state.cache.connections =\n              this.state.connections.filter(this.getEdgeFilters());\n        this._rebuilding -=1;\n      }\n\n      return this.state.cache.connections;\n    }\n    else{\n      return this.state.connections;\n    }\n  }\n\n  getBiographies(filtered=true){\n    return this.state.biographies;\n  }\n\n  getAffiliations(filtered=true) {\n    return this.state.affiliations;\n  }\n\n  getPositions(filtered=true) {\n    return this.state.positions;\n  }\n\n  getSources(filtered=true) {\n    return this.state.sources;\n  }\n\n  getNotes(filtered=true) {\n    return this.state.notes;\n  }\n\n  getProjects(filtered=true) {\n    return this.state.projects;\n  }\n\n  getConnectionsTo(item) {\n    return this.getConnections().getConnectionsTo(item);\n  }\n\n  getAnchor() {\n    return this.state.anchor;\n  }\n\n  getFilter() {\n    return {...this.state.filter};\n  }\n\n  getFilterText(){\n    const filter = [];\n\n    let f = this.state.filter.node;\n\n    if (f){\n      let parts = [];\n\n      Object.keys(f).forEach((key, index)=>{\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1){\n        filter.push(`connected to ${parts[0]}`);\n      }\n      else if (parts.length > 1){\n        filter.push(`connected to (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.source;\n\n    if (f){\n      let parts = [];\n\n      Object.keys(f).forEach((key, index)=>{\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1){\n        filter.push(`with source ${parts[0]}`);\n      }\n      else if (parts.length > 1){\n        filter.push(`with sources (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.group;\n\n    if (f){\n      let parts = [];\n\n      Object.keys(f).forEach((key, index)=>{\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1){\n        filter.push(`in group ${parts[0]}`);\n      }\n      else if (parts.length > 1){\n        filter.push(`in groups (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.project;\n\n    if (f){\n      let parts = [];\n\n      Object.keys(f).forEach((key, index)=>{\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1){\n        filter.push(`in project ${parts[0]}`);\n      }\n      else if (parts.length > 1){\n        filter.push(`in projects (${parts.join(\" and \")})`);\n      }\n    }\n\n    if (filter.length === 1){\n      return filter[0];\n    }\n    else if (filter.length > 1){\n      return `[${filter.join(\"] and [\")}]`;\n    }\n    else{\n      return null;\n    }\n  }\n\n  _getType(item){\n    if (item.getID){\n      item = item.getID();\n    }\n\n    if (item[0] === \"P\" || item[0] === \"B\"){\n      return \"node\";\n    }\n    else if (item[0] === \"J\"){\n      return \"project\";\n    }\n    else if (item[0] === \"S\"){\n      return \"source\";\n    }\n    else{\n      return \"group\";\n    }\n  }\n\n  isFiltered(item){\n    if (item.getID){\n      item = item.getID();\n    }\n\n    let type = this._getType(item);\n\n    const filter = this.state.filter[type];\n\n    if (filter){\n      return item in filter;\n    }\n    else{\n      return false;\n    }\n  }\n\n  resetFilters(){\n    this.state.filter = {};\n    this.clearCache();\n  }\n\n  setAnchor(anchor) {\n    if (anchor) {\n      anchor = this.getPeople().find(anchor);\n    }\n\n    this.state.anchor = anchor;\n    this.clearCache();\n  }\n\n  toggleFilter(item){\n    if (item.getID){\n      item = item.getID();\n    }\n\n    let type = this._getType(item);\n\n    if (!(type in this.state.filter)){\n      this.state.filter[type] = {};\n    }\n\n    if (item in this.state.filter[type]){\n      delete this.state.filter[type][item];\n\n      if (Object.keys(this.state.filter[type]).length === 0){\n        delete this.state.filter[type];\n      }\n    }\n    else{\n      this.state.filter[type][item] = 1;\n    }\n\n    console.log(this.state.filter);\n\n    this.clearCache();\n  }\n\n  getProjectTimeLine(){\n    if (this.state.cache.projectTimeLine !== null){\n      return this.state.cache.projectTimeLine;\n    }\n\n    let items = this.getProjects().getTimeLine();\n\n    this.state.cache.projectTimeLine = items;\n\n    return this.state.cache.projectTimeLine;\n  }\n\n  getItemTimeLine(){\n    if (this.state.cache.itemTimeLine !== null){\n      return this.state.cache.itemTimeLine;\n    }\n\n    let items = this.getPeople().getTimeLine();\n\n    let projects = this.getProjects().getTimeLine();\n\n    projects.forEach((item)=>{\n      item.type = \"background\";\n      items.push(item);\n    });\n\n    this.state.cache.itemTimeLine = items;\n\n    return this.state.cache.itemTimeLine;\n  }\n\n  getGraph() {\n    if (this.state.cache.graph !== null){\n      return this.state.cache.graph;\n    }\n\n    const anchor = this.state.anchor;\n    let nodes = this.getPeople().getNodes({anchor: anchor});\n    nodes.add(this.getBusinesses().getNodes().get());\n    let edges = this.getConnections().getEdges();\n\n    let network = this.getNetwork();\n\n    if (network){\n      //make sure that the screen updates gracefully\n      network.setOptions({physics: false});\n\n      setTimeout(()=>{network.setOptions({physics: slow_physics})}, 250);\n      setTimeout(()=>{network.setOptions({physics: fast_physics})}, 500);\n    }\n\n    this.state.cache.graph = {\"nodes\": nodes, \"edges\": edges};\n    return this.state.cache.graph;\n  }\n\n  setNetwork(network){\n    this.state.network = network;\n  }\n\n  getNetwork(){\n    return this.state.network;\n  }\n\n  add(item){\n    if (!item){\n      return;\n    }\n\n    let added = false;\n\n    Object.keys(this.state).forEach((key, index)=>{\n      if (!added){\n        let group = this.state[key];\n        if (group && group.canAdd){\n          if (group.canAdd(item)){\n            group.add(item);\n            added = true;\n          }\n        }\n      }\n    });\n\n    if (!added){\n      throw new ValueError(\n          `Do not know how to add ${item} to this Social group`);\n    }\n  }\n\n  get(id, filtered=true) {\n    if (id.getID){\n      id = id.getID();\n    }\n\n    if (this._rebuilding){\n      // we cannot get filtered data when rebuilding, else otherwise\n      // we get race conditions and weird results\n      filtered = false;\n    }\n\n    try{\n      if (id[0] === \"C\") {\n        return this.getConnections(filtered).get(id);\n      }\n      else if (id[0] === \"P\") {\n        return this.getPeople(filtered).get(id);\n      }\n      else if (id[0] === \"B\") {\n        return this.getBusinesses(filtered).get(id);\n      }\n      else if (id[0] === \"Q\") {\n        return this.getPositions(filtered).get(id);\n      }\n      else if (id[0] === \"A\") {\n        return this.getAffiliations(filtered).get(id);\n      }\n      else if (id[0] === \"S\") {\n        return this.getSources(filtered).get(id);\n      }\n      else if (id[0] === \"N\") {\n        return this.getNotes(filtered).get(id);\n      }\n      else if (id[0] === \"J\") {\n        return this.getProjects(filtered).get(id);\n      }\n      else {\n        return id;\n      }\n    }\n    catch(error){\n      if (filtered){\n        return this.get(id, false);\n      }\n      else{\n        throw error;\n      }\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSocial.unDry = function (value) {\n  let social = new Social(value);\n  social._updateHooks();\n\n  return social;\n}\n\nDry.registerClass(\"Social\", Social);\n\nexport default Social;\n","import React from \"react\";\n\nimport { Tabs, Tab, TabPanel, TabList } from 'react-web-tabs';\n\nimport {\n  Accordion,\n  AccordionItem,\n  AccordionTitle,\n  AccordionPanel,\n} from './Accordion';\n\nimport GroupsList from './GroupsList';\nimport ConnectionList from './ConnectionList';\nimport SourceList from './SourceList';\nimport WeightsList from './WeightsList';\nimport DateRangeButton from './DateRangeButton';\nimport DefaultButton from './DefaultButton';\n\nimport Social from '../model/Social';\n\nimport styles from './InfoBox.module.css';\n\nlet default_title = \"Isambard's Social Network\";\nlet default_image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Robert_Howlett_-_Isambard_Kingdom_Brunel_and_the_launching_chains_of_the_Great_Eastern_-_Google_Art_Project.jpg/256px-Robert_Howlett_-_Isambard_Kingdom_Brunel_and_the_launching_chains_of_the_Great_Eastern_-_Google_Art_Project.jpg\";\nlet default_text = <div>\n                      This is an interactive viewer of Isambard Kingdom Brunel's\n                      social network. Please click in the nodes and have fun!\n                    </div>;\n\nfunction null_function(item){}\n\nfunction getBiography({item, social, emitSelected=null_function,\n                       emitToggleFilter=null_function}){\n  let pages = [];\n  let affiliations = {};\n  let positions = {};\n  let sources = {};\n  let connections = [];\n\n  try{\n    connections = social.getConnectionsTo(item);\n  }\n  catch(error){\n    console.log(`CONNECTIONS ERROR ${error}`);\n  }\n\n  if (item.getAffiliations){\n    affiliations = item.getAffiliations();\n  }\n\n  if (item.getPositions){\n    positions = item.getPositions();\n  }\n\n  if (item.getSources){\n    sources = item.getSources();\n  }\n\n  let alive = null;\n\n  if (item.getAlive){\n    let a = item.getAlive();\n    if (a){\n      alive = <p>\n                They were alive from&nbsp;\n                {a.getStartString()}&nbsp;\n                until {a.getEndString()}.\n              </p>;\n    }\n  }\n\n  let bio = null;\n\n  try{\n    bio = social.getBiographies().get(item);\n  }\n  catch(error){\n    bio = null;\n  }\n\n  pages.push([\"Biography\",\n              (<div>\n                 <div>{bio}</div>\n                 <div>{alive}</div>\n               </div>)]);\n\n  if (connections.length > 0){\n    pages.push([\"Connections\", <div>\n                                  <ConnectionList\n                                      connections={connections}\n                                      emitSelected={emitSelected}\n                                      emitToggleFilter={emitToggleFilter}\n                                      social={social}/>\n                               </div>]);\n  }\n  else{\n    pages.push([\"Connections\", \"None\"]);\n  }\n\n  if (Object.keys(positions).length > 0){\n    pages.push([\"Positions\",\n                <div>\n                  <GroupsList groups={positions}\n                              emitSelected={emitSelected}\n                              emitToggleFilter={emitToggleFilter}\n                              social={social}/>\n                </div>]);\n  }\n  else{\n    pages.push([\"Positions\", \"None\"]);\n  }\n\n  if (Object.keys(affiliations).length > 0){\n    pages.push([\"Affiliations\",\n                <div>\n                  <GroupsList groups={affiliations}\n                              emitSelected={emitSelected}\n                              emitToggleFilter={emitToggleFilter}\n                              social={social}/>\n                </div>]);\n  }\n  else{\n    pages.push([\"Affiliations\", \"None\"]);\n  }\n\n  if (Object.keys(sources).length > 0){\n    pages.push([\"Sources\",\n                <div>\n                  <GroupsList groups={sources}\n                              emitSelected={emitSelected}\n                              emitToggleFilter={emitToggleFilter}\n                              social={social}/>\n                </div>]);\n  }\n\n  pages.push([\"Analysis\",\n              <div>\n                Here is space for graphs and analysis of {item.getName()}\n              </div>]);\n\n  return pages;\n}\n\nfunction extractData({item, social, emitSelected=null_function,\n                      emitToggleFilter=null_function}){\n  let data = {title:default_title, image:default_image,\n              pages:[[\"Title\", default_text]]};\n\n  if (!(social instanceof Social)){\n    return data;\n  }\n\n  //refresh the item in case of updates...\n  if (item.getID){\n    item = item.getID();\n  }\n\n  try{\n    item = social.get(item);\n  }\n  catch(error){\n    item = null;\n  }\n\n  if (!item){\n    return data;\n  }\n\n  if (item._isAPersonObject){\n    data.title = <DefaultButton onClick={()=>{emitToggleFilter(item);}}>\n                  {item.getName()}\n                 </DefaultButton>\n    data.pages = getBiography({item:item, social:social,\n                               emitSelected:emitSelected,\n                               emitToggleFilter:emitToggleFilter});\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Illustrirte_Zeitung_%281843%29_21_332_1_Das_vom_Stapellaufen_des_Great-Britain.PNG/640px-Illustrirte_Zeitung_%281843%29_21_332_1_Das_vom_Stapellaufen_des_Great-Britain.PNG\";\n  }\n  else if (item._isABusinessObject){\n    data.title = <DefaultButton onClick={()=>{emitToggleFilter(item);}}>\n                  {item.getName()}\n                 </DefaultButton>\n    data.pages = getBiography({item:item, social:social,\n                               emitSelected:emitSelected,\n                               emitToggleFilter:emitToggleFilter});\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/SS_Great_Britain_diagram.jpg/320px-SS_Great_Britain_diagram.jpg\";\n  }\n  else if (item._isASourceObject){\n    data.title = item.getName();\n    let description = item.getDescription();\n    if (!description){\n      description = \"No description\";\n    }\n    data.pages = [[\"Description\", description],\n                  [\"Analysis\", \"Analysis for this source - where else has it been cited?\"]];\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/9/91/Sumerian_26th_c_Adab.jpg\";\n  }\n  else if (item._isAConnectionObject){\n    data.title = null;\n\n    let n0 = item.getNode0();\n    if (n0.getName){\n      let node = n0;\n      n0 = <DefaultButton onClick={()=>{emitSelected(node)}}>\n                  {n0.getName()}\n           </DefaultButton>\n    }\n\n    let n1 = item.getNode1();\n    if (n1.getName){\n      let node = n1;\n      n1 = <DefaultButton onClick={()=>{emitSelected(node)}}>\n            {n1.getName()}\n           </DefaultButton>;\n    }\n\n    let asources = item.getAffiliationSources();\n    let csources = item.getCorrespondanceSources();\n    let duration = item.getDuration();\n\n    if (duration){\n      duration = <div>\n                   <div>during</div>\n                   <DateRangeButton value={duration}\n                                    emitSelected={emitSelected}/>\n                 </div>\n    }\n\n    if (asources){\n      asources = <AccordionItem uuid=\"asources\">\n                   <AccordionTitle>\n                     Affiliation\n                   </AccordionTitle>\n                   <AccordionPanel>\n                     <SourceList social={social} sources={asources}\n                                 emitSelected={emitSelected}/>\n                   </AccordionPanel>\n                 </AccordionItem>;\n    }\n\n    if (csources){\n      csources = <AccordionItem uuid=\"csources\">\n                   <AccordionTitle>\n                     Correspondance\n                   </AccordionTitle>\n                   <AccordionPanel>\n                     <SourceList social={social} sources={csources}\n                                 emitSelected={emitSelected}/>\n                   </AccordionPanel>\n                 </AccordionItem>;\n    }\n\n    let accordion = null;\n\n    if (asources || csources){\n      accordion = <Accordion allowMultipleExpanded={true}\n                             allowZeroExpanded={true}\n                             preExpanded={[\"asources\", \"csources\"]}>\n                    {asources}\n                    {csources}\n                  </Accordion>;\n    }\n\n    let pages = [];\n    pages.push([\"Connection\",\n               <div style={{textAlign:\"center\"}}>\n                  {n0}\n                  <div>||</div>\n                  {n1}\n                  <div>&nbsp;</div>\n                  <div>{duration}</div>\n                </div>]);\n\n    pages.push([\"Sources\", <div>{accordion}</div>]);\n\n    pages.push([\"Projects\", <WeightsList weights={item.getWeights()}\n                                         type={item.getType()}\n                                         social={social}\n                                         emitSelected={emitSelected}\n                                         emitToggleFilter={emitToggleFilter}/>]);\n\n    pages.push([\"Analysis\", \"Space for analysis of this Connection\"]);\n\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/SS_Great_Britain_transverse_section.jpg/320px-SS_Great_Britain_transverse_section.jpg\";\n\n    data.pages = pages;\n  }\n\n  return data;\n}\n\nfunction InfoBox(props) {\n  let data = {};\n\n  try{\n    data = extractData(props);\n  }\n  catch(error){\n    data = {title:default_title, image:default_image,\n            pages:[[\"Title\", default_text]]};\n    console.log(`ERROR ${error}`);\n  }\n\n  const pages = data.pages;\n\n  if (pages.length > 1){\n    let tabs = [];\n    let panes = [];\n\n    for (let i=0; i<pages.length; ++i){\n      panes.push(<TabPanel key={pages[i][0]} tabId={pages[i][0]}\n                           className={styles.tabPanel}>\n                   {pages[i][1]}\n                 </TabPanel>);\n      tabs.push(<Tab key={pages[i][0]} className={styles.tab}\n                     tabFor={pages[i][0]}>{pages[i][0]}</Tab>);\n    }\n\n    return (\n      <div className={styles.container}>\n        <img className={styles.heroImage} alt=\"\" src={data.image}/>\n        <div className={styles.title}>{data.title}</div>\n        <Tabs\n          key={panes.length}\n          vertical\n          onChange={(tabId) => { console.log(tabId); }}\n          defaultTab={pages[0][0]}\n          className={styles.tabs}\n        >\n          <TabList className={styles.tablist}>\n            {tabs}\n          </TabList>\n          {panes}\n        </Tabs>\n      </div>\n    );\n  }\n  else{\n    return (\n      <div className={styles.container}>\n        <img className={styles.heroImage} alt=\"\" src={data.image}/>\n        <div className={styles.title}>{data.title}</div>\n        {pages[0][1]}\n      </div>\n    );\n  }\n};\n\nexport default InfoBox;\n","import React, { Component } from 'react';\nimport Timeline from 'react-visjs-timeline';\n\nimport DatePicker from 'react-datepicker';\n\nimport DateRange from '../model/DateRange';\n\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nimport styles from './TimeLineView.module.css';\n\nfunction _customOrder(a, b) {\n  // order by id\n  return a.id - b.id;\n}\n\nconst timeline_options = {\n  autoResize: true,\n  horizontalScroll: true,\n  showCurrentTime: false,\n  showTooltips: false,\n  verticalScroll: true,\n  zoomable: false,\n  order: _customOrder,\n}\n\nclass DateInput extends Component {\n   render(){\n     let {value, onClick} = this.props;\n\n     return (<button className={styles.zoomButton} onClick={onClick}>\n              {value}\n             </button>);\n   }\n};\n\nclass TimeLineView extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      dimensions: {height:300, width:600},\n    }\n\n    this._is_activated = this.props.is_active;\n  }\n\n  activate(){\n    this._is_activated = true;\n  }\n\n  deactivate(){\n    this._is_activated = false;\n  }\n\n  isActive(){\n    return this._is_activated;\n  }\n\n  updateSize(dimensions) {\n    this.setState({\n      dimensions: {\n        width: dimensions.width - 10,\n        height: dimensions.height - 100,\n      }\n    });\n\n    let timeline = this.getTimeLine();\n    if (timeline){\n      timeline.redraw();\n    }\n  }\n\n  getTimeLine(){\n    if (this.timeline){\n      return this.timeline.$el;\n    }\n    else{\n      return null;\n    }\n  }\n\n  selectHandler(props){\n    if (!this.isActive()){\n      return;\n    }\n\n    if (this.props.emitSelected){\n      this.props.emitSelected(props.items[0]);\n    }\n  }\n\n  rangeChangedHandler(props){\n    let window = null;\n\n    if (props.byUser || this._byUser){\n      this._byUser = false;\n      window = new DateRange({start:props.start.toISOString(),\n                              end:props.end.toISOString()});\n      if (!window.hasBounds()){\n        console.log(`Something went wrong? ${window}`);\n        return;\n      }\n    }\n    else{\n      window = this.getWindow();\n    }\n\n    if (window && this.isActive() && this.props.emitWindowChanged){\n      this.props.emitWindowChanged(window);\n    }\n  }\n\n  setWindow(window){\n    if (!this.isActive()){\n      return;\n    }\n\n\n    if (!window){\n      return;\n    }\n\n    let old_window = this.getWindow();\n\n    if (DateRange.eq(window, old_window)){\n      return;\n    }\n\n    this._byUser = true;\n    this.getTimeLine().setWindow(window.getStartDate(), window.getEndDate(),\n                                 {animation:true});\n  }\n\n  getWindow(){\n    if (this.props.getWindow){\n      return this.props.getWindow();\n    }\n    else{\n      return null;\n    }\n  }\n\n  setStartDate(date){\n    if (!date){\n      return;\n    }\n\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(new DateRange({start:date, end:window.getEndDate()}));\n    }\n  }\n\n  setEndDate(date){\n    if (!date){\n      return;\n    }\n\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(new DateRange({start:window.getStartDate(), end:date}));\n    }\n  }\n\n  scrollLeft(){\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(window.shiftEarlier());\n    }\n  }\n\n  scrollRight(){\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(window.shiftLater());\n    }\n  }\n\n  zoomIn(){\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(window.zoomIn());\n    }\n  }\n\n  zoomOut(){\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(window.zoomOut());\n    }\n  }\n\n  render() {\n    let height = `${this.state.dimensions.height}px`;\n    let width = `${this.state.dimensions.width}px`;\n\n    let my_options = {...timeline_options};\n    my_options[\"height\"] = height;\n    my_options[\"width\"] = width;\n\n    let window = this.getWindow();\n    let max_window = window;\n\n    if (this.props.getMaxWindow){\n      max_window = this.props.getMaxWindow();\n\n      if (max_window.hasBounds()){\n        my_options[\"max\"] = max_window.getLatestEnd().toDate();\n        my_options[\"min\"] = max_window.getEarliestStart().toDate();\n\n        if (!window){\n          window = max_window;\n        }\n      }\n      else{\n        console.log(`Unbounded max_window? ${max_window}`);\n        max_window = null;\n      }\n    }\n\n    if (!window){\n      window = new DateRange({start:\"2000-01-31\", end:\"2020-12-31\"});\n      console.log(\"NO WINDOW!?!\");\n    }\n\n    let start = window.getEarliestStart();\n    let end = window.getLatestEnd();\n\n    let items = null;\n\n    if (this.isActive()){\n      if (this.props.getItems){\n        items = this.props.getItems();\n      }\n    }\n\n    if (items === null || items.length === 0){\n      items = [];\n    }\n\n    if (start){\n      start = start.toDate();\n      my_options[\"start\"] = start;\n    }\n\n    if (end){\n      end = end.toDate();\n      my_options[\"end\"] = end;\n    }\n\n    let timeline = this.getTimeLine();\n\n    if (timeline){\n      //need to set the window here to prevent animation when\n      //changing tabs\n      let activated = this._is_activated;\n      timeline.setWindow(start, end, {animation:false});\n      this._is_activated = activated;\n    }\n\n    return (\n      <div className={styles.container}\n           style={{width:width, height:height}}>\n        <Timeline className={styles.timeline}\n                  ref={el => (this.timeline = el)}\n                  rangechangedHandler={(props)=>{this.rangeChangedHandler(props)}}\n                  selectHandler={(props)=>{this.selectHandler(props)}}\n                  options={my_options}\n                  items={items}/>\n        <div className={styles.buttonGroup}>\n          <button className={styles.scrollButton}\n                  onClick={()=>{this.scrollLeft()}}>&larr;</button>\n          <button className={styles.zoomButton}\n                  onClick={()=>{this.zoomOut()}}>-</button>\n          <DatePicker className={styles.datePicker}\n                      selected={start}\n                      openToDate={start}\n                      selectsStart\n                      startDate={start}\n                      endDate={end}\n                      dateFormat=\"d MMM yyyy\"\n                      showMonthYearPicker\n                      showYearDropdown\n                      dropdownMode=\"select\"\n                      customInput={<DateInput />}\n                      onChange={(date)=>{this.setStartDate(date)}}/>\n          <button className={styles.scrollButton}\n                  onClick={()=>{this.setWindow(max_window)}}>&harr;</button>\n          <DatePicker className={styles.datePicker}\n                      selected={end}\n                      openToDate={end}\n                      selectsEnd\n                      startDate={start}\n                      endDate={end}\n                      dateFormat=\"d MMM yyyy\"\n                      showMonthYearPicker\n                      showYearDropdown\n                      dropdownMode=\"select\"\n                      customInput={<DateInput />}\n                      onChange={(date)=>{this.setEndDate(date)}}/>\n          <button className={styles.zoomButton}\n                  onClick={()=>{this.zoomIn()}}>+</button>\n          <button className={styles.scrollButton}\n                  onClick={()=>{this.scrollRight()}}>&rarr;</button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TimeLineView\n","import React, { Component } from 'react';\nimport { Tabs, Tab, TabPanel, TabList } from 'react-web-tabs';\n\nimport TimeLineView from './TimeLineView';\n\nimport styles from './TimeLineBox.module.css';\n\nclass TimeLineBox extends Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n      dimensions: {height:300, width:600},\n    }\n\n    this.tabs = {};\n    this.container = null;\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', ()=>{this.updateSize()});\n    this.updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', ()=>{this.updateSize()});\n  }\n\n  activate(tabId){\n    Object.keys(this.tabs).forEach((key, index) =>{\n      if (key !== tabId){\n        let tab = this.tabs[key];\n        if (tab){\n          tab.deactivate();\n        }\n      }\n    });\n\n    if (this.tabs[tabId]){\n      this.tabs[tabId].activate();\n    }\n  }\n\n  updateSize(){\n    if (this.container){\n      this.setState({\n        dimensions: {\n          width: this.container.offsetWidth,\n          height: this.container.offsetHeight,\n        }\n      });\n    }\n\n    Object.keys(this.tabs).forEach((key, index) =>{\n      let tab = this.tabs[key];\n      if (tab){\n        tab.updateSize(this.state.dimensions);\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div ref={el => (this.container = el)}\n           className={styles.container}>\n        <Tabs key=\"timeline-tabs\"\n              onChange={(tabId) => { this.activate(tabId); this.updateSize(); }}\n              className={styles.tabs}>\n          <TabList className={styles.tabList}>\n            <Tab className={styles.tab}\n                 key=\"items\"\n                 tabFor=\"items\">Timeline</Tab>\n            <Tab className={styles.tab}\n                 key=\"projects\"\n                 tabFor=\"projects\">Projects</Tab>\n            <Tab className={styles.tab}\n                 key=\"analysis\"\n                 tabFor=\"analysis\">Analysis</Tab>\n          </TabList>\n\n          <TabPanel key=\"projects\" tabId=\"projects\"\n                    className={styles.tabPanel}>\n            <TimeLineView ref={el => (this.tabs.projects = el)}\n                          name=\"projects\"\n                          selected={this.props.selected}\n                          getMaxWindow={this.props.getMaxWindow}\n                          getWindow={this.props.getProjectWindow}\n                          getItems={this.props.getProjectTimeLine}\n                          emitWindowChanged={this.props.emitWindowChanged}\n                          emitSelected={this.props.emitSelected}\n                          emitClicked={this.props.emitClicked}/>\n          </TabPanel>\n\n          <TabPanel key=\"analysis\" tabId=\"analysis\" className={styles.tabPanel}>\n            <div className={styles.centerContainer}>\n              <p>\n                This will contain tools and graphs for temporal social\n                network analysis.\n              </p>\n            </div>\n          </TabPanel>\n\n          <TabPanel key=\"items\" tabId=\"items\" className={styles.tabPanel}>\n            <TimeLineView ref={el => (this.tabs.items = el)}\n                          name=\"items\"\n                          is_active={true}\n                          selected={this.props.selected}\n                          getMaxWindow={this.props.getMaxWindow}\n                          getWindow={this.props.getItemWindow}\n                          getItems={this.props.getItemTimeLine}\n                          emitWindowChanged={this.props.emitWindowChanged}\n                          emitSelected={this.props.emitSelected}\n                          emitClicked={this.props.emitClicked}/>\n          </TabPanel>\n        </Tabs>\n      </div>\n    );\n  }\n}\n\nexport default TimeLineBox\n","\nimport React from 'react';\n\nimport {\n  Accordion,\n  AccordionItem,\n  AccordionTitle,\n  AccordionPanel,\n} from './Accordion';\n\nimport {ResponsiveList, ResponsiveListItem} from './ResponsiveList';\nimport CheckBox from './CheckBox';\nimport DefaultButton from './DefaultButton';\n\nimport styles from './FilterBox.module.css';\n\nfunction null_function(args=null){}\n\nfunction filterList(items, props){\n  let social = props.social;\n\n  let emitSelected = props.emitSelected;\n\n  if (!emitSelected){\n    emitSelected = null_function;\n  }\n\n  let emitToggleFilter = props.emitToggleFilter;\n\n  if (!emitToggleFilter){\n    emitToggleFilter = null_function;\n  }\n\n  let output = items.values().map((item)=>{\n    let is_filtered = social.isFiltered(item);\n\n    return <ResponsiveListItem key={item.getName()}>\n              <DefaultButton style={{position:\"relative\",\n                                     maxWidth:\"80%\"}}\n                             onClick={()=>{emitSelected(item);}}>\n                {item.getName()}\n              </DefaultButton>&nbsp;\n              <CheckBox checked={is_filtered}\n                        onChange={(event)=>{emitToggleFilter(item);}}/>\n           </ResponsiveListItem>;\n  });\n\n  return <ResponsiveList>{output}</ResponsiveList>;\n}\n\nfunction FilterBox(props){\n  let social = props.social;\n\n  if (!social){\n    return <div>No social to display!</div>;\n  }\n\n  let filter_text = social.getFilterText();\n\n  if (!filter_text){\n    filter_text = \"No filters\";\n  }\n\n  let emitClearFilters = props.emitClearFilters;\n\n  if (!emitClearFilters){\n    emitClearFilters = null_function;\n  }\n\n  let filter_info = <AccordionItem uuid=\"filterinfo\">\n                      <AccordionTitle>\n                        Current Filter\n                      </AccordionTitle>\n                      <AccordionPanel>\n                        <div className={styles.filterContainer}>\n                          <div className={styles.filterText}>\n                            {filter_text}\n                          </div>\n                          <div>\n                            <DefaultButton onClick={emitClearFilters}>\n                              Clear Filters\n                            </DefaultButton>\n                          </div>\n                        </div>\n                      </AccordionPanel>\n                    </AccordionItem>;\n\n  let projects = filterList(social.getProjects(false), props);\n  let sources = filterList(social.getSources(false), props);\n  let positions = filterList(social.getPositions(false), props);\n  let affiliations = filterList(social.getAffiliations(false), props);\n  let people = filterList(social.getPeople(false), props);\n  let businesses = filterList(social.getBusinesses(false), props);\n\n  console.log(sources);\n\n  return <Accordion allowMultipleExpanded={false}\n                    allowZeroExpanded={true}>\n          {filter_info}\n\n          <AccordionItem uuid=\"projects\">\n            <AccordionTitle>\n                Projects\n            </AccordionTitle>\n            <AccordionPanel>\n              {projects}\n            </AccordionPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"sources\">\n            <AccordionTitle>\n                Sources\n            </AccordionTitle>\n            <AccordionPanel>\n              {sources}\n            </AccordionPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"people\">\n            <AccordionTitle>\n              People\n            </AccordionTitle>\n            <AccordionPanel>\n              {people}\n            </AccordionPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"businesses\">\n            <AccordionTitle>\n              Businesses\n            </AccordionTitle>\n            <AccordionPanel>\n              {businesses}\n            </AccordionPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"positions\">\n            <AccordionTitle>\n              Positions\n            </AccordionTitle>\n            <AccordionPanel>\n              {positions}\n            </AccordionPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"affiliations\">\n            <AccordionTitle>\n              Affiliations\n            </AccordionTitle>\n            <AccordionPanel>\n              {affiliations}\n            </AccordionPanel>\n          </AccordionItem>\n\n        </Accordion>;\n}\n\nexport default FilterBox;\n","\nimport React from \"react\";\nimport {CSSTransition} from \"react-transition-group\";\n\nimport styles from './SlidingPanel.module.css'\nimport SlideFromLeft from './transitions/SlideFromLeft.module.css';\nimport SlideFromRight from './transitions/SlideFromRight.module.css';\nimport SlideFromBottom from './transitions/SlideFromBottom.module.css';\nimport SlideFromTop from './transitions/SlideFromTop.module.css';\n\nfunction SlidingPanel({children, isOpen=false, position=\"right\",\n                       size=\"40%\", minSize=\"300px\", maxSize=null, }){\n  let container = styles.rightContainer;\n  let transition = SlideFromRight;\n  let horiz_size = {width:size, minWidth:minSize};\n  let vert_size = {height:size, minHeight:minSize};\n\n  if (maxSize){\n    horiz_size.maxWidth = maxSize;\n    vert_size.maxHeight = maxSize;\n  }\n\n  let style = horiz_size;\n\n  if (position === \"right\"){\n    container = styles.rightContainer;\n    transition = SlideFromRight;\n  }\n  else if (position === \"bottom\"){\n    container = styles.bottomContainer;\n    transition = SlideFromBottom;\n    style = vert_size;\n  }\n  else if (position === \"top\"){\n    container = styles.topContainer;\n    transition = SlideFromTop;\n    style = vert_size;\n  }\n  else if (position === \"left\"){\n    container = styles.leftContainer;\n    transition = SlideFromLeft;\n  }\n\n  container = `${container} ${styles.container}`;\n\n  return (<CSSTransition in={isOpen}\n                         timeout={200}\n                         classNames={transition}\n                         unmountOnExit>\n            <div className={container} style={style}>\n              {children}\n            </div>\n          </CSSTransition>);\n};\n\nexport default SlidingPanel;\n","\nimport React from 'react';\nimport Spinner from 'react-spinkit';\n\nimport styles from './OverlayBox.module.css';\n\nclass OverlayBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true\n    };\n  }\n\n  hideSpinner() {\n    this.setState({\n      loading: false\n    });\n  }\n\n  render() {\n    let item = this.props.item;\n\n    let url = null;\n\n    if (item && item.getURL){\n      url = item.getURL();\n    }\n\n    if (!url){\n      return (<div className={styles.container}>\n                <div className={styles.centerContainer}>\n                  {item}\n                  <div>\n                    <button className={styles.button}\n                            onClick={this.props.emitClose}>Close</button>\n                  </div>\n                </div>\n              </div>);\n    }\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.url}>{url}</div>\n        {this.state.loading ? (\n          <div className={styles.centerContainer}>\n            <div>Loading page...</div>\n            <div>\n              <Spinner\n                name=\"ball-grid-pulse\"\n                color=\"green\"\n                fadeIn=\"none\"\n              />\n            </div>\n          </div>\n        ) : null}\n        <iframe\n          src={url}\n          title={url}\n          width=\"100%\"\n          height=\"95%\"\n          onLoad={()=>{this.hideSpinner()}}\n          frameBorder=\"0\"\n          marginHeight=\"0\"\n          marginWidth=\"0\"\n          sandbox=\"allow-scripts\"\n          position=\"absolute\"\n        />\n      </div>\n    );\n  }\n}\n\n\nexport default OverlayBox;\n","\nimport React from 'react';\nimport Spinner from 'react-spinkit';\n\nimport styles from './SearchBar.module.css';\n\n// This class is heavily inspired by react-search-field\n// from https://github.com/nutboltu/react-search-field\n\nfunction SearchResults(props){\n  let results = props.results;\n\n  if (!results){\n    return null;\n  }\n\n  let items = []\n\n  results.forEach((item, index)=>{\n    items.push(<li key={index}>{item}</li>);\n  });\n\n  return (<ul>{items}</ul>);\n}\n\nclass SearchBar extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {value: \"\",\n                  suggestions: null,\n                  searching: null,\n                  results: null};\n  }\n\n  componentDidUpdate(nextProps) {\n    if (this.props.searchText !== nextProps.searchText) {\n      this.setState({\n        value: nextProps.searchText,\n      });\n    }\n  }\n\n  setResults(results){\n    this.setState({searching:null,\n                   suggestions:null,\n                   results:results});\n  }\n\n  setSuggestions(suggestions){\n    this.setState({searching:null,\n                   suggestions:suggestions,\n                   results:null});\n  }\n\n  searchFor(text){\n    if (text && text.length > 0){\n      this.setState({searching:text,\n                    suggestions:null,\n                    results:null});\n\n      setTimeout(()=>{this.setResults([\"result1\", \"result2\", \"result3\"])}, 500);\n    }\n    else{\n      this.setState({suggestions:null,\n        searching:null,\n        results:null});\n    }\n  }\n\n  autocomplete(text){\n    if (text && text.length > 0){\n      this.setSuggestions([text, text, text]);\n    }\n    else{\n      this.setState({suggestions:null,\n                     searching:null,\n                     results:null});\n    }\n  }\n\n  isSearching(){\n    return this.state.searching !== null;\n  }\n\n  isSuggesting(){\n    return this.state.suggestions !== null;\n  }\n\n  hasResults(){\n    return this.state.results !== null;\n  }\n\n  stopSearch(){\n    this.setState({searching:null,\n                   suggestions:null,\n                   results:null});\n  }\n\n  onChange(event){\n    if (this.isSearching()){\n      return;\n    }\n\n    this.setState({value: event.target.value});\n    this.autocomplete(event.target.value);\n  }\n\n  onEnter(event){\n    if (this.isSearching() || this.isEmpty()){\n      return;\n    }\n\n    const enterKey = 13;\n    const isEnterPressed = event.which === enterKey || event.keyCode === enterKey;\n\n    if (isEnterPressed){\n      this.searchFor(event.target.value);\n    }\n  }\n\n  onSearch(){\n    if (this.isSearching() || this.isEmpty()){\n      return;\n    }\n\n    this.searchFor(this.state.value);\n  }\n\n  isEmpty(){\n    return !(this.state.value && this.state.value.length > 0);\n  }\n\n  render(){\n    let button_style = styles.searchButton;\n\n    if (this.isSearching() || this.isEmpty()){\n      button_style = styles.disabledButton;\n    }\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.searchContainer}>\n          <button className={styles.hamburgerButton}\n                  onClick={this.props.emitHamburgerClicked}>\n            \n          </button>\n          <input\n            className={styles.searchBox}\n            onChange={(event)=>{this.onChange(event)}}\n            onKeyPress={(event)=>{this.onEnter(event)}}\n            placeholder={this.props.placeholder}\n            type=\"text\"\n            value={this.state.value}\n          />\n          <div className={button_style}\n              onClick={()=>{this.onSearch()}}>\n            <div className={styles.magnifier}></div>\n          </div>\n        </div>\n        {this.isSearching() ? (\n          <div className={styles.searchContainer}>\n            <div className={styles.resultContainer}>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.stopSearch()}}>X</div>\n              <div className={styles.searchPending}>\n                <div>Searching for '{this.state.searching}'...</div>\n                <div style={{display:\"inline-block\"}}>\n                  <Spinner\n                    name=\"ball-grid-pulse\"\n                    color=\"green\"\n                    fadeIn=\"none\"\n                  />\n                </div>\n              </div>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.stopSearch()}}>X</div>\n            </div>\n          </div>\n        ) : null}\n        {this.isSuggesting() ? (\n          <div className={styles.searchContainer}>\n            <div className={styles.resultContainer}>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({suggestions:null})}}>X</div>\n              <div className={styles.searchResult}>\n                <SearchResults results={this.state.suggestions} />\n              </div>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({suggestions:null})}}>X</div>\n            </div>\n          </div>\n        ) : null}\n        {this.hasResults() ? (\n          <div className={styles.searchContainer}>\n            <div className={styles.resultContainer}>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({results:null})}}>X</div>\n              <div className={styles.searchResult}>\n                <SearchResults results={this.state.results} />\n              </div>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({results:null})}}>X</div>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default SearchBar;\n","\nimport React from 'react';\n\nimport styles from './BrunelMenu.module.css';\n\nfunction BrunelMenu(props){\n  if (!props.items){\n    return (<div>No menu</div>);\n  }\n\n  let buttons = [];\n\n  props.items.forEach((item, index)=>{\n    let func = item[1];\n\n    if (props.emitClose){\n      func = ()=>{props.emitClose(); item[1]() };\n    }\n\n    buttons.push(<button key={index}\n                         className={styles.menuItem}\n                         onClick={()=>{func()}}>\n                  {item[0]}\n                 </button>);\n  });\n\n  if (props.emitClose){\n    buttons.push(<button key=\"close\"\n                         className={styles.menuItem}\n                         onClick={()=>{props.emitClose()}}>\n                  Close\n                </button>);\n  }\n\n  return (\n    <div className={styles.menu}>\n      {buttons}\n    </div>\n  );\n}\n\nexport default BrunelMenu;\n","\n// package imports\nimport React from 'react';\nimport Dry from 'json-dry';\nimport ReactModal from 'react-modal';\n\n// Brunel components\nimport SocialGraph from \"./components/SocialGraph\";\nimport InfoBox from \"./components/InfoBox\";\nimport TimeLineBox from './components/TimeLineBox';\nimport FilterBox from './components/FilterBox';\nimport SlidingPanel from './components/SlidingPanel';\nimport OverlayBox from './components/OverlayBox';\nimport SearchBar from './components/SearchBar';\nimport BrunelMenu from './components/BrunelMenu';\nimport DefaultButton from './components/DefaultButton';\n\n// Brunel model\nimport Social from './model/Social';\n\n// Data for import\nimport graph_data from './data.json';\n\n// Styling for the app\nimport styles from './SocialApp.module.css'\nimport DateRange from './model/DateRange';\n\nclass SocialApp extends React.Component {\n  constructor(props){\n    super(props);\n\n    let social = Dry.parse(graph_data);\n    console.log(social);\n\n    if (!(social instanceof Social )){\n      console.log(\"Could not parse!\");\n      social = new Social();\n    }\n\n    // special cases for Brunel project...\n    social.setAnchor(\"Brunel\");\n    social.setMaxWindow(new DateRange({start:\"1800-01-01\", end:\"1860-12-31\"}));\n\n    this.state = {\n      social: social,\n      selected_item: null,\n      overlay_item: null,\n      isInfoPanelOpen: false,\n      isTimeLinePanelOpen: false,\n      isFilterPanelOpen: false,\n      isHamburgerMenuOpen: false,\n      timeline: new TimeLineBox(),\n      isOverlayOpen: false\n    };\n\n    this.socialGraph = null;\n  }\n\n  resetFilters(){\n    let social = this.state.social;\n    social.resetFilters();\n    this.setState({social:social});\n  }\n\n  closePanels(){\n    this.setState({isInfoPanelOpen:false,\n                   isTimeLinePanelOpen:false,\n                   isHamburgerMenuOpen:false,\n                   isFilterPanelOpen:false,\n                  });\n  }\n\n  closeOverlay(){\n    this.setState({isOverlayOpen:false,\n                   overlay_item:null});\n  }\n\n  showInfo(item){\n    console.log(item);\n    if (item._isAProjectObject){\n      this.setState({overlay_item:item,\n                     isOverlayOpen:true});\n    }\n    else{\n      this.setState({selected_item:item,\n                     isInfoPanelOpen:true});\n    }\n  }\n\n  slotClearFilters(){\n    this.resetFilters();\n  }\n\n  slotToggleFilter(item){\n    if (!item){\n      return;\n    }\n\n    let social = this.state.social;\n    social.toggleFilter(item);\n\n    this.setState(social);\n  }\n\n  getNetwork(){\n    const social = this.state.social;\n\n    if (social){\n      return social.getNetwork();\n    }\n    else{\n      return null;\n    }\n  }\n\n  slotSelected(id){\n    if (!id){\n      this.closePanels();\n      return;\n    }\n\n    if (id._isADateRangeObject){\n      let social = this.state.social;\n      if (social.setWindow(id)){\n        this.setState({social:social});\n      }\n      return;\n    }\n\n    let network = this.getNetwork();\n    if (network){\n      let selection = network.getSelection();\n      try{\n        if (id.getID){\n          network.selectNodes([id.getID()]);\n        }\n        else{\n          network.selectNodes([id]);\n        }\n      }\n      catch(error){\n        network.setSelection(selection);\n      }\n    }\n\n    const social = this.state.social;\n    const item = social.get(id);\n    this.showInfo(item);\n  }\n\n  slotWindowChanged(window){\n    let social = this.state.social;\n\n    if (social.setWindow(window)){\n      this.setState({social:social});\n    }\n  }\n\n  toggleInfoPanel(){\n    this.setState({isInfoPanelOpen: !(this.state.isInfoPanelOpen)});\n  }\n\n  toggleTimeLinePanel(){\n    this.setState({isFilterPanelOpen: false,\n                   isTimeLinePanelOpen: !(this.state.isTimeLinePanelOpen)});\n}\n\n  toggleFilterPanel(){\n    this.setState({isTimeLinePanelOpen: false,\n                   isFilterPanelOpen: !(this.state.isFilterPanelOpen)});\n  }\n\n  viewAbout(){\n    let item = <div>\n                 <div>\n                   This is a demo of the application to view\n                   Brunel's temporal social network. This is an\n                   incomplete application containing incomplete\n                   data and should not be relied on or viewed as\n                   being accurate.\n                 </div>\n                 <div>If you want more information, then please\n                      visit the <a href=\"https://github.com/chryswoods/brunel\">\n                        GitHub repository\n                      </a>\n                 </div>\n               </div>;\n    this.setState({\"overlay_item\": item,\n                   \"isOverlayOpen\": true});\n  }\n\n  viewSource(){\n    console.log(\"View source\");\n    var win = window.open(\"https://github.com/chryswoods/brunel\", '_blank');\n    win.focus();\n  }\n\n  resetAll(){\n    console.log(\"Reset all\");\n    window.location.reload(true);\n  }\n\n  render(){\n    const selected = this.state.selected_item;\n    const overlay_item = this.state.overlay_item;\n    const social = this.state.social;\n\n    let menu = [];\n\n    let timeline_text = \"Timeline\";\n\n    if (social){\n      timeline_text = `Timeline : ${social.getWindow().toSimpleString()}`;\n    }\n\n    menu.push([\"About\", ()=>{this.viewAbout()}]);\n    menu.push([\"View Source\", ()=>{this.viewSource()}]);\n    menu.push([\"Reset\", ()=>{this.resetAll()}]);\n\n    return (\n      <div>\n        <div className={styles.backgroundImage} />\n        <ReactModal isOpen={this.state.isOverlayOpen}\n                    onRequestClose={()=>{this.closeOverlay()}}\n                    contentLabel='Information overlay'\n                    className={styles.modal}\n                    overlayClassName={{base:styles.modalOverlay,\n                                       afterOpen:styles.modalOverlayAfterOpen,\n                                       beforeClose:styles.modalOverlayBeforeClose}}\n                    closeTimeoutMS={200}\n                    appElement={document.getElementById('root')}\n                    >\n          <div className={styles.closeOverlayButton}\n                onClick={()=>{this.closeOverlay()}}>X</div>\n          <OverlayBox item={overlay_item}\n                      emitClose={()=>{this.closeOverlay()}}/>\n        </ReactModal>\n\n        <SearchBar social={social}\n                   emitHamburgerClicked={()=>{this.setState({isHamburgerMenuOpen:true})}}\n                   emitSelected={(item)=>{this.slotSelected(item)}}\n                   emitClicked={(item)=>{this.slotClicked(item)}}/>\n\n        <SlidingPanel isOpen={this.state.isTimeLinePanelOpen}\n                      position='bottom'>\n          <span className={styles.closePanelButton}\n                onClick={()=>{this.setState({isTimeLinePanelOpen:false})}}>X</span>\n          <TimeLineBox selected={selected}\n                       getMaxWindow={()=>{return this.state.social.getMaxWindow()}}\n                       getProjectWindow={()=>{return this.state.social.getWindow()}}\n                       getItemWindow={()=>{return this.state.social.getWindow()}}\n                       getProjectTimeLine={()=>{return this.state.social.getProjectTimeLine()}}\n                       getItemTimeLine={()=>{return this.state.social.getItemTimeLine()}}\n                       emitClicked={(item)=>{this.slotClicked(item)}}\n                       emitSelected={(item)=>{this.slotClicked(item)}}\n                       emitWindowChanged={(window)=>{\n                                    this.slotWindowChanged(window)}}/>\n        </SlidingPanel>\n\n        <SlidingPanel isOpen={this.state.isInfoPanelOpen}\n                      position='right'>\n          <span className={styles.closePanelButton}\n                onClick={()=>{this.setState({isInfoPanelOpen:false})}}>X</span>\n          <InfoBox item={selected} social={social}\n                   emitSelected={(item)=>{this.slotSelected(item)}}\n                   emitToggleFilter={(item)=>{this.slotToggleFilter(item)}}/>\n        </SlidingPanel>\n\n        <SlidingPanel isOpen={this.state.isFilterPanelOpen}\n                      position='bottom'>\n          <span className={styles.closePanelButton}\n                onClick={()=>{this.setState({isFilterPanelOpen:false})}}>X</span>\n          <FilterBox social={social}\n                     emitToggleFilter={(item)=>{this.slotToggleFilter(item)}}\n                     emitSelected={(item)=>{this.slotSelected(item)}}\n                     emitClearFilters={()=>{this.slotClearFilters()}}/>\n        </SlidingPanel>\n\n        <SlidingPanel isOpen={this.state.isHamburgerMenuOpen}\n                      position='left'\n                      size=\"100px\" minSize=\"100px\">\n          <BrunelMenu emitClose={()=>{this.setState({isHamburgerMenuOpen:false})}}\n                      items={menu} />\n        </SlidingPanel>\n\n        <div className={styles.graphContainer}>\n          <SocialGraph social={this.state.social}\n                       emitClicked={(id)=>this.slotSelected(id)} />\n        </div>\n\n        <div className={styles.bottomContainer}>\n          <DefaultButton onClick={()=>{this.toggleFilterPanel()}}>\n            Filters\n          </DefaultButton>\n          <DefaultButton onClick={()=>this.toggleTimeLinePanel()}>\n            {timeline_text}\n          </DefaultButton>\n        </div>\n\n      </div>\n    );\n  }\n};\n\nexport default SocialApp;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"project\":\"GroupsList_project__1pnkG\",\"projectHeader\":\"GroupsList_projectHeader__1YDl_\",\"projectBody\":\"GroupsList_projectBody__2Joe0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"connections\":\"ConnectionList_connections__2QbO3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"project\":\"WeightsList_project__3m0SJ\",\"projectHeader\":\"WeightsList_projectHeader__25IKl\",\"projectBody\":\"WeightsList_projectBody__3JVF3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"InfoBox_container__2EWGz\",\"heroImage\":\"InfoBox_heroImage__34BXw\",\"title\":\"InfoBox_title__2rO4Z\",\"button\":\"InfoBox_button__3w2z7\",\"tabs\":\"InfoBox_tabs__32XI5\",\"tablist\":\"InfoBox_tablist__3mBju\",\"tab\":\"InfoBox_tab__qp9XR\",\"tabPanel\":\"InfoBox_tabPanel__3FpOY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonGroup\":\"TimeLineView_buttonGroup__2GQ9k\",\"datePicker\":\"TimeLineView_datePicker__1VM6E\",\"zoomButton\":\"TimeLineView_zoomButton__2X6JE\",\"scrollButton\":\"TimeLineView_scrollButton__pbyum\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TimeLineBox_container__3XwaK\",\"centerContainer\":\"TimeLineBox_centerContainer__16Ujh\",\"tabs\":\"TimeLineBox_tabs__yHSvr\",\"tablist\":\"TimeLineBox_tablist__yB2UA\",\"tab\":\"TimeLineBox_tab__157Wu\",\"tabPanel\":\"TimeLineBox_tabPanel__3u0d3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filterContainer\":\"FilterBox_filterContainer__2KAxt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SlidingPanel_container__360Fr\",\"leftContainer\":\"SlidingPanel_leftContainer__hQNC6\",\"rightContainer\":\"SlidingPanel_rightContainer__57qYr\",\"topContainer\":\"SlidingPanel_topContainer__YiYRz\",\"bottomContainer\":\"SlidingPanel_bottomContainer__2dEzd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromLeft_enter__jKjRY\",\"enterActive\":\"SlideFromLeft_enterActive__159kE\",\"exit\":\"SlideFromLeft_exit___gRJ9\",\"exitActive\":\"SlideFromLeft_exitActive__YfXDY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromRight_enter__3at5G\",\"enterActive\":\"SlideFromRight_enterActive__qhcn3\",\"exit\":\"SlideFromRight_exit__C9Did\",\"exitActive\":\"SlideFromRight_exitActive__2HcMW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromBottom_enter__1iOKm\",\"enterActive\":\"SlideFromBottom_enterActive__248cg\",\"exit\":\"SlideFromBottom_exit__1SBqa\",\"exitActive\":\"SlideFromBottom_exitActive__1TiIq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromTop_enter__2sGUw\",\"enterActive\":\"SlideFromTop_enterActive__3jElj\",\"exit\":\"SlideFromTop_exit__28rU4\",\"exitActive\":\"SlideFromTop_exitActive__2_Nxz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"OverlayBox_container__2H63R\",\"centerContainer\":\"OverlayBox_centerContainer__bl7gf\",\"button\":\"OverlayBox_button__V4JvO\",\"url\":\"OverlayBox_url__aN8n5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SearchBar_container__1nsMW\",\"searchContainer\":\"SearchBar_searchContainer__2xOxT\",\"resultContainer\":\"SearchBar_resultContainer__1_9Lx\",\"searchPending\":\"SearchBar_searchPending__1uhP9\",\"searchResult\":\"SearchBar_searchResult__1iaaf\",\"hamburgerButton\":\"SearchBar_hamburgerButton__1PuEk\",\"searchBox\":\"SearchBar_searchBox__3PHmH\",\"disabledButton\":\"SearchBar_disabledButton__2PWwO\",\"searchButton\":\"SearchBar_searchButton__1GItM\",\"magnifier\":\"SearchBar_magnifier__2xBEb\",\"closeResultButton\":\"SearchBar_closeResultButton__MIs2K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"BrunelMenu_menu__2QqAJ\",\"menuItem\":\"BrunelMenu_menuItem__Adzvp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"module\":\"SocialApp_module__3Cefy\",\"backgroundImage\":\"SocialApp_backgroundImage__3Kw9P\",\"graphContainer\":\"SocialApp_graphContainer__1fIZ_\",\"controlButton\":\"SocialApp_controlButton__dd05U\",\"bottomContainer\":\"SocialApp_bottomContainer__7teeO\",\"filterText\":\"SocialApp_filterText__12DDf\",\"citationText\":\"SocialApp_citationText__m100A\",\"closePanelButton\":\"SocialApp_closePanelButton__S0EAB\",\"closeOverlayButton\":\"SocialApp_closeOverlayButton__38BCO\",\"modal\":\"SocialApp_modal__7Dp7u\",\"modalOverlay\":\"SocialApp_modalOverlay__8objV\",\"modalOverlayAfterOpen\":\"SocialApp_modalOverlayAfterOpen__3azyt\",\"modalOverlayBeforeClose\":\"SocialApp_modalOverlayBeforeClose__3K48w\"};"],"sourceRoot":""}