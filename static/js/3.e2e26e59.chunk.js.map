{"version":3,"sources":["components/AnalysisPanel.module.css","components/AnalysisButton.module.css","components/Accordion.module.css","components/DefaultButton.module.css","components/CheckBox.module.css","components/ResponsiveList.module.css","components/GroupsList.module.css","components/ConnectionList.module.css","components/WeightsList.module.css","components/InfoBox.module.css","images/RHowlett_IKB.jpg","images/IllustriteZeitung_SS_GreatBritain.png","images/320px-SS_Great_Britain_diagram.jpg","images/Sumerian_26th_c_Adab.jpg","images/320px-SS_Great_Britain_transverse_section.jpg","components/TimeLineBox.module.css","components/FilterBox.module.css","components/SlidingPanel.module.css","components/transitions/SlideFromLeft.module.css","components/transitions/SlideFromRight.module.css","components/transitions/SlideFromBottom.module.css","components/transitions/SlideFromTop.module.css","components/OverlayBox.module.css","components/SearchBar.module.css","components/BrunelMenu.module.css","images/ssgb_logo.png","components/ShipSelector.module.css","components/ShipTitle.module.css","SocialApp.module.css","components/AnalysisPanel.js","components/AnalysisButton.js","components/d3/ForceGraph.d3.js","components/ForceGraph.js","components/SocialGraph.js","components/Accordion.js","components/DefaultButton.js","components/CheckBox.js","components/ResponsiveList.js","components/GroupsList.js","components/ConnectionList.js","components/DateRangeButton.js","model/Errors.js","model/RoughDate.js","model/DateRange.js","components/SourceList.js","components/WeightsList.js","model/Person.js","model/People.js","model/Business.js","model/Businesses.js","model/Connection.js","model/Connections.js","model/Position.js","model/Positions.js","model/Affiliation.js","model/Affiliations.js","model/Source.js","model/Sources.js","model/Note.js","model/Notes.js","model/Project.js","model/Projects.js","model/Biographies.js","model/Social.js","components/InfoBox.js","components/NewTimeline.js","components/TimeLineBox.js","components/FilterBox.js","components/SlidingPanel.js","components/OverlayBox.js","components/SearchBar.js","components/BrunelMenu.js","components/ShipSelector.js","components/ShipTitle.js","SocialApp.js","components/ForceGraph.module.css"],"names":["module","exports","AnalysisPanel","className","styles","wholePanel","verticalSpaceTitle","titleText","verticalSpace","button","onClick","props","toggleFilterPanel","togglePanel","toggleTimeLinePanel","toggleWobble","React","Component","AnalysisButon","this","_null_function","constrain","x","w","r","Math","max","min","handleMouseClick","THIS","svg","_mainGroup","node","d3","raise","id","attr","items","selectAll","classed","highlight","state","signalClicked","stopPropagation","handleMouseOver","each","d","target_id","target","source_id","source","signalMouseOver","handleMouseOut","signalMouseOut","_resolve","item","getID","ForceGraphD3","_updateSimulation","bind","_updateLink","_updateNodeText","_updateNode","draw","drawFromScratch","setPositionColors","getPositionColor","update","updateGraph","drag","dragLink","getWeight","uid","uuidv4","width","height","social","selected","highlighted","colors","groupTable","slice","length","_size_changed","_graph_changed","_is_running","_is_drawn","_target_decay","_target_alpha","filter","getFilter","Object","keys","h","graph","getGraph","l","lodash","cloneDeep","edges","edge","n","nodes","old_nodes","old","_graph","i","o","y","random","fixed","fx","fy","size_changed","wobble","selectedShipID","lastShip","prototype","hasOwnProperty","call","entity","positions","group","positionGroups","toLowerCase","startsWith","console","error","positionCode","getPositionCode","splitGroup","split","namedPositions","getPositions","colorTable","entries","position","trimPosition","replace","members","includes","log","positionGroup","simulation","_simulation","on","alphaTarget","velocityDecay","restart","index","dx","dy","shipID","getSelectedShipID","weight","data","select","join","enter","append","text","node_text","label","link","type","value","link_weak","link_indirect","stop","force","strength","distanceMin","distanceMax","links","distance","iterations","radius","size","getGroupForce","_link","dr","sqrt","_node","_label","restartSimulation","remove","container","mainGroup","update_simulation","ForceGraph","_updateSize","window","addEventListener","removeEventListener","updateSize","offsetWidth","offsetHeight","s","ref","el","style","SocialGraph","getNetwork","emitClicked","BAccordion","accordion","preExpanded","allowMultipleExpanded","allowZeroExpanded","children","BAccordionItem","accordionItem","uuid","BAccordionTitle","accordionButton","BAccordionPanel","DefaultButton","href","CheckBox","checkBox","checked","onChange","checkMark","ResponsiveList","list","ResponsiveListItem","key","null_function","GroupsList","groups","title","emitSelected","emitToggleFilter","projects","forEach","get","is_filtered","isFiltered","push","getName","project","projectHeader","projectBody","minWidth","ConnectionList","connections","listitems","map","name","DateRangeButton","_isARoughDateObject","_isADateRangeObject","isNull","toSimpleString","toDateRange","KeyError","args","Error","captureStackTrace","ValueError","MissingError","_toDate","val","def","_isAMomentObject","date","moment","isValid","_get_min","d1","d2","toDate","_get_max","RoughDate","start","end","raw","setState","toISOString","delta","add","isFuzzy","format","e","getMonth","getDate","getFullYear","getEarliest","getLatest","DateRange","isExact","both","m","toMoment","other","s1","s2","getStart","getEnd","getRaw","getLatestDate","getEarliestDate","getEarliestString","getLatestString","eq","lt","gt","unDry","Dry","registerClass","_clean","hasBounds","isInstant","getStartString","getEndString","getEarliestStart","merge","getLatestEnd","hasStart","hasEnd","my_start","other_start","my_end","other_end","contains","scale","getDelta","toString","tmp","dates","SourceList","sources","output","daterange","mergeAll","body","WeightsList","weights","_filterWindow","values","ret","intersect","_filterProject","Person","titles","firstnames","surnames","suffixes","affiliations","alive","gender","notes","orig_name","_getHook","_isAPersonObject","ids","seen","nsources","nprojects","person","getAlive","hook","parts","part","getTitle","getFirstName","getSurname","getSuffix","scores","content","projectKey","isAnchor","shape","sort","c","_generate_person_uid","substring","People","registry","_names","_isAPeopleObject","load","_updateHooks","names","canAdd","existing","getByName","clone","trim","results","indexOf","funcs","people","timeline","getTimeLine","anchor","getNode","is_anchor","array","element","v","Business","_isABusinessObject","business","_generate_business_uid","Businesses","_isABusinessesObject","businesses","_mergeSources","Connection","n0","n1","shared","duration","correspondances","_isAConnectionObject","node0","getNode0","node1","getNode1","getDuration","getNode0Name","getNode1Name","color","getColorFromType","_generate_connection_uid","Connections","_isAConnectionsObject","connection","nnodes","_add","getNode0ID","getNode1ID","areNodesVisible","toEdge","Position","_isAPositionObject","canonical","makeCanonical","_generate_position_uid","Positions","_isAPositionsObject","_isApositionObject","Affiliation","_isAAffiliationObject","_generate_affiliation_uid","Affiliations","_isAAffiliationsObject","affiliation","Source","description","_isASourceObject","ne","_generate_source_uid","Sources","_isASourcesObject","getDescription","Note","_isANoteObject","getText","_generate_note_uid","Notes","_isANotesObject","note","Project","url","_isAProjectObject","start_time","end_time","project_id","_generate_project_uid","Projects","_isAProjectsObject","Biographies","bios","_isABiographiesObject","biography","bio","_push","enabled","timestep","Social","cache","projectTimeLine","itemTimeLine","node_filters","edge_filters","max_window","_rebuilding","_isASocialObject","getHook","biographies","getWindow","filterWindow","project_filter","filterProject","source_filter","filterSource","node_filter","getConnectionsTo","group_filter","inGroup","new_window","getStartDate","getEndDate","fitted","_fitWindow","setWindow","clearCache","filtered","getNodeFilters","getEdgeFilters","getConnections","f","_getType","result","getPeople","find","getBusinesses","getAffiliations","getSources","search","getBiographies","getProjects","getNodes","concat","getEdges","added","getNotes","default_text","getBiography","pages","a","InfoBox","image","default_image","person_image","business_image","source_image","asources","getAffiliationSources","csources","getCorrespondanceSources","textAlign","getWeights","getType","analysis_image","extractData","tabs","panes","tabId","tabPanel","tab","tabFor","heroImage","alt","src","vertical","defaultTab","tablist","NewTimeline","setFilter","itemRenderer","defaultTimeStart","defaultTimeEnd","textStyle","overflow","paddingLeft","textOverflow","whiteSpace","dateHeaderStyle","fontSize","backgroundColor","fontFamily","border","shipName","resetFilters","itemContext","getItemProps","background","dragging","resizing","borderStyle","borderWidth","onMouseDown","timeline_items","getNewTimeLine","sidebarWidth","itemTouchSendsClick","stackItems","lineHeight","itemHeightRatio","showCursorLine","canMove","canResize","traditionalZoom","timeSteps","year","unit","intervals","headerContext","getRootProps","getIntervalProps","interval","borderLeft","cursor","startTime","TimeLineBox","dimensions","deactivate","activate","tabList","shipSelect","centerContainer","filterList","maxWidth","FilterBox","filter_text","getFilterText","emitClearFilters","filter_info","filterContainer","filterText","SlidingPanel","isOpen","defaultSize","minSize","maxSize","rightContainer","transition","SlideFromRight","horiz_size","vert_size","maxHeight","bottomContainer","SlideFromBottom","topContainer","SlideFromTop","leftContainer","SlideFromLeft","CSSTransition","in","timeout","classNames","unmountOnExit","OverlayBox","loading","getURL","fadeIn","onLoad","hideSpinner","frameBorder","marginHeight","marginWidth","sandbox","emitClose","SearchResults","SearchBar","suggestions","searching","nextProps","searchText","setSuggestions","setResults","setTimeout","startSearch","startSuggestion","event","isSearching","autocomplete","isEmpty","which","keyCode","searchFor","searchContainer","resultContainer","searchPending","display","closeResultButton","stopSearch","searchResult","button_style","searchButton","disabledButton","hamburgerButton","emitHamburgerClicked","searchBox","onKeyPress","onEnter","placeholder","onSearch","magnifier","isSearchingComponent","isSuggesting","isSuggestingComponent","hasResults","resultsComponent","BrunelMenu","viewAbout","viewSource","setOverlay","open","focus","sidebar","logo","clickReset","ShipSelector","ssGW","shipFilter","ShipTitle","shipTitle","SocialApp","parse","graph_data","setAnchor","setMaxWindow","highlighted_item","selected_item","overlayItem","isInfoPanelOpen","isTimeLinePanelOpen","isFilterPanelOpen","isHamburgerMenuOpen","isOverlayOpen","isAnalysisOpen","wobbleEnabled","selectedShip","socialGraph","slotToggleFilter","toggleFilter","showInfo","closePanels","location","reload","graphContainerClass","graphContainerMenuClosed","onRequestClose","closeOverlay","contentLabel","modal","overlayClassName","base","modalOverlay","afterOpen","modalOverlayAfterOpen","beforeClose","modalOverlayBeforeClose","closeTimeoutMS","appElement","document","getElementById","closeOverlayButton","slotSelected","emitHighlighted","slotHighlighted","slotClicked","closePanelButton","slotSetFilterbyID","slotClearFilters","resetAll","clickSource","shipNameContainer","slotSetFilter","rightSidePanel","AnalysisButton","toggleAnalysisPanel"],"mappings":"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","file":"static/js/3.e2e26e59.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"titleText\":\"AnalysisPanel_titleText__b6UZM\",\"wholePanel\":\"AnalysisPanel_wholePanel__yyW2P\",\"buttonPanel\":\"AnalysisPanel_buttonPanel__1nbYH\",\"button\":\"AnalysisPanel_button__297y3\",\"verticalSpaceTitle\":\"AnalysisPanel_verticalSpaceTitle__zFl5A\",\"verticalSpace\":\"AnalysisPanel_verticalSpace__ZeDzh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"AnalysisButton_button__27DRu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"accordion\":\"Accordion_accordion__34t4_\",\"accordionItem\":\"Accordion_accordionItem__VO6pK\",\"accordionButton\":\"Accordion_accordionButton__hVXWw\",\"accordionPanel\":\"Accordion_accordionPanel__1rZAH\",\"fadein\":\"Accordion_fadein__2cKpJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"DefaultButton_button__1Uv_G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"checkBox\":\"CheckBox_checkBox__36R4T\",\"checkMark\":\"CheckBox_checkMark__2h9Jd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"ResponsiveList_list__1-ZoE\",\"item\":\"ResponsiveList_item__3jhI7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"project\":\"GroupsList_project__1pnkG\",\"projectHeader\":\"GroupsList_projectHeader__1YDl_\",\"projectBody\":\"GroupsList_projectBody__2Joe0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"connections\":\"ConnectionList_connections__2QbO3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"project\":\"WeightsList_project__3m0SJ\",\"projectHeader\":\"WeightsList_projectHeader__25IKl\",\"projectBody\":\"WeightsList_projectBody__3JVF3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"InfoBox_container__2EWGz\",\"heroImage\":\"InfoBox_heroImage__34BXw\",\"title\":\"InfoBox_title__2rO4Z\",\"button\":\"InfoBox_button__3w2z7\",\"tabs\":\"InfoBox_tabs__32XI5\",\"tablist\":\"InfoBox_tablist__3mBju\",\"tab\":\"InfoBox_tab__qp9XR\",\"tabPanel\":\"InfoBox_tabPanel__3FpOY\"};","module.exports = __webpack_public_path__ + \"static/media/RHowlett_IKB.68e88d10.jpg\";","module.exports = __webpack_public_path__ + \"static/media/IllustriteZeitung_SS_GreatBritain.946104e0.png\";","module.exports = __webpack_public_path__ + \"static/media/320px-SS_Great_Britain_diagram.898c32f6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Sumerian_26th_c_Adab.757d98b8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/320px-SS_Great_Britain_transverse_section.7767cb60.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TimeLineBox_container__3XwaK\",\"centerContainer\":\"TimeLineBox_centerContainer__16Ujh\",\"tabs\":\"TimeLineBox_tabs__yHSvr\",\"tablist\":\"TimeLineBox_tablist__yB2UA\",\"tab\":\"TimeLineBox_tab__157Wu\",\"tabPanel\":\"TimeLineBox_tabPanel__3u0d3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filterContainer\":\"FilterBox_filterContainer__2KAxt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SlidingPanel_container__360Fr\",\"leftContainer\":\"SlidingPanel_leftContainer__hQNC6\",\"rightContainer\":\"SlidingPanel_rightContainer__57qYr\",\"topContainer\":\"SlidingPanel_topContainer__YiYRz\",\"bottomContainer\":\"SlidingPanel_bottomContainer__2dEzd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromLeft_enter__jKjRY\",\"enterActive\":\"SlideFromLeft_enterActive__159kE\",\"exit\":\"SlideFromLeft_exit___gRJ9\",\"exitActive\":\"SlideFromLeft_exitActive__YfXDY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromRight_enter__3at5G\",\"enterActive\":\"SlideFromRight_enterActive__qhcn3\",\"exit\":\"SlideFromRight_exit__C9Did\",\"exitActive\":\"SlideFromRight_exitActive__2HcMW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromBottom_enter__1iOKm\",\"enterActive\":\"SlideFromBottom_enterActive__248cg\",\"exit\":\"SlideFromBottom_exit__1SBqa\",\"exitActive\":\"SlideFromBottom_exitActive__1TiIq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromTop_enter__2sGUw\",\"enterActive\":\"SlideFromTop_enterActive__3jElj\",\"exit\":\"SlideFromTop_exit__28rU4\",\"exitActive\":\"SlideFromTop_exitActive__2_Nxz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"OverlayBox_container__2H63R\",\"centerContainer\":\"OverlayBox_centerContainer__bl7gf\",\"button\":\"OverlayBox_button__V4JvO\",\"url\":\"OverlayBox_url__aN8n5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SearchBar_container__1nsMW\",\"searchContainer\":\"SearchBar_searchContainer__2xOxT\",\"resultContainer\":\"SearchBar_resultContainer__1_9Lx\",\"searchPending\":\"SearchBar_searchPending__1uhP9\",\"searchResult\":\"SearchBar_searchResult__1iaaf\",\"hamburgerButton\":\"SearchBar_hamburgerButton__1PuEk\",\"searchBox\":\"SearchBar_searchBox__3PHmH\",\"disabledButton\":\"SearchBar_disabledButton__2PWwO\",\"searchButton\":\"SearchBar_searchButton__1GItM\",\"magnifier\":\"SearchBar_magnifier__2xBEb\",\"closeResultButton\":\"SearchBar_closeResultButton__MIs2K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"BrunelMenu_sidebar__2yyDb\",\"logo\":\"BrunelMenu_logo__274YW\",\"verticalSpace\":\"BrunelMenu_verticalSpace__1fWiP\",\"button\":\"BrunelMenu_button__2Bp85\"};","module.exports = __webpack_public_path__ + \"static/media/ssgb_logo.ee48e16d.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"ShipSelector_button__1cPR1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"shipTitle\":\"ShipTitle_shipTitle__3ELcB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"module\":\"SocialApp_module__3Cefy\",\"graphContainer\":\"SocialApp_graphContainer__1fIZ_\",\"graphContainerMenuClosed\":\"SocialApp_graphContainerMenuClosed__VzCoB\",\"graphContainerMenuOpen\":\"SocialApp_graphContainerMenuOpen__z6JxE\",\"shipNameContainer\":\"SocialApp_shipNameContainer__3G7ll\",\"controlButton\":\"SocialApp_controlButton__dd05U\",\"analysisButtons\":\"SocialApp_analysisButtons__1quBU\",\"bottomContainer\":\"SocialApp_bottomContainer__7teeO\",\"rightSidePanel\":\"SocialApp_rightSidePanel__3D6TX\",\"filterText\":\"SocialApp_filterText__12DDf\",\"citationText\":\"SocialApp_citationText__m100A\",\"closePanelButton\":\"SocialApp_closePanelButton__S0EAB\",\"closeOverlayButton\":\"SocialApp_closeOverlayButton__38BCO\",\"modal\":\"SocialApp_modal__7Dp7u\",\"modalOverlay\":\"SocialApp_modalOverlay__8objV\",\"modalOverlayAfterOpen\":\"SocialApp_modalOverlayAfterOpen__3azyt\",\"modalOverlayBeforeClose\":\"SocialApp_modalOverlayBeforeClose__3K48w\",\"sidebarVis\":\"SocialApp_sidebarVis__eSMUM\",\"sidebarInvis\":\"SocialApp_sidebarInvis__2tJ2j\"};","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport styles from \"./AnalysisPanel.module.css\";\n\nclass AnalysisPanel extends React.Component {\n  render() {\n    return (\n      <div className={styles.wholePanel}>\n        <div className={styles.verticalSpaceTitle}></div>\n        <div className={styles.titleText}>Analysis</div>\n        <div className={styles.verticalSpace}></div>\n        <button\n          className={styles.button}\n          onClick={() => {\n            this.props.toggleFilterPanel();\n            this.props.togglePanel();\n          }}\n        >\n          Filters\n        </button>\n        <button\n          className={styles.button}\n          onClick={() => {\n            this.props.toggleTimeLinePanel();\n            this.props.togglePanel();\n          }}\n        >\n          Timeline\n        </button>\n        <button\n          className={styles.button}\n          onClick={() => {\n            this.props.toggleWobble();\n          }}\n        >\n          Wobble\n        </button>\n        <div className={styles.verticalSpace}></div>\n        <button\n          className={styles.button}\n          onClick={() => {\n            this.props.togglePanel();\n          }}\n        >\n          Close\n        </button>\n      </div>\n    );\n  }\n}\n\nAnalysisPanel.propTypes = {\n  toggleFilterPanel: PropTypes.func.isRequired,\n  toggleTimeLinePanel: PropTypes.func.isRequired,\n  toggleWobble: PropTypes.func.isRequired,\n  togglePanel: PropTypes.func.isRequired,\n};\n\nexport default AnalysisPanel;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./AnalysisButton.module.css\";\n\nclass AnalysisButon extends React.Component {\n  render() {\n    return (\n      <button className={styles.button} onClick={this.props.togglePanel}>\n        Analysis\n      </button>\n    );\n  }\n}\n\nAnalysisButon.propTypes = {\n  togglePanel: PropTypes.func.isRequired,\n};\n\nexport default AnalysisButon;\n","import * as d3 from \"d3\";\n\nimport React from \"react\";\nimport lodash from \"lodash\";\n\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport styles from \"../ForceGraph.module.css\";\n\nimport positionGroups from \"../../position_groups.json\";\n\nfunction _null_function() {}\n\nfunction constrain(x, w, r = 20) {\n  return Math.max(r, Math.min(w - r, x));\n}\n\nfunction handleMouseClick(THIS) {\n  function handle() {\n    let svg = THIS._mainGroup;\n    if (!svg) {\n      return;\n    }\n\n    let node = d3.select(this);\n    node.raise();\n\n    let id = node.attr(\"id\");\n\n    if (!id) {\n      return;\n    }\n\n    let items = svg.selectAll(`#${id}`);\n\n    items.classed(styles.highlight, true);\n\n    items = svg.selectAll(`[source_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    items = svg.selectAll(`[target_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    THIS.state.signalClicked(id);\n    d3.event.stopPropagation();\n  }\n\n  return handle;\n}\n\nfunction handleMouseOver(THIS) {\n  function handle() {\n    let svg = THIS._mainGroup;\n    if (!svg) {\n      return;\n    }\n\n    let node = d3.select(this);\n    node.raise();\n\n    let id = node.attr(\"id\");\n\n    if (!id) {\n      return;\n    }\n\n    //highlight the node\n    let items = svg.selectAll(`#${id}`);\n    items.classed(styles.highlight, true);\n\n    //highlight the connection lines with this node as a source\n    items = svg.selectAll(`[source_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    //highlight the nodes with this node as a target\n    items.each((d) => {\n      let target_id = d.target.id;\n      svg.selectAll(`#${target_id}`).classed(styles.highlight, true);\n    });\n\n    //highlight the connection lines with this node as a target\n    items = svg.selectAll(`[target_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    //highlight the nodes with this node as a source\n    items.each((d) => {\n      let source_id = d.source.id;\n      svg.selectAll(`#${source_id}`).classed(styles.highlight, true);\n    });\n\n    if (node.attr(\"source_id\")) {\n      svg.selectAll(`#${node.attr(\"source_id\")}`).classed(styles.highlight, true);\n\n      svg.selectAll(`#${node.attr(\"target_id\")}`).classed(styles.highlight, true);\n    }\n\n    THIS.state.signalMouseOver(id);\n  }\n\n  return handle;\n}\n\nfunction handleMouseOut(THIS) {\n  function handle() {\n    let svg = THIS._mainGroup;\n    if (!svg) {\n      return;\n    }\n\n    let node = d3.select(this);\n    let id = node.attr(\"id\");\n\n    let items = svg.selectAll(`#${id}`);\n\n    items.classed(styles.highlight, false);\n\n    //highlight the connection lines with this node as a source\n    items = svg.selectAll(`[source_id=${id}]`);\n    items.classed(styles.highlight, false);\n\n    //highlight the nodes with this node as a target\n    items.each((d) => {\n      let target_id = d.target.id;\n      svg.selectAll(`#${target_id}`).classed(styles.highlight, false);\n    });\n\n    //highlight the connection lines with this node as a target\n    items = svg.selectAll(`[target_id=${id}]`);\n    items.classed(styles.highlight, false);\n\n    //highlight the nodes with this node as a source\n    items.each((d) => {\n      let source_id = d.source.id;\n      svg.selectAll(`#${source_id}`).classed(styles.highlight, false);\n    });\n\n    if (node.attr(\"source_id\")) {\n      svg.selectAll(`#${node.attr(\"source_id\")}`).classed(styles.highlight, false);\n\n      svg.selectAll(`#${node.attr(\"target_id\")}`).classed(styles.highlight, false);\n    }\n\n    THIS.state.signalMouseOut(id);\n  }\n\n  return handle;\n}\n\nfunction _resolve(item) {\n  if (!item) {\n    return null;\n  } else if (item.getID) {\n    return item.getID();\n  } else {\n    return item;\n  }\n}\n\n/** The main class that renders the graph in the ForceGraph */\nclass ForceGraphD3 extends React.Component {\n  constructor(props) {\n    super(props);\n    this._updateSimulation = this._updateSimulation.bind(this);\n    this._updateLink = this._updateLink.bind(this);\n    this._updateNodeText = this._updateNodeText.bind(this);\n    this._updateNode = this._updateNode.bind(this);\n    this.draw = this.draw.bind(this);\n    this.drawFromScratch = this.drawFromScratch.bind(this);\n    this.setPositionColors = this.setPositionColors.bind(this);\n    this.getPositionColor = this.getPositionColor.bind(this);\n    this.update = this.update.bind(this);\n    this.updateGraph = this.updateGraph.bind(this);\n\n    this.drag = this.drag.bind(this);\n    this.dragLink = this.dragLink.bind(this);\n    this.getWeight = this.getWeight.bind(this);\n\n    // generate a UID for this graph so that we don't clash\n    // with any other graphs on the same page\n    let uid = uuidv4();\n\n    this.state = {\n      width: null,\n      height: null,\n      social: null,\n      selected: null,\n      highlighted: null,\n      signalClicked: _null_function,\n      signalMouseOut: _null_function,\n      signalMouseOver: _null_function,\n      colors: {},\n      groupTable: {},\n      uid: uid.slice(uid.length - 8),\n    };\n\n    this._size_changed = true;\n    this._graph_changed = true;\n    this._is_running = false;\n    this._is_drawn = false;\n\n    // Set parameters for the force simulation\n    this._target_decay = 0.4;\n    this._target_alpha = 0.3;\n\n    // this.updateGraph = this.updateGraph.bind(this);\n    // this.update = this.update.bind(this);\n\n    this.update(props);\n  }\n\n  getSelectedShipID() {\n    const filter = this.state.social.getFilter();\n\n    if (filter[\"project\"]) {\n      const projectCode = Object.keys(filter[\"project\"])[0];\n\n      return projectCode;\n    }\n  }\n\n  updateGraph(social) {\n    let w = this.state.width;\n    let h = this.state.height;\n\n    this.state.social = social;\n\n    if (!w || !h) {\n      return;\n    }\n\n    let graph = null;\n\n    if (social) {\n      graph = social.getGraph();\n    }\n\n    // The social object will cache the 'getGraph' result, meaning\n    // that any change in this object signals that the graph needs\n    // to be redrawn\n    if (graph !== this.state.graph) {\n      //save the cached graph\n      this.state.graph = graph;\n      //   this.setState({ graph: graph });\n\n      // This view needs to clone its own copy of the graph, as\n      // D3 will update the graph object. We need to clone in case\n      // two ForceGraph.d3 views are viewing the same Social graph\n      graph = lodash.cloneDeep(this.state.graph);\n\n      // need to update IDs so that the edges refer to the index\n      // of the node in the nodes array - this could be optimised!\n      for (let l in graph.edges) {\n        let edge = graph.edges[l];\n        for (let n in graph.nodes) {\n          let node = graph.nodes[n];\n          if (edge.source === node.id) {\n            edge.source = n;\n            edge.source_id = node.id;\n          } else if (edge.target === node.id) {\n            edge.target = n;\n            edge.target_id = node.id;\n          }\n        }\n      }\n\n      //index any old nodes\n      let old_nodes = [];\n      let old = {};\n\n      if (this._graph) {\n        old_nodes = this._graph.nodes;\n\n        for (let n in old_nodes) {\n          old[old_nodes[n].id] = n;\n        }\n      }\n\n      for (let n in graph.nodes) {\n        let node = graph.nodes[n];\n\n        let i = old[node.id];\n\n        if (i) {\n          let o = old_nodes[i];\n          node.x = o.x;\n          node.y = o.y;\n        } else {\n          node.x = w * Math.random();\n          node.y = h * Math.random();\n        }\n\n        if (node.fixed) {\n          if (i) {\n            node.fx = node.x;\n            node.fy = node.y;\n          } else {\n            node.fx = w / 2;\n            node.fy = h / 2;\n          }\n        }\n      }\n\n      this._graph = graph;\n      this._graph_changed = true;\n    }\n  }\n\n  update(props) {\n    let size_changed = false;\n\n    if (props.wobble) {\n      this._target_decay = 0.4;\n      this._target_alpha = 0.3;\n    } else {\n      this._target_decay = 0.4;\n      this._target_alpha = 0;\n    }\n\n    if (props.selectedShipID && props.selectedShipID !== this.state.lastShip) {\n      this.state.lastShip = props.selectedShipID;\n      this._graph_changed = true;\n    }\n\n    let hasWidth = Object.prototype.hasOwnProperty.call(props, \"width\");\n\n    if (hasWidth) {\n      if (this.state.width !== props.width) {\n        this.state.width = props.width;\n        // this.setState({ width: props.width });\n        size_changed = true;\n      }\n    }\n\n    let hasHeight = Object.prototype.hasOwnProperty.call(props, \"height\");\n\n    if (hasHeight) {\n      if (this.state.height !== props.height) {\n        this.state.height = props.height;\n        // this.setState({ height: props.height });\n        size_changed = true;\n      }\n    }\n\n    if (size_changed) {\n      this._size_changed = true;\n    }\n\n    let hasSignalClicked = Object.prototype.hasOwnProperty.call(props, \"signalClicked\");\n\n    if (hasSignalClicked) {\n      if (this.state.signalClicked) {\n        this.state.signalClicked = props.signalClicked;\n        // this.setState({ signalClicked: props.signalClicked });\n      } else {\n        this.state.signalClicked = _null_function;\n        // this.setState({ signalClicked: _null_function });\n      }\n    }\n\n    let hasSignalMouseOut = Object.prototype.hasOwnProperty.call(props, \"signalMouseOut\");\n\n    if (hasSignalMouseOut) {\n      if (this.state.signalMouseOut) {\n        this.state.signalMouseOut = props.signalMouseOut;\n        // this.setState({ signalMouseOut: props.signalMouseOut });\n      } else {\n        this.state.signalMouseOut = _null_function;\n        // this.setState({ signalMouseOut: _null_function });\n      }\n    }\n\n    let hasSignalMouseOver = Object.prototype.hasOwnProperty.call(props, \"signalMouseOver\");\n\n    if (hasSignalMouseOver) {\n      if (this.state.signalMouseOver) {\n        this.state.signalMouseOver = props.signalMouseOver;\n        // this.setState({ signalMouseOver: props.signalMouseOver });\n      } else {\n        this.state.signalMouseOver = _null_function;\n        // this.setState({ signalMouseOver: _null_function });\n      }\n    }\n\n    let hasSocial = Object.prototype.hasOwnProperty.call(props, \"social\");\n\n    if (hasSocial) {\n      this.updateGraph(props.social);\n    }\n\n    // We can setup the colours object\n    this.setPositionColors();\n\n    let hasSelected = Object.prototype.hasOwnProperty.call(props, \"selected\");\n\n    if (hasSelected) {\n      this.state.selected = _resolve(props.selected);\n      //   this.setState({ selected: _resolve(props.selected) });\n    }\n\n    let hasHighlighted = Object.prototype.hasOwnProperty.call(props, \"highlighted\");\n\n    if (hasHighlighted) {\n      this.state.highlighted = _resolve(props.highlighted);\n      //   this.setState({ highlighted: _resolve(props.highlighted) });\n    }\n  }\n\n  className() {\n    return `ForceGraphD3-${this.state.uid}`;\n  }\n\n  getPositionColor(entity) {\n    // This takes an entity (a person or a business) and finds the\n    // colour that's given in the positions_groups.json file\n    const positions = entity[\"positions\"];\n    const group = entity[\"group\"];\n\n    if (group === \"anchor\") {\n      return positionGroups[\"anchor\"][\"color\"];\n    }\n\n    // If we get an undefined position return white\n    if (!positions) {\n      const entity_id = entity[\"id\"].toLowerCase();\n\n      if (entity_id.startsWith(\"b\")) {\n        return positionGroups[\"business\"][\"color\"];\n      } else {\n        console.error(\"No colour available for this entity : \", entity);\n        return \"#FFFFFF\";\n      }\n    }\n\n    const positionCode = this.getPositionCode(positions, group);\n\n    return this.state.colors[positionCode];\n  }\n\n  getPositionCode(positions, group) {\n    // Split string by colon, for now just use the first value\n    if (group === \"anchor\") {\n      console.error(\"We got an anchor here somehow\", positions, group);\n      return \"unkown\";\n    }\n\n    let positionCode;\n    // Split the string and try both\n    const splitGroup = group.split(\":\");\n\n    try {\n      // As some of the positions objects don't have a value for both\n      // projects (called groups here) we have to check both\n      try {\n        positionCode = positions[splitGroup[0]][0];\n      } catch (error) {\n        positionCode = positions[splitGroup[1]][0];\n      }\n    } catch (error) {\n      console.error(\"Error with position \", positions, \" with group : \", group, \"splitGroup : \", splitGroup, error);\n      positionCode = \"unknown\";\n    }\n\n    return positionCode.toLowerCase();\n  }\n\n  setPositionColors() {\n    // Read all the positions for this graph\n    const namedPositions = this.state.social.getPositions().items();\n\n    let colorTable = {};\n    let groupTable = {};\n\n    // TODO - a lot of this could be made easier by just assigning fixed UIDs to\n    // positions, could make a small object that did that and a notebook to output\n    // a JSON that's read in here for groups etc?\n\n    // Read the positions and colours from a JSON file that can be easily updated\n    for (let [position, uid] of Object.entries(namedPositions)) {\n      uid = uid.toLowerCase();\n      // Process these to remove whitespace and non letter/number characters so we have less likelihood of errors\n      let trimPosition = position\n        .replace(/\\s/g, \"\")\n        .toLowerCase()\n        .replace(/[.,/#!$%^&*;:{}=\\-_`~()]/g, \"\");\n      // .replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g, \"\");\n\n      // Here positionGroups is the import JSON object containing\n      // which positions are in which group and the colour assigned to them\n      for (let [group, members] of Object.entries(positionGroups)) {\n        if (members[\"members\"].includes(trimPosition)) {\n          colorTable[uid] = members[\"color\"];\n          groupTable[uid] = group;\n          break;\n        } else {\n          // Assign bright blue to any we don't recognize, but this\n          // shouldn't (hopefully) happen if the JSON is correct\n          colorTable[uid] = \"blue\";\n        }\n      }\n    }\n\n    // Set the colour for the anchor\n    colorTable[\"anchor\"] = positionGroups[\"anchor\"][\"color\"];\n\n    this.state.colors = colorTable;\n    this.state.groupTable = groupTable;\n  }\n\n  getGroupForce(entity) {\n    if (!entity.positions) {\n      const entity_id = entity[\"id\"].toLowerCase();\n\n      // Need a better way of handling businesses\n      if (entity_id.startsWith(\"b\")) {\n        return -0.11;\n      } else {\n        console.log(\"Undefined positions for entity \", entity);\n        return 0;\n      }\n    }\n\n    const leftForce = [\"engineering\"];\n    const rightForce = [\"commercial\"];\n    const noForce = [\"other\", \"anchor\", \"business\", \"unknown\"];\n\n    // Get the position codes for this entity\n    const positionCode = this.getPositionCode(entity.positions, entity.group);\n    // The groupTable tells us which group this entity belongs to and so determines its force\n    const positionGroup = this.state.groupTable[positionCode];\n\n    // TODO - clunky, fix\n    if (leftForce.includes(positionGroup)) {\n      return -0.17;\n    } else if (rightForce.includes(positionGroup)) {\n      return 0.1;\n    } else if (noForce.includes(positionGroup)) {\n      return 0.1;\n    }\n\n    return 0;\n  }\n\n  drag() {\n    let simulation = this._simulation;\n\n    return d3\n      .drag()\n      .on(\"start\", (d) => {\n        simulation.alphaTarget(this._target_alpha).velocityDecay(this._target_decay).restart();\n\n        d.fx = d.x;\n        d.fy = d.y;\n      })\n      .on(\"drag\", (d) => {\n        if (!this._is_running) simulation.restart();\n\n        let w = this.state.width;\n        let h = this.state.height;\n\n        d.fx = constrain(d3.event.x, w, d.r);\n        d.fy = constrain(d3.event.y, h, d.r);\n      })\n      .on(\"end\", (d) => {\n        simulation.alphaTarget(0).restart();\n\n        if (!d.fixed) {\n          d.fx = null;\n          d.fy = null;\n        }\n      });\n  }\n\n  dragLink() {\n    let simulation = this._simulation;\n\n    return d3\n      .drag()\n      .on(\"start\", (d) => {\n        simulation.alphaTarget(this._target_alpha).velocityDecay(this._target_decay).restart();\n\n        //find the two nodes connected to this edge\n        let source = this._graph.nodes[d.source.index];\n        let target = this._graph.nodes[d.target.index];\n\n        //fix those nodes in place\n        source.fx = source.x;\n        source.fy = source.y;\n\n        target.fx = target.x;\n        target.fy = target.y;\n      })\n      .on(\"drag\", (d) => {\n        if (!this._is_running) simulation.restart();\n\n        //find the two nodes connected to this edge\n        let source = this._graph.nodes[d.source.index];\n        let target = this._graph.nodes[d.target.index];\n\n        //moves those nodes with the event - move the center point of the\n        //line connecting these two nodes...\n        let dx = 0.5 * (target.x - source.x);\n        let dy = 0.5 * (target.y - source.y);\n\n        source.fx = constrain(d3.event.x - dx, this.state.width, source.r);\n        source.fy = constrain(d3.event.y - dy, this.state.height, source.r);\n\n        target.fx = constrain(d3.event.x + dx, this.state.width, target.r);\n        target.fy = constrain(d3.event.y + dy, this.state.height, target.r);\n      })\n      .on(\"end\", (d) => {\n        simulation.alphaTarget(0).restart();\n\n        //find the two nodes connected to this edge\n        let source = this._graph.nodes[d.source.index];\n        let target = this._graph.nodes[d.target.index];\n\n        if (!source.fixed) {\n          source.fx = null;\n          source.fy = null;\n        }\n\n        if (!target.fixed) {\n          target.fx = null;\n          target.fy = null;\n        }\n      });\n  }\n\n  getWeight(item) {\n    const shipID = this.getSelectedShipID();\n    // Big weights make the size of circles too large\n    const sizeScale = 0.5;\n\n    let weight = sizeScale * item[\"weight\"][shipID];\n\n    if (!weight) {\n      weight = 2;\n    }\n\n    return weight;\n  }\n\n  _updateNode(data) {\n    let node = this._mainGroup.select(\".node-group\").selectAll(\".node\");\n\n    node = node\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"circle\").attr(\"class\", `node ${styles.node}`),\n        (update) => update.attr(\"class\", `node ${styles.node}`)\n      )\n      // Here size is the weight given to that entity\n      .attr(\"r\", (d) => {\n        // If no project selected keep previous weight\n        // Otherwise update using the selected project code\n        return this.getWeight(d);\n      })\n      .attr(\"id\", (d) => {\n        return d.id;\n      })\n      .attr(\"fill\", (d) => {\n        return this.getPositionColor(d);\n      })\n      .on(\"click\", handleMouseClick(this))\n      .on(\"mouseover\", handleMouseOver(this))\n      .on(\"mouseout\", handleMouseOut(this))\n      .call(this.drag());\n\n    return node;\n  }\n\n  _updateNodeText(data) {\n    let text = this._mainGroup.select(\".node_text-group\").selectAll(\".node_text\");\n\n    // Big weights make the size of circles too large\n    const sizeScale = 0.5;\n\n    text = text\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"text\").attr(\"class\", `node_text ${styles.node_text}`),\n        (update) => update.attr(\"class\", `node_text ${styles.node_text}`)\n      )\n      .text((d) => d.label)\n      .attr(\"dx\", \"0.5em\")\n      // This keeps the text from the centre of the circle\n      // TODO -  could get this to be within the circle if the\n      // circle is large enough?\n      .attr(\"dy\", (d) => {\n        const weight = this.getWeight(d);\n\n        return -1 * (3 + sizeScale * weight);\n      })\n      .attr(\"text-anchor\", \"start\")\n      .attr(\"id\", (d) => {\n        return d.id;\n      })\n      .on(\"click\", handleMouseClick(this))\n      .on(\"mouseover\", handleMouseOver(this))\n      .on(\"mouseout\", handleMouseOut(this))\n      .call(this.drag());\n\n    return text;\n  }\n\n  _updateLink(data) {\n    let link = this._mainGroup.select(\".link-group\").selectAll(\".link\");\n\n    const weightCutoff = 4;\n\n    link = link\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"path\").attr(\"class\", `link ${styles.link}`),\n        (update) => update.attr(\"class\", `link ${styles.link}`)\n      )\n      .attr(\"class\", (d) => {\n        // Here we're using the weight of the edges between\n        // nodes to  change the properties of the line drawn\n        if (d.type === \"direct\") {\n          if (d.value > weightCutoff) {\n            return `link ${styles.link}`;\n          } else {\n            return `link ${styles.link_weak}`;\n          }\n        } else {\n          return `link ${styles.link_indirect}`;\n        }\n      })\n      .attr(\"id\", (d) => {\n        return d.id;\n      })\n      .attr(\"source_id\", (d) => {\n        return d.source_id;\n      })\n      .attr(\"target_id\", (d) => {\n        return d.target_id;\n      })\n      .on(\"click\", handleMouseClick(this))\n      .on(\"mouseover\", handleMouseOver(this))\n      .on(\"mouseout\", handleMouseOut(this))\n      .call(this.dragLink());\n\n    return link;\n  }\n\n  _updateSimulation() {\n    if (this._simulation) {\n      this._simulation.stop();\n      this._simulation = null;\n      this._is_running = false;\n    }\n\n    let w = this.state.width;\n    let h = this.state.height;\n\n    let simulation = d3\n      .forceSimulation(this._graph.nodes)\n      .force(\"charge\", d3.forceManyBody().strength(-150).distanceMin(10).distanceMax(25))\n      .force(\n        \"link\",\n        d3\n          .forceLink()\n          .links(this._graph.edges)\n          //   .strength((d) => {\n          //     return 0.1 * (1 + d.value);\n          //   })\n          .distance((d) => {\n            return 75 * (1 + d.value);\n          })\n          .iterations(5)\n      )\n      .force(\n        \"collision\",\n        d3\n          .forceCollide()\n          .radius((d) => {\n            return 3 * (1 + d.size);\n          })\n          .strength(1.0)\n          .iterations(5)\n      )\n      // This forces the groupings given in position_groups.json left/right\n      .force(\n        \"X\",\n        d3.forceX().strength((d) => {\n          return this.getGroupForce(d);\n        })\n      )\n      // This function with help from https://stackoverflow.com/a/13456081\n      .on(\"tick\", () => {\n        this._link.attr(\"d\", (d) => {\n          const curveFactor = 2;\n          const dx = d.target.x - d.source.x;\n          const dy = d.target.y - d.source.x;\n          const dr = curveFactor * Math.sqrt(dx * dx + dy * dy);\n\n          return \"M\" + d.source.x + \",\" + d.source.y + \"A\" + dr + \",\" + dr + \" 0 0,1 \" + d.target.x + \",\" + d.target.y;\n        });\n        this._node\n          .attr(\"cx\", (d) => {\n            return (d.x = constrain(d.x, w, d.r));\n          })\n          .attr(\"cy\", (d) => {\n            return (d.y = constrain(d.y, h, d.r));\n          });\n\n        this._label.attr(\"x\", (d) => d.x).attr(\"y\", (d) => d.y);\n      })\n      .on(\"end\", () => {\n        this.restartSimulation();\n      });\n\n    this._is_running = true;\n\n    // Save the simulation so that we can update it later...\n    this._simulation = simulation;\n  }\n\n  restartSimulation() {\n    this._simulation.restart();\n  }\n\n  drawFromScratch() {\n    console.log(\"DRAW FROM SCRATCH\");\n    let graph = this._graph;\n\n    if (!graph) {\n      if (this.state.social) {\n        this.updateGraph(this.state.social);\n      }\n\n      graph = this._graph;\n      if (!graph) {\n        console.log(\"Nothing to draw...\");\n        return;\n      }\n    }\n\n    d3.select(`.${this.className()} > *`).remove();\n\n    let container = d3.select(`.${this.className()}`);\n\n    if (!container) {\n      console.log(`Cannot find container element class ${this.className()}`);\n      return;\n    }\n\n    const width = this.state.width;\n    const height = this.state.height;\n\n    console.log(`REDRAW ${width}x${height}`);\n\n    if (!width || !height) {\n      console.log(`Invalid width or height? ${width} x ${height}`);\n      return;\n    }\n\n    let svg = container\n      .append(\"svg\")\n      .attr(\"height\", height)\n      .attr(\"width\", width)\n      .attr(\"id\", \"svg-viz\")\n      .attr(\"align\", \"center\")\n      .on(\"click\", () => {\n        this.state.signalClicked(null);\n      });\n\n    let mainGroup = svg;\n    this._mainGroup = mainGroup;\n\n    this._updateSimulation();\n\n    mainGroup.append(\"g\").attr(\"class\", \"link-group\");\n    mainGroup.append(\"g\").attr(\"class\", \"node-group\");\n    mainGroup.append(\"g\").attr(\"class\", \"node_text-group\");\n\n    this._link = this._updateLink(graph.edges);\n    this._node = this._updateNode(graph.nodes);\n    this._label = this._updateNodeText(graph.nodes);\n\n    this._is_drawn = true;\n  }\n\n  draw() {\n    if (!this._is_drawn) {\n      this.drawFromScratch();\n      this._size_changed = false;\n      this._graph_changed = false;\n      return;\n    }\n\n    let update_simulation = false;\n\n    if (this._size_changed) {\n      let container = d3.select(`.${this.className()}`);\n      container.selectAll(\"svg\").attr(\"width\", this.state.width).attr(\"height\", this.state.height);\n      this._size_changed = false;\n      update_simulation = true;\n    }\n\n    if (this._graph_changed) {\n      this._node = this._updateNode(this._graph.nodes);\n      this._label = this._updateNodeText(this._graph.nodes);\n      this._link = this._updateLink(this._graph.edges);\n      this._graph_changed = false;\n      update_simulation = true;\n    }\n\n    if (update_simulation) {\n      this._updateSimulation();\n    }\n  }\n}\n\nexport default ForceGraphD3;\n","import React from \"react\";\nimport ForceGraphD3 from \"./d3/ForceGraph.d3.js\";\nimport styles from \"./ForceGraph.module.css\";\n\nclass ForceGraph extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this._graph = new ForceGraphD3(props);\n    this._updateSize = this._updateSize.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this._updateSize);\n    this._updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.updateSize);\n  }\n\n  componentDidUpdate() {\n    this._graph.update(this.props);\n    this._graph.draw();\n  }\n\n  _updateSize() {\n    if (this.container && this._graph) {\n      this._graph.update({\n        width: this.container.offsetWidth,\n        height: this.container.offsetHeight,\n      });\n      this._graph.draw();\n    }\n  }\n\n  render() {\n    let s = `${styles.graph} ${this._graph.className()}`;\n\n    return (\n      <div ref={(el) => (this.container = el)} style={{ width: \"100%\", height: \"100%\" }}>\n        <div className={s} />\n      </div>\n    );\n  }\n}\n\nexport default ForceGraph;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport ForceGraph from \"./ForceGraph\";\n\nclass SocialGraph extends React.Component {\n  getGraph() {\n    const social = this.props.social;\n\n    if (social) {\n      return social.getGraph();\n    }\n    return null;\n  }\n\n  getNetwork() {\n    const social = this.props.social;\n\n    if (social) {\n      return social.getNetwork();\n    }\n    return null;\n  }\n\n  render() {\n    if (this.props.social) {\n      console.log(\"In SocialGraph shipID: \", this.props.selectedShipID);\n      return (\n        <div style={{ width: \"100%\", height: \"100%\" }}>\n          <ForceGraph\n            social={this.props.social}\n            signalClicked={this.props.emitClicked}\n            highlighted={this.props.highlighted}\n            selected={this.props.selected}\n            wobble={this.props.wobble}\n            selectedShipID={this.props.selectedShipID}\n          />\n        </div>\n      );\n    } else {\n      return <div>No data to display!!!</div>;\n    }\n  }\n}\n\nSocialGraph.propTypes = {\n  emitClicked: PropTypes.func.isRequired,\n  highlighted: PropTypes.func,\n  selected: PropTypes.func,\n  social: PropTypes.object.isRequired,\n  wobble: PropTypes.bool.isRequired,\n  selectedShipID: PropTypes.string,\n};\n\nexport default SocialGraph;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport {\n  Accordion,\n  AccordionItem,\n  AccordionItemHeading,\n  AccordionItemButton,\n  AccordionItemPanel,\n} from \"react-accessible-accordion\";\n\nimport styles from \"./Accordion.module.css\";\n\nfunction BAccordion(props) {\n  return (\n    <Accordion\n      className={styles.accordion}\n      preExpanded={props.preExpanded}\n      allowMultipleExpanded={props.allowMultipleExpanded}\n      allowZeroExpanded={props.allowZeroExpanded}\n    >\n      {props.children}\n    </Accordion>\n  );\n}\n\nBAccordion.propTypes = {\n  preExpanded: PropTypes.bool,\n  allowMultipleExpanded: PropTypes.bool,\n  allowZeroExpanded: PropTypes.bool,\n  children: PropTypes.string,\n};\n\nfunction BAccordionItem(props) {\n  return (\n    <AccordionItem className={styles.accordionItem} style={props.style} uuid={props.uuid}>\n      {props.children}\n    </AccordionItem>\n  );\n}\n\nBAccordionItem.propTypes = {\n  style: PropTypes.string,\n  uuid: PropTypes.string,\n  children: PropTypes.string,\n};\n\nfunction BAccordionTitle(props) {\n  return (\n    <AccordionItemHeading style={props.style}>\n      <AccordionItemButton className={styles.accordionButton}>{props.children}</AccordionItemButton>\n    </AccordionItemHeading>\n  );\n}\n\nBAccordionTitle.propTypes = {\n  style: PropTypes.string,\n  children: PropTypes.string,\n};\n\nfunction BAccordionPanel(props) {\n  return <AccordionItemPanel style={props.style}>{props.children}</AccordionItemPanel>;\n}\n\nBAccordionPanel.propTypes = {\n  style: PropTypes.string,\n  children: PropTypes.string,\n};\n\nexport {\n  BAccordion as Accordion,\n  BAccordionItem as AccordionItem,\n  BAccordionTitle as AccordionTitle,\n  BAccordionPanel as AccordionPanel,\n  BAccordion as default,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./DefaultButton.module.css\";\n\nfunction DefaultButton(props) {\n  return (\n    <button href=\"#\" className={styles.button} onClick={props.onClick} style={props.style}>\n      {props.children}\n    </button>\n  );\n}\n\nDefaultButton.propTypes = {\n  onClick: PropTypes.func,\n  style: PropTypes.object,\n  children: PropTypes.string,\n};\n\nexport default DefaultButton;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./CheckBox.module.css\";\n\nfunction CheckBox(props) {\n  return (\n    <label className={styles.checkBox} style={props.style}>\n      <input type=\"checkbox\" checked={props.checked} onChange={props.onChange} />\n      <span className={styles.checkMark} />\n    </label>\n  );\n}\n\nCheckBox.propTypes = {\n  style: PropTypes.string,\n  checked: PropTypes.bool,\n  onChange: PropTypes.func,\n};\n\nexport default CheckBox;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./ResponsiveList.module.css\";\n\nfunction ResponsiveList(props) {\n  return <div className={styles.list}>{props.children}</div>;\n}\n\nResponsiveList.propTypes = {\n  children: PropTypes.elementType.isRequired,\n};\n\nfunction ResponsiveListItem(props) {\n  return (\n    <div className={styles.item} key={props.key}>\n      {props.children}\n    </div>\n  );\n}\n\nResponsiveListItem.propTypes = {\n  key: PropTypes.string.isRequired,\n  children: PropTypes.elementType.isRequired,\n};\n\nexport { ResponsiveListItem, ResponsiveList, ResponsiveList as default };\n","import React from \"react\";\n\nimport DefaultButton from \"./DefaultButton\";\nimport CheckBox from \"./CheckBox\";\nimport { ResponsiveList, ResponsiveListItem } from \"./ResponsiveList\";\n\nimport styles from \"./GroupsList.module.css\";\n\nfunction null_function() {}\n\nfunction GroupsList({\n  groups,\n  title = null,\n  emitSelected = null_function,\n  emitToggleFilter = null_function,\n  social = null,\n}) {\n  if (!groups) {\n    return null;\n  }\n\n  let projects = [];\n\n  Object.keys(groups).forEach((key) => {\n    let items = [];\n\n    for (let index in groups[key]) {\n      let group = social.get(groups[key][index]);\n      let is_filtered = social.isFiltered(group);\n\n      items.push(\n        <ResponsiveListItem key={group.getName()}>\n          <DefaultButton\n            onClick={() => {\n              emitSelected(group);\n            }}\n            style={{ width: \"70%\" }}\n          >\n            {group.getName()}\n          </DefaultButton>\n          <CheckBox\n            onChange={() => {\n              emitToggleFilter(group);\n            }}\n            style={{ width: \"20%\" }}\n            checked={is_filtered}\n          />\n        </ResponsiveListItem>\n      );\n    }\n\n    let project = social.get(key);\n    let is_filtered = social.isFiltered(project);\n\n    projects.push(\n      <div className={styles.project} key={project.getName()}>\n        <div className={styles.projectHeader}>\n          <DefaultButton\n            style={{ width: \"75%\" }}\n            onClick={() => {\n              emitSelected(project);\n            }}\n          >\n            {project.getName()}\n          </DefaultButton>\n          <CheckBox\n            onChange={() => {\n              emitToggleFilter(project);\n            }}\n            style={{ width: \"20%\" }}\n            checked={is_filtered}\n          />\n        </div>\n        <div className={styles.projectBody}>\n          <ResponsiveList style={{ minWidth: \"100%\" }}>{items}</ResponsiveList>\n        </div>\n      </div>\n    );\n  });\n\n  if (title) {\n    return (\n      <div>\n        <div className={styles.title}>{title}</div>\n        {projects}\n      </div>\n    );\n  } else {\n    return projects;\n  }\n}\n\nexport default GroupsList;\n","import React from \"react\";\n\nimport DefaultButton from \"./DefaultButton\";\nimport CheckBox from \"./CheckBox\";\n\nimport { ResponsiveList, ResponsiveListItem } from \"./ResponsiveList\";\n\nimport styles from \"./ConnectionList.module.css\";\n\nfunction null_function() {}\n\nfunction ConnectionList({\n  connections,\n  title,\n  emitSelected = null_function,\n  emitToggleFilter = null_function,\n  social = null,\n}) {\n  if (!connections || connections.length === 0) {\n    return null;\n  }\n\n  const listitems = connections.map((item) => {\n    let i = item;\n    let name = item.getName();\n\n    let is_filtered = false;\n\n    if (social) {\n      is_filtered = social.isFiltered(item);\n    }\n\n    return (\n      <ResponsiveListItem key={name}>\n        <DefaultButton\n          onClick={() => {\n            emitSelected(i);\n          }}\n          style={{ width: \"70%\" }}\n        >\n          {name}\n        </DefaultButton>\n        <CheckBox\n          onChange={() => {\n            emitToggleFilter(i);\n          }}\n          checked={is_filtered}\n          style={{ width: \"20%\" }}\n        />\n      </ResponsiveListItem>\n    );\n  });\n\n  if (title) {\n    return (\n      <div className={styles.connections}>\n        <div className={styles.title}>{title}</div>\n        <ResponsiveList>{listitems}</ResponsiveList>\n      </div>\n    );\n  } else {\n    return (\n      <div className={styles.connections}>\n        <ResponsiveList>{listitems}</ResponsiveList>\n      </div>\n    );\n  }\n}\n\nexport default ConnectionList;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport DefaultButton from \"./DefaultButton\";\n\nfunction _null_function() {}\n\nfunction DateRangeButton(props) {\n  let d = props.value;\n\n  if (!d) {\n    return null;\n  }\n\n  if (!(d._isARoughDateObject || d._isADateRangeObject)) {\n    return null;\n  }\n\n  if (d.isNull()) {\n    return null;\n  }\n\n  let emitSelected = props.emitSelected;\n\n  if (!emitSelected) {\n    emitSelected = _null_function;\n  }\n\n  let s = d.toSimpleString();\n\n  if (d._isARoughDateObject) {\n    d = d.toDateRange();\n  }\n\n  return (\n    <DefaultButton\n      onClick={() => {\n        emitSelected(d);\n      }}\n      style={props.style}\n    >\n      {s}\n    </DefaultButton>\n  );\n}\n\nDateRangeButton.propTypes = {\n  value: PropTypes.func,\n  emitSelected: PropTypes.func,\n  style: PropTypes.string,\n};\n\nexport default DateRangeButton;\n","class KeyError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error.captureStackTrace(this, KeyError);\n  }\n}\n\nclass ValueError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error.captureStackTrace(this, ValueError);\n  }\n}\n\nclass DuplicateError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error.captureStackTrace(this, DuplicateError);\n  }\n}\n\nclass MissingError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error.captureStackTrace(this, MissingError);\n  }\n}\n\nexport { KeyError, ValueError, DuplicateError, MissingError };\n","import Dry from \"json-dry\";\nimport moment from \"moment\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction _toDate(val, def = null) {\n  if (val) {\n    if (val._isAMomentObject) {\n      return val;\n    }\n\n    /*if (val.toISOString){\n      val = val.toISOString();\n    }*/\n\n    let date = moment(val);\n\n    if (!date.isValid()) {\n      console.log(`Invalid Date ${val}`);\n      throw new ValueError(`Invalid Date ${val}`);\n    }\n\n    return date;\n  } else {\n    if (!def) {\n      return null;\n    } else {\n      return _toDate(def);\n    }\n  }\n}\n\n// NOTE FOR FUTURE - moment(x) < moment(y) === true\n//            even though moment(x).toDate() < moment(y).toDate() === false\n//   MOMENT COMPARISONS ARE BROKEN!\n\nfunction _get_min(d1, d2) {\n  if (d1) {\n    if (d2) {\n      if (d1.toDate() < d2.toDate()) {\n        return d1;\n      } else {\n        return d2;\n      }\n    } else {\n      return d1;\n    }\n  } else {\n    return d2;\n  }\n}\n\nfunction _get_max(d1, d2) {\n  if (d1) {\n    if (d2) {\n      if (d1.toDate() > d2.toDate()) {\n        return d1;\n      } else {\n        return d2;\n      }\n    } else {\n      return d1;\n    }\n  } else {\n    return d2;\n  }\n}\n\nfunction _merge_raw(s1, s2) {\n  if (!s1) {\n    return s2;\n  } else if (!s2) {\n    return s1;\n  }\n\n  return `${s1} + ${s2}`;\n}\n\nclass RoughDate {\n  constructor(state) {\n    this.state = {\n      start: null,\n      end: null,\n      raw: null,\n    };\n\n    this.setState(state);\n\n    this._isARoughDateObject = true;\n  }\n\n  setState(state) {\n    if (!state || state === \"null\" || state === null) {\n      this.state = { start: null };\n      return;\n    } else if (state._isARoughDateObject) {\n      this.state = { ...state.state };\n      return;\n    } else if (state._isADateRangeObject) {\n      this.state = state.toDate();\n      return;\n    } else if (state._isAMomentObject) {\n      this.state = { start: _toDate(state) };\n      return;\n    } else if (state.toISOString) {\n      this.state = { start: _toDate(state) };\n      return;\n    } else if (Object.prototype.hasOwnProperty.call(state, \"value\")) {\n      this.state = { start: state.value };\n      return;\n    } else if (typeof state === \"string\") {\n      this.state = { start: _toDate(state), raw: state };\n      return;\n    }\n\n    let start = _toDate(state.start);\n    let end = _toDate(state.end);\n\n    if (!start) {\n      this.state = { start: null };\n      return;\n    }\n\n    this.state.start = start;\n    this.state.end = end;\n    this.state.raw = state.raw;\n\n    if (this.isNull()) {\n      console.log(\"NULL RoughDate?\");\n      console.log(state);\n    }\n  }\n\n  static clone(item) {\n    let d = new RoughDate();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static max(d1, d2) {\n    return new RoughDate(_get_max(d1.getLatest(), d2.getLatest()));\n  }\n\n  static min(d1, d2) {\n    return new RoughDate(_get_min(d1.getEarliest(), d2.getEarliest()));\n  }\n\n  static delta(d1, d2) {\n    return d1.getLatestDate() - d2.getEarliestDate();\n  }\n\n  static getDelta(d1, d2) {\n    return RoughDate.delta(d1, d2);\n  }\n\n  static eq(item, other) {\n    if (item._isARoughDateObject && other._isARoughDateObject) {\n      return (\n        item.getEarliestString() === other.getEarliestString() && item.getLatestString() === other.getLatestString()\n      );\n    } else {\n      return false;\n    }\n  }\n\n  static lt(d1, d2) {\n    if (d1.isNull() || d2.isNull()) {\n      return false;\n    } else {\n      return d1.getEarliestDate() < d2.getEarliestDate();\n    }\n  }\n\n  static gt(d1, d2) {\n    if (d1.isNull() || d2.isNull()) {\n      return false;\n    } else {\n      return d1.getEarliestDate() > d2.getEarliestDate();\n    }\n  }\n\n  static le(d1, d2) {\n    return RoughDate.eq(d1, d2) || RoughDate.lt(d1, d2);\n  }\n\n  static ge(d1, d2) {\n    return RoughDate.eq(d1, d2) || RoughDate.gt(d1, d2);\n  }\n\n  static ne(d1, d2) {\n    return !RoughDate.eq(d1, d2);\n  }\n\n  add(delta) {\n    if (this.state.start) {\n      this.state.start.add(delta);\n    }\n\n    if (this.state.end) {\n      this.state.end.add(delta);\n    }\n\n    this.state.raw = null;\n  }\n\n  sub(delta) {\n    this.add(-delta);\n  }\n\n  isNull() {\n    if (this.state.start) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  isFuzzy() {\n    if (this.state.end) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  isExact() {\n    return !(this.isNull() || this.isFuzzy());\n  }\n\n  toString() {\n    if (this.isNull()) {\n      return \"Date:unknown\";\n    } else if (this.isFuzzy()) {\n      return `~${this.state.start.format(\"LL\")}-${this.state.end.format(\"LL\")}`;\n    } else {\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  toSimpleString() {\n    if (this.isNull()) {\n      return \"unknown\";\n    } else if (this.isFuzzy()) {\n      let s = this.state.start.toDate();\n      let e = this.state.end.toDate();\n\n      if (s.getMonth() === 0 && e.getMonth() === 11 && s.getDate() === 1 && e.getDate() === 31) {\n        //the dates span full years\n        if (s.getFullYear() === e.getFullYear()) {\n          return s.getFullYear();\n        } else {\n          return `${s.getFullYear()}-${e.getFullYear()}`;\n        }\n      } else {\n        return `${s.getDate()}/${s.getMonth() + 1}/${s.getFullYear()}-${e.getDate()}/${\n          e.getMonth() + 1\n        }/${e.getFullYear()}`;\n      }\n    } else {\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  getEarliest() {\n    let state = { start: this.state.start };\n    let r = new RoughDate();\n    r.state = state;\n    return r;\n  }\n\n  getLatest() {\n    if (this.state.end) {\n      let state = { start: this.state.end };\n      let r = new RoughDate();\n      r.state = state;\n      return r;\n    } else {\n      return this.getEarliest();\n    }\n  }\n\n  getEarliestDate() {\n    let d = this.getEarliest();\n\n    if (d) {\n      return d.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestDate() {\n    let d = this.getLatest();\n\n    if (d) {\n      return d.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getEarliestString() {\n    let d = this.getEarliest();\n\n    if (d) {\n      return d.toDate().toISOString();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestString() {\n    let d = this.getLatest();\n\n    if (d) {\n      return d.toDate().toISOString();\n    } else {\n      return null;\n    }\n  }\n\n  toRange() {\n    if (this.isNull()) {\n      return new DateRange();\n    } else if (this.isExact()) {\n      return new DateRange({ both: this.state.start });\n    } else {\n      return new DateRange({ start: this.state.start, end: this.state.end });\n    }\n  }\n\n  toDateRange() {\n    if (this.isNull()) {\n      return new DateRange();\n    } else if (this.isFuzzy()) {\n      return new DateRange({ start: this.getEarliest(), end: this.getLatest() });\n    } else {\n      return new DateRange({ both: this.getEarliest() });\n    }\n  }\n\n  toDate() {\n    let m = this.toMoment();\n\n    if (m) {\n      try {\n        return m.toDate();\n      } catch (error) {\n        console.log(`STRANGE ERROR ${error}`);\n        console.log(`m = ${m}`);\n        console.log(m);\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n\n//   toUnixTimestamp() {\n//     return parseInt((this.toDate().getTime() / 1000).toFixed(0));\n//   }\n\n  toMoment() {\n    if (this.isNull()) {\n      return null;\n    } else if (this.isExact()) {\n      return this.state.start;\n    } else {\n      throw new ValueError(`Cannot extract a single date from an inexact date ${this}`);\n    }\n  }\n\n  getRaw() {\n    return this.state.raw;\n  }\n\n  getStart() {\n    return this.state.start;\n  }\n\n  getEnd() {\n    if (this.state.end) {\n      return this.state.end;\n    } else {\n      return this.state.start;\n    }\n  }\n\n  merge(other) {\n    let state = {\n      start: _get_min(this.getStart(), other.getStart()),\n      end: _get_max(this.getEnd(), other.getEnd()),\n      raw: _merge_raw(this.getRaw(), other.getRaw()),\n    };\n\n    let date = new RoughDate();\n    date.state = state;\n\n    return date;\n  }\n}\n\nRoughDate.unDry = function (value) {\n  return new RoughDate(value);\n};\n\nDry.registerClass(\"Date\", RoughDate);\n\nexport default RoughDate;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport RoughDate from \"./RoughDate\";\nimport { ValueError } from \"./Errors\";\n\nfunction _clean(val) {\n  if (!val || val._isADateRangeObject) {\n    return val;\n  } else if (val._isARoughDateObject) {\n    return val.toDateRange();\n  } else if (\n    Object.prototype.hasOwnProperty.call(val, \"start\") ||\n    Object.prototype.hasOwnProperty.call(val, \"end\") ||\n    Object.prototype.hasOwnProperty.call(val, \"both\") ||\n    Object.prototype.hasOwnProperty.call(val, \"value\")\n  ) {\n    return new DateRange(val);\n  } else {\n    return new DateRange({ both: new RoughDate(val) });\n  }\n}\n\nclass DateRange {\n  constructor(state) {\n    this.state = {\n      start: null,\n      end: null,\n    };\n\n    this.setState(state);\n    this._isADateRangeObject = true;\n  }\n\n  toString() {\n    if (this.hasBounds()) {\n      if (this.isInstant()) {\n        return `DateRange(${this.getStartString()})`;\n      } else {\n        return `DateRange(${this.getStartString()} to ${this.getEndString()})`;\n      }\n    } else {\n      return \"DateRange::unbounded\";\n    }\n  }\n\n  toSimpleString() {\n    if (this.hasBounds()) {\n      if (this.isInstant()) {\n        return this.getStart().toSimpleString();\n      } else {\n        return this.getEarliestStart().merge(this.getLatestEnd()).toSimpleString();\n      }\n    } else if (this.hasStart()) {\n      return `${this.getStart().toSimpleString()}<=>future`;\n    } else if (this.hasEnd()) {\n      return `past<=>${this.getEnd().toSimpleString()}`;\n    } else {\n      return \"past<=>future\";\n    }\n  }\n\n  static clone(item) {\n    let d = new DateRange();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static eq(item, other) {\n    if (item === other) {\n      return true;\n    }\n\n    if (item.hasStart() && other.hasStart()) {\n      if (!RoughDate.eq(item.getStart(), other.getStart())) {\n        return false;\n      }\n    } else if (item.hasStart() || other.hasStart()) {\n      return false;\n    }\n\n    if (item.hasEnd() && other.hasEnd()) {\n      if (!RoughDate.eq(item.getEnd(), other.getEnd())) {\n        return false;\n      }\n    } else if (item.hasEnd() || other.hasEnd()) {\n      return false;\n    }\n\n    return true;\n  }\n\n  static mergeAll(dates) {\n    if (!dates) {\n      return null;\n    } else if (dates._isARoughDateObject || dates._isARoughDateObject) {\n      return dates;\n    }\n\n    if (!dates.length || dates.length === 0) {\n      return null;\n    }\n\n    let date = dates[0];\n\n    if (dates.length > 1) {\n      for (let i = 1; i < dates.length; ++i) {\n        if (!dates[i].isNull()) {\n          if (date.isNull()) {\n            date = dates[i];\n          } else {\n            date = date.merge(dates[i]);\n          }\n        }\n      }\n    }\n\n    if (date.isNull()) {\n      return null;\n    } else {\n      return date;\n    }\n  }\n\n  merge(other) {\n    if (!other) {\n      return this;\n    } else if (other._isARoughDateObject) {\n      other = other.toDateRange();\n    }\n\n    return new DateRange({\n      start: RoughDate.min(this.getEarliestStart(), other.getEarliestStart()),\n      end: RoughDate.max(this.getLatestEnd(), other.getLatestEnd()),\n    });\n  }\n\n  hasBounds() {\n    return this.hasStart() && this.hasEnd();\n  }\n\n  hasEnd() {\n    if (this.state.end) {\n      return !this.state.end.isNull();\n    } else {\n      return false;\n    }\n  }\n\n  hasStart() {\n    if (this.state.start) {\n      return !this.state.start.isNull();\n    } else {\n      return false;\n    }\n  }\n\n  isInstant() {\n    return this.hasStart() && this.state.start === this.state.end;\n  }\n\n  // Returns a DateRange object\n  toDate() {\n    if (this.hasStart()) {\n      if (this.hasEnd()) {\n        return this.getStart().merge(this.getEnd());\n      } else {\n        return this.getStart();\n      }\n    } else {\n      return this.getEnd();\n    }\n  }\n\n  contains(date) {\n    date = _clean(date);\n\n    if (!date) {\n      return true;\n    } else if (date._isADateRangeObject) {\n      const my_start = this.getEarliestStart();\n      const other_start = date.getEarliestStart();\n\n      if (my_start && other_start) {\n        if (RoughDate.gt(my_start, other_start)) {\n          return false;\n        }\n      } else if (other_start) {\n        return false;\n      }\n\n      const my_end = this.getLatestEnd();\n      const other_end = date.getLatestEnd();\n\n      if (my_end && other_end) {\n        if (RoughDate.lt(my_end, other_end)) {\n          return false;\n        }\n      } else if (my_end) {\n        return false;\n      }\n\n      return true;\n    } else {\n      throw new ValueError(`Invalid Date ${date}`);\n    }\n  }\n\n  intersect(other) {\n    other = _clean(other);\n\n    if (!other) {\n      return this;\n    }\n\n    if (!other.hasBounds()) {\n      return this;\n    } else if (!this.hasBounds()) {\n      return other;\n    }\n\n    const start = RoughDate.max(this.getStart(), other.getStart());\n\n    if (!this.contains(start)) {\n      return null;\n    }\n\n    const end = RoughDate.min(this.getEnd(), other.getEnd());\n\n    if (!this.contains(end)) {\n      return null;\n    }\n\n    if (RoughDate.eq(start, end)) {\n      return new DateRange({ both: start });\n    } else {\n      return new DateRange({ start: start, end: end });\n    }\n  }\n\n  union(other) {\n    other = _clean(other);\n    if (!other) {\n      return this;\n    } else if (!other._isADateRangeObject) {\n      other = new DateRange({ value: other });\n    }\n\n    const start = RoughDate.min(this.getStart(), other.getStart());\n    const end = RoughDate.max(this.getEnd(), other.getEnd());\n\n    if (RoughDate.eq(start, end)) {\n      return new DateRange({ both: start });\n    } else {\n      return new DateRange({ start: start, end: end });\n    }\n  }\n\n  getDelta() {\n    if (this.hasStart() && this.hasEnd()) {\n      try {\n        return this.getLatestEnd().toDate() - this.getEarliestStart().toDate();\n      } catch (error) {\n        console.log(error);\n        console.log(this.hasStart(), this.hasEnd());\n        console.log(this.getStart(), this.getEnd());\n        console.log(this.getLatestEnd(), this.getEarliestStart());\n        throw error;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  zoomIn(scale = 1) {\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null) {\n      delta = this.getDelta() / (2.0 + scale);\n    } else {\n      delta = 3600000;\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(-delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  zoomOut(scale = 1) {\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null) {\n      delta = this.getDelta() * scale;\n    } else {\n      delta = 3600000;\n    }\n\n    if (state.start) {\n      state.start.add(-delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftEarlier(delta = null) {\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null) {\n      if (state.start !== null && state.end !== null) {\n        delta = -this.getDelta(); //milliseconds\n      } else {\n        delta = -3600000; //milliseconds\n      }\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftLater(delta = null) {\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null) {\n      if (state.start !== null && state.end !== null) {\n        delta = this.getDelta(); //milliseconds\n      } else {\n        delta = 3600000; //milliseconds\n      }\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  getStart() {\n    return this.state.start;\n  }\n\n  getEnd() {\n    return this.state.end;\n  }\n\n  getEarliestStart() {\n    if (this.hasStart()) {\n      return this.getStart().getEarliest();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestEnd() {\n    if (this.hasEnd()) {\n      return this.getEnd().getLatest();\n    } else {\n      return null;\n    }\n  }\n\n  getStartDate() {\n    let e = this.getEarliestStart();\n    if (e) {\n      return e.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getEndDate() {\n    let e = this.getLatestEnd();\n    if (e) {\n      return e.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getStartString() {\n    if (this.state.start) {\n      return this.state.start.toString();\n    } else {\n      return \"unbounded\";\n    }\n  }\n\n  getEndString() {\n    if (this.state.end) {\n      return this.state.end.toString();\n    } else {\n      return \"unbounded\";\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      if (state === \"null\" || state === null) {\n        this.state = { start: null, end: null };\n        return;\n      } else if (state._isADateRangeObject) {\n        this.state = { ...state.state };\n      } else if (state._isARoughDateObject) {\n        this.state = { start: state, end: state };\n      } else if (Object.prototype.hasOwnProperty.call(state, \"value\")) {\n        this.setState(state.value);\n        return;\n      } else if (Object.prototype.hasOwnProperty.call(state, \"both\")) {\n        this.state.start = new RoughDate(state.both);\n        this.state.end = this.state.start;\n      } else if (typeof state === \"string\") {\n        this.state.start = new RoughDate(state);\n        this.state.end = this.state.start;\n      } else {\n        let start = null;\n\n        if (state.start) {\n          start = new RoughDate(state.start);\n\n          if (start.isNull()) {\n            start = null;\n          }\n        }\n\n        let end = null;\n\n        if (state.end) {\n          end = new RoughDate(state.end);\n\n          if (end.isNull()) {\n            end = null;\n          }\n        }\n\n        if (start && end) {\n          if (RoughDate.gt(start, end)) {\n            let tmp = start;\n            start = end;\n            end = tmp;\n          }\n\n          if (RoughDate.gt(start, end)) {\n            let tmp = RoughDate.min(start, end);\n            end = RoughDate.max(start, end);\n            start = tmp;\n          }\n        }\n\n        this.state.start = start;\n        this.state.end = end;\n      }\n    } else {\n      this.state.start = null;\n      this.state.end = null;\n    }\n  }\n\n  toDry() {\n    return this.state;\n  }\n}\n\nDateRange.unDry = function (value) {\n  return new DateRange(value);\n};\n\nDry.registerClass(\"DateRange\", DateRange);\n\nexport default DateRange;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport DateRangeButton from \"./DateRangeButton\";\nimport DateRange from \"../model/DateRange\";\nimport DefaultButton from \"./DefaultButton\";\n\nimport { ResponsiveList, ResponsiveListItem } from \"./ResponsiveList\";\n\nimport styles from \"./SourceList.module.css\";\n\nfunction _null_function() {}\n\nfunction SourceList(props) {\n  let social = props.social;\n  let sources = props.sources;\n  let emitSelected = props.emitSelected;\n  let title = props.title;\n\n  if (!social || !sources) {\n    return null;\n  }\n\n  if (!emitSelected) {\n    emitSelected = _null_function;\n  }\n\n  let output = Object.keys(sources).map((key) => {\n    let source = social.get(key);\n    let daterange = DateRange.mergeAll(sources[key]);\n\n    if (daterange) {\n      return (\n        <ResponsiveListItem key={source.getName()}>\n          <DefaultButton\n            onClick={() => {\n              emitSelected(source);\n            }}\n            style={{ width: \"50%\" }}\n          >\n            {source.getName()}\n          </DefaultButton>\n          <DateRangeButton style={{ width: \"40%\" }} value={daterange} emitSelected={emitSelected} />\n        </ResponsiveListItem>\n      );\n    } else {\n      return (\n        <ResponsiveListItem key={source.getName()}>\n          <DefaultButton\n            onClick={() => {\n              emitSelected(source);\n            }}\n          >\n            {source.getName()}\n          </DefaultButton>\n        </ResponsiveListItem>\n      );\n    }\n  });\n\n  if (!output || output.length === 0) {\n    return null;\n  }\n\n  if (title) {\n    return (\n      <div className={styles.container}>\n        <div className={styles.title}>{title}</div>\n        <div className={styles.body}>\n          <ResponsiveList>{output}</ResponsiveList>\n        </div>\n      </div>\n    );\n  } else {\n    return <ResponsiveList>{output}</ResponsiveList>;\n  }\n}\n\nSourceList.propTypes = {\n  emitSelected: PropTypes.func.isRequired,\n  social: PropTypes.func.isRequired,\n  sources: PropTypes.object.isRequired,\n  title: PropTypes.string,\n};\n\nexport default SourceList;\n","import React from \"react\";\n\nimport DefaultButton from \"./DefaultButton\";\nimport CheckBox from \"./CheckBox\";\n\nimport styles from \"./WeightsList.module.css\";\n\nfunction null_function() {}\n\nfunction WeightsList({\n  weights,\n  title = null,\n  emitSelected = null_function,\n  emitToggleFilter = null_function,\n  social = null,\n  type = null,\n}) {\n  if (!weights) {\n    return null;\n  }\n\n  let projects = [];\n\n  Object.keys(weights).forEach((key) => {\n    let project = social.get(key);\n    let is_filtered = social.isFiltered(project);\n\n    let weight = weights[key];\n\n    projects.push(\n      <div className={styles.project} key={project.getName()}>\n        <div className={styles.projectHeader}>\n          <DefaultButton\n            style={{ width: \"75%\" }}\n            onClick={() => {\n              emitSelected(project);\n            }}\n          >\n            {project.getName()}\n          </DefaultButton>\n          <CheckBox\n            onChange={() => {\n              emitToggleFilter(project);\n            }}\n            style={{ width: \"20%\" }}\n            checked={is_filtered}\n          />\n        </div>\n        <div className={styles.projectBody}>\n          Weight = {weight}, Type = {type}\n        </div>\n      </div>\n    );\n  });\n\n  if (title) {\n    return (\n      <div>\n        <div className={styles.title}>{title}</div>\n        {projects}\n      </div>\n    );\n  } else {\n    return projects;\n  }\n}\n\nexport default WeightsList;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nfunction _filterProject(values, project) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    if (!(key in project)) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nclass Person {\n  constructor(props) {\n    this.state = {\n      name: null,\n      titles: [],\n      firstnames: [],\n      surnames: [],\n      suffixes: [],\n      id: null,\n      positions: {},\n      affiliations: {},\n      projects: {},\n      sources: {},\n      alive: null,\n      gender: null,\n      notes: [],\n      orig_name: null,\n      weight: 1,\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPersonObject = true;\n  }\n\n  static clone(item) {\n    let c = new Person();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode() {\n    return true;\n  }\n\n  inGroup(group) {\n    if (group.getID) {\n      let ids = {};\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key) => {\n      for (let index in this.state.affiliations[key]) {\n        if (this.state.affiliations[key][index] in group) {\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    Object.keys(this.state.positions).forEach((key) => {\n      for (let index in this.state.positions[key]) {\n        if (this.state.positions[key][index] in group) {\n          seen[this.state.positions[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key) => {\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id) => {\n        if (s.includes(source_id)) {\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects) {\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n    let positions = _filterProject(this.state.positions, project);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions) {\n      let person = new Person();\n      person.state = { ...this.state };\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    window = window.intersect(this.getAlive());\n\n    if (!window) {\n      return null;\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n    let positions = _filterWindow(this.state.positions, window);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions) {\n      let person = new Person();\n      person.state = { ...this.state };\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.titles = setState(state.titles, []);\n      this.state.firstnames = setState(state.firstnames, []);\n      this.state.surnames = setState(state.surnames, []);\n      this.state.suffixes = setState(state.suffixes, []);\n      this.state.id = setState(state.id);\n      this.state.positions = setState(state.positions, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.projects = setState(state.projects, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.alive = setState(state.alive);\n      this.state.gender = setState(state.gender);\n      this.state.orig_name = setState(state.orig_name);\n      this.state.notes = setState(state.notes, []);\n      this.state.weight = setState(state.weight);\n\n      if (!this.state.orig_name || this.state.orig_name === \"None\") {\n        throw new ValueError(`No name for ${this}`);\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Person(${this.getName()})`;\n  }\n\n  getAlive() {\n    return this.state.alive;\n  }\n\n  getFirstName() {\n    if (this.state.firstnames) {\n      return this.state.firstnames.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getTitle() {\n    if (this.state.titles) {\n      return this.state.titles.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getSurname() {\n    if (this.state.surnames) {\n      return this.state.surnames.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getSuffix() {\n    if (this.state.suffixes) {\n      return this.state.suffixes.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getName() {\n    var parts = [];\n\n    let part = this.getTitle();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getFirstName();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getSurname();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getSuffix();\n    if (part) {\n      parts.push(part);\n    }\n\n    if (parts.length > 0) {\n      return parts.join(\" \");\n    } else {\n      return \"null\";\n    }\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getPositions() {\n    if (!this.state.positions) {\n      console.error(\"No positions for \", this.getName());\n    }\n    return this.state.positions;\n  }\n\n  getScores() {\n    return this.state.scores;\n  }\n\n  getBorn() {\n    if (this.state.alive) {\n      return this.state.alive.getStart();\n    } else {\n      return null;\n    }\n  }\n\n  getDied() {\n    if (this.state.alive) {\n      return this.state.alive.getEnd();\n    } else {\n      return null;\n    }\n  }\n\n  getTimeLine() {\n    const alive = this.getAlive();\n\n    if (!alive) {\n      return null;\n    } else {\n      return {\n        start: alive.getStart(),\n        end: alive.getEnd(),\n        id: this.getID(),\n        content: this.getName(),\n      };\n    }\n  }\n\n  getWeight() {\n    return this.state.weight;\n\n    // if (this.state.weight) {\n    //   const key = Object.keys(this.state.weight);\n    //   return this.state.weight[key];\n    // } else {\n    //   console.error(\"No weight for \", this.getName(), this.getID());\n    //   return 1;\n    // }\n  }\n\n  getProjectWeight(projectKey) {\n    try {\n      return this.state.weight[projectKey];\n    } catch (error) {\n      console.error(\"No weight for \" + this.getName() + this.getID() + \" for project with key \" + projectKey, error);\n      return 0;\n    }\n  }\n\n  getNode(isAnchor = false) {\n    let node = {\n      id: this.getID(),\n      label: this.getName(),\n      title: this.getName(),\n      fixed: false,\n      shape: \"circle\",\n    };\n\n    const weight = this.getWeight();\n\n    node[\"weight\"] = weight;\n\n    // Position will be used to set the colour used\n    // for the node representing this person\n    node[\"positions\"] = this.getPositions();\n\n    let keys = Object.keys(this.state.projects);\n\n    if (keys.length > 0) {\n      node[\"group\"] = keys.sort().join(\":\");\n    } else {\n      node[\"group\"] = \"unknown\";\n    }\n\n    if (isAnchor) {\n      node[\"shape\"] = \"rect\";\n      node[\"fixed\"] = true;\n      node[\"group\"] = \"anchor\";\n      node[\"size\"] = 20.0;\n    }\n\n    return node;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPerson.unDry = function (value) {\n  return new Person(value);\n};\n\nDry.registerClass(\"Person\", Person);\n\nexport default Person;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Person from \"./Person\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_person_uid() {\n  let uid = uuidv4();\n  return \"P\" + uid.substring(uid.length - 7);\n}\n\nclass People {\n  constructor(props) {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPeopleObject = true;\n    this.load(props);\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new People();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Person || item._isAPersonObject;\n  }\n\n  add(person) {\n    if (!this.canAdd(person)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(person.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(person);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    person = Person.clone(person);\n\n    let id = person.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Person ID ${person}`);\n      }\n\n      person._updateHooks(this._getHook);\n      this.state.registry[id] = person;\n    } else {\n      let uid = _generate_person_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_person_uid();\n      }\n\n      person.state.id = uid;\n    }\n\n    person._updateHooks(this._getHook);\n    this._names[person.getName()] = person.getID();\n    this.state.registry[person.getID()] = person;\n\n    return person;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No Person with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Person || name._isAPersonObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No Person matches '${name}. Available People are '${keys}'`);\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n\n      if (person) {\n        for (let i = 0; i < funcs.length; ++i) {\n          person = funcs[i](person);\n          if (!person) {\n            break;\n          }\n        }\n\n        if (person) {\n          registry[key] = person;\n          names[person.getName()] = key;\n        }\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n      if (person) {\n        let timeline = person.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({ anchor = null } = {}) {\n    let nodes = [];\n\n    if (anchor.getID) {\n      anchor = anchor.getID();\n    }\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n\n      if (person) {\n        let node = null;\n        if (key === anchor) {\n          node = person.getNode({ is_anchor: true });\n        } else {\n          node = person.getNode();\n        }\n\n        if (node) {\n          nodes.push(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id) {\n    let person = this.state.registry[id];\n\n    if (!person) {\n      throw new MissingError(`No Person with ID ${id}`);\n    }\n\n    return person;\n  }\n\n  load(data) {\n    if (data) {\n      if (data.array) {\n        data = data.array;\n      }\n      data.forEach((element) => {\n        let person = Person.load(element);\n        this.add(person);\n      });\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPeople.unDry = function (value) {\n  let people = new People();\n  people.state = value;\n  people._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    people._names[v.getName()] = key;\n  });\n\n  return people;\n};\n\nDry.registerClass(\"People\", People);\n\nexport default People;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nfunction _filterProject(values, project) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    if (!(key in project)) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nclass Business {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      projects: {},\n      sources: {},\n      scores: {},\n      affiliations: {},\n      notes: [],\n      weight: 1,\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isABusinessObject = true;\n  }\n\n  static clone(item) {\n    let c = new Business();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode() {\n    return true;\n  }\n\n  inGroup(group) {\n    if (group.getID) {\n      let ids = {};\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key) => {\n      for (let index in this.state.affiliations[key]) {\n        if (this.state.affiliations[key][index] in group) {\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key) => {\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id) => {\n        if (s.includes(source_id)) {\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects) {\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n\n    if (affiliations !== this.state.affiliations) {\n      let business = new Business();\n      business.state = { ...this.state };\n      business.state.affiliations = affiliations;\n      business._getHook = this._getHook;\n      return business;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n\n    if (affiliations !== this.state.affiliations) {\n      let business = new Business();\n      business.state = { ...this.state };\n      business.state.affiliations = affiliations;\n      business._getHook = this._getHook;\n      return business;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.projects = setState(state.projects, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.scores = setState(state.scores, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.notes = setState(state.notes, []);\n      this.state.weight = setState(state.weight);\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have an Business without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  getWeight() {\n    return this.state.weight;\n  }\n\n  toString() {\n    return `Business(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getScores() {\n    return this.state.scores;\n  }\n\n  getNode(is_anchor = false) {\n    let node = { id: this.getID(), label: this.getName(), title: this.getName(), shape: \"circle\" };\n\n    const weight = this.getWeight();\n\n    node[\"size\"] = 0.5 * weight;\n    node[\"weight\"] = weight;\n\n    let keys = Object.keys(this.state.projects);\n\n    if (keys.length > 0) {\n      node[\"group\"] = keys.sort().join(\":\");\n    } else {\n      node[\"group\"] = \"unknown\";\n    }\n\n    if (is_anchor) {\n      node[\"shape\"] = \"rect\";\n      node[\"physics\"] = false;\n      node[\"group\"] = \"anchor\";\n      node[\"size\"] = 20.0;\n    }\n\n    return node;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nBusiness.unDry = function (value) {\n  return new Business(value);\n};\n\nDry.registerClass(\"Business\", Business);\n\nexport default Business;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Business from \"./Business\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_business_uid() {\n  let uid = uuidv4();\n  return \"B\" + uid.substring(uid.length - 7);\n}\n\nclass Businesses {\n  constructor(props) {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isABusinessesObject = true;\n    this.load(props);\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Businesses();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Business || item._isABusinessObject;\n  }\n\n  add(business) {\n    if (!this.canAdd(business)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(business.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(business);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    business = Business.clone(business);\n\n    let id = business.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Business ID ${business}`);\n      }\n\n      business._updateHooks(this._getHook);\n      this.state.registry[id] = business;\n    } else {\n      let uid = _generate_business_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_business_uid();\n      }\n\n      business.state.id = uid;\n    }\n\n    business._updateHooks(this._getHook);\n    this._names[business.getName()] = business.getID();\n    this.state.registry[business.getID()] = business;\n\n    return business;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No Business with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Business || name._isABusinessObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No Business matches '${name}. Available Businesses are '${keys}'`);\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n\n      if (business) {\n        for (let i = 0; i < funcs.length; ++i) {\n          business = funcs[i](business);\n          if (!business) {\n            break;\n          }\n        }\n\n        if (business) {\n          registry[key] = business;\n          names[business.getName()] = key;\n        }\n      }\n    });\n\n    let businesses = new Businesses();\n    businesses.state.registry = registry;\n    businesses._names = names;\n    businesses._updateHooks(this._getHook);\n\n    return businesses;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n      if (business) {\n        let timeline = business.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({ anchor = null } = {}) {\n    let nodes = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n\n      if (business) {\n        let node = null;\n        if (key === anchor) {\n          node = business.getNode({ is_anchor: true });\n        } else {\n          node = business.getNode();\n        }\n\n        if (node) {\n          nodes.push(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id) {\n    let business = this.state.registry[id];\n\n    if (!business) {\n      throw new MissingError(`No Business with ID ${id}`);\n    }\n\n    return business;\n  }\n\n  load(data) {\n    if (data) {\n      if (data.array) {\n        data = data.array;\n      }\n      data.forEach((element) => {\n        let business = Business.load(element);\n        this.add(business);\n      });\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nBusinesses.unDry = function (value) {\n  let businesses = new Businesses();\n  businesses.state = value;\n  businesses._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    businesses._names[v.getName()] = key;\n  });\n\n  return businesses;\n};\n\nDry.registerClass(\"Businesses\", Businesses);\n\nexport default Businesses;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _mergeSources(state, other, key) {\n  state = state[key];\n  other = other[key];\n\n  Object.keys(other).forEach((key) => {\n    if (!(key in state)) {\n      state[key] = other[key];\n    } else {\n      for (let item in other[key]) {\n        if (!(item in state[key])) {\n          state[key].push(item);\n        }\n      }\n    }\n  });\n}\n\nclass Connection {\n  constructor(props) {\n    this.state = {\n      id: null,\n      n0: null,\n      n1: null,\n      shared: null,\n      type: null,\n      duration: null,\n      affiliations: null,\n      correspondances: null,\n      projects: null,\n      notes: null,\n    };\n\n    this.setState(props);\n    this._getHook = null;\n    this._isAConnectionObject = true;\n  }\n\n  static clone(item) {\n    let c = new Connection();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  getName() {\n    let n0 = this.state.n0;\n    let n1 = this.state.n1;\n\n    if (n0 <= n1) {\n      return `${n0}<=>${n1}`;\n    } else {\n      return `${n1}<=>${n0}`;\n    }\n  }\n\n  getNode0() {\n    if (this._getHook) {\n      return this._getHook(this.state.n0);\n    } else {\n      return this.state.n0;\n    }\n  }\n\n  getNode1() {\n    if (this._getHook) {\n      return this._getHook(this.state.n1);\n    } else {\n      return this.state.n1;\n    }\n  }\n\n  getNode0ID() {\n    return this.state.n0;\n  }\n\n  getNode1ID() {\n    return this.state.n1;\n  }\n\n  areNodesVisible(n) {\n    return n[this.state.n0] && n[this.state.n1];\n  }\n\n  getNode0Name() {\n    let node0 = this.getNode0();\n\n    try {\n      return node0.getName();\n    } catch (error) {\n      return node0;\n    }\n  }\n\n  getNode1Name() {\n    let node1 = this.getNode1();\n\n    try {\n      return node1.getName();\n    } catch (error) {\n      return node1;\n    }\n  }\n\n  getDuration() {\n    return this.state.duration;\n  }\n\n  getAffiliationSources() {\n    return this.state.affiliations;\n  }\n\n  getCorrespondanceSources() {\n    return this.state.correspondances;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(source).forEach((key) => {\n      if (this.state.affiliations[key] || this.state.correspondances[key]) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (!window) {\n      return this;\n    }\n\n    let duration = this.getDuration();\n\n    if (!duration) {\n      return this;\n    }\n\n    let intersect = window.intersect(duration);\n\n    if (!intersect) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.id = setState(state.id);\n      this.state.n0 = setState(state.n0);\n      this.state.n1 = setState(state.n1);\n      this.state.shared = setState(state.shared, []);\n      this.state.type = setState(state.type);\n      this.state.duration = setState(state.duration);\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.correspondances = setState(state.correspondances, {});\n      this.state.notes = setState(state.notes, []);\n      this.state.weights = setState(state.weights, {});\n      this.state.projects = setState(state.projects, {});\n\n      if (!this.state.n0 || !this.state.n1) {\n        throw new ValueError(`Invalid connection ${this}`);\n      }\n    }\n  }\n\n  merge(other) {\n    if (!this._getHook) {\n      if (other._getHook) {\n        return other.merge(this);\n      }\n    }\n\n    let state = lodash.cloneDeep(this.state);\n\n    Object.keys(other.state.shared).forEach((key) => {\n      if (!(key in state.shared)) {\n        state.shared[key] = other.state.shared[key];\n      }\n    });\n\n    Object.keys(other.state.notes).forEach((key) => {\n      if (!(key in state.notes)) {\n        state.notes[key] = other.state.notes[key];\n      }\n    });\n\n    _mergeSources(state, other.state, \"affiliations\");\n    _mergeSources(state, other.state, \"correspondances\");\n\n    state.duration = state.duration.merge(other.state.duration);\n\n    let c = new Connection();\n    c.state = state;\n    c._getHook = this._getHook;\n\n    return c;\n  }\n\n  toString() {\n    return `Connection(${this.getNode0Name()}<=>${this.getNode1Name()})`;\n  }\n\n  getColorFromType() {\n    switch (this.state.type) {\n      case \"direct\":\n        return \"rgb(180,150,150)\";\n      case \"indirect\":\n        return \"rgb(180,180,180)\";\n      default:\n        console.log(`Unknown type? ${this.state.type}`);\n        return \"red\";\n    }\n  }\n\n  getType() {\n    return this.state.type;\n  }\n\n  getWeights() {\n    return this.state.weights;\n  }\n\n  getWeight() {\n    let weight = 1.0;\n\n    Object.keys(this.state.weights).forEach((key) => {\n      weight += this.state.weights[key];\n    });\n\n    return weight;\n  }\n\n  getWeightFromType() {\n    let weight = this.getWeight();\n\n    switch (this.state.type) {\n      case \"direct\":\n        return 1.0 * weight;\n      case \"indirect\":\n        return 0.5 * weight;\n      default:\n        console.log(`Unknown type? ${this.state.type}`);\n        return 0.5 * weight;\n    }\n  }\n\n  toEdge() {\n    let color = this.getColorFromType();\n    // let weight = this.getWeightFromType();\n    let weight = this.getWeight();\n\n    let edge = {\n      id: this.getID(),\n      source: this.state.n0,\n      target: this.state.n1,\n      value: weight,\n      type: this.state.type,\n      color: color,\n    };\n\n    return edge;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nConnection.unDry = function (value) {\n  return new Connection(value);\n};\n\nConnection.load = function (data) {\n  return new Connection({ name: data.name });\n};\n\nDry.registerClass(\"Connection\", Connection);\n\nexport default Connection;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Connection from \"./Connection\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_connection_uid() {\n  let uid = uuidv4();\n  return \"C\" + uid.substring(uid.length - 7);\n}\n\nclass Connections {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAConnectionsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Connections();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item) {\n    return item instanceof Connection || item._isAConnectionObject;\n  }\n\n  add(connection) {\n    if (!this.canAdd(connection)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(connection.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(connection);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    connection = Connection.clone(connection);\n\n    let id = connection.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Connection ID ${connection}`);\n      }\n    } else {\n      let uid = _generate_connection_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_connection_uid();\n      }\n\n      connection.state.id = uid;\n    }\n\n    connection._updateHooks(this._getHook);\n    this._names[connection.getName()] = connection.getID();\n    this.state.registry[connection.getID()] = connection;\n\n    return connection;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No connection with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Connection || name._isAConnectionObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No connection matches '${name}. Available Connections are '${keys}'`);\n  }\n\n  get(id) {\n    let connection = this.state.registry[id];\n\n    if (!connection) {\n      throw new MissingError(`No Connection with ID ${id}`);\n    }\n\n    return connection;\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let connection = this.state.registry[key];\n\n      if (connection) {\n        for (let i = 0; i < funcs.length; ++i) {\n          connection = funcs[i](connection);\n          if (!connection) {\n            break;\n          }\n        }\n\n        if (connection) {\n          registry[key] = connection;\n          names[connection.getName()] = key;\n        }\n      }\n    });\n\n    let connections = new Connections();\n\n    connections.state.registry = registry;\n    connections._names = names;\n    connections._updateHooks(this._getHook);\n\n    return connections;\n  }\n\n  getConnectionsTo(item) {\n    if (item.getID) {\n      let id = item.getID();\n      item = {};\n      item[id] = 1;\n    }\n\n    let nnodes = Object.keys(item).length;\n\n    let seen = {};\n\n    function _add(id) {\n      if (!(id in seen)) {\n        seen[id] = 1;\n      } else {\n        seen[id] += 1;\n      }\n    }\n\n    for (let key in this.state.registry) {\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() in item) {\n        _add(connection.getNode1ID());\n      } else if (connection.getNode1ID() in item) {\n        _add(connection.getNode0ID());\n      }\n    }\n\n    let connections = [];\n\n    if (this._getHook) {\n      Object.keys(seen).forEach((key) => {\n        try {\n          if (seen[key] === nnodes) {\n            connections.push(this._getHook(key));\n          }\n        } catch (error) {\n          console.error(error);\n        }\n      });\n    } else {\n      connections = Object.keys(seen);\n    }\n\n    return connections;\n  }\n\n  getEdges(ids = null) {\n    let edges = [];\n\n    if (ids) {\n      Object.keys(this.state.registry).forEach((key) => {\n        let connection = this.state.registry[key];\n        if (connection.areNodesVisible(ids)) {\n          edges.push(connection.toEdge());\n        }\n      });\n    } else {\n      Object.keys(this.state.registry).forEach((key) => {\n        let connection = this.state.registry[key];\n        edges.push(connection.toEdge());\n      });\n    }\n\n    return edges;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nConnections.unDry = function (value) {\n  let connections = new Connections();\n  connections.state = value;\n  connections._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    connections._names[v.getName()] = key;\n  });\n\n  return connections;\n};\n\nDry.registerClass(\"Connections\", Connections);\n\nexport default Connections;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Position {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPositionObject = true;\n  }\n\n  static clone(item) {\n    let c = new Position();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  static makeCanonical(name) {\n    if (!name) {\n      return null;\n    } else {\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Position.makeCanonical(this.state.name);\n\n      if (!this.state.name){\n        throw new ValueError(\"You cannot have an Position without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Position(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPosition.unDry = function (value) {\n  return new Position(value);\n};\n\nDry.registerClass(\"Position\", Position);\n\nexport default Position;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Position from \"./Position\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_position_uid() {\n  let uid = uuidv4();\n  return \"Q\" + uid.substring(uid.length - 7);\n}\n\nclass Positions {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPositionsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Positions();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n    console.log(\"Output : \", output);\n\n    return output;\n  }\n\n  items() {\n    return this._names;\n  }\n\n  canAdd(item) {\n    return item instanceof Position || item._isAPositionObject;\n  }\n\n  add(position) {\n    if (!this.canAdd(position)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(position.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(position);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    position = Position.clone(position);\n\n    let id = position.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Position ID ${position}`);\n      }\n\n      position._updateHooks(this._getHook);\n      this.state.registry[id] = position;\n    } else {\n      let uid = _generate_position_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_position_uid();\n      }\n\n      position.state.id = uid;\n    }\n\n    position._updateHooks(this._getHook);\n    this._names[position.getName()] = position.getID();\n    this.state.registry[position.getID()] = position;\n\n    return position;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No position with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Position || name._isApositionObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No position matches '${name}. Available Positions are '${keys}'`);\n  }\n\n  get(id) {\n    let position = this.state.registry[id];\n\n    if (!position) {\n      throw new MissingError(`No Position with ID ${id}`);\n    }\n\n    return position;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPositions.unDry = function (value) {\n  let positions = new Positions();\n  positions.state = value;\n  positions._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    positions._names[v.getName()] = key;\n  });\n\n  return positions;\n};\n\nDry.registerClass(\"Positions\", Positions);\n\nexport default Positions;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Affiliation {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAAffiliationObject = true;\n  }\n\n  static clone(item) {\n    let c = new Affiliation();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  static makeCanonical(name) {\n    if (!name) {\n      return null;\n    } else {\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Affiliation.makeCanonical(this.state.name);\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have an Affiliation without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Affiliation(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nAffiliation.unDry = function (value) {\n  return new Affiliation(value);\n};\n\nDry.registerClass(\"Affiliation\", Affiliation);\n\nexport default Affiliation;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Affiliation from \"./Affiliation\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_affiliation_uid() {\n  let uid = uuidv4();\n  return \"A\" + uid.substring(uid.length - 7);\n}\n\nclass Affiliations {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAAffiliationsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Affiliations();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Affiliation || item._isAAffiliationObject;\n  }\n\n  add(affiliation) {\n    if (!this.canAdd(affiliation)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(affiliation.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(affiliation);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    affiliation = Affiliation.clone(affiliation);\n\n    let id = affiliation.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Affiliation ID ${affiliation}`);\n      }\n\n      affiliation._updateHooks(this._getHook);\n      this.state.registry[id] = affiliation;\n    } else {\n      let uid = _generate_affiliation_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_affiliation_uid();\n      }\n\n      affiliation.state.id = uid;\n    }\n\n    affiliation._updateHooks(this._getHook);\n    this._names[affiliation.getName()] = affiliation.getID();\n    this.state.registry[affiliation.getID()] = affiliation;\n\n    return affiliation;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No affiliation with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Affiliation || name._isAAffiliationObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No affiliation matches '${name}. Available Affiliations are '${keys}'`);\n  }\n\n  get(id) {\n    let affiliation = this.state.registry[id];\n\n    if (!affiliation) {\n      throw new MissingError(`No Affiliation with ID ${id}`);\n    }\n\n    return affiliation;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nAffiliations.unDry = function (value) {\n  let affiliations = new Affiliations();\n  affiliations.state = value;\n  affiliations._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    affiliations._names[v.getName()] = key;\n  });\n\n  return affiliations;\n};\n\nDry.registerClass(\"Affiliations\", Affiliations);\n\nexport default Affiliations;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport RoughDate from \"./RoughDate\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Source {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      date: null,\n      description: null,\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isASourceObject = true;\n  }\n\n  static clone(item) {\n    let c = new Source();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  getDate() {\n    return this.state.date;\n  }\n\n  updateDate(date, force = false) {\n    if (!(date instanceof RoughDate || date._isARoughDateObject)) {\n      date = new RoughDate(date);\n    }\n\n    if (date.isNull()) {\n      return false;\n    }\n\n    if (this.getDate().isNull()) {\n      this.state.date = date;\n      return true;\n    }\n\n    if (RoughDate.ne(this.getDate(), date)) {\n      if (force) {\n        this.state.date = this.getDate().merge(date);\n        return true;\n      } else {\n        console.log(`Disagreement of date for ${this}: ${this.getDate()} vs ${date}`);\n      }\n    }\n\n    return false;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.description = setState(state.description);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n      this.state.date = setState(state.date, new RoughDate());\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have an Source without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Source(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getDescription() {\n    return this.state.description;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSource.unDry = function (value) {\n  return new Source(value);\n};\n\nDry.registerClass(\"Source\", Source);\n\nexport default Source;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Source from \"./Source\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_source_uid() {\n  let uid = uuidv4();\n  return \"S\" + uid.substring(uid.length - 7);\n}\n\nclass Sources {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isASourcesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Sources();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Source || item._isASourceObject;\n  }\n\n  add(source) {\n    if (!this.canAdd(source)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(source.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(source);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    source = Source.clone(source);\n\n    let id = source.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Source ID ${source}`);\n      }\n\n      source._updateHooks(this._getHook);\n      this.state.registry[id] = source;\n    } else {\n      let uid = _generate_source_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_source_uid();\n      }\n\n      source.state.id = uid;\n    }\n\n    source._updateHooks(this._getHook);\n    this._names[source.getName()] = source.getID();\n    this.state.registry[source.getID()] = source;\n\n    return source;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No source with name ${name}`);\n    }\n  }\n\n  search(name) {\n    if (name instanceof Source || name._isASourceObject) {\n      name = name.getName();\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let item = this.state.registry[key];\n\n      let description = item.getDescription();\n\n      if (!description) {\n        description = \"\";\n      }\n\n      try {\n        if (item.getName().toLowerCase().indexOf(name) !== -1) {\n          results.push(item);\n        } else if (description.toLowerCase().indexOf(name) !== -1) {\n          results.push(item);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    } else {\n      return null;\n    }\n  }\n\n  find(name) {\n    if (name instanceof Source || name._isASourceObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No source matches '${name}. Available sources are '${keys}'`);\n  }\n\n  get(id) {\n    let source = this.state.registry[id];\n\n    if (!source) {\n      throw new MissingError(`No Source with ID ${id}`);\n    }\n\n    return source;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSources.unDry = function (value) {\n  let sources = new Sources();\n  sources.state = value;\n  sources._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    sources._names[v.getName()] = key;\n  });\n\n  return sources;\n};\n\nDry.registerClass(\"Sources\", Sources);\n\nexport default Sources;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Note {\n  constructor(props) {\n    this.state = {\n      text: null,\n      id: null,\n      sources: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isANoteObject = true;\n  }\n\n  static clone(item) {\n    let c = new Note();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.text = setState(state.text);\n      this.state.id = setState(state.id);\n      this.state.sources = setState(state.sources, []);\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  toString() {\n    return `Note(${this.getText()})`;\n  }\n\n  getText() {\n    return this.state.text;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nNote.unDry = function (value) {\n  return new Note(value);\n};\n\nDry.registerClass(\"Note\", Note);\n\nexport default Note;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Note from \"./Note\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_note_uid() {\n  let uid = uuidv4();\n  return \"N\" + uid.substring(uid.length - 7);\n}\n\nclass Notes {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isANotesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Notes();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item) {\n    return item instanceof Note || item._isANoteObject;\n  }\n\n  add(note) {\n    if (!this.canAdd(note)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(note.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(note);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    note = note.clone(Note);\n\n    let id = note.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Note ID ${note}`);\n      }\n\n      note._updateHooks(this._getHook);\n      this.state.registry[id] = Note;\n    } else {\n      let uid = _generate_note_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_note_uid();\n      }\n\n      note.state.id = uid;\n    }\n\n    note._updateHooks(this._getHook);\n    this._names[note.getName()] = note.getID();\n    this.state.registry[note.getID()] = note;\n\n    return note;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No Note with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Note || name._isANoteObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No Note matches '${name}. Available Notes are '${keys}'`);\n  }\n\n  get(id) {\n    let Note = this.state.registry[id];\n\n    if (!Note) {\n      throw new MissingError(`No Note with ID ${id}`);\n    }\n\n    return Note;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nNotes.unDry = function (value) {\n  let notes = new Notes();\n  notes.state = value;\n  notes._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    notes._names[v.getName()] = key;\n  });\n\n  return notes;\n};\n\nDry.registerClass(\"Notes\", Notes);\n\nexport default Notes;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Project {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      url: null,\n      duration: new DateRange(),\n      notes: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAProjectObject = true;\n  }\n\n  static clone(item) {\n    let c = new Project();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, {});\n      this.state.url = setState(state.url, null);\n      this.state.duration = new DateRange({ value: state.duration });\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have a Project without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Project(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getURL() {\n    return this.state.url;\n  }\n\n  getDuration() {\n    return this.state.duration;\n  }\n\n  getTimeLine() {\n    const duration = this.getDuration();\n\n    if (duration && duration.hasBounds()) {\n      return {\n        start: duration.getEarliestStart().toDate(),\n        end: duration.getLatestEnd().toDate(),\n        id: this.getID(),\n        content: this.getName(),\n      };\n    } else {\n      return null;\n    }\n  }\n\n  getNewTimeLine() {\n    const duration = this.getDuration();\n\n    if (duration && duration.hasBounds()) {\n      return {\n        start_time: duration.getEarliestStart().toMoment(),\n        end_time: duration.getLatestEnd().toMoment(),\n        project_id: this.getID(),\n        title: this.getName(),\n      };\n    } else {\n      return null;\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nProject.unDry = function (value) {\n  return new Project(value);\n};\n\nDry.registerClass(\"Project\", Project);\n\nexport default Project;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Project from \"./Project\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_project_uid() {\n  let uid = uuidv4();\n  return \"J\" + uid.substring(uid.length - 7);\n}\n\nclass Projects {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAProjectsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Projects();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  getNames() {\n    return Object.keys(this._names);\n  }\n\n  getIDs() {\n    return Object.values(this._names);\n  }\n\n  getDetails() {\n    return this._names;\n  }\n\n  canAdd(item) {\n    return item instanceof Project || item._isAProjectObject;\n  }\n\n  add(project) {\n    if (!this.canAdd(project)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(project.getName());\n    } catch (error) {\n      console.error(\"Cannot get project\", error);\n    }\n\n    if (existing) {\n      existing = existing.merge(project);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    project = Project.clone(project);\n\n    let id = project.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Project ID ${project}`);\n      }\n\n      project._updateHooks(this._getHook);\n      this.state.registry[id] = project;\n    } else {\n      let uid = _generate_project_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_project_uid();\n      }\n\n      project.state.id = uid;\n    }\n\n    project._updateHooks(this._getHook);\n    this._names[project.getName()] = project.getID();\n    this.state.registry[project.getID()] = project;\n\n    return project;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No project with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Project || name._isAProjectObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No project matches '${name}. Available projects are '${keys}'`);\n  }\n\n  get(id) {\n    let project = this.state.registry[id];\n\n    if (!project) {\n      throw new MissingError(`No Project with ID ${id}`);\n    }\n\n    return project;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let project = this.state.registry[key];\n      if (project) {\n        let timeline = project.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nProjects.unDry = function (value) {\n  let projects = new Projects();\n  projects.state = value;\n  projects._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    projects._names[v.getName()] = key;\n  });\n\n  return projects;\n};\n\nDry.registerClass(\"Projects\", Projects);\n\nexport default Projects;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nclass Biographies {\n  constructor() {\n    this.state = {\n      bios: {},\n    };\n\n    this._getHook = null;\n    this._isABiographiesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  static clone(item) {\n    let c = new Biographies();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  get(node) {\n    if (!node) {\n      return null;\n    } else if (node.getID) {\n      node = node.getID();\n    }\n\n    return this.state.bios[node];\n  }\n\n  getNode(id) {\n    if (this._getHook) {\n      return this._getHook(id);\n    } else {\n      return id;\n    }\n  }\n\n  search(text) {\n    if (!text) {\n      return null;\n    }\n\n    text = text.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this.state.bios).forEach((key) => {\n      if (this.state.bios[key].toLowerCase().indexOf(text) !== -1) {\n        results.push(this.getNode(key));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    } else {\n      return null;\n    }\n  }\n\n  add(node, biography) {\n    if (!node || !biography) {\n      return null;\n    } else if (node.getID) {\n      node = node.getID();\n    }\n\n    let bio = this.state.bios[node];\n\n    if (bio) {\n      console.log(`There is already a bio for ${this.getNode(node)}`);\n      biography = `${bio}\\n${biography}`;\n    }\n\n    this.state.bios[node] = biography;\n  }\n}\n\nBiographies.unDry = function (value) {\n  let bios = new Biographies();\n  bios.state = value;\n  return bios;\n};\n\nDry.registerClass(\"Biographies\", Biographies);\n\nexport default Biographies;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport People from \"./People\";\nimport Businesses from \"./Businesses\";\nimport Connections from \"./Connections\";\nimport Positions from \"./Positions\";\nimport Affiliations from \"./Affiliations\";\nimport Sources from \"./Sources\";\nimport Notes from \"./Notes\";\nimport Projects from \"./Projects\";\nimport Biographies from \"./Biographies\";\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nconst fast_physics = {\n  enabled: true,\n  timestep: 0.5,\n};\n\nconst slow_physics = { ...fast_physics };\nslow_physics.timestep = 0.1;\n\nfunction _push(values, list) {\n  if (!list) {\n    return;\n  }\n\n  if (values.length) {\n    for (let i = 0; i < values.length; ++i) {\n      list.push(values[i]);\n    }\n  } else {\n    list.push(values);\n  }\n}\n\nclass Social {\n  constructor(props) {\n    if (props) {\n      this.state = props;\n    } else {\n      this.state = {};\n    }\n\n    this.state.anchor = null;\n    this.state.filter = {};\n    this.state.cache = {\n      graph: null,\n      projectTimeLine: null,\n      itemTimeLine: null,\n      node_filters: null,\n      edge_filters: null,\n      people: null,\n      businesses: null,\n      connections: null,\n    };\n    this.state.window = new DateRange();\n    this.state.max_window = new DateRange();\n    this._rebuilding = 0;\n\n    this._isASocialObject = true;\n  }\n\n  static clone(item) {\n    let c = new Social();\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks() {\n    let getHook = (id) => {\n      return this.get(id);\n    };\n\n    let state = { ...this.state };\n\n    if (!(this.state.people instanceof People)) {\n      state.people = new People();\n    } else {\n      state.people = this.state.people;\n    }\n\n    if (!(this.state.businesses instanceof Businesses)) {\n      state.businesses = new Businesses();\n    } else {\n      state.businesses = this.state.businesses;\n    }\n\n    if (!(this.state.connections instanceof Connections)) {\n      state.connections = new Connections();\n    } else {\n      state.connections = this.state.connections;\n    }\n\n    if (!(this.state.positions instanceof Positions)) {\n      state.positions = new Positions();\n    } else {\n      state.positions = this.state.positions;\n    }\n\n    if (!(this.state.affiliations instanceof Affiliations)) {\n      state.affiliations = new Affiliations();\n    } else {\n      state.affiliations = this.state.affiliations;\n    }\n\n    if (!(this.state.sources instanceof Sources)) {\n      state.sources = new Sources();\n    } else {\n      state.sources = this.state.sources;\n    }\n\n    if (!(this.state.notes instanceof Notes)) {\n      state.notes = new Notes();\n    } else {\n      state.notes = this.state.notes;\n    }\n\n    if (!(this.state.projects instanceof Projects)) {\n      state.projects = new Projects();\n    } else {\n      state.projects = this.state.projects;\n    }\n\n    if (!(this.state.biographies instanceof Biographies)) {\n      state.biographies = new Biographies();\n    } else {\n      state.biographies = this.state.biographies;\n    }\n\n    this.state = state;\n\n    for (let key in this.state) {\n      try {\n        this.state[key]._updateHooks(getHook);\n      } catch (error) {\n        console.error(\"For key : \", key, \"\\nError: \", error);\n      }\n    }\n  }\n\n  clearCache() {\n    this.state.cache = {\n      graph: null,\n      projectTimeLine: null,\n      itemTimeLine: null,\n      node_filters: null,\n      edge_filters: null,\n      people: null,\n      businesses: null,\n      connections: null,\n    };\n    this._rebuilding = 0;\n  }\n\n  getNodeFilters() {\n    if (this.state.cache.node_filters) {\n      return this.state.cache.node_filters;\n    }\n\n    this._rebuilding += 1;\n    this.state.cache.node_filters = [];\n\n    // Must do time first, as this can affect all of the other filters!\n    let window = this.getWindow();\n\n    if (window.hasStart() || window.hasEnd()) {\n      this.state.cache.node_filters.push((item) => {\n        try {\n          return item.filterWindow(window);\n        } catch (error) {\n          console.log(`ERROR ${error}: ${item}`);\n          return item;\n        }\n      });\n    }\n\n    const project_filter = this.state.filter.project;\n\n    if (project_filter) {\n      this.state.cache.node_filters.push((item) => {\n        return item.filterProject(project_filter);\n      });\n    }\n\n    const source_filter = this.state.filter.source;\n\n    if (source_filter) {\n      this.state.cache.node_filters.push((item) => {\n        return item.filterSource(source_filter);\n      });\n    }\n\n    const node_filter = this.state.filter.node;\n\n    if (node_filter) {\n      let connections = this.getConnectionsTo(node_filter);\n      let filter = { ...node_filter };\n\n      for (let connection in connections) {\n        let node = connections[connection];\n        filter[node.getID()] = 1;\n      }\n\n      this.state.cache.node_filters.push((item) => {\n        if (item.getID() in filter) {\n          return item;\n        } else {\n          return null;\n        }\n      });\n    }\n\n    const group_filter = this.state.filter.group;\n\n    if (group_filter) {\n      this.state.cache.node_filters.push((item) => {\n        try {\n          if (item.inGroup(group_filter)) {\n            return item;\n          } else {\n            return null;\n          }\n        } catch (error) {\n          console.log(`Filter error: ${error}`);\n          return item;\n        }\n      });\n    }\n\n    this._rebuilding -= 1;\n    return this.state.cache.node_filters;\n  }\n\n  getEdgeFilters() {\n    if (!this.state.cache.edge_filters) {\n      this.state.cache.edge_filters = [];\n\n      // must do time first, as this can affect all of the other filters!\n      let window = this.getWindow();\n\n      if (window.hasStart() || window.hasEnd()) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterWindow(window);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const project_filter = this.state.filter.project;\n\n      if (project_filter) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterProject(project_filter);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const source_filter = this.state.filter.source;\n\n      if (source_filter) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterSource(source_filter);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n    }\n\n    return this.state.cache.edge_filters;\n  }\n\n  getWindow() {\n    return this.state.window;\n  }\n\n  getMaxWindow() {\n    return this.state.max_window;\n  }\n\n  _fitWindow(window) {\n    let new_window = this.state.max_window.intersect(window);\n\n    let delta = window.getDelta();\n\n    if (new_window && new_window.getDelta() === delta) {\n      return window;\n    }\n\n    if (delta > this.state.max_window.getDelta()) {\n      return DateRange.clone(this.state.max_window);\n    }\n\n    if (window.getStartDate() < this.state.max_window.getStartDate()) {\n      return new DateRange({\n        start: this.state.max_window.getStartDate(),\n        end: this.state.max_window.getStartDate() + delta,\n      });\n    } else {\n      return new DateRange({\n        start: this.state.max_window.getEndDate() - delta,\n        end: this.state.max_window.getEndDate(),\n      });\n    }\n  }\n\n  setMaxWindow(window) {\n    if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (window === this.state.max_window) {\n      return;\n    }\n\n    this.state.max_window = window;\n\n    if (this.state.window && this.state.window.hasBounds()) {\n      let fitted = this._fitWindow(this.state.window);\n\n      if (fitted !== this.state.window) {\n        this.setWindow(fitted);\n      }\n    } else {\n      this.state.window = this.state.max_window;\n    }\n  }\n\n  setWindow(window) {\n    if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (DateRange.eq(window, this.state.window)) {\n      return false;\n    }\n\n    let fitted = this._fitWindow(window);\n\n    if (DateRange.eq(fitted, this.state.window)) {\n      return false;\n    }\n\n    this.state.window = fitted;\n    this.clearCache();\n    return true;\n  }\n\n  getPeople(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    console.log(\"Getting peoples...\", this.state.people);\n\n    if (filtered) {\n      if (!this.state.cache.people) {\n        console.log(\"REBUILD PEOPLE\");\n        this._rebuilding += 1;\n        this.state.cache.people = this.state.people.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.people;\n    } else {\n      return this.state.people;\n    }\n  }\n\n  getBusinesses(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.businesses) {\n        console.log(\"REBUILD BUSINESSES\");\n        this._rebuilding += 1;\n        this.state.cache.businesses = this.state.businesses.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.businesses;\n    } else {\n      return this.state.businesses;\n    }\n  }\n\n  getConnections(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.connections) {\n        console.log(\"REBUILD CONNECTIONS\");\n        this._rebuilding += 1;\n        this.state.cache.connections = this.state.connections.filter(this.getEdgeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.connections;\n    } else {\n      return this.state.connections;\n    }\n  }\n\n  getBiographies() {\n    return this.state.biographies;\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getPositions() {\n    return this.state.positions;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getNotes() {\n    return this.state.notes;\n  }\n\n  getProjects() {\n    return this.state.projects;\n  }\n\n  getConnectionsTo(item) {\n    return this.getConnections().getConnectionsTo(item);\n  }\n\n  getAnchor() {\n    return this.state.anchor;\n  }\n\n  getFilter() {\n    return { ...this.state.filter };\n  }\n\n  getFilterText() {\n    const filter = [];\n\n    let f = this.state.filter.node;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`connected to ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`connected to (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.source;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`with source ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`with sources (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.group;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`in group ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`in groups (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.project;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`in project ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`in projects (${parts.join(\" and \")})`);\n      }\n    }\n\n    if (filter.length === 1) {\n      return filter[0];\n    } else if (filter.length > 1) {\n      return `[${filter.join(\"] and [\")}]`;\n    } else {\n      return null;\n    }\n  }\n\n  _getType(item) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    if (item[0] === \"P\" || item[0] === \"B\") {\n      return \"node\";\n    } else if (item[0] === \"J\") {\n      return \"project\";\n    } else if (item[0] === \"S\") {\n      return \"source\";\n    } else {\n      return \"group\";\n    }\n  }\n\n  isFiltered(item) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    let type = this._getType(item);\n\n    const filter = this.state.filter[type];\n\n    if (filter) {\n      return item in filter;\n    } else {\n      return false;\n    }\n  }\n\n  find(text) {\n    let result = [];\n\n    try {\n      let items = this.getPeople(false).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getBusinesses(false).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getPositions().find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getAffiliations().find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getSources().search(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getBiographies().search(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    return result;\n  }\n\n  resetFilters() {\n    this.state.filter = {};\n    this.clearCache();\n  }\n\n  setAnchor(anchor) {\n    if (anchor) {\n      anchor = this.getPeople().find(anchor);\n    }\n\n    this.state.anchor = anchor;\n    this.clearCache();\n  }\n\n  toggleFilter(item) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    let type = this._getType(item);\n\n    if (!(type in this.state.filter)) {\n      this.state.filter[type] = {};\n    }\n\n    if (item in this.state.filter[type]) {\n      delete this.state.filter[type][item];\n\n      if (Object.keys(this.state.filter[type]).length === 0) {\n        delete this.state.filter[type];\n      }\n    } else {\n      this.state.filter[type][item] = 1;\n    }\n\n    this.clearCache();\n  }\n\n  getProjectTimeLine() {\n    if (this.state.cache.projectTimeLine !== null) {\n      return this.state.cache.projectTimeLine;\n    }\n\n    let items = this.getProjects().getTimeLine();\n\n    this.state.cache.projectTimeLine = items;\n\n    return this.state.cache.projectTimeLine;\n  }\n\n  getItemTimeLine() {\n    if (this.state.cache.itemTimeLine !== null) {\n      return this.state.cache.itemTimeLine;\n    }\n\n    let items = this.getPeople().getTimeLine();\n\n    let projects = this.getProjects().getTimeLine();\n\n    projects.forEach((item) => {\n      item.type = \"background\";\n      items.push(item);\n    });\n\n    this.state.cache.itemTimeLine = items;\n\n    return this.state.cache.itemTimeLine;\n  }\n\n  getGraph() {\n    if (this.state.cache.graph !== null) {\n      return this.state.cache.graph;\n    }\n\n    const anchor = this.state.anchor;\n    let nodes = this.getPeople().getNodes({ anchor: anchor });\n    nodes = nodes.concat(this.getBusinesses().getNodes());\n\n    let n = {};\n    for (let i in nodes) {\n      n[nodes[i].id] = 1;\n    }\n\n    let edges = this.getConnections().getEdges(n);\n\n    this.state.cache.graph = { nodes: nodes, edges: edges };\n    return this.state.cache.graph;\n  }\n\n  add(item) {\n    if (!item) {\n      return;\n    }\n\n    let added = false;\n\n    Object.keys(this.state).forEach((key) => {\n      if (!added) {\n        let group = this.state[key];\n        if (group && group.canAdd) {\n          if (group.canAdd(item)) {\n            group.add(item);\n            added = true;\n          }\n        }\n      }\n    });\n\n    if (!added) {\n      throw new ValueError(`Do not know how to add ${item} to this Social group`);\n    }\n  }\n\n  get(id, filtered = true) {\n    if (id.getID) {\n      id = id.getID();\n    }\n\n    if (this._rebuilding) {\n      // we cannot get filtered data when rebuilding, else otherwise\n      // we get race conditions and weird results\n      filtered = false;\n    }\n\n    try {\n      if (id[0] === \"C\") {\n        return this.getConnections(filtered).get(id);\n      } else if (id[0] === \"P\") {\n        return this.getPeople(filtered).get(id);\n      } else if (id[0] === \"B\") {\n        return this.getBusinesses(filtered).get(id);\n      } else if (id[0] === \"Q\") {\n        return this.getPositions().get(id);\n      } else if (id[0] === \"A\") {\n        return this.getAffiliations().get(id);\n      } else if (id[0] === \"S\") {\n        return this.getSources().get(id);\n      } else if (id[0] === \"N\") {\n        return this.getNotes().get(id);\n      } else if (id[0] === \"J\") {\n        return this.getProjects().get(id);\n      } else {\n        return id;\n      }\n    } catch (error) {\n      if (filtered) {\n        return this.get(id, false);\n      } else {\n        throw error;\n      }\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSocial.unDry = function (value) {\n  let social = new Social(value);\n  social._updateHooks();\n\n  return social;\n};\n\nDry.registerClass(\"Social\", Social);\n\nexport default Social;\n","import React from \"react\";\n\nimport { Tabs, Tab, TabPanel, TabList } from \"react-web-tabs\";\n\nimport { Accordion, AccordionItem, AccordionTitle, AccordionPanel } from \"./Accordion\";\n\nimport GroupsList from \"./GroupsList\";\nimport ConnectionList from \"./ConnectionList\";\nimport SourceList from \"./SourceList\";\nimport WeightsList from \"./WeightsList\";\nimport DateRangeButton from \"./DateRangeButton\";\nimport DefaultButton from \"./DefaultButton\";\n\nimport Social from \"../model/Social\";\n\nimport styles from \"./InfoBox.module.css\";\n\nimport default_image from \"../images/RHowlett_IKB.jpg\";\nimport person_image from \"../images/IllustriteZeitung_SS_GreatBritain.png\";\nimport business_image from \"../images/320px-SS_Great_Britain_diagram.jpg\";\nimport source_image from \"../images/Sumerian_26th_c_Adab.jpg\";\nimport analysis_image from \"../images/320px-SS_Great_Britain_transverse_section.jpg\";\n\nlet default_title = \"Isambard's Social Network\";\n\nlet default_text = (\n  <div>\n    This is an interactive viewer of Isambard Kingdom Brunel&apos;s social network. Please click in the nodes and have\n    fun!\n  </div>\n);\n\nfunction null_function() {}\n\nfunction getBiography({ item, social, emitSelected = null_function, emitToggleFilter = null_function }) {\n  let pages = [];\n  let affiliations = {};\n  let positions = {};\n  let sources = {};\n  let connections = [];\n\n  try {\n    connections = social.getConnectionsTo(item);\n  } catch (error) {\n    console.log(`CONNECTIONS ERROR ${error}`);\n  }\n\n  if (item.getAffiliations) {\n    affiliations = item.getAffiliations();\n  }\n\n  if (item.getPositions) {\n    positions = item.getPositions();\n  }\n\n  if (item.getSources) {\n    sources = item.getSources();\n  }\n\n  let alive = null;\n\n  if (item.getAlive) {\n    let a = item.getAlive();\n    if (a) {\n      alive = (\n        <p>\n          They were alive from&nbsp;\n          {a.getStartString()}&nbsp; until {a.getEndString()}.\n        </p>\n      );\n    }\n  }\n\n  let bio = null;\n\n  try {\n    bio = social.getBiographies().get(item);\n  } catch (error) {\n    bio = null;\n  }\n\n  pages.push([\n    \"Biography\",\n    <div key=\"biography\">\n      <div>{bio}</div>\n      <div>{alive}</div>\n    </div>,\n  ]);\n\n  if (connections.length > 0) {\n    pages.push([\n      \"Connections\",\n      <div key=\"connections\">\n        <ConnectionList\n          connections={connections}\n          emitSelected={emitSelected}\n          emitToggleFilter={emitToggleFilter}\n          social={social}\n        />\n      </div>,\n    ]);\n  } else {\n    pages.push([\"Connections\", \"None\"]);\n  }\n\n  if (Object.keys(positions).length > 0) {\n    pages.push([\n      \"Positions\",\n      <div key=\"positions\">\n        <GroupsList\n          groups={positions}\n          emitSelected={emitSelected}\n          emitToggleFilter={emitToggleFilter}\n          social={social}\n        />\n      </div>,\n    ]);\n  } else {\n    pages.push([\"Positions\", \"None\"]);\n  }\n\n  if (Object.keys(affiliations).length > 0) {\n    pages.push([\n      \"Affiliations\",\n      <div key=\"affiliations\">\n        <GroupsList\n          groups={affiliations}\n          emitSelected={emitSelected}\n          emitToggleFilter={emitToggleFilter}\n          social={social}\n        />\n      </div>,\n    ]);\n  } else {\n    pages.push([\"Affiliations\", \"None\"]);\n  }\n\n  if (Object.keys(sources).length > 0) {\n    pages.push([\n      \"Sources\",\n      <div key=\"sources\">\n        <GroupsList groups={sources} emitSelected={emitSelected} emitToggleFilter={emitToggleFilter} social={social} />\n      </div>,\n    ]);\n  }\n\n  pages.push([\"Analysis\", <div key=\"analysis\">Here is space for graphs and analysis of {item.getName()}</div>]);\n\n  return pages;\n}\n\nfunction extractData({ item, social, emitSelected = null_function, emitToggleFilter = null_function }) {\n  let data = {\n    title: default_title,\n    image: default_image,\n    pages: [[\"Title\", default_text]],\n  };\n\n  if (!(social instanceof Social)) {\n    return data;\n  }\n\n  if (!item) {\n    return data;\n  }\n\n  //refresh the item in case of updates...\n  if (item.getID) {\n    item = item.getID();\n  }\n\n  try {\n    item = social.get(item);\n  } catch (error) {\n    item = null;\n  }\n\n  if (!item) {\n    return data;\n  }\n\n  if (item._isAPersonObject) {\n    data.title = (\n      <DefaultButton\n        onClick={() => {\n          emitToggleFilter(item);\n        }}\n      >\n        {item.getName()}\n      </DefaultButton>\n    );\n    data.pages = getBiography({\n      item: item,\n      social: social,\n      emitSelected: emitSelected,\n      emitToggleFilter: emitToggleFilter,\n    });\n\n    data.image = person_image;\n  } else if (item._isABusinessObject) {\n    data.title = (\n      <DefaultButton\n        onClick={() => {\n          emitToggleFilter(item);\n        }}\n      >\n        {item.getName()}\n      </DefaultButton>\n    );\n    data.pages = getBiography({\n      item: item,\n      social: social,\n      emitSelected: emitSelected,\n      emitToggleFilter: emitToggleFilter,\n    });\n\n    data.image = business_image;\n  } else if (item._isASourceObject) {\n    data.title = item.getName();\n    let description = item.getDescription();\n    if (!description) {\n      description = \"No description\";\n    }\n    data.pages = [\n      [\"Description\", description],\n      [\"Analysis\", \"Analysis for this source - where else has it been cited?\"],\n    ];\n    data.image = source_image;\n  } else if (item._isAConnectionObject) {\n    data.title = null;\n\n    let n0 = item.getNode0();\n    if (n0.getName) {\n      let node = n0;\n      n0 = (\n        <DefaultButton\n          onClick={() => {\n            emitSelected(node);\n          }}\n        >\n          {n0.getName()}\n        </DefaultButton>\n      );\n    }\n\n    let n1 = item.getNode1();\n    if (n1.getName) {\n      let node = n1;\n      n1 = (\n        <DefaultButton\n          onClick={() => {\n            emitSelected(node);\n          }}\n        >\n          {n1.getName()}\n        </DefaultButton>\n      );\n    }\n\n    let asources = item.getAffiliationSources();\n    let csources = item.getCorrespondanceSources();\n    let duration = item.getDuration();\n\n    if (duration) {\n      duration = (\n        <div>\n          <div>during</div>\n          <DateRangeButton value={duration} emitSelected={emitSelected} />\n        </div>\n      );\n    }\n\n    if (asources) {\n      asources = (\n        <AccordionItem uuid=\"asources\">\n          <AccordionTitle>Affiliation</AccordionTitle>\n          <AccordionPanel>\n            <SourceList social={social} sources={asources} emitSelected={emitSelected} />\n          </AccordionPanel>\n        </AccordionItem>\n      );\n    }\n\n    if (csources) {\n      csources = (\n        <AccordionItem uuid=\"csources\">\n          <AccordionTitle>Correspondance</AccordionTitle>\n          <AccordionPanel>\n            <SourceList social={social} sources={csources} emitSelected={emitSelected} />\n          </AccordionPanel>\n        </AccordionItem>\n      );\n    }\n\n    let accordion = null;\n\n    if (asources || csources) {\n      accordion = (\n        <Accordion allowMultipleExpanded={true} allowZeroExpanded={true} preExpanded={[\"asources\", \"csources\"]}>\n          {asources}\n          {csources}\n        </Accordion>\n      );\n    }\n\n    let pages = [];\n    pages.push([\n      \"Connection\",\n      <div key=\"connection\" style={{ textAlign: \"center\" }}>\n        {n0}\n        <div>||</div>\n        {n1}\n        <div>&nbsp;</div>\n        <div>{duration}</div>\n      </div>,\n    ]);\n\n    pages.push([\"Sources\", <div key=\"sources\">{accordion}</div>]);\n\n    pages.push([\n      \"Projects\",\n      <WeightsList\n        key=\"projects\"\n        weights={item.getWeights()}\n        type={item.getType()}\n        social={social}\n        emitSelected={emitSelected}\n        emitToggleFilter={emitToggleFilter}\n      />,\n    ]);\n\n    pages.push([\"Analysis\", \"Space for analysis of this Connection\"]);\n\n    data.image = analysis_image;\n\n    data.pages = pages;\n  }\n\n  return data;\n}\n\nfunction InfoBox(props) {\n  let data = {};\n\n  try {\n    data = extractData(props);\n  } catch (error) {\n    data = {\n      title: default_title,\n      image: default_image,\n      pages: [[\"Title\", default_text]],\n    };\n    console.log(`ERROR ${error}`);\n  }\n\n  const pages = data.pages;\n\n  if (pages.length > 1) {\n    let tabs = [];\n    let panes = [];\n\n    for (let i = 0; i < pages.length; ++i) {\n      panes.push(\n        <TabPanel key={pages[i][0]} tabId={pages[i][0]} className={styles.tabPanel}>\n          {pages[i][1]}\n        </TabPanel>\n      );\n      tabs.push(\n        <Tab key={pages[i][0]} className={styles.tab} tabFor={pages[i][0]}>\n          {pages[i][0]}\n        </Tab>\n      );\n    }\n\n    return (\n      <div className={styles.container}>\n        <img className={styles.heroImage} alt=\"\" src={data.image} />\n        <div className={styles.title}>{data.title}</div>\n        <Tabs\n          key={panes.length}\n          vertical\n          onChange={(tabId) => {\n            console.log(tabId);\n          }}\n          defaultTab={pages[0][0]}\n          className={styles.tabs}\n        >\n          <TabList className={styles.tablist}>{tabs}</TabList>\n          {panes}\n        </Tabs>\n      </div>\n    );\n  } else {\n    return (\n      <div className={styles.container}>\n        <img className={styles.heroImage} alt=\"\" src={data.image} />\n        <div className={styles.title}>{data.title}</div>\n        {pages[0][1]}\n      </div>\n    );\n  }\n}\n\nexport default InfoBox;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport moment from \"moment\";\n\nimport Timeline, { TimelineHeaders, CustomHeader } from \"react-calendar-timeline\";\n\nimport \"./TimelineCSSOverride.css\";\n\nclass NewTimeline extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.setFilter = this.setFilter.bind(this);\n    this.itemRenderer = this.itemRenderer.bind(this);\n\n    this.state = {\n      defaultTimeStart: moment(\"1829-01-01\"),\n      defaultTimeEnd: moment(\"1846-12-31\"),\n      lastShip: null,\n    };\n\n    this.textStyle = {\n      overflow: \"hidden\",\n      paddingLeft: 3,\n      textOverflow: \"ellipsis\",\n      whiteSpace: \"nowrap\",\n    };\n\n    this.dateHeaderStyle = {\n      color: \"black\",\n      fontSize: \"16px\",\n      backgroundColor: \"#E8CEAA\",\n      //   backgroundColor: \"#E3D8A0\",\n      fontFamily: \"Playfair Display SC\",\n      border: \"white\",\n    };\n  }\n\n  setFilter(id, shipName) {\n    if (shipName === this.state.lastShip) {\n      this.props.resetFilters();\n      // Allows the ship to be selected again\n      this.setState({ lastShip: \"\" });\n      return;\n    }\n\n    this.setState({ lastShip: shipName });\n    this.props.onClick(id, shipName);\n  }\n\n  openOverview() {\n    return;\n  }\n\n  itemRenderer({ item, itemContext, getItemProps }) {\n    // const { left: leftResizeProps, right: rightResizeProps } = getResizeProps();\n\n    const background = itemContext.selected ? (itemContext.dragging ? \"#008080\" : \"#008080\") : \"#003366\";\n    const border = itemContext.resizing ? \"#008080\" : \"#003366\";\n\n    return (\n      <div\n        {...getItemProps({\n          style: {\n            background,\n            border,\n            borderStyle: \"solid\",\n            fontSize: \"18px\",\n            fontFamily: \"Playfair Display SC\",\n            borderWidth: 0,\n          },\n          onMouseDown: () => {\n            this.setFilter(item[\"project_id\"], item[\"title\"]);\n          },\n        })}\n      >\n        <div style={this.textStyle}>{itemContext.title}</div>\n      </div>\n    );\n  }\n\n  render() {\n    const projects = this.props.projects;\n\n    const timeline_items = projects.values().map((project, index) => {\n      let item = project.getNewTimeLine();\n\n      item[\"id\"] = index;\n      item[\"group\"] = 1;\n\n      return item;\n    });\n\n    const groups = [{ id: 1, title: \"Projects\" }];\n\n    return (\n      <Timeline\n        groups={groups}\n        items={timeline_items}\n        sidebarWidth={0}\n        itemTouchSendsClick={true}\n        stackItems\n        lineHeight={60}\n        itemHeightRatio={0.8}\n        showCursorLine\n        canMove={false}\n        canResize={false}\n        traditionalZoom={true}\n        timeSteps={{ year: 1 }}\n        itemRenderer={this.itemRenderer}\n        defaultTimeStart={this.state.defaultTimeStart}\n        defaultTimeEnd={this.state.defaultTimeEnd}\n      >\n        <TimelineHeaders>\n          {/* <DateHeader unit=\"primaryHeader\" style={this.dateHeaderStyle} /> */}\n          <CustomHeader height={30} unit=\"year\">\n            {({ headerContext: { intervals }, getRootProps, getIntervalProps }) => {\n              console.log(getIntervalProps);\n              return (\n                <div {...getRootProps()}>\n                  {intervals.map((interval, index) => {\n                    const intervalStyle = {\n                      lineHeight: \"30px\",\n                      textAlign: \"center\",\n                      borderLeft: \"1px solid white\",\n                      cursor: \"pointer\",\n                      backgroundColor: \"#E9CEAB\",\n                      color: \"black\",\n                      fontFamily: \"Playfair Display SC\",\n                    };\n                    return (\n                      <div\n                        key={index}\n                        {...getIntervalProps({\n                          interval,\n                          style: intervalStyle,\n                        })}\n                      >\n                        <div className=\"sticky\">{interval.startTime.format(\"YYYY\")}</div>\n                      </div>\n                    );\n                  })}\n                </div>\n              );\n            }}\n          </CustomHeader>\n        </TimelineHeaders>\n      </Timeline>\n    );\n  }\n}\n\nNewTimeline.propTypes = {\n  projects: PropTypes.func.isRequired,\n  onClick: PropTypes.func.isRequired,\n  resetFilters: PropTypes.func.isRequired,\n};\n\nexport default NewTimeline;\n","import PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nimport { Tabs, Tab, TabPanel, TabList } from \"react-web-tabs\";\n\nimport NewTimeline from \"./NewTimeline\";\n\nimport styles from \"./TimeLineBox.module.css\";\n\nclass TimeLineBox extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      dimensions: { height: 300, width: 600 },\n    };\n\n    this.tabs = {};\n    this.container = null;\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", () => {\n      this.updateSize();\n    });\n    this.updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", () => {\n      this.updateSize();\n    });\n  }\n\n  activate(tabId) {\n    Object.keys(this.tabs).forEach((key) => {\n      if (key !== tabId) {\n        let tab = this.tabs[key];\n        if (tab) {\n          tab.deactivate();\n        }\n      }\n    });\n\n    if (this.tabs[tabId]) {\n      this.tabs[tabId].activate();\n    }\n  }\n\n  updateSize() {\n    if (this.container) {\n      this.setState({\n        dimensions: {\n          width: this.container.offsetWidth,\n          height: this.container.offsetHeight,\n        },\n      });\n    }\n\n    Object.keys(this.tabs).forEach((key) => {\n      let tab = this.tabs[key];\n      if (tab) {\n        tab.updateSize(this.state.dimensions);\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div ref={(el) => (this.container = el)} className={styles.container}>\n        <Tabs\n          key=\"timeline-tabs\"\n          onChange={(tabId) => {\n            this.activate(tabId);\n            this.updateSize();\n          }}\n          className={styles.tabs}\n        >\n          <TabList className={styles.tabList}>\n            <Tab className={styles.tab} key=\"items\" tabFor=\"items\">\n              Timeline\n            </Tab>\n            {/* <Tab className={styles.tab} key=\"projects\" tabFor=\"projects\">\n              Projects\n            </Tab> */}\n            <Tab className={styles.tab} key=\"analysis\" tabFor=\"analysis\">\n              Analysis\n            </Tab>\n          </TabList>\n\n          <TabPanel key=\"items\" tabId=\"items\" className={styles.tabPanel}>\n            <NewTimeline\n              projects={this.props.projects}\n              onClick={this.props.shipSelect}\n              resetFilters={this.props.resetFilters}\n            />\n          </TabPanel>\n\n          {/* <TabPanel key=\"projects\" tabId=\"projects\" className={styles.tabPanel}>\n            <NewTimeline\n              projects={this.props.projects}\n              onClick={this.props.shipSelect}\n              resetFilters={this.props.resetFilters}\n            />\n          </TabPanel> */}\n\n          <TabPanel key=\"analysis\" tabId=\"analysis\" className={styles.tabPanel}>\n            <div className={styles.centerContainer}>\n              This will contain tools and graphs for temporal social network analysis\n            </div>\n          </TabPanel>\n        </Tabs>\n      </div>\n    );\n  }\n}\n\nTimeLineBox.propTypes = {\n  projects: PropTypes.object.isRequired,\n  shipSelect: PropTypes.func.isRequired,\n  resetFilters: PropTypes.func.isRequired,\n  //   emitClicked: PropTypes.func.isRequired,\n  //   emitSelected: PropTypes.func.isRequired,\n  //   emitWindowChanged: PropTypes.func.isRequired,\n  //   getItemTimeLine: PropTypes.func.isRequired,\n  //   getItemWindow: PropTypes.func.isRequired,\n  //   getMaxWindow: PropTypes.func.isRequired,\n  //   getProjectTimeLine: PropTypes.func.isRequired,\n  //   getProjectWindow: PropTypes.func.isRequired,\n  //   selected: PropTypes.func,\n};\n\nexport default TimeLineBox;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { Accordion, AccordionItem, AccordionTitle, AccordionPanel } from \"./Accordion\";\n\nimport { ResponsiveList, ResponsiveListItem } from \"./ResponsiveList\";\nimport CheckBox from \"./CheckBox\";\nimport DefaultButton from \"./DefaultButton\";\n\nimport styles from \"./FilterBox.module.css\";\n\nfunction null_function() {}\n\nfunction filterList(items, props) {\n  let social = props.social;\n\n  let emitSelected = props.emitSelected;\n\n  if (!emitSelected) {\n    emitSelected = null_function;\n  }\n\n  let emitToggleFilter = props.emitToggleFilter;\n\n  if (!emitToggleFilter) {\n    emitToggleFilter = null_function;\n  }\n\n  let output = items.values().map((item) => {\n    let is_filtered = social.isFiltered(item);\n\n    return (\n      <ResponsiveListItem key={item.getName()}>\n        <DefaultButton\n          style={{ position: \"relative\", maxWidth: \"80%\" }}\n          onClick={() => {\n            emitSelected(item);\n          }}\n        >\n          {item.getName()}\n        </DefaultButton>\n        &nbsp;\n        <CheckBox\n          checked={is_filtered}\n          onChange={() => {\n            emitToggleFilter(item);\n          }}\n        />\n      </ResponsiveListItem>\n    );\n  });\n\n  return <ResponsiveList>{output}</ResponsiveList>;\n}\n\nfilterList.propTypes = {\n  social: PropTypes.object.isRequired,\n  emitSelected: PropTypes.func,\n  emitToggleFilter: PropTypes.func,\n};\n\nfunction FilterBox(props) {\n  let social = props.social;\n\n  if (!social) {\n    return <div>No social to display!</div>;\n  }\n\n  let filter_text = social.getFilterText();\n\n  if (!filter_text) {\n    filter_text = \"No filters\";\n  }\n\n  let emitClearFilters = props.emitClearFilters;\n\n  if (!emitClearFilters) {\n    emitClearFilters = null_function;\n  }\n\n  let filter_info = (\n    <AccordionItem uuid=\"filterinfo\">\n      <AccordionTitle>Current Filter</AccordionTitle>\n      <AccordionPanel>\n        <div className={styles.filterContainer}>\n          <div className={styles.filterText}>{filter_text}</div>\n          <div>\n            <DefaultButton onClick={emitClearFilters}>Clear Filters</DefaultButton>\n          </div>\n        </div>\n      </AccordionPanel>\n    </AccordionItem>\n  );\n\n  let projects = filterList(social.getProjects(false), props);\n  let sources = filterList(social.getSources(false), props);\n  let positions = filterList(social.getPositions(false), props);\n  let affiliations = filterList(social.getAffiliations(false), props);\n  let people = filterList(social.getPeople(false), props);\n  let businesses = filterList(social.getBusinesses(false), props);\n\n  console.log(social.getPositions(false).values());\n\n  return (\n    <Accordion allowMultipleExpanded={false} allowZeroExpanded={true}>\n      {filter_info}\n\n      <AccordionItem uuid=\"projects\">\n        <AccordionTitle>Projects</AccordionTitle>\n        <AccordionPanel>{projects}</AccordionPanel>\n      </AccordionItem>\n\n      <AccordionItem uuid=\"sources\">\n        <AccordionTitle>Sources</AccordionTitle>\n        <AccordionPanel>{sources}</AccordionPanel>\n      </AccordionItem>\n\n      <AccordionItem uuid=\"people\">\n        <AccordionTitle>People</AccordionTitle>\n        <AccordionPanel>{people}</AccordionPanel>\n      </AccordionItem>\n\n      <AccordionItem uuid=\"businesses\">\n        <AccordionTitle>Businesses</AccordionTitle>\n        <AccordionPanel>{businesses}</AccordionPanel>\n      </AccordionItem>\n\n      <AccordionItem uuid=\"positions\">\n        <AccordionTitle>Positions</AccordionTitle>\n        <AccordionPanel>{positions}</AccordionPanel>\n      </AccordionItem>\n\n      <AccordionItem uuid=\"affiliations\">\n        <AccordionTitle>Affiliations</AccordionTitle>\n        <AccordionPanel>{affiliations}</AccordionPanel>\n      </AccordionItem>\n    </Accordion>\n  );\n}\n\nFilterBox.propTypes = {\n  social: PropTypes.object.isRequired,\n  emitSelected: PropTypes.func,\n  emitClearFilters: PropTypes.func,\n};\n\nexport default FilterBox;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { CSSTransition } from \"react-transition-group\";\n\nimport styles from \"./SlidingPanel.module.css\";\nimport SlideFromLeft from \"./transitions/SlideFromLeft.module.css\";\nimport SlideFromRight from \"./transitions/SlideFromRight.module.css\";\nimport SlideFromBottom from \"./transitions/SlideFromBottom.module.css\";\nimport SlideFromTop from \"./transitions/SlideFromTop.module.css\";\n\nclass SlidingPanel extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpen: false,\n      position: \"right\",\n      defaultSize: \"40%\",\n      minSize: \"300px\",\n      maxSize: null,\n    };\n  }\n\n  render() {\n    let container = styles.rightContainer;\n    let transition = SlideFromRight;\n\n    let width = this.props.width;\n    let height = this.props.height;\n\n    if (height && !width) {\n      width = \"100%\";\n    }\n\n    if (width && !height) {\n      console.log(\"Setting height 100%\");\n      height = \"100%\";\n    }\n\n    let horiz_size = { width: width };\n    let vert_size = { height: height };\n\n    let style = { width: width, height: height, minSize: this.state.minSize };\n\n    if (this.props.maxSize) {\n      horiz_size.maxWidth = this.props.maxSize;\n      vert_size.maxHeight = this.props.maxSize;\n    }\n\n    // let style = horiz_size;\n    // Get the passed in position\n    let position = this.props.position;\n\n    if (position === \"right\") {\n      container = styles.rightContainer;\n      transition = SlideFromRight;\n    } else if (position === \"bottom\") {\n      container = styles.bottomContainer;\n      transition = SlideFromBottom;\n    } else if (position === \"top\") {\n      container = styles.topContainer;\n      transition = SlideFromTop;\n    } else if (position === \"left\") {\n      container = styles.leftContainer;\n      transition = SlideFromLeft;\n    }\n\n    container = `${container} ${styles.container}`;\n\n    return (\n      <CSSTransition in={this.props.isOpen} timeout={200} classNames={transition} unmountOnExit>\n        <div className={container} style={style}>\n          {this.props.children}\n        </div>\n      </CSSTransition>\n    );\n  }\n}\n\nSlidingPanel.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.array, PropTypes.object]).isRequired,\n  isOpen: PropTypes.bool,\n  maxSize: PropTypes.string,\n  minSize: PropTypes.string,\n  position: PropTypes.string,\n  width: PropTypes.string,\n  height: PropTypes.string,\n};\n\nexport default SlidingPanel;\n","import React from \"react\";\nimport Spinner from \"react-spinkit\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./OverlayBox.module.css\";\n\nclass OverlayBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n    };\n  }\n\n  hideSpinner() {\n    this.setState({\n      loading: false,\n    });\n  }\n\n  render() {\n    let item = this.props.item;\n\n    let url = null;\n\n    if (item && item.getURL) {\n      url = item.getURL();\n    }\n\n    if (!url) {\n      return (\n        <div className={styles.container}>\n          <div className={styles.centerContainer}>\n            {item}\n            <div>\n              <button className={styles.button} onClick={this.props.emitClose}>\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.url}>{url}</div>\n        {this.state.loading ? (\n          <div className={styles.centerContainer}>\n            <div>Loading page...</div>\n            <div>\n              <Spinner name=\"ball-grid-pulse\" color=\"green\" fadeIn=\"none\" />\n            </div>\n          </div>\n        ) : null}\n        <iframe\n          src={url}\n          title={url}\n          width=\"100%\"\n          height=\"95%\"\n          onLoad={() => {\n            this.hideSpinner();\n          }}\n          frameBorder=\"0\"\n          marginHeight=\"0\"\n          marginWidth=\"0\"\n          sandbox=\"allow-scripts\"\n          position=\"absolute\"\n        />\n      </div>\n    );\n  }\n}\n\nOverlayBox.propTypes = {\n  item: PropTypes.elementType,\n  emitClose: PropTypes.func.isRequired,\n};\nexport default OverlayBox;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport Spinner from \"react-spinkit\";\n\nimport DefaultButton from \"./DefaultButton\";\n\nimport styles from \"./SearchBar.module.css\";\n\n// This class is heavily inspired by react-search-field\n// from https://github.com/nutboltu/react-search-field\n\nfunction _null_function() {}\n\nfunction SearchResults(props) {\n  let results = props.results;\n\n  if (!results) {\n    return null;\n  }\n\n  let items = [];\n\n  results.forEach((item, index) => {\n    items.push(<li key={index}>{item}</li>);\n  });\n\n  return <ul>{items}</ul>;\n}\n\nSearchResults.propTypes = {\n  results: PropTypes.any,\n};\n\nclass SearchBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: \"\",\n      suggestions: null,\n      searching: null,\n      results: null,\n    };\n  }\n\n  componentDidUpdate(nextProps) {\n    if (this.props.searchText !== nextProps.searchText) {\n      this.setState({\n        value: nextProps.searchText,\n      });\n    }\n  }\n\n  setResults(results) {\n    this.setState({ searching: null, suggestions: null, results: results });\n  }\n\n  setSuggestions(suggestions) {\n    this.setState({ searching: null, suggestions: suggestions, results: null });\n  }\n\n  startSuggestion(text) {\n    let social = this.props.social;\n    if (!social) {\n      return;\n    }\n\n    let items = null;\n\n    try {\n      items = social.find(text);\n    } catch (error) {\n      items = null;\n    }\n\n    let emitSelected = this.props.emitSelected;\n\n    if (!emitSelected) {\n      emitSelected = _null_function;\n    }\n\n    if (items) {\n      let results = items.map((item, index) => {\n        const name = item.getName();\n        return (\n          <DefaultButton\n            key={name.concat(\"_\", index)}\n            onClick={() => {\n              emitSelected(item);\n            }}\n            style={{ width: \"100%\" }}\n          >\n            {name}\n          </DefaultButton>\n        );\n      });\n\n      this.setSuggestions(results);\n    } else {\n      this.setSuggestions(null);\n    }\n  }\n\n  startSearch(text) {\n    let social = this.props.social;\n\n    if (!social) {\n      this.setResults([<div key=\"noresults\">No results!</div>]);\n      return;\n    }\n\n    let items = null;\n\n    try {\n      items = social.find(text);\n    } catch (error) {\n      console.error(error);\n      items = null;\n    }\n\n    let emitSelected = this.props.emitSelected;\n\n    if (!emitSelected) {\n      emitSelected = _null_function;\n    }\n\n    if (items) {\n      let results = items.map((item, index) => {\n        const name = item.getName();\n        return (\n          <DefaultButton\n            key={name.concat(\"_\", index)}\n            onClick={() => {\n              emitSelected(item);\n            }}\n            style={{ width: \"100%\" }}\n          >\n            {name}\n          </DefaultButton>\n        );\n      });\n\n      this.setResults(results);\n    } else {\n      this.setResults([<div key=\"rnoresults\">Really no results!</div>]);\n    }\n  }\n\n  searchFor(text) {\n    if (text && text.length > 0) {\n      this.setState({ searching: text, suggestions: null, results: null });\n\n      setTimeout(() => {\n        this.startSearch(text);\n      }, 10);\n    } else {\n      this.setState({ suggestions: null, searching: null, results: null });\n    }\n  }\n\n  autocomplete(text) {\n    if (text && text.length > 0) {\n      this.startSuggestion(text);\n    } else {\n      this.setState({ suggestions: null, searching: null, results: null });\n    }\n  }\n\n  isSearching() {\n    return this.state.searching !== null;\n  }\n\n  isSuggesting() {\n    return this.state.suggestions !== null;\n  }\n\n  hasResults() {\n    return this.state.results !== null;\n  }\n\n  stopSearch() {\n    this.setState({ searching: null, suggestions: null, results: null });\n  }\n\n  onChange(event) {\n    if (this.isSearching()) {\n      return;\n    }\n\n    this.setState({ value: event.target.value });\n    this.autocomplete(event.target.value);\n  }\n\n  onEnter(event) {\n    if (this.isSearching() || this.isEmpty()) {\n      return;\n    }\n\n    const enterKey = 13;\n    const isEnterPressed = event.which === enterKey || event.keyCode === enterKey;\n\n    if (isEnterPressed) {\n      this.searchFor(event.target.value);\n    }\n  }\n\n  onSearch() {\n    if (this.isSearching() || this.isEmpty()) {\n      return;\n    }\n\n    this.searchFor(this.state.value);\n  }\n\n  isEmpty() {\n    return !(this.state.value && this.state.value.length > 0);\n  }\n\n  isSearchingComponent() {\n    return (\n      <div className={styles.searchContainer}>\n        <div className={styles.resultContainer}>\n          <div className={styles.searchPending}>\n            <div>Searching for &quot;{this.state.searching}&quot;...</div>\n            <div style={{ display: \"inline-block\" }}>\n              <Spinner name=\"ball-grid-pulse\" color=\"green\" fadeIn=\"none\" />\n            </div>\n          </div>\n          <div\n            className={styles.closeResultButton}\n            onClick={() => {\n              this.stopSearch();\n            }}\n          >\n            X\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  isSuggestingComponent() {\n    return (\n      <div className={styles.searchContainer}>\n        <div className={styles.resultContainer}>\n          <div className={styles.searchResult}>\n            <SearchResults results={this.state.suggestions} />\n          </div>\n          <div\n            className={styles.closeResultButton}\n            onClick={() => {\n              this.setState({ suggestions: null });\n            }}\n          >\n            X\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  resultsComponent() {\n    return (\n      <div className={styles.searchContainer}>\n        <div className={styles.resultContainer}>\n          <div className={styles.searchResult}>\n            <SearchResults results={this.state.results} />\n          </div>\n          <div\n            className={styles.closeResultButton}\n            onClick={() => {\n              this.setState({ results: null });\n            }}\n          >\n            X\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    let button_style = styles.searchButton;\n\n    if (this.isSearching() || this.isEmpty()) {\n      button_style = styles.disabledButton;\n    }\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.searchContainer}>\n          <button className={styles.hamburgerButton} onClick={this.props.emitHamburgerClicked}>\n            \n          </button>\n          <input\n            className={styles.searchBox}\n            onChange={(event) => {\n              this.onChange(event);\n            }}\n            onKeyPress={(event) => {\n              this.onEnter(event);\n            }}\n            placeholder={this.props.placeholder}\n            type=\"text\"\n            value={this.state.value}\n          />\n          <div\n            className={button_style}\n            onClick={() => {\n              this.onSearch();\n            }}\n          >\n            <div className={styles.magnifier}></div>\n          </div>\n        </div>\n        {this.isSearching() ? this.isSearchingComponent() : null}\n        {this.isSuggesting() ? this.isSuggestingComponent() : null}\n        {this.hasResults() ? this.resultsComponent() : null}\n      </div>\n    );\n  }\n}\n\n// TODO - finish this\nSearchBar.propTypes = {\n  emitHamburgerClicked: PropTypes.func.isRequired,\n  emitSelected: PropTypes.func.isRequired,\n  // This is currently unused\n  placeholder: PropTypes.any,\n  searchText: PropTypes.string,\n  social: PropTypes.object.isRequired,\n};\n\nexport default SearchBar;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./BrunelMenu.module.css\";\n\nimport logo from \"../images/ssgb_logo.png\";\n\nclass BrunelMenu extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.viewAbout = this.viewAbout.bind(this);\n    this.viewSource = this.viewSource.bind(this);\n  }\n\n  viewAbout() {\n    let item = (\n      <div>\n        <div>\n          This is a demo of the application to view Brunel&apos;s temporal social network. This is an incomplete\n          application containing incomplete data and should not be relied on or viewed as being accurate.\n        </div>\n        <div>\n          If you want more information, then please visit the{\" \"}\n          <a href=\"https://github.com/chryswoods/brunel\">GitHub repository</a>\n        </div>\n      </div>\n    );\n\n    this.props.setOverlay(item);\n  }\n\n  viewSource() {\n    var win = window.open(\"https://github.com/gareth-j/brunel\", \"_blank\");\n    win.focus();\n  }\n\n  render() {\n    return (\n      <div className={styles.sidebar}>\n        <div className={styles.logo}>\n          <img src={logo} alt=\"SS Great Britain logo\"></img>\n        </div>\n        <div className={styles.verticalSpace}></div>\n        <button className={styles.button} onClick={this.viewAbout}>About</button>\n        <button className={styles.button} onClick={this.viewSource}>Source</button>\n        <button className={styles.button} onClick={this.props.clickReset}>Reset</button>\n      </div>\n    );\n  }\n}\n\nBrunelMenu.propTypes = {\n  clickReset: PropTypes.func.isRequired,\n  setOverlay: PropTypes.func.isRequired,\n};\n\nexport default BrunelMenu;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./ShipSelector.module.css\";\n\nclass ShipSelector extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const projects = this.props.projects;\n\n    // We want the graph to start with the GW selected\n    const ssGW = projects.getByName(\"SS Great Western\");\n    this.props.shipFilter(ssGW);\n\n    this.state = { lastShip: ssGW.getName() };\n  }\n\n  setFilter(item) {\n    const shipName = item.getName();\n\n    if (shipName === this.state.lastShip) {\n      this.props.resetFilters();\n      this.setState({ lastShip: \"\" });\n      return;\n    }\n\n    this.setState({ lastShip: shipName });\n    this.props.shipFilter(item);\n  }\n\n  render() {\n    let projects = this.props.projects;\n\n    let output = projects.values().map((item, index) => {\n      return (\n        <button href=\"#\" key={index} className={styles.button} onClick={() => this.setFilter(item)}>\n          {item.getName()}\n        </button>\n      );\n    });\n\n    return output;\n  }\n}\n\nShipSelector.propTypes = {\n  projects: PropTypes.object.isRequired,\n  resetFilters: PropTypes.func.isRequired,\n  shipFilter: PropTypes.func.isRequired,\n};\n\nexport default ShipSelector;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./ShipTitle.module.css\";\n\nfunction ShipTitle(props) {\n  if (props.name == null) {\n    return null;\n  } else {\n    return <button className={styles.shipTitle}>{props.name}</button>;\n  }\n}\n\nShipTitle.propTypes = {\n  shipTitle: PropTypes.string,\n  style: PropTypes.string,\n};\n\nexport default ShipTitle;\n","// package imports\nimport React from \"react\";\nimport Dry from \"json-dry\";\nimport ReactModal from \"react-modal\";\n\n// Brunel components\nimport AnalysisPanel from \"./components/AnalysisPanel\";\nimport AnalysisButton from \"./components/AnalysisButton\";\nimport SocialGraph from \"./components/SocialGraph\";\nimport InfoBox from \"./components/InfoBox\";\nimport TimeLineBox from \"./components/TimeLineBox\";\nimport FilterBox from \"./components/FilterBox\";\nimport SlidingPanel from \"./components/SlidingPanel\";\nimport OverlayBox from \"./components/OverlayBox\";\nimport SearchBar from \"./components/SearchBar\";\nimport BrunelMenu from \"./components/BrunelMenu\";\nimport DefaultButton from \"./components/DefaultButton\";\nimport ShipSelector from \"./components/ShipSelector\";\nimport ShipTitle from \"./components/ShipTitle\";\n\n// Brunel model\nimport Social from \"./model/Social\";\n\n// Data for import\nimport graph_data from \"./data_weights.json\";\n\n// Styling for the app\nimport styles from \"./SocialApp.module.css\";\nimport DateRange from \"./model/DateRange\";\n\nclass SocialApp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.toggleWobble = this.toggleWobble.bind(this);\n    this.resetFilters = this.resetFilters.bind(this);\n    this.setOverlay = this.setOverlay.bind(this);\n\n    // Load in the Dried graph data from JSON\n    let social = Dry.parse(graph_data);\n\n    if (!(social instanceof Social)) {\n      console.error(\"Could not parse!\");\n      social = new Social();\n    }\n\n    // Special cases for Brunel project...\n    social.setAnchor(\"Brunel\");\n    social.setMaxWindow(new DateRange({ start: \"1800-01-01\", end: \"1860-12-31\" }));\n\n    this.state = {\n      social: social,\n      highlighted_item: null,\n      selected_item: null,\n      overlayItem: null,\n      isInfoPanelOpen: false,\n      isTimeLinePanelOpen: true,\n      isFilterPanelOpen: false,\n      isHamburgerMenuOpen: false,\n      timeline: new TimeLineBox(),\n      isOverlayOpen: false,\n      isAnalysisOpen: false,\n      wobbleEnabled: true,\n      selectedShip: null,\n      selectedShipID: null,\n    };\n\n    // TODO - work out a cleaner way of doing this\n    // Is set in ShipSelector correctly\n    const ssGW = social.getProjects().getByName(\"SS Great Western\");\n    this.state.selectedShip = ssGW.getName();\n    this.state.selectedShipID = ssGW.getID();\n\n    this.socialGraph = null;\n  }\n\n  resetFilters() {\n    let social = this.state.social;\n    social.resetFilters();\n    this.setState({ social: social, selectedShip: null, selectedShipID: null });\n  }\n\n  closePanels() {\n    this.setState({\n      isInfoPanelOpen: false,\n      isTimeLinePanelOpen: false,\n      isHamburgerMenuOpen: false,\n      isFilterPanelOpen: false,\n      isAnalysisOpen: false,\n      highlighted_item: null,\n    });\n  }\n\n  closeOverlay() {\n    this.setState({\n      isOverlayOpen: false,\n      overlayItem: null,\n    });\n  }\n\n  showInfo(item) {\n    if (item._isAProjectObject) {\n      this.setState({\n        overlayItem: item,\n        isOverlayOpen: true,\n      });\n    } else {\n      this.setState({\n        selected_item: item,\n        isInfoPanelOpen: true,\n      });\n    }\n  }\n\n  slotClearFilters() {\n    this.resetFilters();\n  }\n\n  slotSetFilter(item) {\n    this.resetFilters();\n    this.slotToggleFilter(item);\n    this.setState({ selectedShip: item.getName(), selectedShipID: item.getID() });\n  }\n\n  slotSetFilterbyID(id, name) {\n    this.resetFilters();\n    this.slotToggleFilter(id);\n    this.setState({ selectedShip: name, selectedShipID: id });\n  }\n\n  slotToggleFilter(item) {\n    if (!item) {\n      return;\n    }\n\n    let social = this.state.social;\n    social.toggleFilter(item);\n\n    this.setState({ social: social });\n  }\n\n  slotHighlighted(id) {\n    if (!id) {\n      return;\n    }\n\n    if (id._isADateRangeObject) {\n      return;\n    }\n\n    this.setState({ highlighted_item: id });\n  }\n\n  slotSelected(id) {\n    if (!id) {\n      this.closePanels();\n      return;\n    }\n\n    if (id._isADateRangeObject) {\n      let social = this.state.social;\n      if (social.setWindow(id)) {\n        this.setState({ social: social });\n      }\n      return;\n    }\n\n    const social = this.state.social;\n    const item = social.get(id);\n    this.showInfo(item);\n  }\n\n  slotWindowChanged(window) {\n    let social = this.state.social;\n\n    if (social.setWindow(window)) {\n      this.setState({ social: social });\n    }\n  }\n\n  toggleInfoPanel() {\n    this.setState({ isInfoPanelOpen: !this.state.isInfoPanelOpen });\n  }\n\n  toggleTimeLinePanel() {\n    this.setState({\n      isFilterPanelOpen: false,\n      isTimeLinePanelOpen: !this.state.isTimeLinePanelOpen,\n    });\n  }\n\n  toggleFilterPanel() {\n    this.setState({\n      isTimeLinePanelOpen: false,\n      isFilterPanelOpen: !this.state.isFilterPanelOpen,\n    });\n  }\n\n  toggleAnalysisPanel() {\n    this.setState({ isAnalysisOpen: !this.state.isAnalysisOpen });\n  }\n\n  toggleWobble() {\n    this.setState({ wobbleEnabled: !this.state.wobbleEnabled });\n  }\n\n  setOverlay(item) {\n    this.setState({\n      overlayItem: item,\n      isOverlayOpen: true,\n    });\n  }\n\n  resetAll() {\n    console.log(\"Reset all\");\n    window.location.reload(true);\n  }\n\n  render() {\n    const selected = this.state.selected_item;\n    const highlighted = this.state.highlighted_item;\n    const overlayItem = this.state.overlayItem;\n    const social = this.state.social;\n\n    // TODO - check if this is the correct way\n    // Removed the movement for now\n    let graphContainerClass = styles.graphContainerMenuClosed;\n    //  this.state.isHamburgerMenuOpen\n    //   ? styles.graphContainerMenuOpen\n    //   : styles.graphContainerMenuClosed;\n\n    // let sidebarClass = this.state.isHamburgerMenuOpen ? styles.sidebarVis : stules\n\n    console.log(this.state.isHamburgerMenuOpen);\n\n    return (\n      <div>\n        <ReactModal\n          isOpen={this.state.isOverlayOpen}\n          onRequestClose={() => {\n            this.closeOverlay();\n          }}\n          contentLabel=\"Information overlay\"\n          className={styles.modal}\n          overlayClassName={{\n            base: styles.modalOverlay,\n            afterOpen: styles.modalOverlayAfterOpen,\n            beforeClose: styles.modalOverlayBeforeClose,\n          }}\n          closeTimeoutMS={200}\n          appElement={document.getElementById(\"root\")}\n        >\n          <div\n            className={styles.closeOverlayButton}\n            onClick={() => {\n              this.closeOverlay();\n            }}\n          >\n            X\n          </div>\n          <OverlayBox\n            item={overlayItem}\n            emitClose={() => {\n              this.closeOverlay();\n            }}\n          />\n        </ReactModal>\n\n        <SearchBar\n          social={social}\n          emitHamburgerClicked={() => {\n            this.setState({\n              isHamburgerMenuOpen: !this.state.isHamburgerMenuOpen,\n            });\n          }}\n          emitSelected={(item) => {\n            this.slotSelected(item);\n          }}\n          emitHighlighted={(item) => {\n            this.slotHighlighted(item);\n          }}\n          emitClicked={(item) => {\n            this.slotClicked(item);\n          }}\n        />\n\n        <SlidingPanel isOpen={this.state.isTimeLinePanelOpen} position=\"bottom\" height=\"15%\">\n          <span\n            className={styles.closePanelButton}\n            onClick={() => {\n              this.setState({ isTimeLinePanelOpen: false });\n            }}\n          >\n            X\n          </span>\n          <TimeLineBox\n            selected={selected}\n            projects={this.state.social.getProjects()}\n            shipSelect={(item) => {\n              this.slotSetFilterbyID(item);\n            }}\n            resetFilters={this.resetFilters}\n          />\n        </SlidingPanel>\n\n        {/* Info panel on the RHS */}\n        <SlidingPanel isOpen={this.state.isInfoPanelOpen} position=\"right\">\n          <span\n            className={styles.closePanelButton}\n            onClick={() => {\n              this.setState({ isInfoPanelOpen: false });\n            }}\n          >\n            X\n          </span>\n          <InfoBox\n            item={selected}\n            social={social}\n            emitSelected={(item) => {\n              this.slotSelected(item);\n            }}\n            emitHighlighted={(item) => {\n              this.slotHighlighted(item);\n            }}\n            emitToggleFilter={(item) => {\n              this.slotToggleFilter(item);\n            }}\n          />\n        </SlidingPanel>\n\n        {/* Filter on bottom of page */}\n        <SlidingPanel isOpen={this.state.isFilterPanelOpen} position=\"bottom\" height=\"20%\">\n          <span\n            className={styles.closePanelButton}\n            onClick={() => {\n              this.setState({ isFilterPanelOpen: false });\n            }}\n          >\n            X\n          </span>\n          <FilterBox\n            social={social}\n            emitToggleFilter={(item) => {\n              this.slotToggleFilter(item);\n            }}\n            emitSelected={(item) => {\n              this.slotSelected(item);\n            }}\n            emitHighlighted={(item) => {\n              this.slotHighlighted(item);\n            }}\n            emitClearFilters={() => {\n              this.slotClearFilters();\n            }}\n          />\n        </SlidingPanel>\n\n        {/* This creates the menu on the LHS opened by the hamburger */}\n        <SlidingPanel isOpen={this.state.isHamburgerMenuOpen} position=\"left\" width=\"10%\" height=\"100%\">\n          <BrunelMenu\n            setOverlay={this.setOverlay}\n            clickReset={() => {\n              this.resetAll();\n            }}\n            clickSource={() => {\n              this.viewSource();\n            }}\n            emitClose={() => {\n              this.setState({ isHamburgerMenuOpen: false });\n            }}\n          />\n        </SlidingPanel>\n\n        <div className={styles.shipNameContainer}>\n          <ShipTitle name={this.state.selectedShip} />\n        </div>\n\n        <div className={styles.bottomContainer}>\n          <ShipSelector\n            projects={this.state.social.getProjects()}\n            shipFilter={(item) => this.slotSetFilter(item)}\n            resetFilters={this.resetFilters}\n            selectedShip={this.state.selectedShip}\n          />\n        </div>\n\n        {/* The social graph itself */}\n        <div className={graphContainerClass}>\n          <SocialGraph\n            social={this.state.social}\n            selected={selected}\n            highlighted={highlighted}\n            emitClicked={(id) => this.slotSelected(id)}\n            wobble={this.state.wobbleEnabled}\n            selectedShipID={this.state.selectedShipID}\n          />\n        </div>\n\n        <div className={styles.rightSidePanel}>\n          <AnalysisButton togglePanel={() => this.toggleAnalysisPanel()} />\n        </div>\n\n        <SlidingPanel isOpen={this.state.isAnalysisOpen} position=\"right\" width=\"10%\">\n          <AnalysisPanel\n            toggleFilterPanel={() => this.toggleFilterPanel()}\n            toggleTimeLinePanel={() => this.toggleTimeLinePanel()}\n            toggleWobble={() => this.toggleWobble()}\n            togglePanel={() => this.toggleAnalysisPanel()}\n          />\n        </SlidingPanel>\n      </div>\n    );\n  }\n}\n\nexport default SocialApp;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ForceGraph_container__TQtWA\",\"graph\":\"ForceGraph_graph__wst6B\",\"node\":\"ForceGraph_node__27s5W\",\"highlight\":\"ForceGraph_highlight__DhZbw\",\"link\":\"ForceGraph_link__2qaVU\",\"link_weak\":\"ForceGraph_link_weak__286oz\",\"link_indirect\":\"ForceGraph_link_indirect__2uhap\",\"node_text\":\"ForceGraph_node_text__3ovHB\"};"],"sourceRoot":""}