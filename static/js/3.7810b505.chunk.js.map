{"version":3,"sources":["components/ForceGraph.module.css","components/Accordion.module.css","components/DefaultButton.module.css","components/CheckBox.module.css","components/ResponsiveList.module.css","components/GroupsList.module.css","components/ConnectionList.module.css","components/WeightsList.module.css","components/InfoBox.module.css","components/d3/ForceGraph.d3.js","components/ForceGraph.js","components/SocialGraph.js","components/Accordion.js","components/DefaultButton.js","components/CheckBox.js","components/ResponsiveList.js","components/GroupsList.js","components/ConnectionList.js","components/DateRangeButton.js","model/Errors.js","model/RoughDate.js","model/DateRange.js","components/SourceList.js","components/WeightsList.js","model/Person.js","model/People.js","model/Business.js","model/Businesses.js","model/Connection.js","model/Connections.js","model/Position.js","model/Positions.js","model/Affiliation.js","model/Affiliations.js","model/Source.js","model/Sources.js","model/Note.js","model/Notes.js","model/Project.js","model/Projects.js","model/Biographies.js","model/Social.js","components/InfoBox.js","components/TimeLineView.js","components/TimeLineBox.js","components/FilterBox.js","components/SlidingPanel.js","components/OverlayBox.js","components/SearchBar.js","components/BrunelMenu.js","SocialApp.js","components/TimeLineView.module.css","components/TimeLineBox.module.css","components/FilterBox.module.css","components/SlidingPanel.module.css","components/transitions/SlideFromLeft.module.css","components/transitions/SlideFromRight.module.css","components/transitions/SlideFromBottom.module.css","components/transitions/SlideFromTop.module.css","components/OverlayBox.module.css","components/SearchBar.module.css","components/BrunelMenu.module.css","SocialApp.module.css"],"names":["module","exports","_null_function","params","constrain","x","w","r","Math","max","min","drag","THIS","simulation","_simulation","d3","on","d","alphaTarget","restart","fx","fy","y","_is_running","state","width","h","height","fixed","handleMouseClick","svg","_mainGroup","node","this","raise","id","attr","items","selectAll","classed","styles","highlight","signalClicked","stopPropagation","handleMouseOver","each","i","target_id","target","source_id","source","signalMouseOver","handleMouseOut","signalMouseOut","_resolve","item","getID","ForceGraphD3","props","uid","uuidv4","social","selected","highlighted","colors","color","last_color","group_to_color","slice","length","_size_changed","_graph_changed","update","graph","getGraph","l","lodash","cloneDeep","edges","edge","n","nodes","old_nodes","old","_graph","o","random","size_changed","hasOwnProperty","updateGraph","group","data","select","join","enter","append","size","getGroupColor","call","text","node_text","label","link","index","dx","dy","dragLink","stop","force","strength","distanceMin","distanceMax","links","distance","value","iterations","radius","_link","_node","_label","console","log","className","remove","container","mainGroup","_updateSimulation","_updateLink","_updateNode","_updateNodeText","_is_drawn","drawFromScratch","update_simulation","ForceGraph","_updateSize","bind","window","addEventListener","removeEventListener","updateSize","draw","offsetWidth","offsetHeight","s","ref","el","style","React","Component","SocialGraph","getNetwork","emitClicked","BAccordion","accordion","preExpanded","allowMultipleExpanded","allowZeroExpanded","children","BAccordionItem","accordionItem","uuid","BAccordionTitle","accordionButton","BAccordionPanel","DefaultButton","href","button","onClick","CheckBox","checkBox","type","checked","onChange","checkMark","ResponsiveList","list","ResponsiveListItem","key","null_function","GroupsList","groups","title","emitSelected","emitToggleFilter","projects","Object","keys","forEach","_i","get","is_filtered","isFiltered","push","getName","event","project","projectHeader","projectBody","minWidth","ConnectionList","connections","listitems","map","name","date","DateRangeButton","_isARoughDateObject","_isADateRangeObject","isNull","toSimpleString","toDateRange","KeyError","args","Error","captureStackTrace","ValueError","MissingError","_toDate","val","def","_isAMomentObject","moment","isValid","_get_min","d1","d2","toDate","_get_max","RoughDate","start","end","raw","setState","toISOString","delta","add","isFuzzy","format","e","getMonth","getDate","getFullYear","getEarliest","getLatest","DateRange","isExact","both","m","toMoment","error","other","s1","s2","getStart","getEnd","getRaw","getLatestDate","getEarliestDate","getEarliestString","getLatestString","eq","lt","gt","unDry","Dry","registerClass","_clean","hasBounds","isInstant","getStartString","getEndString","getEarliestStart","merge","getLatestEnd","hasStart","hasEnd","my_start","other_start","my_end","other_end","contains","scale","getDelta","toString","tmp","dates","SourceList","sources","output","daterange","mergeAll","body","WeightsList","weights","weight","_filterWindow","values","ret","intersect","_filterProject","Person","titles","firstnames","surnames","suffixes","positions","affiliations","alive","gender","notes","orig_name","_getHook","_isAPersonObject","ids","seen","nsources","includes","nprojects","person","getAlive","hook","parts","part","getTitle","getFirstName","getSurname","getSuffix","scores","content","is_anchor","shape","sort","c","_generate_person_uid","substring","People","registry","_names","_isAPeopleObject","load","_updateHooks","names","canAdd","existing","getByName","clone","trim","toLowerCase","results","indexOf","funcs","people","timeline","getTimeLine","anchor","getNode","array","element","v","Business","_isABusinessObject","business","_generate_business_uid","Businesses","_isABusinessesObject","businesses","_mergeSources","Connection","n0","n1","shared","duration","correspondances","_isAConnectionObject","node0","getNode0","node1","getNode1","getDuration","getNode0Name","getNode1Name","getWeight","getColorFromType","getWeightFromType","_generate_connection_uid","Connections","_isAConnectionsObject","connection","nnodes","_add","getNode0ID","getNode1ID","areNodesVisible","toEdge","Position","_isAPositionObject","canonical","makeCanonical","_generate_position_uid","Positions","_isAPositionsObject","position","_isApositionObject","Affiliation","_isAAffiliationObject","_generate_affiliation_uid","Affiliations","_isAAffiliationsObject","affiliation","Source","description","_isASourceObject","ne","_generate_source_uid","Sources","_isASourcesObject","getDescription","Note","_isANoteObject","getText","_generate_note_uid","Notes","_isANotesObject","note","Project","url","_isAProjectObject","_generate_project_uid","Projects","_isAProjectsObject","Biographies","bios","_isABiographiesObject","biography","bio","_push","enabled","timestep","Social","filter","cache","projectTimeLine","itemTimeLine","node_filters","edge_filters","max_window","_rebuilding","_isASocialObject","getHook","biographies","getWindow","filterWindow","project_filter","filterProject","source_filter","filterSource","node_filter","getConnectionsTo","group_filter","inGroup","new_window","getStartDate","getEndDate","fitted","_fitWindow","setWindow","clearCache","filtered","getNodeFilters","getEdgeFilters","getConnections","f","_getType","result","getPeople","find","getBusinesses","getPositions","getAffiliations","getSources","search","getBiographies","getProjects","getNodes","concat","getEdges","added","getNotes","default_image","default_text","getBiography","pages","a","InfoBox","image","asources","getAffiliationSources","csources","getCorrespondanceSources","textAlign","getWeights","getType","extractData","tabs","panes","tabId","tabPanel","tab","tabFor","heroImage","alt","src","vertical","defaultTab","tablist","timeline_options","autoResize","horizontalScroll","showCurrentTime","showTooltips","verticalScroll","zoomable","order","b","DateInput","zoomButton","TimeLineView","dimensions","_is_activated","is_active","redraw","$el","isActive","byUser","_byUser","emitWindowChanged","old_window","animation","shiftEarlier","shiftLater","zoomIn","zoomOut","my_options","getMaxWindow","getItems","activated","rangechangedHandler","rangeChangedHandler","selectHandler","options","buttonGroup","scrollButton","scrollLeft","datePicker","openToDate","selectsStart","startDate","endDate","dateFormat","showMonthYearPicker","showYearDropdown","dropdownMode","customInput","setStartDate","selectsEnd","setEndDate","scrollRight","TimeLineBox","deactivate","activate","tabList","getProjectWindow","getProjectTimeLine","centerContainer","getItemWindow","getItemTimeLine","filterList","maxWidth","FilterBox","filter_text","getFilterText","emitClearFilters","filter_info","filterContainer","filterText","SlidingPanel","isOpen","minSize","maxSize","rightContainer","transition","SlideFromRight","horiz_size","vert_size","minHeight","maxHeight","bottomContainer","SlideFromBottom","topContainer","SlideFromTop","leftContainer","SlideFromLeft","CSSTransition","in","timeout","classNames","unmountOnExit","OverlayBox","loading","getURL","fadeIn","onLoad","hideSpinner","frameBorder","marginHeight","marginWidth","sandbox","emitClose","SearchResults","SearchBar","suggestions","searching","nextProps","searchText","setSuggestions","setResults","setTimeout","startSearch","startSuggestion","isSearching","autocomplete","isEmpty","which","keyCode","searchFor","button_style","searchButton","disabledButton","searchContainer","hamburgerButton","emitHamburgerClicked","searchBox","onKeyPress","onEnter","placeholder","onSearch","magnifier","resultContainer","closeResultButton","stopSearch","searchPending","display","isSuggesting","searchResult","hasResults","BrunelMenu","buttons","func","menuItem","menu","SocialApp","parse","graph_data","setAnchor","setMaxWindow","highlighted_item","selected_item","overlay_item","isInfoPanelOpen","isTimeLinePanelOpen","isFilterPanelOpen","isHamburgerMenuOpen","isOverlayOpen","socialGraph","resetFilters","toggleFilter","showInfo","closePanels","open","focus","location","reload","timeline_text","viewAbout","viewSource","resetAll","backgroundImage","onRequestClose","closeOverlay","contentLabel","modal","overlayClassName","base","modalOverlay","afterOpen","modalOverlayAfterOpen","beforeClose","modalOverlayBeforeClose","closeTimeoutMS","appElement","document","getElementById","closeOverlayButton","slotSelected","emitHighlighted","slotHighlighted","slotClicked","closePanelButton","slotWindowChanged","slotToggleFilter","slotClearFilters","graphContainer","toggleFilterPanel","toggleTimeLinePanel"],"mappings":"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","file":"static/js/3.7810b505.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ForceGraph_container__TQtWA\",\"graph\":\"ForceGraph_graph__wst6B\",\"node\":\"ForceGraph_node__27s5W\",\"highlight\":\"ForceGraph_highlight__DhZbw\",\"link\":\"ForceGraph_link__2qaVU\",\"node_text\":\"ForceGraph_node_text__3ovHB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"accordion\":\"Accordion_accordion__34t4_\",\"accordionItem\":\"Accordion_accordionItem__VO6pK\",\"accordionButton\":\"Accordion_accordionButton__hVXWw\",\"accordionPanel\":\"Accordion_accordionPanel__1rZAH\",\"fadein\":\"Accordion_fadein__2cKpJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"DefaultButton_button__1Uv_G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"checkBox\":\"CheckBox_checkBox__36R4T\",\"checkMark\":\"CheckBox_checkMark__2h9Jd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"ResponsiveList_list__1-ZoE\",\"item\":\"ResponsiveList_item__3jhI7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"project\":\"GroupsList_project__1pnkG\",\"projectHeader\":\"GroupsList_projectHeader__1YDl_\",\"projectBody\":\"GroupsList_projectBody__2Joe0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"connections\":\"ConnectionList_connections__2QbO3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"project\":\"WeightsList_project__3m0SJ\",\"projectHeader\":\"WeightsList_projectHeader__25IKl\",\"projectBody\":\"WeightsList_projectBody__3JVF3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"InfoBox_container__2EWGz\",\"heroImage\":\"InfoBox_heroImage__34BXw\",\"title\":\"InfoBox_title__2rO4Z\",\"button\":\"InfoBox_button__3w2z7\",\"tabs\":\"InfoBox_tabs__32XI5\",\"tablist\":\"InfoBox_tablist__3mBju\",\"tab\":\"InfoBox_tab__qp9XR\",\"tabPanel\":\"InfoBox_tabPanel__3FpOY\"};","\nimport * as d3 from 'd3';\n\nimport lodash from 'lodash';\n\nimport { v4 as uuidv4 } from 'uuid';\n\nimport styles from '../ForceGraph.module.css';\n\nfunction _null_function(params){};\n\nfunction constrain(x, w, r=20){\n  return Math.max(r, Math.min(w - r, x));\n}\n\nfunction dragLink(THIS){\n  let simulation = THIS._simulation;\n\n  function dragstarted(d) {\n    simulation.alphaTarget(0.3).restart();\n\n    //find the two nodes connected to this edge\n    let source = THIS._graph.nodes[d.source.index];\n    let target = THIS._graph.nodes[d.target.index];\n\n    //fix those nodes in place\n    source.fx = source.x;\n    source.fy = source.y;\n\n    target.fx = target.x;\n    target.fy = target.y;\n  }\n\n  function dragged(d) {\n    if (!THIS._is_running) simulation.restart();\n\n    //find the two nodes connected to this edge\n    let source = THIS._graph.nodes[d.source.index];\n    let target = THIS._graph.nodes[d.target.index];\n\n    //moves those nodes with the event - move the center point of the\n    //line connecting these two nodes...\n    let dx = 0.5 * (target.x - source.x);\n    let dy = 0.5 * (target.y - source.y);\n\n    source.fx = constrain(d3.event.x - dx, THIS.state.width, source.r);\n    source.fy = constrain(d3.event.y - dy, THIS.state.height, source.r);\n\n    target.fx = constrain(d3.event.x + dx, THIS.state.width, target.r);\n    target.fy = constrain(d3.event.y + dy, THIS.state.height, target.r);\n  }\n\n  function dragended(d) {\n    simulation.alphaTarget(0).restart();\n\n    //find the two nodes connected to this edge\n    let source = THIS._graph.nodes[d.source.index];\n    let target = THIS._graph.nodes[d.target.index];\n\n    if (!source.fixed){\n      source.fx = null;\n      source.fy = null;\n    }\n\n    if (!target.fixed){\n      target.fx = null;\n      target.fy = null;\n    }\n  }\n\n  return d3.drag()\n      .on(\"start\", dragstarted)\n      .on(\"drag\", dragged)\n      .on(\"end\", dragended);\n};\n\nfunction drag(THIS) {\n  let simulation = THIS._simulation;\n\n  function dragstarted(d) {\n    simulation.alphaTarget(0.3).restart();\n    d.fx = d.x;\n    d.fy = d.y;\n  }\n\n  function dragged(d) {\n    if (!THIS._is_running) simulation.restart();\n\n    let w = THIS.state.width;\n    let h = THIS.state.height;\n\n    d.fx = constrain(d3.event.x, w, d.r);\n    d.fy = constrain(d3.event.y, h, d.r);\n  }\n\n  function dragended(d) {\n    simulation.alphaTarget(0).restart();\n\n    if (!d.fixed){\n      d.fx = null;\n      d.fy = null;\n    }\n  }\n\n  return d3.drag()\n      .on(\"start\", dragstarted)\n      .on(\"drag\", dragged)\n      .on(\"end\", dragended);\n};\n\nfunction handleMouseClick(THIS){\n  function handle(){\n    let svg = THIS._mainGroup;\n    if (!svg){\n      return;\n    }\n\n    let node = d3.select(this);\n    node.raise();\n\n    let id = node.attr(\"id\");\n\n    if (!id){\n      return;\n    }\n\n    let items = svg.selectAll(`#${id}`);\n\n    items.classed(styles.highlight, true);\n\n    items = svg.selectAll(`[source_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    items = svg.selectAll(`[target_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    THIS.state.signalClicked(id);\n    d3.event.stopPropagation();\n  }\n\n  return handle;\n}\n\nfunction handleMouseOver(THIS) {\n  function handle(){\n    let svg = THIS._mainGroup;\n    if (!svg){\n      return;\n    }\n\n    let node = d3.select(this);\n    node.raise();\n\n    let id = node.attr(\"id\");\n\n    if (!id){\n      return;\n    }\n\n    //highlight the node\n    let items = svg.selectAll(`#${id}`);\n    items.classed(styles.highlight, true);\n\n    //highlight the connection lines with this node as a source\n    items = svg.selectAll(`[source_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    //highlight the nodes with this node as a target\n    items.each((d, i)=>{\n      let target_id = d.target.id;\n      svg.selectAll(`#${target_id}`).classed(styles.highlight, true);\n    });\n\n    //highlight the connection lines with this node as a target\n    items = svg.selectAll(`[target_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    //highlight the nodes with this node as a source\n    items.each((d, i)=>{\n      let source_id = d.source.id;\n      svg.selectAll(`#${source_id}`).classed(styles.highlight, true);\n    });\n\n    if (node.attr(\"source_id\")){\n      svg.selectAll(`#${node.attr(\"source_id\")}`)\n        .classed(styles.highlight, true);\n\n      svg.selectAll(`#${node.attr(\"target_id\")}`)\n        .classed(styles.highlight, true);\n    }\n\n    THIS.state.signalMouseOver(id);\n  }\n\n  return handle;\n}\n\nfunction handleMouseOut(THIS) {\n  function handle(){\n    let svg = THIS._mainGroup;\n    if (!svg){\n      return;\n    }\n\n    let node = d3.select(this);\n    let id = node.attr(\"id\");\n\n    let items = svg.selectAll(`#${id}`);\n\n    items.classed(styles.highlight, false);\n\n    //highlight the connection lines with this node as a source\n    items = svg.selectAll(`[source_id=${id}]`);\n    items.classed(styles.highlight, false);\n\n    //highlight the nodes with this node as a target\n    items.each((d, i)=>{\n      let target_id = d.target.id;\n      svg.selectAll(`#${target_id}`).classed(styles.highlight, false);\n    });\n\n    //highlight the connection lines with this node as a target\n    items = svg.selectAll(`[target_id=${id}]`);\n    items.classed(styles.highlight, false);\n\n    //highlight the nodes with this node as a source\n    items.each((d, i)=>{\n      let source_id = d.source.id;\n      svg.selectAll(`#${source_id}`).classed(styles.highlight, false);\n    });\n\n    if (node.attr(\"source_id\")){\n      svg.selectAll(`#${node.attr(\"source_id\")}`)\n        .classed(styles.highlight, false);\n\n      svg.selectAll(`#${node.attr(\"target_id\")}`)\n        .classed(styles.highlight, false);\n    }\n\n    THIS.state.signalMouseOut(id);\n  }\n\n  return handle;\n}\n\nfunction _resolve(item){\n  if (!item){\n    return null;\n  }\n  else if (item.getID){\n    return item.getID();\n  }\n  else{\n    return item;\n  }\n}\n\n/** The main class that renders the graph in the ForceGraph */\nclass ForceGraphD3 {\n  constructor(props){\n    // generate a UID for this graph so that we don't clash\n    // with any other graphs on the same page\n    let uid = uuidv4();\n\n    this.state = {width: null,\n                  height: null,\n                  social: null,\n                  selected: null,\n                  highlighted: null,\n                  signalClicked: _null_function,\n                  signalMouseOut: _null_function,\n                  signalMouseOver: _null_function,\n                  colors: {color: d3.scaleOrdinal(d3.schemeCategory10),\n                           last_color: -1,\n                           group_to_color: {}},\n                  uid: uid.slice(uid.length-8)\n                 };\n\n    this._size_changed = true;\n    this._graph_changed = true;\n    this._is_running = false;\n\n    this.update(props);\n  }\n\n  updateGraph(social){\n    let w = this.state.width;\n    let h = this.state.height;\n\n    this.state.social = social;\n\n    if (!w || !h){\n      return;\n    }\n\n    let graph = null;\n\n    if (social){\n      graph = social.getGraph();\n    }\n\n    //the social object will cache the 'getGraph' result, meaning\n    //that any change in this object signals that the graph needs\n    //to be redrawn\n    if (graph !== this.state.graph){\n      //save the cached graph\n      this.state.graph = graph;\n\n      //this view needs to clone its own copy of the graph, as\n      //D3 will update the graph object. We need to clone in case\n      //two ForceGraph.d3 views are viewing the same Social graph\n      graph = lodash.cloneDeep(this.state.graph);\n\n      // need to update IDs so that the edges refer to the index\n      // of the node in the nodes array - this could be optimised!\n      for (let l in graph.edges){\n        let edge = graph.edges[l];\n        for (let n in graph.nodes){\n          let node = graph.nodes[n];\n          if (edge.source === node.id){\n            edge.source = n;\n            edge.source_id = node.id;\n          }\n          else if (edge.target === node.id){\n            edge.target = n;\n            edge.target_id = node.id;\n          }\n        }\n      }\n\n      //index any old nodes\n      let old_nodes = [];\n      let old = {};\n\n      if (this._graph){\n        old_nodes = this._graph.nodes;\n\n        for (let n in old_nodes){\n          old[old_nodes[n].id] = n;\n        }\n      }\n\n      for (let n in graph.nodes){\n        let node = graph.nodes[n];\n\n        let i = old[node.id];\n\n        if (i){\n          let o = old_nodes[i];\n          node.x = o.x;\n          node.y = o.y;\n        }\n        else{\n          node.x = w * Math.random();\n          node.y = h * Math.random();\n        }\n\n        if (node.fixed){\n          if (i){\n            node.fx = node.x;\n            node.fy = node.y;\n          }\n          else{\n            node.fx = w / 2;\n            node.fy = h / 2;\n          }\n        }\n      }\n\n      this._graph = graph;\n      this._graph_changed = true;\n    }\n  }\n\n  update(props){\n    let size_changed = false;\n\n    if (props.hasOwnProperty(\"width\")){\n      if (this.state.width !== props.width){\n        this.state.width = props.width;\n        size_changed = true;\n      }\n    }\n\n    if (props.hasOwnProperty(\"height\")){\n      if (this.state.height !== props.height){\n        this.state.height = props.height;\n        size_changed = true;\n      }\n    }\n\n    if (size_changed){\n      this._size_changed = true;\n    }\n\n    if (props.hasOwnProperty(\"signalClicked\")){\n      if (this.state.signalClicked){\n        this.state.signalClicked = props.signalClicked;\n      }\n      else{\n        this.state.signalClicked = _null_function;\n      }\n    }\n\n    if (props.hasOwnProperty(\"signalMouseOut\")){\n      if (this.state.signalMouseOut){\n        this.state.signalMouseOut = props.signalMouseOut;\n      }\n      else{\n        this.state.signalMouseOut = _null_function;\n      }\n    }\n\n    if (props.hasOwnProperty(\"signalMouseOver\")){\n      if (this.state.signalMouseOver){\n        this.state.signalMouseOver = props.signalMouseOver;\n      }\n      else{\n        this.state.signalMouseOver = _null_function;\n      }\n    }\n\n    if (props.hasOwnProperty(\"social\")){\n      this.updateGraph(props.social);\n    }\n\n    if (props.hasOwnProperty(\"selected\")){\n      this.state.selected = _resolve(props.selected);\n    }\n\n    if (props.hasOwnProperty(\"highlighted\")){\n      this.state.highlighted = _resolve(props.highlighted);\n    }\n  }\n\n  className(){\n    return `ForceGraphD3-${this.state.uid}`;\n  }\n\n  getGroupColor(group){\n    let color = this.state.colors.group_to_color[group];\n\n    if (!color){\n      this.state.colors.last_color += 1;\n      color = this.state.colors.last_color;\n      this.state.colors.group_to_color[group] = color;\n    }\n\n    return this.state.colors.color(color);\n  }\n\n  _updateNode(data){\n    let node = this._mainGroup.select(\".node-group\").selectAll(\".node\");\n\n    node = node.data(data, d=>d.id)\n               .join(\n                 enter => enter.append(\"circle\")\n                               .attr(\"class\", `node ${styles.node}`),\n                 update => update.attr(\"class\",\n                                       `node ${styles.node}`)\n               )\n               .attr(\"r\", d=>{return d.size})\n               .attr(\"id\", d=>{return d.id})\n               .attr(\"fill\", d=>{return this.getGroupColor(d.group)})\n               .on(\"click\", handleMouseClick(this))\n               .on(\"mouseover\", handleMouseOver(this))\n               .on(\"mouseout\", handleMouseOut(this))\n               .call(drag(this));\n\n    return node;\n  }\n\n  _updateNodeText(data){\n    let text = this._mainGroup.select(\".node_text-group\")\n                              .selectAll(\".node_text\");\n\n    text = text.data(data, d=>d.id)\n               .join(\n                 enter => enter.append(\"text\")\n                               .attr(\"class\", `node_text ${styles.node_text}`),\n                 update => update.attr(\"class\",\n                                       `node_text ${styles.node_text}`)\n               )\n               .text(d => d.label)\n               .attr(\"id\", d=>{return d.id})\n               .on(\"click\", handleMouseClick(this))\n               .on(\"mouseover\", handleMouseOver(this))\n               .on(\"mouseout\", handleMouseOut(this))\n               .call(drag(this));\n\n    return text;\n  }\n\n  _updateLink(data){\n    let link = this._mainGroup.select(\".link-group\").selectAll(\".link\");\n\n    link = link.data(data, d=>d.id)\n               .join(\n                 enter => enter.append(\"line\")\n                               .attr(\"class\", `link ${styles.link}`),\n                 update => update.attr(\"class\",\n                                       `link ${styles.link}`)\n               )\n               .attr(\"class\", `link ${styles.link}`)\n               .attr(\"id\", d=>{return d.id})\n               .attr(\"source_id\", d=>{return d.source_id})\n               .attr(\"target_id\", d=>{return d.target_id})\n               .on(\"click\", handleMouseClick(this))\n               .on(\"mouseover\", handleMouseOver(this))\n               .on(\"mouseout\", handleMouseOut(this))\n               .call(dragLink(this));\n\n    return link;\n  }\n\n  _updateSimulation(){\n    if (this._simulation){\n      this._simulation.stop();\n      this._simulation = null;\n      this._is_running = false;\n    }\n\n    let w = this.state.width;\n    let h = this.state.height;\n\n    let THIS = this;\n\n    function ended(){\n      THIS._is_running = false;\n    }\n\n    function ticked(){\n      THIS._link\n        .attr(\"x1\", d => d.source.x)\n        .attr(\"y1\", d => d.source.y)\n        .attr(\"x2\", d => d.target.x)\n        .attr(\"y2\", d => d.target.y);\n\n      THIS._node\n        .attr(\"cx\", d => { return d.x = constrain(d.x, w, d.r) })\n        .attr(\"cy\", d => { return d.y = constrain(d.y, h, d.r) });\n\n      THIS._label\n        .attr(\"x\", d => d.x)\n        .attr(\"y\", d => d.y);\n    }\n\n    let simulation = d3.forceSimulation(this._graph.nodes)\n      .force('charge', d3.forceManyBody().strength(-150)\n                                         .distanceMin(1)\n                                         .distanceMax(100))\n      .force('link', d3.forceLink().links(this._graph.edges)\n                                   .strength(0.5)\n                                   .distance((d)=>{return 25 * (1 + d.value)})\n                                   .iterations(2))\n      .force('collision', d3.forceCollide()\n                            .radius((d)=>{return (1 + d.size)})\n                            .strength(1.0)\n                            .iterations(5))\n      .on('tick', ticked)\n      .on('end', ended);\n\n    this._is_running = true;\n\n    // save the simulation so that we can update it later...\n    this._simulation = simulation;\n  }\n\n  drawFromScratch(){\n    console.log(\"DRAW FROM SCRATCH\");\n    let graph = this._graph;\n\n    if (!graph){\n      if (this.state.social){\n        this.updateGraph(this.state.social);\n      }\n\n      graph = this._graph;\n      if (!graph){\n        console.log(\"Nothing to draw...\");\n        return;\n      }\n    }\n\n    d3.select(`.${this.className()} > *`).remove();\n\n    let container = d3.select(`.${this.className()}`);\n\n    if (!container){\n      console.log(`Cannot find container element class ${this.className()}`);\n      return;\n    }\n\n    const width = this.state.width;\n    const height = this.state.height;\n\n    console.log(`REDRAW ${width}x${height}`);\n\n    if (!width || !height){\n      console.log(`Invalid width or height? ${width} x ${height}`);\n      return;\n    }\n\n    let svg = container.append('svg')\n      .attr('height', height)\n      .attr('width', width)\n      .attr('id', 'svg-viz')\n      .on(\"click\", ()=>{this.state.signalClicked(null)});\n\n    let mainGroup = svg;\n    this._mainGroup = mainGroup;\n\n    this._updateSimulation();\n\n    mainGroup.append(\"g\").attr(\"class\", \"link-group\");\n    mainGroup.append(\"g\").attr(\"class\", \"node-group\");\n    mainGroup.append(\"g\").attr(\"class\", \"node_text-group\");\n\n    this._link = this._updateLink(graph.edges);\n    this._node = this._updateNode(graph.nodes);\n    this._label = this._updateNodeText(graph.nodes);\n\n    this._is_drawn = true;\n  }\n\n  draw(){\n    if (!this._is_drawn){\n      this.drawFromScratch();\n      this._size_changed = false;\n      this._graph_changed = false;\n      return;\n    }\n\n    let update_simulation = false;\n\n    if (this._size_changed){\n      let container = d3.select(`.${this.className()}`);\n      container.selectAll(\"svg\")\n               .attr(\"width\", this.state.width)\n               .attr(\"height\", this.state.height);\n      this._size_changed = false;\n      update_simulation = true;\n    }\n\n    if (this._graph_changed){\n      this._node = this._updateNode(this._graph.nodes);\n      this._label = this._updateNodeText(this._graph.nodes);\n      this._link = this._updateLink(this._graph.edges);\n      this._graph_changed = false;\n      update_simulation = true;\n    }\n\n    if (update_simulation){\n      this._updateSimulation();\n    }\n  }\n};\n\nexport default ForceGraphD3;\n","\nimport React from 'react';\n\nimport ForceGraphD3 from './d3/ForceGraph.d3.js';\n\nimport styles from './ForceGraph.module.css';\n\nclass ForceGraph extends React.Component {\n  constructor(props){\n    super(props);\n\n    this._graph = new ForceGraphD3(props);\n    this._updateSize = this._updateSize.bind(this);\n  }\n\n  componentDidMount(){\n    window.addEventListener('resize', this._updateSize);\n    this._updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.updateSize);\n  }\n\n  componentDidUpdate(){\n    this._graph.update(this.props);\n    this._graph.draw();\n  }\n\n  _updateSize(){\n    if (this.container && this._graph){\n      this._graph.update({width: this.container.offsetWidth,\n                          height: this.container.offsetHeight});\n      this._graph.draw();\n    }\n  }\n\n  render(){\n    let s = `${styles.graph} ${this._graph.className()}`;\n\n    return <div ref={el => (this.container = el)}\n                style={{width:\"100%\", height:\"100%\"}}>\n             <div className={s} />\n           </div>;\n  }\n}\n\nexport default ForceGraph;\n","import React from \"react\";\n\nimport ForceGraph from './ForceGraph';\n\nclass SocialGraph extends React.Component {\n  getGraph(){\n    const social = this.props.social;\n\n    if (social){\n      return social.getGraph();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getNetwork(){\n    const social = this.props.social;\n\n    if (social){\n      return social.getNetwork();\n    }\n    else{\n      return null;\n    }\n  }\n\n  render(){\n    if (this.props.social){\n      return (<div style={{width:\"100%\", height:\"100%\"}}>\n                <ForceGraph\n                     social={this.props.social}\n                     signalClicked={this.props.emitClicked}\n                     highlighted={this.props.highlighted}\n                     selected={this.props.selected} />\n              </div>\n             );\n    }\n    else{\n      return (<div>\n                No data to display!!!\n              </div>);\n    }\n  }\n};\n\nexport default SocialGraph;\n","\nimport React from 'react';\n\nimport {\n  Accordion,\n  AccordionItem,\n  AccordionItemHeading,\n  AccordionItemButton,\n  AccordionItemPanel,\n} from 'react-accessible-accordion';\n\nimport styles from './Accordion.module.css';\n\nfunction BAccordion(props){\n  return <Accordion className={styles.accordion}\n                    preExpanded={props.preExpanded}\n                    allowMultipleExpanded={props.allowMultipleExpanded}\n                    allowZeroExpanded={props.allowZeroExpanded}>\n           {props.children}\n         </Accordion>;\n}\n\nfunction BAccordionItem(props){\n  return <AccordionItem className={styles.accordionItem}\n                        style={props.style}\n                        uuid={props.uuid}>\n           {props.children}\n         </AccordionItem>;\n}\n\nfunction BAccordionTitle(props){\n  return <AccordionItemHeading style={props.style}>\n           <AccordionItemButton className={styles.accordionButton}>\n             {props.children}\n           </AccordionItemButton>\n         </AccordionItemHeading>;\n}\n\nfunction BAccordionPanel(props){\n  return <AccordionItemPanel style={props.style}>\n           {props.children}\n         </AccordionItemPanel>;\n}\n\nexport {BAccordion as Accordion,\n        BAccordionItem as AccordionItem,\n        BAccordionTitle as AccordionTitle,\n        BAccordionPanel as AccordionPanel,\n        BAccordion as default};\n","\nimport React from 'react';\n\nimport styles from './DefaultButton.module.css';\n\nfunction DefaultButton(props){\n  return <button href=\"#\" className={styles.button}\n                 onClick={props.onClick}\n                 style={props.style}>\n          {props.children}\n         </button>;\n}\n\nexport default DefaultButton;\n","\nimport React from 'react';\n\nimport styles from './CheckBox.module.css';\n\nfunction CheckBox(props){\n  return <label className={styles.checkBox} style={props.style}>\n           <input type=\"checkbox\"\n             checked={props.checked}\n             onChange={props.onChange}/>\n           <span className={styles.checkMark}/>\n         </label>;\n}\n\nexport default CheckBox;\n","\nimport React from 'react';\n\nimport styles from './ResponsiveList.module.css';\n\nfunction ResponsiveList(props){\n  return <div className={styles.list}>\n           {props.children}\n         </div>;\n}\n\nfunction ResponsiveListItem(props){\n  return <div className={styles.item} key={props.key}>\n           {props.children}\n         </div>;\n}\n\nexport {ResponsiveListItem,\n        ResponsiveList,\n        ResponsiveList as default};\n","\nimport React from 'react';\n\nimport DefaultButton from './DefaultButton';\nimport CheckBox from './CheckBox';\nimport {ResponsiveList, ResponsiveListItem} from './ResponsiveList';\n\nimport styles from './GroupsList.module.css';\n\nfunction null_function(item){}\n\nfunction GroupsList({groups, title=null, emitSelected=null_function,\n                     emitToggleFilter=null_function, social=null}) {\n\n  if (!groups) {\n    return null;\n  }\n\n  let projects = [];\n\n  Object.keys(groups).forEach((key, _i)=>{\n    let items = [];\n\n    for (let index in groups[key]){\n      let group = social.get(groups[key][index]);\n      let is_filtered = social.isFiltered(group);\n\n      items.push(<ResponsiveListItem key={group.getName()}>\n                  <DefaultButton onClick={()=>{emitSelected(group);}}\n                                 style={{width:\"70%\"}}>\n                    {group.getName()}\n                  </DefaultButton>\n                  <CheckBox onChange={(event)=>{emitToggleFilter(group);}}\n                            style={{width:\"20%\"}}\n                            checked={is_filtered}/>\n                 </ResponsiveListItem>);\n    }\n\n    let project = social.get(key);\n    let is_filtered = social.isFiltered(project);\n\n    projects.push(\n      <div className={styles.project} key={project.getName()}>\n        <div className={styles.projectHeader}>\n          <DefaultButton style={{width:\"75%\"}}\n                         onClick={()=>{emitSelected(project);}}>\n            {project.getName()}\n          </DefaultButton>\n          <CheckBox onChange={(event)=>{emitToggleFilter(project);}}\n                    style={{width:\"20%\"}}\n                    checked={is_filtered}/>\n        </div>\n        <div className={styles.projectBody}>\n          <ResponsiveList style={{minWidth:\"100%\"}}>\n            {items}\n          </ResponsiveList>\n        </div>\n      </div>\n    );\n  });\n\n  if (title){\n    return (<div>\n              <div className={styles.title}>{title}</div>\n              {projects}\n            </div>);\n  }\n  else {\n    return projects;\n  }\n}\n\nexport default GroupsList;\n","\nimport React from 'react';\n\nimport DefaultButton from './DefaultButton';\nimport CheckBox from './CheckBox';\n\nimport {ResponsiveList, ResponsiveListItem} from './ResponsiveList';\n\nimport styles from './ConnectionList.module.css';\n\nfunction null_function(item){}\n\nfunction ConnectionList({connections, title, emitSelected=null_function,\n                         emitToggleFilter=null_function,\n                         social=null}) {\n  if (!connections || connections.length === 0) {\n    return null;\n  }\n\n  const listitems = connections.map((item) => {\n    let i = item;\n    let name = item.getName();\n\n    let is_filtered = false;\n\n    if (social){\n      is_filtered = social.isFiltered(item);\n    }\n\n    return (\n      <ResponsiveListItem key={name}>\n        <DefaultButton onClick={()=>{emitSelected(i);}}\n                       style={{width:\"70%\"}}>\n          {name}\n        </DefaultButton>\n        <CheckBox onChange={(event)=>{emitToggleFilter(i);}}\n                  checked={is_filtered}\n                  style={{width:\"20%\"}}/>\n      </ResponsiveListItem>);\n  });\n\n  if (title){\n    return (<div className={styles.connections}>\n              <div className={styles.title}>{title}</div>\n              <ResponsiveList>{listitems}</ResponsiveList>\n            </div>);\n  }\n  else{\n    return (<div className={styles.connections}>\n              <ResponsiveList>{listitems}</ResponsiveList>\n            </div>);\n  }\n}\n\nexport default ConnectionList;\n","\nimport React from 'react';\n\nimport DefaultButton from './DefaultButton';\n\nfunction _null_function(date){};\n\nfunction DateRangeButton(props){\n  let d = props.value;\n\n  if (!d){\n    return null;\n  }\n\n  if (!(d._isARoughDateObject || d._isADateRangeObject)){\n    return null;\n  }\n\n  if (d.isNull()){\n    return null;\n  }\n\n  let emitSelected = props.emitSelected;\n\n  if (!emitSelected){\n    emitSelected = _null_function;\n  }\n\n  let s = d.toSimpleString();\n\n  if (d._isARoughDateObject){\n    d = d.toDateRange();\n  }\n\n  return <DefaultButton onClick={()=>{emitSelected(d)}} style={props.style}>\n           {s}\n         </DefaultButton>;\n}\n\nexport default DateRangeButton;\n","\nclass KeyError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, KeyError)\n    }\n}\n\nclass ValueError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, ValueError)\n    }\n}\n\nclass DuplicateError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, DuplicateError)\n    }\n}\n\nclass MissingError extends Error {\n    constructor(...args) {\n        super(...args)\n        Error.captureStackTrace(this, MissingError)\n    }\n}\n\nexport {KeyError, ValueError, DuplicateError, MissingError};\n","\nimport Dry from 'json-dry';\nimport moment from 'moment';\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction _toDate(val, def=null){\n  if (val){\n    if (val._isAMomentObject){\n      return val;\n    }\n\n    /*if (val.toISOString){\n      val = val.toISOString();\n    }*/\n\n    let date = moment(val);\n\n    if (!date.isValid()){\n      console.log(`Invalid Date ${val}`);\n      throw new ValueError(`Invalid Date ${val}`);\n    }\n\n    return date;\n  }\n  else {\n    if (!def){\n      return null;\n    }\n    else{\n      return _toDate(def);\n    }\n  }\n}\n\n// NOTE FOR FUTURE - moment(x) < moment(y) === true\n//            even though moment(x).toDate() < moment(y).toDate() === false\n//   MOMENT COMPARISONS ARE BROKEN!\n\nfunction _get_min(d1, d2){\n  if (d1){\n    if (d2){\n      if (d1.toDate() < d2.toDate()){\n        return d1;\n      }\n      else{\n        return d2;\n      }\n    }\n    else{\n      return d1;\n    }\n  }\n  else{\n    return d2;\n  }\n}\n\nfunction _get_max(d1, d2){\n  if (d1){\n    if (d2){\n      if (d1.toDate() > d2.toDate()){\n        return d1;\n      }\n      else{\n        return d2;\n      }\n    }\n    else{\n      return d1;\n    }\n  }\n  else{\n    return d2;\n  }\n}\n\nfunction _merge_raw(s1, s2){\n  if (!s1){\n    return s2;\n  }\n  else if (!s2){\n    return s1;\n  }\n\n  return `${s1} + ${s2}`;\n}\n\nclass RoughDate{\n  constructor(state){\n    this.state = {\n      start: null,\n      end: null,\n      raw: null,\n    };\n\n    this.setState(state);\n\n    this._isARoughDateObject = true;\n  }\n\n  setState(state){\n    if (!state || state === \"null\" || state === null){\n      this.state = {start:null};\n      return;\n    }\n    else if (state._isARoughDateObject){\n      this.state = {...state.state};\n      return;\n    }\n    else if (state._isADateRangeObject){\n      this.state = state.toDate();\n      return;\n    }\n    else if (state._isAMomentObject){\n      this.state = {start: _toDate(state)};\n      return;\n    }\n    else if (state.toISOString){\n      this.state = {start:_toDate(state)};\n      return;\n    }\n    else if (state.hasOwnProperty(\"value\")){\n      this.state = {start:state.value};\n      return;\n    }\n    else if (typeof(state) === \"string\"){\n      this.state = {start:_toDate(state), raw:state};\n      return;\n    }\n\n    let start = _toDate(state.start);\n    let end = _toDate(state.end);\n\n    if (!start){\n      this.state = {start: null};\n      return;\n    }\n\n    this.state.start = start;\n    this.state.end = end;\n    this.state.raw = state.raw;\n\n    if (this.isNull()){\n      console.log(\"NULL RoughDate?\");\n      console.log(state);\n    }\n  }\n\n  static clone(item){\n    let d = new RoughDate();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static max(d1, d2){\n    return new RoughDate(_get_max(d1.getLatest(), d2.getLatest()));\n  }\n\n  static min(d1, d2){\n    return new RoughDate(_get_min(d1.getEarliest(), d2.getEarliest()));\n  }\n\n  static delta(d1, d2){\n    return d1.getLatestDate() - d2.getEarliestDate();\n  }\n\n  static getDelta(d1, d2){\n    return RoughDate.delta(d1, d2);\n  }\n\n  static eq(item, other){\n    if (item._isARoughDateObject && other._isARoughDateObject){\n      return item.getEarliestString() === other.getEarliestString() &&\n             item.getLatestString() === other.getLatestString();\n    }\n    else{\n      return false;\n    }\n  }\n\n  static lt(d1, d2){\n    if (d1.isNull() || d2.isNull()){\n      return false;\n    }\n    else{\n      return d1.getEarliestDate() < d2.getEarliestDate();\n    }\n  }\n\n  static gt(d1, d2){\n    if (d1.isNull() || d2.isNull()){\n      return false;\n    }\n    else {\n      return d1.getEarliestDate() > d2.getEarliestDate();\n    }\n  }\n\n  static le(d1, d2){\n    return RoughDate.eq(d1, d2) || RoughDate.lt(d1, d2);\n  }\n\n  static ge(d1, d2){\n    return RoughDate.eq(d1, d2) || RoughDate.gt(d1, d2);\n  }\n\n  static ne(d1, d2){\n    return !(RoughDate.eq(d1, d2));\n  }\n\n  add(delta){\n    if (this.state.start){\n      this.state.start.add(delta);\n    }\n\n    if (this.state.end){\n      this.state.end.add(delta);\n    }\n\n    this.state.raw = null;\n  }\n\n  sub(delta){\n    this.add(-delta);\n  }\n\n  isNull(){\n    if (this.state.start){\n      return false;\n    }\n    else{\n      return true;\n    }\n  }\n\n  isFuzzy(){\n    if (this.state.end){\n      return true;\n    }\n    else{\n      return false;\n    }\n  }\n\n  isExact(){\n    return !(this.isNull() || this.isFuzzy());\n  }\n\n  toString(){\n    if (this.isNull()){\n      return \"Date:unknown\";\n    }\n    else if (this.isFuzzy()){\n      return `~${this.state.start.format(\"LL\")}-${this.state.end.format(\"LL\")}`;\n    }\n    else{\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  toSimpleString(){\n    if (this.isNull()){\n      return \"unknown\";\n    }\n    else if (this.isFuzzy()){\n      let s = this.state.start.toDate();\n      let e = this.state.end.toDate();\n\n      if (s.getMonth() === 0 && e.getMonth() === 11 &&\n          s.getDate() === 1 && e.getDate() === 31){\n        //the dates span full years\n        if (s.getFullYear() === e.getFullYear()){\n          return s.getFullYear();\n        }\n        else{\n          return `${s.getFullYear()}-${e.getFullYear()}`;\n        }\n      }\n      else{\n        return `${s.getDate()}/${s.getMonth()+1}/${s.getFullYear()}-${e.getDate()}/${e.getMonth()+1}/${e.getFullYear()}`;\n      }\n    }\n    else{\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  getEarliest(){\n    let state = {\"start\": this.state.start};\n    let r = new RoughDate();\n    r.state = state;\n    return r;\n  }\n\n  getLatest(){\n    if (this.state.end){\n      let state = {\"start\": this.state.end};\n      let r = new RoughDate();\n      r.state = state;\n      return r;\n    }\n    else{\n      return this.getEarliest();\n    }\n  }\n\n  getEarliestDate(){\n    let d = this.getEarliest();\n\n    if (d){\n      return d.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getLatestDate(){\n    let d = this.getLatest();\n\n    if (d){\n      return d.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getEarliestString(){\n    let d = this.getEarliest();\n\n    if (d){\n      return d.toDate().toISOString();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getLatestString(){\n    let d = this.getLatest();\n\n    if (d){\n      return d.toDate().toISOString();\n    }\n    else{\n      return null;\n    }\n  }\n\n  toRange(){\n    if (this.isNull()){\n      return new DateRange();\n    }\n    else if (this.isExact()){\n      return new DateRange({both:this.state.start});\n    }\n    else{\n      return new DateRange({start:this.state.start, end:this.state.end});\n    }\n  }\n\n  toDateRange(){\n    if (this.isNull()){\n      return new DateRange();\n    }\n    else if (this.isFuzzy()){\n      return new DateRange({start:this.getEarliest(), end:this.getLatest()});\n    }\n    else{\n      return new DateRange({both:this.getEarliest()});\n    }\n  }\n\n  toDate(){\n    let m = this.toMoment();\n\n    if (m){\n      try{\n        return m.toDate();\n      }\n      catch(error){\n        console.log(`STRANGE ERROR ${error}`);\n        console.log(`m = ${m}`);\n        console.log(m);\n        return null;\n      }\n    }\n    else{\n      return null;\n    }\n  }\n\n  toMoment(){\n    if (this.isNull()){\n      return null;\n    }\n    else if (this.isExact()){\n      return this.state.start;\n    }\n    else{\n      throw ValueError(\n        `Cannot extract a single date from an inexact date ${this}`);\n    }\n  }\n\n  getRaw(){\n    return this.state.raw;\n  }\n\n  getStart(){\n    return this.state.start;\n  }\n\n  getEnd(){\n    if (this.state.end){\n      return this.state.end;\n    }\n    else {\n      return this.state.start;\n    }\n  }\n\n  merge(other){\n    let state = {start: _get_min(this.getStart(), other.getStart()),\n                 end: _get_max(this.getEnd(), other.getEnd()),\n                 raw: _merge_raw(this.getRaw(), other.getRaw())};\n\n    let date = new RoughDate();\n    date.state = state;\n\n    return date;\n  }\n}\n\nRoughDate.unDry = function(value){\n  return new RoughDate(value);\n}\n\nDry.registerClass(\"Date\", RoughDate);\n\nexport default RoughDate;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\nimport RoughDate from './RoughDate';\nimport {ValueError} from './Errors';\n\nfunction _clean(val){\n  if (!val || val._isADateRangeObject){\n    return val;\n  }\n  else if (val._isARoughDateObject){\n    return val.toDateRange();\n  }\n  else if (val.hasOwnProperty(\"start\") || val.hasOwnProperty(\"end\") ||\n           val.hasOwnProperty(\"both\") || val.hasOwnProperty(\"value\")){\n    return new DateRange(val);\n  }\n  else{\n    return new DateRange({both:new RoughDate(val)});\n  }\n}\n\nclass DateRange{\n  constructor(state){\n    this.state = {\n      start: null,\n      end: null\n    }\n\n    this.setState(state);\n    this._isADateRangeObject = true;\n  }\n\n  toString(){\n    if (this.hasBounds()){\n      if (this.isInstant()){\n        return `DateRange(${this.getStartString()})`;\n      }\n      else{\n        return `DateRange(${this.getStartString()} to ${this.getEndString()})`;\n      }\n    }\n    else{\n      return \"DateRange::unbounded\";\n    }\n  }\n\n  toSimpleString(){\n    if (this.hasBounds()){\n      if (this.isInstant()){\n        return this.getStart().toSimpleString();\n      }\n      else{\n        return this.getEarliestStart().merge(this.getLatestEnd()).toSimpleString();\n      }\n    }\n    else if (this.hasStart()){\n      return `${this.getStart().toSimpleString()}<=>future`;\n    }\n    else if (this.hasEnd()){\n      return `past<=>${this.getEnd().toSimpleString()}`;\n    }\n    else{\n      return \"past<=>future\";\n    }\n  }\n\n  static clone(item){\n    let d = new DateRange();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static eq(item, other){\n    if (item === other){\n      return true;\n    }\n\n    if (item.hasStart() && other.hasStart()){\n      if (!RoughDate.eq(item.getStart(), other.getStart())){\n        return false;\n      }\n    }\n    else if (item.hasStart() || other.hasStart()){\n      return false;\n    }\n\n    if (item.hasEnd() && other.hasEnd()){\n      if (!RoughDate.eq(item.getEnd(), other.getEnd())){\n        return false;\n      }\n    }\n    else if (item.hasEnd() || other.hasEnd()){\n      return false;\n    }\n\n    return true;\n  }\n\n  static mergeAll(dates){\n    if (!dates){\n      return null;\n    }\n    else if (dates._isARoughDateObject || dates._isARoughDateObject){\n      return dates;\n    }\n\n    if (!dates.length || dates.length === 0){\n      return null;\n    }\n\n    let date = dates[0];\n\n    if (dates.length > 1){\n      for (let i=1; i<dates.length; ++i){\n        if (!dates[i].isNull()){\n          if (date.isNull()){\n            date = dates[i];\n          }\n          else{\n            date = date.merge(dates[i]);\n          }\n        }\n      }\n    }\n\n    if (date.isNull()){\n      return null;\n    }\n    else{\n      return date;\n    }\n  }\n\n  merge(other){\n    if (!other){\n      return this;\n    }\n    else if (other._isARoughDateObject){\n      other = other.toDateRange();\n    }\n\n    return new DateRange({start: RoughDate.min(this.getEarliestStart(),\n                                               other.getEarliestStart()),\n                          end: RoughDate.max(this.getLatestEnd(),\n                                             other.getLatestEnd())});\n  }\n\n  hasBounds(){\n    return this.hasStart() && this.hasEnd();\n  }\n\n  hasEnd(){\n    if (this.state.end){\n      return !(this.state.end.isNull());\n    }\n    else{\n      return false;\n    }\n  }\n\n  hasStart(){\n    if (this.state.start){\n      return !(this.state.start.isNull());\n    }\n    else{\n      return false;\n    }\n  }\n\n  isInstant(){\n    return this.hasStart() && (this.state.start === this.state.end);\n  }\n\n  toDate(){\n    if (this.hasStart()){\n      if (this.hasEnd()){\n        return this.getStart().merge(this.getEnd());\n      }\n      else{\n        return this.getStart();\n      }\n    }\n    else{\n      return this.getEnd();\n    }\n  }\n\n  contains(date){\n    date = _clean(date);\n\n    if (!date){\n      return true;\n    }\n    else if (date._isADateRangeObject){\n      const my_start = this.getEarliestStart();\n      const other_start = date.getEarliestStart();\n\n      if (my_start && other_start){\n        if (RoughDate.gt(my_start, other_start)){ return false;}\n      }\n      else if (other_start){\n        return false;\n      }\n\n      const my_end = this.getLatestEnd();\n      const other_end = date.getLatestEnd();\n\n      if (my_end && other_end){\n        if (RoughDate.lt(my_end, other_end)){ return false;}\n      }\n      else if (my_end){\n        return false;\n      }\n\n      return true;\n    }\n    else {\n      throw new ValueError(`Invalid Date ${date}`);\n    }\n  }\n\n  intersect(other){\n    other = _clean(other);\n\n    if (!other){\n      return this;\n    }\n\n    if (!other.hasBounds()){\n      return this;\n    }\n    else if (!this.hasBounds()){\n      return other;\n    }\n\n    const start = RoughDate.max(this.getStart(), other.getStart());\n\n    if (!this.contains(start)){\n      return null;\n    }\n\n    const end = RoughDate.min(this.getEnd(), other.getEnd());\n\n    if (!this.contains(end)){\n      return null;\n    }\n\n    if (RoughDate.eq(start, end)){\n      return new DateRange({both:start});\n    }\n    else{\n      return new DateRange({start:start, end:end});\n    }\n  }\n\n  union(other){\n    other = _clean(other);\n    if (!other){\n      return this;\n    }\n    else if (!(other._isADateRangeObject)){\n      other = new DateRange({value:other});\n    }\n\n    const start = RoughDate.min(this.getStart(), other.getStart());\n    const end = RoughDate.max(this.getEnd(), other.getEnd());\n\n    if (RoughDate.eq(start, end)){\n      return new DateRange({both:start});\n    }\n    else{\n      return new DateRange({start:start, end:end});\n    }\n  }\n\n  getDelta(){\n    if (this.hasStart() && this.hasEnd()){\n      try{\n        return this.getLatestEnd().toDate() - this.getEarliestStart().toDate();\n      }\n      catch(error){\n        console.log(error);\n        console.log(this.hasStart(), this.hasEnd());\n        console.log(this.getStart(), this.getEnd());\n        console.log(this.getLatestEnd(), this.getEarliestStart());\n        throw error;\n      }\n    }\n    else{\n      return null;\n    }\n  }\n\n  zoomIn(scale=1){\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null){\n      delta = this.getDelta() / (2.0+scale);\n    }\n    else{\n      delta = 3600000;\n    }\n\n    if (state.start){\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(-delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  zoomOut(scale=1){\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null){\n      delta = this.getDelta() * scale;\n    }\n    else{\n      delta = 3600000;\n    }\n\n    if (state.start){\n      state.start.add(-delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftEarlier(delta=null){\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null){\n      if (state.start !== null && state.end !== null){\n        delta = -(this.getDelta());     //milliseconds\n      }\n      else{\n        delta = -3600000;     //milliseconds\n      }\n    }\n\n    if (state.start){\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftLater(delta=null){\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null){\n      if (state.start !== null && state.end !== null){\n        delta = this.getDelta();     //milliseconds\n      }\n      else{\n        delta = 3600000;     //milliseconds\n      }\n    }\n\n    if (state.start){\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end){\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  getStart(){\n    return this.state.start;\n  }\n\n  getEnd(){\n    return this.state.end;\n  }\n\n  getEarliestStart(){\n    if (this.hasStart()){\n      return this.getStart().getEarliest();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getLatestEnd(){\n    if (this.hasEnd()){\n      return this.getEnd().getLatest();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getStartDate(){\n    let e = this.getEarliestStart();\n    if (e){\n      return e.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getEndDate(){\n    let e = this.getLatestEnd();\n    if (e){\n      return e.toDate();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getStartString(){\n    if (this.state.start){\n      return this.state.start.toString();\n    }\n    else{\n      return \"unbounded\";\n    }\n  }\n\n  getEndString(){\n    if (this.state.end){\n      return this.state.end.toString();\n    }\n    else{\n      return \"unbounded\";\n    }\n  }\n\n  setState(state){\n    if (state){\n      if (state === \"null\" || state === null){\n        this.state = {\"start\":null, \"end\":null};\n        return;\n      }\n      else if (state._isADateRangeObject){\n        this.state = {...state.state};\n      }\n      else if (state._isARoughDateObject){\n        this.state = {\"start\":state, \"end\": state};\n      }\n      else if (state.hasOwnProperty(\"value\")){\n        this.setState(state.value);\n        return;\n      }\n      else if (state.hasOwnProperty(\"both\")){\n        this.state.start = new RoughDate(state.both);\n        this.state.end = this.state.start;\n      }\n      else if (typeof state === \"string\"){\n        this.state.start = new RoughDate(state);\n        this.state.end = this.state.start;\n      }\n      else {\n        let start = null;\n\n        if (state.start){\n          start = new RoughDate(state.start);\n\n          if (start.isNull()){\n            start = null;\n          }\n        }\n\n        let end = null;\n\n        if (state.end){\n          end = new RoughDate(state.end);\n\n          if (end.isNull()){\n            end = null;\n          }\n        }\n\n        if (start && end){\n          if (RoughDate.gt(start, end)){\n            let tmp = start;\n            start = end;\n            end = tmp;\n          }\n\n          if (RoughDate.gt(start, end)){\n            let tmp = RoughDate.min(start, end);\n            end = RoughDate.max(start, end);\n            start = tmp;\n          }\n        }\n\n        this.state.start = start;\n        this.state.end = end;\n      }\n    }\n    else{\n      this.state.start = null;\n      this.state.end = null;\n    }\n  }\n\n  toDry(){\n    return this.state;\n  }\n}\n\nDateRange.unDry = function(value){\n  return new DateRange(value);\n}\n\nDry.registerClass(\"DateRange\", DateRange);\n\nexport default DateRange;\n","\nimport React from 'react';\n\nimport DateRangeButton from './DateRangeButton';\nimport DateRange from '../model/DateRange';\nimport DefaultButton from './DefaultButton';\n\nimport {ResponsiveList, ResponsiveListItem} from './ResponsiveList';\n\nimport styles from './SourceList.module.css';\n\nfunction _null_function(item){}\n\nfunction SourceList(props){\n  let social = props.social;\n  let sources = props.sources;\n  let emitSelected = props.emitSelected;\n  let title = props.title;\n\n  if (!social || !sources){\n    return null;\n  }\n\n  if (!emitSelected){\n    emitSelected = _null_function;\n  }\n\n  let output = Object.keys(sources).map((key, index)=>{\n    let source = social.get(key);\n    let daterange = DateRange.mergeAll(sources[key]);\n\n    if (daterange){\n      return <ResponsiveListItem key={source.getName()}>\n               <DefaultButton onClick={()=>{emitSelected(source)}}\n                              style={{width:\"50%\"}}>\n                 {source.getName()}\n               </DefaultButton>\n               <DateRangeButton style={{width:\"40%\"}}\n                                value={daterange}\n                                emitSelected={emitSelected}/>\n             </ResponsiveListItem>;\n    }\n    else{\n      return <ResponsiveListItem key={source.getName()}>\n               <DefaultButton onClick={()=>{emitSelected(source)}}>\n                 {source.getName()}\n               </DefaultButton>\n             </ResponsiveListItem>;\n    }\n  });\n\n  if (!output || output.length === 0){\n    return null;\n  }\n\n  if (title){\n    return <div className={styles.container}>\n             <div className={styles.title}>{title}</div>\n             <div className={styles.body}>\n               <ResponsiveList>\n                 {output}\n               </ResponsiveList>\n             </div>\n           </div>;\n  }\n  else{\n    return <ResponsiveList>\n              {output}\n           </ResponsiveList>;\n  }\n}\n\nexport default SourceList;\n","\nimport React from 'react';\n\nimport DefaultButton from './DefaultButton';\nimport CheckBox from './CheckBox';\n\nimport styles from './WeightsList.module.css';\n\nfunction null_function(item){}\n\nfunction WeightsList({weights, title=null, emitSelected=null_function,\n                      emitToggleFilter=null_function, social=null,\n                      type=null}) {\n\n  if (!weights) {\n    return null;\n  }\n\n  let projects = [];\n\n  Object.keys(weights).forEach((key, _i)=>{\n    let project = social.get(key);\n    let is_filtered = social.isFiltered(project);\n\n    let weight = weights[key];\n\n    projects.push(\n      <div className={styles.project} key={project.getName()}>\n        <div className={styles.projectHeader}>\n          <DefaultButton style={{width:\"75%\"}}\n                         onClick={()=>{emitSelected(project);}}>\n            {project.getName()}\n          </DefaultButton>\n          <CheckBox onChange={(event)=>{emitToggleFilter(project);}}\n                    style={{width:\"20%\"}}\n                    checked={is_filtered}/>\n        </div>\n        <div className={styles.projectBody}>\n         Weight = {weight}, Type = {type}\n        </div>\n      </div>\n    );\n  });\n\n  if (title){\n    return (<div>\n              <div className={styles.title}>{title}</div>\n              {projects}\n            </div>);\n  }\n  else {\n    return projects;\n  }\n}\n\nexport default WeightsList;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nfunction _filterProject(values, project){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    if (!(key in project)){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nclass Person {\n  constructor(props){\n    this.state = {\n      name: null,\n      titles: [],\n      firstnames: [],\n      surnames: [],\n      suffixes: [],\n      id: null,\n      positions: {},\n      affiliations: {},\n      projects: {},\n      sources: {},\n      alive: null,\n      gender: null,\n      notes: [],\n      orig_name: null,\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPersonObject = true;\n  }\n\n  static clone(item){\n    let c = new Person();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode(){\n    return true;\n  }\n\n  inGroup(group){\n    if (group.getID){\n      let ids = {}\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key, _i)=>{\n      for (let index in this.state.affiliations[key]){\n        if (this.state.affiliations[key][index] in group){\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    Object.keys(this.state.positions).forEach((key, index)=>{\n      for (let index in this.state.positions[key]){\n        if (this.state.positions[key][index] in group){\n          seen[this.state.positions[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  filterSource(source){\n    if (source.getID){\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key, index)=>{\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id, index)=>{\n        if (s.includes(source_id)){\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources){\n      return null;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterProject(project){\n    if (project.getID)\n    {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key, index)=>{\n      if (key in project){\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects){\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n    let positions = _filterProject(this.state.positions, project);\n\n    if (affiliations !== this.state.affiliations ||\n      positions !== this.state.positions){\n      let person = new Person();\n      person.state = {...this.state};\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterWindow(window){\n    if (!window){\n      return this;\n    }\n    else if (!(window._isADateRangeObject)){\n      window = new DateRange(window);\n    }\n\n    window = window.intersect(this.getAlive());\n\n    if (!window){\n      return null;\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n    let positions = _filterWindow(this.state.positions, window);\n\n    if (affiliations !== this.state.affiliations ||\n        positions !== this.state.positions){\n      let person = new Person();\n      person.state = {...this.state};\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    }\n    else{\n      return this;\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.titles = setState(state.titles, []);\n      this.state.firstnames = setState(state.firstnames, []);\n      this.state.surnames = setState(state.surnames, []);\n      this.state.suffixes = setState(state.suffixes, []);\n      this.state.id = setState(state.id);\n      this.state.positions = setState(state.positions, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.projects = setState(state.projects, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.alive = setState(state.alive);\n      this.state.gender = setState(state.gender);\n      this.state.orig_name = setState(state.orig_name);\n      this.state.notes = setState(state.notes, [])\n\n      if (!this.state.orig_name || this.state.orig_name === \"None\"){\n         throw new ValueError(`No name for ${this}`);\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Person(${this.getName()})`;\n  }\n\n  getAlive(){\n    return this.state.alive;\n  }\n\n  getFirstName(){\n    if (this.state.firstnames){\n      return this.state.firstnames.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getTitle(){\n    if (this.state.titles){\n      return this.state.titles.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getSurname(){\n    if (this.state.surnames){\n      return this.state.surnames.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getSuffix(){\n    if (this.state.suffixes){\n      return this.state.suffixes.join(\" \");\n    }\n    else{\n      return null;\n    }\n  }\n\n  getName(){\n    var parts = [];\n\n    let part = this.getTitle();\n    if (part){\n      parts.push(part);\n    }\n\n    part = this.getFirstName();\n    if (part){\n      parts.push(part);\n    }\n\n    part = this.getSurname();\n    if (part){\n      parts.push(part);\n    }\n\n    part = this.getSuffix();\n    if (part){\n      parts.push(part);\n    }\n\n    if (parts.length > 0){\n       return parts.join(\" \");\n    }\n    else{\n      return \"null\";\n    }\n  }\n\n  getAffiliations(){\n    return this.state.affiliations;\n  }\n\n  getSources(){\n    return this.state.sources;\n  }\n\n  getPositions(){\n    return this.state.positions;\n  }\n\n  getScores(){\n    return this.state.scores;\n  }\n\n  getBorn(){\n    if (this.state.alive){\n      return this.state.alive.getStart();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getDied(){\n    if (this.state.alive){\n      return this.state.alive.getEnd();\n    }\n    else{\n      return null;\n    }\n  }\n\n  getTimeLine(){\n    const alive = this.getAlive();\n\n    if (!alive){\n      return null;\n    }\n    else{\n      return {start: alive.getStart(),\n              end: alive.getEnd(),\n              id: this.getID(),\n              content: this.getName(),\n             };\n    }\n  }\n\n  getNode(is_anchor=false){\n    let node = {id: this.getID(),\n                label: this.getName(),\n                title: this.getName(),\n                fixed: false,\n                shape: \"circle\",\n               };\n\n    let weight = 10.0;\n\n    if (weight < 5.0){\n      weight = 5.0;\n    }\n    else if (weight > 20.0){\n      weight = 20.0;\n    }\n\n    node[\"size\"] = weight;\n\n    let keys = Object.keys(this.state.projects);\n\n    if (keys.length > 0){\n      node[\"group\"] = keys.sort().join(\":\");\n    }\n    else{\n      node[\"group\"] = \"unknown\";\n    }\n\n    if (is_anchor){\n      node[\"shape\"] = \"rect\";\n      node[\"fixed\"] = true;\n      node[\"group\"] = \"anchor\";\n      node[\"size\"] = 20.0;\n    }\n\n    return node;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPerson.unDry = function(value){\n  return new Person(value);\n}\n\nDry.registerClass(\"Person\", Person);\n\nexport default Person;\n","\nimport Dry from 'json-dry';\nimport { v4 as uuidv4 } from 'uuid';\nimport lodash from 'lodash';\n\nimport Person from './Person';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_person_uid(){\n  let uid = uuidv4();\n  return \"P\" + uid.substring(uid.length-7);\n}\n\nclass People {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPeopleObject = true;\n    this.load(props);\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new People();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Person) || item._isAPersonObject;\n  }\n\n  add(person){\n    if (!this.canAdd(person)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(person.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(person);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    person = Person.clone(person);\n\n    let id = person.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Person ID ${person}`);\n      }\n\n      person._updateHooks(this._getHook);\n      this.state.registry[id] = person;\n    }\n    else{\n      let uid = _generate_person_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_person_uid();\n      }\n\n      person.state.id = uid;\n    }\n\n    person._updateHooks(this._getHook);\n    this._names[person.getName()] = person.getID();\n    this.state.registry[person.getID()] = person;\n\n    return person;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw new MissingError(`No Person with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Person || name._isAPersonObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No Person matches '${name}. Available People ` +\n                           `are '${keys}'`);\n  }\n\n  filter(funcs = []){\n    if (funcs.length === 0){\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let person = this.state.registry[key];\n\n      if (person){\n        for (let i=0; i<funcs.length; ++i){\n          person = funcs[i](person);\n          if (!person){\n            break;\n          }\n        }\n\n        if (person){\n          registry[key] = person;\n          names[person.getName()] = key;\n        }\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  getTimeLine(){\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let person = this.state.registry[key];\n      if (person){\n        let timeline = person.getTimeLine();\n        if (timeline){\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({anchor=null} = {}){\n    let nodes = [];\n\n    if (anchor.getID){\n      anchor = anchor.getID();\n    }\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let person = this.state.registry[key];\n\n      if (person){\n        let node = null;\n        if (key === anchor){\n          node = person.getNode({is_anchor:true});\n        }\n        else{\n          node = person.getNode();\n        }\n\n        if (node){\n          nodes.push(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id){\n    let person = this.state.registry[id];\n\n    if (!person){\n      throw new MissingError(`No Person with ID ${id}`);\n    }\n\n    return person;\n  }\n\n  load(data){\n    if (data){\n      if (data.array){ data = data.array; }\n      data.forEach(element => {\n        let person = Person.load(element);\n        this.add(person);\n      });\n    }\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPeople.unDry = function(value){\n  let people = new People();\n  people.state = value;\n  people._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    people._names[v.getName()] = key;\n  });\n\n  return people;\n}\n\nDry.registerClass(\"People\", People);\n\nexport default People;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nfunction _filterProject(values, project){\n  if (!values){\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key, index)=>{\n    if (!(key in project)){\n      if (!ret){ ret = {...values}}\n      delete ret[key];\n    }\n  });\n\n  if (ret){\n    return ret;\n  }\n  else{\n    return values;\n  }\n}\n\nclass Business {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      projects: {},\n      sources: {},\n      scores: {},\n      affiliations: {},\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isABusinessObject = true;\n  }\n\n  static clone(item){\n    let c = new Business();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode(){\n    return true;\n  }\n\n  inGroup(group){\n    if (group.getID){\n      let ids = {}\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key, _i)=>{\n      for (let index in this.state.affiliations[key]){\n        if (this.state.affiliations[key][index] in group){\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n\n  filterSource(source){\n    if (source.getID){\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key, index)=>{\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id, index)=>{\n        if (s.includes(source_id)){\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources){\n      return null;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterProject(project){\n    if (project.getID)\n    {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key, index)=>{\n      if (key in project){\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects){\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n\n    if (affiliations !== this.state.affiliations){\n      let business = new Business();\n      business.state = {...this.state};\n      business.state.affiliations = affiliations;\n      business._getHook = this._getHook;\n      return business;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterWindow(window){\n    if (!window){\n      return this;\n    }\n    else if (!(window._isADateRangeObject)){\n      window = new DateRange(window);\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n\n    if (affiliations !== this.state.affiliations){\n      let business = new Business();\n      business.state = {...this.state};\n      business.state.affiliations = affiliations;\n      business._getHook = this._getHook;\n      return business;\n    }\n    else{\n      return this;\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.projects = setState(state.projects, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.scores = setState(state.scores, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.notes = setState(state.notes, []);\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Business without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Business(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  getAffiliations(){\n    return this.state.affiliations;\n  }\n\n  getSources(){\n    return this.state.sources;\n  }\n\n  getScores(){\n    return this.state.scores;\n  }\n\n  getNode(is_anchor=false){\n    let node = {id: this.getID(),\n      label: this.getName(),\n      title: this.getName(),\n      shape: \"circle\",\n     };\n\n    let weight = 10.0;\n\n    if (weight < 5.0){\n      weight = 5.0;\n    }\n    else if (weight > 20.0){\n      weight = 20.0;\n    }\n\n    node[\"size\"] = weight;\n\n    let keys = Object.keys(this.state.projects);\n\n    if (keys.length > 0){\n      node[\"group\"] = keys.sort().join(\":\");\n    }\n    else{\n      node[\"group\"] = \"unknown\";\n    }\n\n    if (is_anchor){\n      node[\"shape\"] = \"rect\";\n      node[\"physics\"] = false;\n      node[\"group\"] = \"anchor\";\n      node[\"size\"] = 20.0;\n    }\n\n    return node;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nBusiness.unDry = function(value){\n  return new Business(value);\n}\n\nDry.registerClass(\"Business\", Business);\n\nexport default Business;\n","\nimport Dry from 'json-dry';\nimport { v4 as uuidv4 } from 'uuid';\nimport lodash from 'lodash';\n\nimport Business from './Business';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_business_uid(){\n  let uid = uuidv4();\n  return \"B\" + uid.substring(uid.length-7);\n}\n\nclass Businesses {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isABusinessesObject = true;\n    this.load(props);\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Businesses();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Business) || item._isABusinessObject;\n  }\n\n  add(business){\n    if (!this.canAdd(business)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(business.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(business);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    business = Business.clone(business);\n\n    let id = business.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Business ID ${business}`);\n      }\n\n      business._updateHooks(this._getHook);\n      this.state.registry[id] = business;\n    }\n    else{\n      let uid = _generate_business_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_business_uid();\n      }\n\n      business.state.id = uid;\n    }\n\n    business._updateHooks(this._getHook);\n    this._names[business.getName()] = business.getID();\n    this.state.registry[business.getID()] = business;\n\n    return business;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No Business with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Business || name._isABusinessObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No Business matches '${name}. Available Businesses ` +\n                       `are '${keys}'`);\n  }\n\n  filter(funcs = []){\n    if (funcs.length === 0){\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let business = this.state.registry[key];\n\n      if (business){\n        for (let i=0; i<funcs.length; ++i){\n          business = funcs[i](business);\n          if (!business){\n            break;\n          }\n        }\n\n        if (business){\n          registry[key] = business;\n          names[business.getName()] = key;\n        }\n      }\n    });\n\n    let businesses = new Businesses();\n    businesses.state.registry = registry;\n    businesses._names = names;\n    businesses._updateHooks(this._getHook);\n\n    return businesses;\n  }\n\n  getTimeLine(){\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let business = this.state.registry[key];\n      if (business){\n        let timeline = business.getTimeLine();\n        if (timeline){\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({anchor=null} = {}){\n    let nodes = [];\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let business = this.state.registry[key];\n\n      if (business){\n        let node = null;\n        if (key === anchor){\n          node = business.getNode({is_anchor:true});\n        }\n        else{\n          node = business.getNode();\n        }\n\n        if (node){\n          nodes.push(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id){\n    let business = this.state.registry[id];\n\n    if (!business){\n      throw new MissingError(`No Business with ID ${id}`);\n    }\n\n    return business;\n  }\n\n  load(data){\n    if (data){\n      if (data.array){ data = data.array; }\n      data.forEach(element => {\n        let business = Business.load(element);\n        this.add(business);\n      });\n    }\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nBusinesses.unDry = function(value){\n  let businesses = new Businesses();\n  businesses.state = value;\n  businesses._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    businesses._names[v.getName()] = key;\n  });\n\n  return businesses;\n}\n\nDry.registerClass(\"Businesses\", Businesses);\n\nexport default Businesses;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _mergeSources(state, other, key){\n  state = state[key];\n  other = other[key]\n\n  Object.keys(other).forEach((key, index) => {\n    if (!(key in state)){\n      state[key] = other[key];\n    }\n    else{\n      for (let item in other[key]){\n        if (!(item in state[key])){\n          state[key].push(item);\n        }\n      }\n    }\n  });\n}\n\nclass Connection {\n  constructor(props){\n    this.state = {\n      id: null,\n      n0: null,\n      n1: null,\n      shared: null,\n      type: null,\n      duration: null,\n      affiliations: null,\n      correspondances: null,\n      projects: null,\n      notes: null,\n    };\n\n    this.setState(props);\n    this._getHook = null;\n    this._isAConnectionObject = true;\n  }\n\n  static clone(item){\n    let c = new Connection();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  getName(){\n    let n0 = this.state.n0;\n    let n1 = this.state.n1;\n\n    if (n0 <= n1){\n      return `${n0}<=>${n1}`;\n    }\n    else{\n      return `${n1}<=>${n0}`;\n    }\n  }\n\n  getNode0(){\n    if (this._getHook){\n      return this._getHook(this.state.n0);\n    }\n    else {\n      return this.state.n0;\n    }\n  }\n\n  getNode1(){\n    if (this._getHook){\n      return this._getHook(this.state.n1);\n    }\n    else {\n      return this.state.n1;\n    }\n  }\n\n  getNode0ID(){\n    return this.state.n0;\n  }\n\n  getNode1ID(){\n    return this.state.n1;\n  }\n\n  areNodesVisible(n){\n    return n[this.state.n0] && n[this.state.n1];\n  }\n\n  getNode0Name(){\n    let node0 = this.getNode0();\n\n    try{\n      return node0.getName();\n    }\n    catch(error){\n      return node0;\n    }\n  }\n\n  getNode1Name(){\n    let node1 = this.getNode1();\n\n    try{\n      return node1.getName();\n    }\n    catch(error){\n      return node1;\n    }\n  }\n\n  getDuration(){\n    return this.state.duration;\n  }\n\n  getAffiliationSources(){\n    return this.state.affiliations;\n  }\n\n  getCorrespondanceSources(){\n    return this.state.correspondances;\n  }\n\n  filterSource(source){\n    if (source.getID){\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(source).forEach((key, index)=>{\n      if (this.state.affiliations[key] || this.state.correspondances[key]){\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nsources){\n      return null;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterProject(project){\n    if (project.getID){\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key, index)=>{\n      if (key in project){\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects){\n      return null;\n    }\n    else{\n      return this;\n    }\n  }\n\n  filterWindow(window){\n    if (!window){\n      return this;\n    }\n    else if (!(window._isADateRangeObject)){\n      window = new DateRange(window);\n    }\n\n    if (!window){\n      return this;\n    }\n\n    let duration = this.getDuration();\n\n    if (!duration){\n      return this;\n    }\n\n    let intersect = window.intersect(duration);\n\n    if (!intersect){\n      return null;\n    }\n    else{\n      return this;\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.id = setState(state.id);\n      this.state.n0 = setState(state.n0);\n      this.state.n1 = setState(state.n1);\n      this.state.shared = setState(state.shared, []);\n      this.state.type = setState(state.type);\n      this.state.duration = setState(state.duration);\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.correspondances = setState(state.correspondances, {});\n      this.state.notes = setState(state.notes, []);\n      this.state.weights = setState(state.weights, {});\n      this.state.projects = setState(state.projects, {});\n\n      if (!this.state.n0 || !this.state.n1){\n        throw new ValueError(`Invalid connection ${this}`);\n      }\n    }\n  }\n\n  merge(other){\n    if (!this._getHook){\n      if (other._getHook){\n        return other.merge(this);\n      }\n    }\n\n    let state = lodash.cloneDeep(this.state);\n\n    Object.keys(other.state.shared).forEach((key, index) => {\n      if (!(key in state.shared)){\n        state.shared[key] = other.state.shared[key];\n      }\n    });\n\n    Object.keys(other.state.notes).forEach((key, index) => {\n      if (!(key in state.notes)){\n        state.notes[key] = other.state.notes[key];\n      }\n    });\n\n    _mergeSources(state, other.state, \"affiliations\");\n    _mergeSources(state, other.state, \"correspondances\");\n\n    state.duration = state.duration.merge(other.state.duration);\n\n    let c = new Connection();\n    c.state = state;\n    c._getHook = this._getHook;\n\n    return c;\n  }\n\n  toString(){\n    return `Connection(${this.getNode0Name()}<=>${this.getNode1Name()})`;\n  }\n\n  getColorFromType(){\n    switch(this.state.type){\n      case \"direct\":\n        return \"rgb(180,150,150)\";\n      case \"indirect\":\n        return \"rgb(180,180,180)\";\n      default:\n        console.log(`Unknown type? ${this.state.type}`);\n        return \"red\";\n    }\n  }\n\n  getType(){\n    return this.state.type;\n  }\n\n  getWeights(){\n    return this.state.weights;\n  }\n\n  getWeight(){\n    let weight = 1.0;\n\n    Object.keys(this.state.weights).forEach((key, index)=>{\n      weight += this.state.weights[key];\n    });\n\n    return weight;\n  }\n\n  getWeightFromType(){\n    let weight = this.getWeight();\n\n    switch(this.state.type){\n      case \"direct\":\n        return 1.0 * weight;\n      case \"indirect\":\n        return 0.5 * weight;\n      default:\n        console.log(`Unknown type? ${this.state.type}`);\n        return 0.5 * weight;\n    }\n  }\n\n  toEdge(){\n    let color = this.getColorFromType();\n    let weight = this.getWeightFromType();\n\n    let edge = {\n      id:this.getID(),\n      source:this.state.n0,\n      target:this.state.n1,\n      value:weight,\n      color:color,\n    };\n\n    return edge;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nConnection.unDry = function(value){\n  return new Connection(value);\n}\n\nConnection.load = function(data, people=null){\n  return new Connection({name: data.name});\n}\n\nDry.registerClass(\"Connection\", Connection);\n\nexport default Connection;\n","\nimport Dry from 'json-dry';\nimport { v4 as uuidv4 } from 'uuid';\nimport lodash from 'lodash';\n\nimport Connection from './Connection';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_connection_uid(){\n  let uid = uuidv4();\n  return \"C\" + uid.substring(uid.length-7);\n}\n\nclass Connections {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAConnectionsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Connections();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Connection) || item._isAConnectionObject;\n  }\n\n  add(connection){\n    if (!this.canAdd(connection)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(connection.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(connection);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    connection = Connection.clone(connection);\n\n    let id = connection.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Connection ID ${connection}`);\n      }\n    }\n    else{\n      let uid = _generate_connection_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_connection_uid();\n      }\n\n      connection.state.id = uid;\n    }\n\n    connection._updateHooks(this._getHook);\n    this._names[connection.getName()] = connection.getID();\n    this.state.registry[connection.getID()] = connection;\n\n    return connection;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No connection with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Connection || name._isAConnectionObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No connection matches '${name}. Available Connections ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let connection = this.state.registry[id];\n\n    if (!connection){\n      throw new MissingError(`No Connection with ID ${id}`);\n    }\n\n    return connection;\n  }\n\n  filter(funcs = []){\n    if (funcs.length === 0){\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let connection = this.state.registry[key];\n\n      if (connection){\n        for (let i=0; i<funcs.length; ++i){\n          connection = funcs[i](connection);\n          if (!connection){\n            break;\n          }\n        }\n\n        if (connection){\n          registry[key] = connection;\n          names[connection.getName()] = key;\n        }\n      }\n    });\n\n    let connections = new Connections();\n\n    connections.state.registry = registry;\n    connections._names = names;\n    connections._updateHooks(this._getHook);\n\n    return connections;\n  }\n\n  getConnectionsTo(item){\n    if (item.getID){\n      let id = item.getID();\n      item = {};\n      item[id] = 1;\n    }\n\n    let nnodes = Object.keys(item).length;\n\n    let seen = {};\n\n    function _add(id){\n      if (!(id in seen)){\n        seen[id] = 1;\n      }\n      else{\n        seen[id] += 1;\n      }\n    }\n\n    for (let key in this.state.registry){\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() in item){\n        _add(connection.getNode1ID());\n      }\n      else if (connection.getNode1ID() in item){\n        _add(connection.getNode0ID());\n      }\n    }\n\n    let connections = [];\n\n    if (this._getHook){\n      Object.keys(seen).forEach((key, index)=>{\n        try{\n          if (seen[key] === nnodes){\n            connections.push(this._getHook(key));\n          }\n        }\n        catch(error){}\n      });\n    }\n    else{\n      connections = Object.keys(seen);\n    }\n\n    return connections;\n  }\n\n  getEdges(ids=null){\n    let edges = [];\n\n    if (ids){\n      Object.keys(this.state.registry).forEach((key, index)=>{\n        let connection = this.state.registry[key];\n        if (connection.areNodesVisible(ids)){\n          edges.push(connection.toEdge());\n        }\n      });\n    }\n    else{\n      Object.keys(this.state.registry).forEach((key, index)=>{\n        let connection = this.state.registry[key];\n        edges.push(connection.toEdge());\n      });\n    }\n\n    return edges;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nConnections.unDry = function(value){\n  let connections = new Connections();\n  connections.state = value;\n  connections._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    connections._names[v.getName()] = key;\n  });\n\n  return connections;\n}\n\nDry.registerClass(\"Connections\", Connections);\n\nexport default Connections;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Position {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPositionObject = true;\n  }\n\n  static clone(item){\n    let c = new Position();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  static makeCanonical(name){\n    if (!name){\n      return null;\n    }\n    else{\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Position.makeCanonical(this.state.name);\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Position without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Position(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPosition.unDry = function(value){\n  return new Position(value);\n}\n\nDry.registerClass(\"Position\", Position);\n\nexport default Position;\n","\nimport Dry from 'json-dry';\nimport { v4 as uuidv4 } from 'uuid';\nimport lodash from 'lodash';\n\nimport Position from './Position';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_position_uid(){\n  let uid = uuidv4();\n  return \"Q\" + uid.substring(uid.length-7);\n}\n\nclass Positions {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPositionsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Positions();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Position) || item._isAPositionObject;\n  }\n\n  add(position){\n    if (!this.canAdd(position)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(position.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(position);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    position = Position.clone(position);\n\n    let id = position.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Position ID ${position}`);\n      }\n\n      position._updateHooks(this._getHook);\n      this.state.registry[id] = position;\n    }\n    else{\n      let uid = _generate_position_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_position_uid();\n      }\n\n      position.state.id = uid;\n    }\n\n    position._updateHooks(this._getHook);\n    this._names[position.getName()] = position.getID();\n    this.state.registry[position.getID()] = position;\n\n    return position;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No position with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Position || name._isApositionObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No position matches '${name}. Available Positions ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let position = this.state.registry[id];\n\n    if (!position){\n      throw new MissingError(`No Position with ID ${id}`);\n    }\n\n    return position;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nPositions.unDry = function(value){\n  let positions = new Positions();\n  positions.state = value;\n  positions._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    positions._names[v.getName()] = key;\n  });\n\n  return positions;\n}\n\nDry.registerClass(\"Positions\", Positions);\n\nexport default Positions;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Affiliation {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAAffiliationObject = true;\n  }\n\n  static clone(item){\n    let c = new Affiliation();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  static makeCanonical(name){\n    if (!name){\n      return null;\n    }\n    else{\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Affiliation.makeCanonical(this.state.name);\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Affiliation without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Affiliation(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nAffiliation.unDry = function(value){\n  return new Affiliation(value);\n}\n\nDry.registerClass(\"Affiliation\", Affiliation);\n\nexport default Affiliation;\n","\nimport Dry from 'json-dry';\nimport { v4 as uuidv4 } from 'uuid';\nimport lodash from 'lodash';\n\nimport Affiliation from './Affiliation';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_affiliation_uid(){\n  let uid = uuidv4();\n  return \"A\" + uid.substring(uid.length-7);\n}\n\nclass Affiliations {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAAffiliationsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Affiliations();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Affiliation) || item._isAAffiliationObject;\n  }\n\n  add(affiliation){\n    if (!this.canAdd(affiliation)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(affiliation.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(affiliation);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    affiliation = Affiliation.clone(affiliation);\n\n    let id = affiliation.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Affiliation ID ${affiliation}`);\n      }\n\n      affiliation._updateHooks(this._getHook);\n      this.state.registry[id] = affiliation;\n    }\n    else{\n      let uid = _generate_affiliation_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_affiliation_uid();\n      }\n\n      affiliation.state.id = uid;\n    }\n\n    affiliation._updateHooks(this._getHook);\n    this._names[affiliation.getName()] = affiliation.getID();\n    this.state.registry[affiliation.getID()] = affiliation;\n\n    return affiliation;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No affiliation with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Affiliation || name._isAAffiliationObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No affiliation matches '${name}. Available Affiliations ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let affiliation = this.state.registry[id];\n\n    if (!affiliation){\n      throw new MissingError(`No Affiliation with ID ${id}`);\n    }\n\n    return affiliation;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nAffiliations.unDry = function(value){\n  let affiliations = new Affiliations();\n  affiliations.state = value;\n  affiliations._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    affiliations._names[v.getName()] = key;\n  });\n\n  return affiliations;\n}\n\nDry.registerClass(\"Affiliations\", Affiliations);\n\nexport default Affiliations;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport RoughDate from './RoughDate';\n\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Source {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      date: null,\n      description: null,\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isASourceObject = true;\n  }\n\n  static clone(item){\n    let c = new Source();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  getDate(){\n    return this.state.date;\n  }\n\n  updateDate(date, force=false){\n    if (!(date instanceof RoughDate || date._isARoughDateObject)){\n      date = new RoughDate(date);\n    }\n\n    if (date.isNull()){\n      return false;\n    }\n\n    if (this.getDate().isNull()){\n      this.state.date = date;\n      return true;\n    }\n\n    if (RoughDate.ne(this.getDate(), date)){\n      if (force){\n        this.state.date = this.getDate().merge(date);\n        return true;\n      }\n      else{\n        console.log(`Disagreement of date for ${this}: ` +\n                    `${this.getDate()} vs ${date}`);\n      }\n    }\n\n    return false;\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.description = setState(state.description);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n      this.state.date = setState(state.date, new RoughDate());\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have an Source without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Source(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  getDescription(){\n    return this.state.description;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nSource.unDry = function(value){\n  return new Source(value);\n}\n\nDry.registerClass(\"Source\", Source);\n\nexport default Source;\n","\nimport Dry from 'json-dry';\nimport { v4 as uuidv4 } from 'uuid';\nimport lodash from 'lodash';\n\nimport Source from './Source';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_source_uid(){\n  let uid = uuidv4();\n  return \"S\" + uid.substring(uid.length-7);\n}\n\nclass Sources {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isASourcesObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Sources();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Source) || item._isASourceObject;\n  }\n\n  add(source){\n    if (!this.canAdd(source)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(source.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(source);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    source = Source.clone(source);\n\n    let id = source.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Source ID ${source}`);\n      }\n\n      source._updateHooks(this._getHook);\n      this.state.registry[id] = source;\n    }\n    else{\n      let uid = _generate_source_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_source_uid();\n      }\n\n      source.state.id = uid;\n    }\n\n    source._updateHooks(this._getHook);\n    this._names[source.getName()] = source.getID();\n    this.state.registry[source.getID()] = source;\n\n    return source;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No source with name ${name}`);\n    }\n  }\n\n  search(name){\n    if (name instanceof Source || name._isASourceObject){\n      name = name.getName();\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this.state.registry).forEach((key, index) => {\n      let item = this.state.registry[key];\n\n      let description = item.getDescription();\n\n      if (!description){\n        description = \"\";\n      }\n\n      try{\n        if (item.getName().toLowerCase().indexOf(name) !== -1){\n          results.push(item);\n        }\n        else if (description.toLowerCase().indexOf(name) !== -1){\n          results.push(item);\n        }\n      }\n      catch(error){\n        console.log(error);\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n    else{\n      return null;\n    }\n  }\n\n  find(name){\n    if (name instanceof Source || name._isASourceObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No source matches '${name}. Available sources ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let source = this.state.registry[id];\n\n    if (!source){\n      throw new MissingError(`No Source with ID ${id}`);\n    }\n\n    return source;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nSources.unDry = function(value){\n  let sources = new Sources();\n  sources.state = value;\n  sources._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    sources._names[v.getName()] = key;\n  });\n\n  return sources;\n}\n\nDry.registerClass(\"Sources\", Sources);\n\nexport default Sources;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Note {\n  constructor(props){\n    this.state = {\n      text: null,\n      id: null,\n      sources: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isANoteObject = true;\n  }\n\n  static clone(item){\n    let c = new Note();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  setState(state){\n    if (state){\n      this.state.text = setState(state.text);\n      this.state.id = setState(state.id);\n      this.state.sources = setState(state.sources, []);\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  toString(){\n    return `Note(${this.getText()})`;\n  }\n\n  getText(){\n    return this.state.text;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nNote.unDry = function(value){\n  return new Note(value);\n}\n\nDry.registerClass(\"Note\", Note);\n\nexport default Note;\n","\nimport Dry from 'json-dry';\nimport { v4 as uuidv4 } from 'uuid';\nimport lodash from 'lodash';\n\nimport Note from './Note';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_note_uid(){\n  let uid = uuidv4();\n  return \"N\" + uid.substring(uid.length-7);\n}\n\nclass Notes {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isANotesObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Notes();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item){\n    return (item instanceof Note) || item._isANoteObject;\n  }\n\n  add(note){\n    if (!this.canAdd(note)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(note.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(note);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    note = note.clone(Note);\n\n    let id = note.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Note ID ${note}`);\n      }\n\n      note._updateHooks(this._getHook);\n      this.state.registry[id] = Note;\n    }\n    else{\n      let uid = _generate_note_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_note_uid();\n      }\n\n      note.state.id = uid;\n    }\n\n    note._updateHooks(this._getHook);\n    this._names[note.getName()] = note.getID();\n    this.state.registry[note.getID()] = note;\n\n    return note;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No Note with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Note || name._isANoteObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No Note matches '${name}. Available Notes ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let Note = this.state.registry[id];\n\n    if (!Note){\n      throw new MissingError(`No Note with ID ${id}`);\n    }\n\n    return Note;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nNotes.unDry = function(value){\n  let notes = new Notes();\n  notes.state = value;\n  notes._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    notes._names[v.getName()] = key;\n  });\n\n  return notes;\n}\n\nDry.registerClass(\"Notes\", Notes);\n\nexport default Notes;\n","\nimport Dry from \"json-dry\";\nimport lodash from 'lodash';\n\nimport DateRange from './DateRange';\nimport {ValueError} from './Errors';\n\nfunction setState(val, def=null){\n  if (val){\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Project {\n  constructor(props){\n    this.state = {\n      name: null,\n      id: null,\n      url: null,\n      duration: new DateRange(),\n      notes: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAProjectObject = true;\n  }\n\n  static clone(item){\n    let c = new Project();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID(){\n    return this.state.id;\n  }\n\n  setState(state){\n    if (state){\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, {});\n      this.state.url = setState(state.url, null);\n      this.state.duration = new DateRange({value:state.duration});\n\n      if (!this.state.name){\n        throw ValueError(\"You cannot have a Project without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  merge(other){\n    return this;\n  }\n\n  toString(){\n    return `Project(${this.getName()})`;\n  }\n\n  getName(){\n    return this.state.name;\n  }\n\n  getURL(){\n      return this.state.url;\n  }\n\n  getDuration(){\n    return this.state.duration;\n  }\n\n  getTimeLine(){\n    const duration = this.getDuration();\n\n    if (duration && duration.hasBounds()){\n      return {start: duration.getEarliestStart().toDate(),\n              end: duration.getLatestEnd().toDate(),\n              id: this.getID(),\n              content: this.getName(),\n             };\n    }\n    else{\n      return null;\n    }\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nProject.unDry = function(value){\n  return new Project(value);\n}\n\nDry.registerClass(\"Project\", Project);\n\nexport default Project;\n","\nimport Dry from 'json-dry';\nimport { v4 as uuidv4 } from 'uuid';\nimport lodash from 'lodash';\n\nimport Project from './Project';\nimport { KeyError, MissingError } from './Errors';\n\nfunction _generate_project_uid(){\n  let uid = uuidv4();\n  return \"J\" + uid.substring(uid.length-7);\n}\n\nclass Projects {\n  constructor(props){\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAProjectsObject = true;\n  };\n\n  _updateHooks(hook){\n    this._getHook = hook;\n    for (let key in this.state.registry){\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item){\n    let c = new Projects();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values(){\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key, index)=>{\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item){\n    return (item instanceof Project) || item._isAProjectObject;\n  }\n\n  add(project){\n    if (!this.canAdd(project)){ return null;}\n\n    let existing = null;\n\n    try{\n      existing = this.getByName(project.getName());\n    }\n    catch(error){}\n\n    if (existing){\n      existing = existing.merge(project);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    project = Project.clone(project);\n\n    let id = project.getID();\n\n    if (id){\n      if (id in this.state.registry){\n        throw new KeyError(`Duplicate Project ID ${project}`);\n      }\n\n      project._updateHooks(this._getHook);\n      this.state.registry[id] = project;\n    }\n    else{\n      let uid = _generate_project_uid();\n\n      while (uid in this.state.registry){\n        uid = _generate_project_uid();\n      }\n\n      project.state.id = uid;\n    }\n\n    project._updateHooks(this._getHook);\n    this._names[project.getName()] = project.getID();\n    this.state.registry[project.getID()] = project;\n\n    return project;\n  }\n\n  getByName(name){\n    let id = this._names[name];\n\n    if (id){\n      return this.get(id);\n    }\n    else{\n      throw MissingError(`No project with name ${name}`);\n    }\n  }\n\n  find(name){\n    if (name instanceof Project || name._isAProjectObject){\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key, index) => {\n      if (key.toLowerCase().indexOf(name) !== -1){\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw MissingError(`No project matches '${name}. Available projects ` +\n                       `are '${keys}'`);\n  }\n\n  get(id){\n    let project = this.state.registry[id];\n\n    if (!project){\n      throw new MissingError(`No Project with ID ${id}`);\n    }\n\n    return project;\n  }\n\n  getTimeLine(){\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key, index)=>{\n      let project = this.state.registry[key];\n      if (project){\n        let timeline = project.getTimeLine();\n        if (timeline){\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  toDry(){\n    return {value: this.state};\n  }\n};\n\nProjects.unDry = function(value){\n  let projects = new Projects();\n  projects.state = value;\n  projects._names = {}\n\n  Object.keys(value.registry).forEach((key, index) => {\n    let v = value.registry[key];\n    projects._names[v.getName()] = key;\n  });\n\n  return projects;\n}\n\nDry.registerClass(\"Projects\", Projects);\n\nexport default Projects;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\n\nclass Biographies{\n  constructor(){\n    this.state = {\n      bios: {}\n    };\n\n    this._getHook = null;\n    this._isABiographiesObject = true;\n  }\n\n  _updateHooks(hook){\n    this._getHook = hook;\n  }\n\n  static clone(item){\n    let c = new Biographies();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  get(node){\n    if (!node){\n      return null;\n    }\n    else if (node.getID){\n      node = node.getID();\n    }\n\n    return this.state.bios[node];\n  }\n\n  getNode(id){\n    if (this._getHook){\n      return this._getHook(id);\n    }\n    else{\n      return id;\n    }\n  }\n\n  search(text){\n    if (!text){\n      return null;\n    }\n\n    text = text.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this.state.bios).forEach((key, index)=>{\n      if (this.state.bios[key].toLowerCase().indexOf(text) !== -1){\n        results.push(this.getNode(key));\n      }\n    });\n\n    if (results.length === 1){\n      return results[0];\n    }\n    else if (results.length > 1){\n      return results;\n    }\n    else{\n      return null;\n    }\n  }\n\n  add(node, biography){\n    if (!node || !biography){\n      return null;\n    }\n    else if (node.getID){\n      node = node.getID();\n    }\n\n    let bio = this.state.bios[node];\n\n    if (bio){\n      console.log(`There is already a bio for ${this.getNode(node)}`);\n      biography = `${bio}\\n${biography}`;\n    }\n\n    this.state.bios[node] = biography;\n  }\n}\n\nBiographies.unDry = function(value){\n  let bios = new Biographies();\n  bios.state = value;\n  return bios;\n}\n\nDry.registerClass(\"Biographies\", Biographies);\n\nexport default Biographies;\n","\nimport Dry from 'json-dry';\nimport lodash from 'lodash';\n\nimport People from './People';\nimport Businesses from './Businesses';\nimport Connections from './Connections';\nimport Positions from './Positions';\nimport Affiliations from './Affiliations';\nimport Sources from './Sources';\nimport Notes from './Notes';\nimport Projects from './Projects';\nimport Biographies from './Biographies';\nimport DateRange from './DateRange';\n\nimport { ValueError } from './Errors';\n\nconst fast_physics = {\n  enabled: true,\n  timestep: 0.5,\n};\n\nconst slow_physics = {...fast_physics};\nslow_physics.timestep = 0.1;\n\nfunction _push(values, list){\n  if (!list){\n    return;\n  }\n\n  if (values.length){\n    for (let i=0; i<values.length; ++i){\n      list.push(values[i]);\n    }\n  }\n  else{\n    list.push(values);\n  }\n}\n\nclass Social {\n  constructor(props) {\n    if (props){\n      this.state = props;\n    }\n    else{\n      this.state = {};\n    }\n\n    this.state.anchor = null;\n    this.state.filter = {};\n    this.state.cache = {graph:null,\n                        projectTimeLine:null,\n                        itemTimeLine:null,\n                        node_filters:null,\n                        edge_filters:null,\n                        people:null,\n                        businesses:null,\n                        connections:null};\n    this.state.window = new DateRange();\n    this.state.max_window = new DateRange();\n    this._rebuilding = 0;\n\n    this._isASocialObject = true;\n  }\n\n  static clone(item){\n    let c = new Social();\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks() {\n    let getHook = (id) => { return this.get(id); };\n\n    let state = { ...this.state };\n\n    if (!(this.state.people instanceof People)) {\n      state.people = new People();\n    }\n    else {\n      state.people = this.state.people;\n    }\n\n    if (!(this.state.businesses instanceof Businesses)) {\n      state.businesses = new Businesses();\n    }\n    else {\n      state.businesses = this.state.businesses;\n    }\n\n    if (!(this.state.connections instanceof Connections)) {\n      state.connections = new Connections();\n    } else {\n      state.connections = this.state.connections;\n    }\n\n    if (!(this.state.positions instanceof Positions)) {\n      state.positions = new Positions();\n    }\n    else {\n      state.positions = this.state.positions;\n    }\n\n    if (!(this.state.affiliations instanceof Affiliations)) {\n      state.affiliations = new Affiliations();\n    }\n    else {\n      state.affiliations = this.state.affiliations;\n    }\n\n    if (!(this.state.sources instanceof Sources)) {\n      state.sources = new Sources();\n    }\n    else {\n      state.sources = this.state.sources;\n    }\n\n    if (!(this.state.notes instanceof Notes)) {\n      state.notes = new Notes();\n    }\n    else {\n      state.notes = this.state.notes;\n    }\n\n    if (!(this.state.projects instanceof Projects)){\n      state.projects = new Projects();\n    }\n    else {\n      state.projects = this.state.projects;\n    }\n\n    if (!(this.state.biographies instanceof Biographies)){\n      state.biographies = new Biographies();\n    }\n    else{\n      state.biographies = this.state.biographies;\n    }\n\n    this.state = state;\n\n    for (let key in this.state) {\n      try{\n        this.state[key]._updateHooks(getHook);\n      }\n      catch(error){}\n    }\n  }\n\n  clearCache(){\n    this.state.cache = {graph:null,\n                        projectTimeLine:null,\n                        itemTimeLine:null,\n                        node_filters:null,\n                        edge_filters:null,\n                        people:null,\n                        businesses:null,\n                        connections:null};\n    this._rebuilding = 0;\n  }\n\n  getNodeFilters(){\n    if (this.state.cache.node_filters){\n      return this.state.cache.node_filters;\n    }\n\n    this._rebuilding += 1;\n    this.state.cache.node_filters = [];\n\n    // must do time first, as this can affect all of the other filters!\n    let window = this.getWindow();\n\n    if (window.hasStart() || window.hasEnd()){\n      this.state.cache.node_filters.push((item)=>{\n        try{\n          return item.filterWindow(window);\n        }\n        catch(error){\n          console.log(`ERROR ${error}: ${item}`);\n          return item;\n        }\n      });\n    }\n\n    const project_filter = this.state.filter.project;\n\n    if (project_filter){\n      this.state.cache.node_filters.push((item)=>{\n        return item.filterProject(project_filter);\n      });\n    }\n\n    const source_filter = this.state.filter.source;\n\n    if (source_filter){\n      this.state.cache.node_filters.push((item)=>{\n        return item.filterSource(source_filter);\n      });\n    }\n\n    const node_filter = this.state.filter.node;\n\n    if (node_filter) {\n      let connections = this.getConnectionsTo(node_filter);\n      let filter = {...node_filter};\n\n      for (let connection in connections) {\n        let node = connections[connection];\n        filter[node.getID()] = 1;\n      }\n\n      this.state.cache.node_filters.push((item)=>{\n        if (item.getID() in filter){\n          return item;\n        }\n        else{\n          return null;\n        }\n      });\n    }\n\n    const group_filter = this.state.filter.group;\n\n    if (group_filter){\n      this.state.cache.node_filters.push((item)=>{\n        try{\n          if (item.inGroup(group_filter)){\n            return item;\n          }\n          else{\n            return null;\n          }\n        }\n        catch(error){\n          console.log(`Filter error: ${error}`);\n          return item;\n        }\n      });\n    }\n\n    this._rebuilding -= 1;\n    return this.state.cache.node_filters;\n  }\n\n  getEdgeFilters(){\n    if (!this.state.cache.edge_filters){\n      this.state.cache.edge_filters = [];\n\n      // must do time first, as this can affect all of the other filters!\n      let window = this.getWindow();\n\n      if (window.hasStart() || window.hasEnd()){\n        this.state.cache.edge_filters.push((item)=>{\n          try{\n            return item.filterWindow(window);\n          }\n          catch(error){\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const project_filter = this.state.filter.project;\n\n      if (project_filter){\n        this.state.cache.edge_filters.push((item)=>{\n          try{\n            return item.filterProject(project_filter);\n          }\n          catch(error){\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const source_filter = this.state.filter.source;\n\n      if (source_filter){\n        this.state.cache.edge_filters.push((item)=>{\n          try{\n            return item.filterSource(source_filter);\n          }\n          catch(error){\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n    }\n\n    return this.state.cache.edge_filters;\n  }\n\n  getWindow(){\n    return this.state.window;\n  }\n\n  getMaxWindow(){\n    return this.state.max_window;\n  }\n\n  _fitWindow(window){\n    let new_window = this.state.max_window.intersect(window);\n\n    let delta = window.getDelta();\n\n    if (new_window && (new_window.getDelta() === delta)){\n      return window;\n    }\n\n    if (delta > this.state.max_window.getDelta()){\n      return DateRange.clone(this.state.max_window);\n    }\n\n    if (window.getStartDate() < this.state.max_window.getStartDate()){\n      return new DateRange({start:this.state.max_window.getStartDate(),\n                            end:this.state.max_window.getStartDate()+delta});\n    }\n    else{\n      return new DateRange({start:this.state.max_window.getEndDate()-delta,\n                            end:this.state.max_window.getEndDate()});\n    }\n  }\n\n  setMaxWindow(window){\n    if (!window._isADateRangeObject){\n      window = new DateRange(window);\n    }\n\n    if (window === this.state.max_window){\n      return;\n    }\n\n    this.state.max_window = window;\n\n    if (this.state.window && this.state.window.hasBounds()){\n      let fitted = this._fitWindow(this.state.window);\n\n      if (fitted !== this.state.window){\n        this.setWindow(fitted);\n      }\n    }\n    else{\n      this.state.window = this.state.max_window;\n    }\n  }\n\n  setWindow(window){\n    if (!window._isADateRangeObject){\n      window = new DateRange(window);\n    }\n\n    if (DateRange.eq(window, this.state.window)){\n      return false;\n    }\n\n    let fitted = this._fitWindow(window);\n\n    if (DateRange.eq(fitted, this.state.window)){\n      return false;\n    }\n\n    this.state.window = fitted;\n    this.clearCache();\n    return true;\n  }\n\n  getPeople(filtered=true) {\n    if (this._rebuilding){\n      filtered = false;\n    }\n\n    if (filtered){\n      if (!this.state.cache.people){\n        console.log(\"REBUILD PEOPLE\");\n        this._rebuilding += 1;\n        this.state.cache.people =\n              this.state.people.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.people;\n    }\n    else{\n      return this.state.people;\n    }\n  }\n\n  getBusinesses(filtered=true) {\n    if (this._rebuilding){\n      filtered = false;\n    }\n\n    if (filtered){\n      if (!this.state.cache.businesses){\n        console.log(\"REBUILD BUSINESSES\");\n        this._rebuilding += 1;\n        this.state.cache.businesses =\n              this.state.businesses.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.businesses;\n    }\n    else{\n      return this.state.businesses;\n    }\n  }\n\n  getConnections(filtered=true) {\n    if (this._rebuilding){\n      filtered = false;\n    }\n\n    if (filtered){\n      if (!this.state.cache.connections){\n        console.log(\"REBUILD CONNECTIONS\");\n        this._rebuilding += 1;\n        this.state.cache.connections =\n              this.state.connections.filter(this.getEdgeFilters());\n        this._rebuilding -=1;\n      }\n\n      return this.state.cache.connections;\n    }\n    else{\n      return this.state.connections;\n    }\n  }\n\n  getBiographies(filtered=true){\n    return this.state.biographies;\n  }\n\n  getAffiliations(filtered=true) {\n    return this.state.affiliations;\n  }\n\n  getPositions(filtered=true) {\n    return this.state.positions;\n  }\n\n  getSources(filtered=true) {\n    return this.state.sources;\n  }\n\n  getNotes(filtered=true) {\n    return this.state.notes;\n  }\n\n  getProjects(filtered=true) {\n    return this.state.projects;\n  }\n\n  getConnectionsTo(item) {\n    return this.getConnections().getConnectionsTo(item);\n  }\n\n  getAnchor() {\n    return this.state.anchor;\n  }\n\n  getFilter() {\n    return {...this.state.filter};\n  }\n\n  getFilterText(){\n    const filter = [];\n\n    let f = this.state.filter.node;\n\n    if (f){\n      let parts = [];\n\n      Object.keys(f).forEach((key, index)=>{\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1){\n        filter.push(`connected to ${parts[0]}`);\n      }\n      else if (parts.length > 1){\n        filter.push(`connected to (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.source;\n\n    if (f){\n      let parts = [];\n\n      Object.keys(f).forEach((key, index)=>{\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1){\n        filter.push(`with source ${parts[0]}`);\n      }\n      else if (parts.length > 1){\n        filter.push(`with sources (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.group;\n\n    if (f){\n      let parts = [];\n\n      Object.keys(f).forEach((key, index)=>{\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1){\n        filter.push(`in group ${parts[0]}`);\n      }\n      else if (parts.length > 1){\n        filter.push(`in groups (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.project;\n\n    if (f){\n      let parts = [];\n\n      Object.keys(f).forEach((key, index)=>{\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1){\n        filter.push(`in project ${parts[0]}`);\n      }\n      else if (parts.length > 1){\n        filter.push(`in projects (${parts.join(\" and \")})`);\n      }\n    }\n\n    if (filter.length === 1){\n      return filter[0];\n    }\n    else if (filter.length > 1){\n      return `[${filter.join(\"] and [\")}]`;\n    }\n    else{\n      return null;\n    }\n  }\n\n  _getType(item){\n    if (item.getID){\n      item = item.getID();\n    }\n\n    if (item[0] === \"P\" || item[0] === \"B\"){\n      return \"node\";\n    }\n    else if (item[0] === \"J\"){\n      return \"project\";\n    }\n    else if (item[0] === \"S\"){\n      return \"source\";\n    }\n    else{\n      return \"group\";\n    }\n  }\n\n  isFiltered(item){\n    if (item.getID){\n      item = item.getID();\n    }\n\n    let type = this._getType(item);\n\n    const filter = this.state.filter[type];\n\n    if (filter){\n      return item in filter;\n    }\n    else{\n      return false;\n    }\n  }\n\n  find(text){\n    let result = [];\n\n    try{\n      let items = this.getPeople(false).find(text);\n      _push(items, result);\n    }\n    catch(error)\n    {}\n\n    try{\n      let items = this.getBusinesses(false).find(text);\n      _push(items, result);\n    }\n    catch(error)\n    {}\n\n    try{\n      let items = this.getPositions(false).find(text);\n      _push(items, result);\n    }\n    catch(error)\n    {}\n\n    try{\n      let items = this.getAffiliations(false).find(text);\n      _push(items, result);\n    }\n    catch(error)\n    {}\n\n    try{\n      let items = this.getSources(false).search(text);\n      _push(items, result);\n    }\n    catch(error)\n    {}\n\n    try{\n      let items = this.getBiographies(false).search(text);\n      _push(items, result);\n    }\n    catch(error)\n    {}\n\n    return result;\n  }\n\n  resetFilters(){\n    this.state.filter = {};\n    this.clearCache();\n  }\n\n  setAnchor(anchor) {\n    if (anchor) {\n      anchor = this.getPeople().find(anchor);\n    }\n\n    this.state.anchor = anchor;\n    this.clearCache();\n  }\n\n  toggleFilter(item){\n    if (item.getID){\n      item = item.getID();\n    }\n\n    let type = this._getType(item);\n\n    if (!(type in this.state.filter)){\n      this.state.filter[type] = {};\n    }\n\n    if (item in this.state.filter[type]){\n      delete this.state.filter[type][item];\n\n      if (Object.keys(this.state.filter[type]).length === 0){\n        delete this.state.filter[type];\n      }\n    }\n    else{\n      this.state.filter[type][item] = 1;\n    }\n\n    console.log(this.state.filter);\n\n    this.clearCache();\n  }\n\n  getProjectTimeLine(){\n    if (this.state.cache.projectTimeLine !== null){\n      return this.state.cache.projectTimeLine;\n    }\n\n    let items = this.getProjects().getTimeLine();\n\n    this.state.cache.projectTimeLine = items;\n\n    return this.state.cache.projectTimeLine;\n  }\n\n  getItemTimeLine(){\n    if (this.state.cache.itemTimeLine !== null){\n      return this.state.cache.itemTimeLine;\n    }\n\n    let items = this.getPeople().getTimeLine();\n\n    let projects = this.getProjects().getTimeLine();\n\n    projects.forEach((item)=>{\n      item.type = \"background\";\n      items.push(item);\n    });\n\n    this.state.cache.itemTimeLine = items;\n\n    return this.state.cache.itemTimeLine;\n  }\n\n  getGraph() {\n    if (this.state.cache.graph !== null){\n      return this.state.cache.graph;\n    }\n\n    const anchor = this.state.anchor;\n    let nodes = this.getPeople().getNodes({anchor: anchor});\n    nodes = nodes.concat(this.getBusinesses().getNodes());\n\n    let n = {};\n    for (let i in nodes){\n      n[nodes[i].id] = 1;\n    }\n\n    let edges = this.getConnections().getEdges(n);\n\n    this.state.cache.graph = {\"nodes\": nodes, \"edges\": edges};\n    return this.state.cache.graph;\n  }\n\n  add(item){\n    if (!item){\n      return;\n    }\n\n    let added = false;\n\n    Object.keys(this.state).forEach((key, index)=>{\n      if (!added){\n        let group = this.state[key];\n        if (group && group.canAdd){\n          if (group.canAdd(item)){\n            group.add(item);\n            added = true;\n          }\n        }\n      }\n    });\n\n    if (!added){\n      throw new ValueError(\n          `Do not know how to add ${item} to this Social group`);\n    }\n  }\n\n  get(id, filtered=true) {\n    if (id.getID){\n      id = id.getID();\n    }\n\n    if (this._rebuilding){\n      // we cannot get filtered data when rebuilding, else otherwise\n      // we get race conditions and weird results\n      filtered = false;\n    }\n\n    try{\n      if (id[0] === \"C\") {\n        return this.getConnections(filtered).get(id);\n      }\n      else if (id[0] === \"P\") {\n        return this.getPeople(filtered).get(id);\n      }\n      else if (id[0] === \"B\") {\n        return this.getBusinesses(filtered).get(id);\n      }\n      else if (id[0] === \"Q\") {\n        return this.getPositions(filtered).get(id);\n      }\n      else if (id[0] === \"A\") {\n        return this.getAffiliations(filtered).get(id);\n      }\n      else if (id[0] === \"S\") {\n        return this.getSources(filtered).get(id);\n      }\n      else if (id[0] === \"N\") {\n        return this.getNotes(filtered).get(id);\n      }\n      else if (id[0] === \"J\") {\n        return this.getProjects(filtered).get(id);\n      }\n      else {\n        return id;\n      }\n    }\n    catch(error){\n      if (filtered){\n        return this.get(id, false);\n      }\n      else{\n        throw error;\n      }\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSocial.unDry = function (value) {\n  let social = new Social(value);\n  social._updateHooks();\n\n  return social;\n}\n\nDry.registerClass(\"Social\", Social);\n\nexport default Social;\n","import React from \"react\";\n\nimport { Tabs, Tab, TabPanel, TabList } from 'react-web-tabs';\n\nimport {\n  Accordion,\n  AccordionItem,\n  AccordionTitle,\n  AccordionPanel,\n} from './Accordion';\n\nimport GroupsList from './GroupsList';\nimport ConnectionList from './ConnectionList';\nimport SourceList from './SourceList';\nimport WeightsList from './WeightsList';\nimport DateRangeButton from './DateRangeButton';\nimport DefaultButton from './DefaultButton';\n\nimport Social from '../model/Social';\n\nimport styles from './InfoBox.module.css';\n\nlet default_title = \"Isambard's Social Network\";\nlet default_image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Robert_Howlett_-_Isambard_Kingdom_Brunel_and_the_launching_chains_of_the_Great_Eastern_-_Google_Art_Project.jpg/256px-Robert_Howlett_-_Isambard_Kingdom_Brunel_and_the_launching_chains_of_the_Great_Eastern_-_Google_Art_Project.jpg\";\nlet default_text = <div>\n                      This is an interactive viewer of Isambard Kingdom Brunel's\n                      social network. Please click in the nodes and have fun!\n                    </div>;\n\nfunction null_function(item){}\n\nfunction getBiography({item, social, emitSelected=null_function,\n                       emitToggleFilter=null_function}){\n  let pages = [];\n  let affiliations = {};\n  let positions = {};\n  let sources = {};\n  let connections = [];\n\n  try{\n    connections = social.getConnectionsTo(item);\n  }\n  catch(error){\n    console.log(`CONNECTIONS ERROR ${error}`);\n  }\n\n  if (item.getAffiliations){\n    affiliations = item.getAffiliations();\n  }\n\n  if (item.getPositions){\n    positions = item.getPositions();\n  }\n\n  if (item.getSources){\n    sources = item.getSources();\n  }\n\n  let alive = null;\n\n  if (item.getAlive){\n    let a = item.getAlive();\n    if (a){\n      alive = <p>\n                They were alive from&nbsp;\n                {a.getStartString()}&nbsp;\n                until {a.getEndString()}.\n              </p>;\n    }\n  }\n\n  let bio = null;\n\n  try{\n    bio = social.getBiographies().get(item);\n  }\n  catch(error){\n    bio = null;\n  }\n\n  pages.push([\"Biography\",\n              (<div>\n                 <div>{bio}</div>\n                 <div>{alive}</div>\n               </div>)]);\n\n  if (connections.length > 0){\n    pages.push([\"Connections\", <div>\n                                  <ConnectionList\n                                      connections={connections}\n                                      emitSelected={emitSelected}\n                                      emitToggleFilter={emitToggleFilter}\n                                      social={social}/>\n                               </div>]);\n  }\n  else{\n    pages.push([\"Connections\", \"None\"]);\n  }\n\n  if (Object.keys(positions).length > 0){\n    pages.push([\"Positions\",\n                <div>\n                  <GroupsList groups={positions}\n                              emitSelected={emitSelected}\n                              emitToggleFilter={emitToggleFilter}\n                              social={social}/>\n                </div>]);\n  }\n  else{\n    pages.push([\"Positions\", \"None\"]);\n  }\n\n  if (Object.keys(affiliations).length > 0){\n    pages.push([\"Affiliations\",\n                <div>\n                  <GroupsList groups={affiliations}\n                              emitSelected={emitSelected}\n                              emitToggleFilter={emitToggleFilter}\n                              social={social}/>\n                </div>]);\n  }\n  else{\n    pages.push([\"Affiliations\", \"None\"]);\n  }\n\n  if (Object.keys(sources).length > 0){\n    pages.push([\"Sources\",\n                <div>\n                  <GroupsList groups={sources}\n                              emitSelected={emitSelected}\n                              emitToggleFilter={emitToggleFilter}\n                              social={social}/>\n                </div>]);\n  }\n\n  pages.push([\"Analysis\",\n              <div>\n                Here is space for graphs and analysis of {item.getName()}\n              </div>]);\n\n  return pages;\n}\n\nfunction extractData({item, social, emitSelected=null_function,\n                      emitToggleFilter=null_function}){\n  let data = {title:default_title, image:default_image,\n              pages:[[\"Title\", default_text]]};\n\n  if (!(social instanceof Social)){\n    return data;\n  }\n\n  if (!item){\n    return data;\n  }\n\n  //refresh the item in case of updates...\n  if (item.getID){\n    item = item.getID();\n  }\n\n  try{\n    item = social.get(item);\n  }\n  catch(error){\n    item = null;\n  }\n\n  if (!item){\n    return data;\n  }\n\n  if (item._isAPersonObject){\n    data.title = <DefaultButton onClick={()=>{emitToggleFilter(item);}}>\n                  {item.getName()}\n                 </DefaultButton>\n    data.pages = getBiography({item:item, social:social,\n                               emitSelected:emitSelected,\n                               emitToggleFilter:emitToggleFilter});\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Illustrirte_Zeitung_%281843%29_21_332_1_Das_vom_Stapellaufen_des_Great-Britain.PNG/640px-Illustrirte_Zeitung_%281843%29_21_332_1_Das_vom_Stapellaufen_des_Great-Britain.PNG\";\n  }\n  else if (item._isABusinessObject){\n    data.title = <DefaultButton onClick={()=>{emitToggleFilter(item);}}>\n                  {item.getName()}\n                 </DefaultButton>\n    data.pages = getBiography({item:item, social:social,\n                               emitSelected:emitSelected,\n                               emitToggleFilter:emitToggleFilter});\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/SS_Great_Britain_diagram.jpg/320px-SS_Great_Britain_diagram.jpg\";\n  }\n  else if (item._isASourceObject){\n    data.title = item.getName();\n    let description = item.getDescription();\n    if (!description){\n      description = \"No description\";\n    }\n    data.pages = [[\"Description\", description],\n                  [\"Analysis\", \"Analysis for this source - where else has it been cited?\"]];\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/9/91/Sumerian_26th_c_Adab.jpg\";\n  }\n  else if (item._isAConnectionObject){\n    data.title = null;\n\n    let n0 = item.getNode0();\n    if (n0.getName){\n      let node = n0;\n      n0 = <DefaultButton onClick={()=>{emitSelected(node)}}>\n                  {n0.getName()}\n           </DefaultButton>\n    }\n\n    let n1 = item.getNode1();\n    if (n1.getName){\n      let node = n1;\n      n1 = <DefaultButton onClick={()=>{emitSelected(node)}}>\n            {n1.getName()}\n           </DefaultButton>;\n    }\n\n    let asources = item.getAffiliationSources();\n    let csources = item.getCorrespondanceSources();\n    let duration = item.getDuration();\n\n    if (duration){\n      duration = <div>\n                   <div>during</div>\n                   <DateRangeButton value={duration}\n                                    emitSelected={emitSelected}/>\n                 </div>\n    }\n\n    if (asources){\n      asources = <AccordionItem uuid=\"asources\">\n                   <AccordionTitle>\n                     Affiliation\n                   </AccordionTitle>\n                   <AccordionPanel>\n                     <SourceList social={social} sources={asources}\n                                 emitSelected={emitSelected}/>\n                   </AccordionPanel>\n                 </AccordionItem>;\n    }\n\n    if (csources){\n      csources = <AccordionItem uuid=\"csources\">\n                   <AccordionTitle>\n                     Correspondance\n                   </AccordionTitle>\n                   <AccordionPanel>\n                     <SourceList social={social} sources={csources}\n                                 emitSelected={emitSelected}/>\n                   </AccordionPanel>\n                 </AccordionItem>;\n    }\n\n    let accordion = null;\n\n    if (asources || csources){\n      accordion = <Accordion allowMultipleExpanded={true}\n                             allowZeroExpanded={true}\n                             preExpanded={[\"asources\", \"csources\"]}>\n                    {asources}\n                    {csources}\n                  </Accordion>;\n    }\n\n    let pages = [];\n    pages.push([\"Connection\",\n               <div style={{textAlign:\"center\"}}>\n                  {n0}\n                  <div>||</div>\n                  {n1}\n                  <div>&nbsp;</div>\n                  <div>{duration}</div>\n                </div>]);\n\n    pages.push([\"Sources\", <div>{accordion}</div>]);\n\n    pages.push([\"Projects\", <WeightsList weights={item.getWeights()}\n                                         type={item.getType()}\n                                         social={social}\n                                         emitSelected={emitSelected}\n                                         emitToggleFilter={emitToggleFilter}/>]);\n\n    pages.push([\"Analysis\", \"Space for analysis of this Connection\"]);\n\n    data.image = \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/SS_Great_Britain_transverse_section.jpg/320px-SS_Great_Britain_transverse_section.jpg\";\n\n    data.pages = pages;\n  }\n\n  return data;\n}\n\nfunction InfoBox(props) {\n  let data = {};\n\n  try{\n    data = extractData(props);\n  }\n  catch(error){\n    data = {title:default_title, image:default_image,\n            pages:[[\"Title\", default_text]]};\n    console.log(`ERROR ${error}`);\n  }\n\n  const pages = data.pages;\n\n  if (pages.length > 1){\n    let tabs = [];\n    let panes = [];\n\n    for (let i=0; i<pages.length; ++i){\n      panes.push(<TabPanel key={pages[i][0]} tabId={pages[i][0]}\n                           className={styles.tabPanel}>\n                   {pages[i][1]}\n                 </TabPanel>);\n      tabs.push(<Tab key={pages[i][0]} className={styles.tab}\n                     tabFor={pages[i][0]}>{pages[i][0]}</Tab>);\n    }\n\n    return (\n      <div className={styles.container}>\n        <img className={styles.heroImage} alt=\"\" src={data.image}/>\n        <div className={styles.title}>{data.title}</div>\n        <Tabs\n          key={panes.length}\n          vertical\n          onChange={(tabId) => { console.log(tabId); }}\n          defaultTab={pages[0][0]}\n          className={styles.tabs}\n        >\n          <TabList className={styles.tablist}>\n            {tabs}\n          </TabList>\n          {panes}\n        </Tabs>\n      </div>\n    );\n  }\n  else{\n    return (\n      <div className={styles.container}>\n        <img className={styles.heroImage} alt=\"\" src={data.image}/>\n        <div className={styles.title}>{data.title}</div>\n        {pages[0][1]}\n      </div>\n    );\n  }\n};\n\nexport default InfoBox;\n","import React, { Component } from 'react';\nimport Timeline from 'react-visjs-timeline';\n\nimport DatePicker from 'react-datepicker';\n\nimport DateRange from '../model/DateRange';\n\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nimport styles from './TimeLineView.module.css';\n\nfunction _customOrder(a, b) {\n  // order by id\n  return a.id - b.id;\n}\n\nconst timeline_options = {\n  autoResize: true,\n  horizontalScroll: true,\n  showCurrentTime: false,\n  showTooltips: false,\n  verticalScroll: true,\n  zoomable: false,\n  order: _customOrder,\n}\n\nclass DateInput extends Component {\n   render(){\n     let {value, onClick} = this.props;\n\n     return (<button className={styles.zoomButton} onClick={onClick}>\n              {value}\n             </button>);\n   }\n};\n\nclass TimeLineView extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      dimensions: {height:300, width:600},\n    }\n\n    this._is_activated = this.props.is_active;\n  }\n\n  activate(){\n    this._is_activated = true;\n  }\n\n  deactivate(){\n    this._is_activated = false;\n  }\n\n  isActive(){\n    return this._is_activated;\n  }\n\n  updateSize(dimensions) {\n    this.setState({\n      dimensions: {\n        width: dimensions.width - 10,\n        height: dimensions.height - 100,\n      }\n    });\n\n    let timeline = this.getTimeLine();\n    if (timeline){\n      timeline.redraw();\n    }\n  }\n\n  getTimeLine(){\n    if (this.timeline){\n      return this.timeline.$el;\n    }\n    else{\n      return null;\n    }\n  }\n\n  selectHandler(props){\n    if (!this.isActive()){\n      return;\n    }\n\n    if (this.props.emitSelected){\n      this.props.emitSelected(props.items[0]);\n    }\n  }\n\n  rangeChangedHandler(props){\n    let window = null;\n\n    if (props.byUser || this._byUser){\n      this._byUser = false;\n      window = new DateRange({start:props.start.toISOString(),\n                              end:props.end.toISOString()});\n      if (!window.hasBounds()){\n        console.log(`Something went wrong? ${window}`);\n        return;\n      }\n    }\n    else{\n      window = this.getWindow();\n    }\n\n    if (window && this.isActive() && this.props.emitWindowChanged){\n      this.props.emitWindowChanged(window);\n    }\n  }\n\n  setWindow(window){\n    if (!this.isActive()){\n      return;\n    }\n\n\n    if (!window){\n      return;\n    }\n\n    let old_window = this.getWindow();\n\n    if (DateRange.eq(window, old_window)){\n      return;\n    }\n\n    this._byUser = true;\n    this.getTimeLine().setWindow(window.getStartDate(), window.getEndDate(),\n                                 {animation:true});\n  }\n\n  getWindow(){\n    if (this.props.getWindow){\n      return this.props.getWindow();\n    }\n    else{\n      return null;\n    }\n  }\n\n  setStartDate(date){\n    if (!date){\n      return;\n    }\n\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(new DateRange({start:date, end:window.getEndDate()}));\n    }\n  }\n\n  setEndDate(date){\n    if (!date){\n      return;\n    }\n\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(new DateRange({start:window.getStartDate(), end:date}));\n    }\n  }\n\n  scrollLeft(){\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(window.shiftEarlier());\n    }\n  }\n\n  scrollRight(){\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(window.shiftLater());\n    }\n  }\n\n  zoomIn(){\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(window.zoomIn());\n    }\n  }\n\n  zoomOut(){\n    const window = this.getWindow();\n\n    if (window){\n      this.setWindow(window.zoomOut());\n    }\n  }\n\n  render() {\n    let height = `${this.state.dimensions.height}px`;\n    let width = `${this.state.dimensions.width}px`;\n\n    let my_options = {...timeline_options};\n    my_options[\"height\"] = height;\n    my_options[\"width\"] = width;\n\n    let window = this.getWindow();\n    let max_window = window;\n\n    if (this.props.getMaxWindow){\n      max_window = this.props.getMaxWindow();\n\n      if (max_window.hasBounds()){\n        my_options[\"max\"] = max_window.getLatestEnd().toDate();\n        my_options[\"min\"] = max_window.getEarliestStart().toDate();\n\n        if (!window){\n          window = max_window;\n        }\n      }\n      else{\n        console.log(`Unbounded max_window? ${max_window}`);\n        max_window = null;\n      }\n    }\n\n    if (!window){\n      window = new DateRange({start:\"2000-01-31\", end:\"2020-12-31\"});\n      console.log(\"NO WINDOW!?!\");\n    }\n\n    let start = window.getEarliestStart();\n    let end = window.getLatestEnd();\n\n    let items = null;\n\n    if (this.isActive()){\n      if (this.props.getItems){\n        items = this.props.getItems();\n      }\n    }\n\n    if (items === null || items.length === 0){\n      items = [];\n    }\n\n    if (start){\n      start = start.toDate();\n      my_options[\"start\"] = start;\n    }\n\n    if (end){\n      end = end.toDate();\n      my_options[\"end\"] = end;\n    }\n\n    let timeline = this.getTimeLine();\n\n    if (timeline){\n      //need to set the window here to prevent animation when\n      //changing tabs\n      let activated = this._is_activated;\n      timeline.setWindow(start, end, {animation:false});\n      this._is_activated = activated;\n    }\n\n    return (\n      <div className={styles.container}\n           style={{width:width, height:height}}>\n        <Timeline className={styles.timeline}\n                  ref={el => (this.timeline = el)}\n                  rangechangedHandler={(props)=>{this.rangeChangedHandler(props)}}\n                  selectHandler={(props)=>{this.selectHandler(props)}}\n                  options={my_options}\n                  items={items}/>\n        <div className={styles.buttonGroup}>\n          <button className={styles.scrollButton}\n                  onClick={()=>{this.scrollLeft()}}>&larr;</button>\n          <button className={styles.zoomButton}\n                  onClick={()=>{this.zoomOut()}}>-</button>\n          <DatePicker className={styles.datePicker}\n                      selected={start}\n                      openToDate={start}\n                      selectsStart\n                      startDate={start}\n                      endDate={end}\n                      dateFormat=\"d MMM yyyy\"\n                      showMonthYearPicker\n                      showYearDropdown\n                      dropdownMode=\"select\"\n                      customInput={<DateInput />}\n                      onChange={(date)=>{this.setStartDate(date)}}/>\n          <button className={styles.scrollButton}\n                  onClick={()=>{this.setWindow(max_window)}}>&harr;</button>\n          <DatePicker className={styles.datePicker}\n                      selected={end}\n                      openToDate={end}\n                      selectsEnd\n                      startDate={start}\n                      endDate={end}\n                      dateFormat=\"d MMM yyyy\"\n                      showMonthYearPicker\n                      showYearDropdown\n                      dropdownMode=\"select\"\n                      customInput={<DateInput />}\n                      onChange={(date)=>{this.setEndDate(date)}}/>\n          <button className={styles.zoomButton}\n                  onClick={()=>{this.zoomIn()}}>+</button>\n          <button className={styles.scrollButton}\n                  onClick={()=>{this.scrollRight()}}>&rarr;</button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TimeLineView\n","import React, { Component } from 'react';\nimport { Tabs, Tab, TabPanel, TabList } from 'react-web-tabs';\n\nimport TimeLineView from './TimeLineView';\n\nimport styles from './TimeLineBox.module.css';\n\nclass TimeLineBox extends Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n      dimensions: {height:300, width:600},\n    }\n\n    this.tabs = {};\n    this.container = null;\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', ()=>{this.updateSize()});\n    this.updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', ()=>{this.updateSize()});\n  }\n\n  activate(tabId){\n    Object.keys(this.tabs).forEach((key, index) =>{\n      if (key !== tabId){\n        let tab = this.tabs[key];\n        if (tab){\n          tab.deactivate();\n        }\n      }\n    });\n\n    if (this.tabs[tabId]){\n      this.tabs[tabId].activate();\n    }\n  }\n\n  updateSize(){\n    if (this.container){\n      this.setState({\n        dimensions: {\n          width: this.container.offsetWidth,\n          height: this.container.offsetHeight,\n        }\n      });\n    }\n\n    Object.keys(this.tabs).forEach((key, index) =>{\n      let tab = this.tabs[key];\n      if (tab){\n        tab.updateSize(this.state.dimensions);\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div ref={el => (this.container = el)}\n           className={styles.container}>\n        <Tabs key=\"timeline-tabs\"\n              onChange={(tabId) => { this.activate(tabId); this.updateSize(); }}\n              className={styles.tabs}>\n          <TabList className={styles.tabList}>\n            <Tab className={styles.tab}\n                 key=\"items\"\n                 tabFor=\"items\">Timeline</Tab>\n            <Tab className={styles.tab}\n                 key=\"projects\"\n                 tabFor=\"projects\">Projects</Tab>\n            <Tab className={styles.tab}\n                 key=\"analysis\"\n                 tabFor=\"analysis\">Analysis</Tab>\n          </TabList>\n\n          <TabPanel key=\"projects\" tabId=\"projects\"\n                    className={styles.tabPanel}>\n            <TimeLineView ref={el => (this.tabs.projects = el)}\n                          name=\"projects\"\n                          selected={this.props.selected}\n                          getMaxWindow={this.props.getMaxWindow}\n                          getWindow={this.props.getProjectWindow}\n                          getItems={this.props.getProjectTimeLine}\n                          emitWindowChanged={this.props.emitWindowChanged}\n                          emitSelected={this.props.emitSelected}\n                          emitClicked={this.props.emitClicked}/>\n          </TabPanel>\n\n          <TabPanel key=\"analysis\" tabId=\"analysis\" className={styles.tabPanel}>\n            <div className={styles.centerContainer}>\n              <p>\n                This will contain tools and graphs for temporal social\n                network analysis.\n              </p>\n            </div>\n          </TabPanel>\n\n          <TabPanel key=\"items\" tabId=\"items\" className={styles.tabPanel}>\n            <TimeLineView ref={el => (this.tabs.items = el)}\n                          name=\"items\"\n                          is_active={true}\n                          selected={this.props.selected}\n                          getMaxWindow={this.props.getMaxWindow}\n                          getWindow={this.props.getItemWindow}\n                          getItems={this.props.getItemTimeLine}\n                          emitWindowChanged={this.props.emitWindowChanged}\n                          emitSelected={this.props.emitSelected}\n                          emitClicked={this.props.emitClicked}/>\n          </TabPanel>\n        </Tabs>\n      </div>\n    );\n  }\n}\n\nexport default TimeLineBox\n","\nimport React from 'react';\n\nimport {\n  Accordion,\n  AccordionItem,\n  AccordionTitle,\n  AccordionPanel,\n} from './Accordion';\n\nimport {ResponsiveList, ResponsiveListItem} from './ResponsiveList';\nimport CheckBox from './CheckBox';\nimport DefaultButton from './DefaultButton';\n\nimport styles from './FilterBox.module.css';\n\nfunction null_function(args=null){}\n\nfunction filterList(items, props){\n  let social = props.social;\n\n  let emitSelected = props.emitSelected;\n\n  if (!emitSelected){\n    emitSelected = null_function;\n  }\n\n  let emitToggleFilter = props.emitToggleFilter;\n\n  if (!emitToggleFilter){\n    emitToggleFilter = null_function;\n  }\n\n  let output = items.values().map((item)=>{\n    let is_filtered = social.isFiltered(item);\n\n    return <ResponsiveListItem key={item.getName()}>\n              <DefaultButton style={{position:\"relative\",\n                                     maxWidth:\"80%\"}}\n                             onClick={()=>{emitSelected(item);}}>\n                {item.getName()}\n              </DefaultButton>&nbsp;\n              <CheckBox checked={is_filtered}\n                        onChange={(event)=>{emitToggleFilter(item);}}/>\n           </ResponsiveListItem>;\n  });\n\n  return <ResponsiveList>{output}</ResponsiveList>;\n}\n\nfunction FilterBox(props){\n  let social = props.social;\n\n  if (!social){\n    return <div>No social to display!</div>;\n  }\n\n  let filter_text = social.getFilterText();\n\n  if (!filter_text){\n    filter_text = \"No filters\";\n  }\n\n  let emitClearFilters = props.emitClearFilters;\n\n  if (!emitClearFilters){\n    emitClearFilters = null_function;\n  }\n\n  let filter_info = <AccordionItem uuid=\"filterinfo\">\n                      <AccordionTitle>\n                        Current Filter\n                      </AccordionTitle>\n                      <AccordionPanel>\n                        <div className={styles.filterContainer}>\n                          <div className={styles.filterText}>\n                            {filter_text}\n                          </div>\n                          <div>\n                            <DefaultButton onClick={emitClearFilters}>\n                              Clear Filters\n                            </DefaultButton>\n                          </div>\n                        </div>\n                      </AccordionPanel>\n                    </AccordionItem>;\n\n  let projects = filterList(social.getProjects(false), props);\n  let sources = filterList(social.getSources(false), props);\n  let positions = filterList(social.getPositions(false), props);\n  let affiliations = filterList(social.getAffiliations(false), props);\n  let people = filterList(social.getPeople(false), props);\n  let businesses = filterList(social.getBusinesses(false), props);\n\n  console.log(sources);\n\n  return <Accordion allowMultipleExpanded={false}\n                    allowZeroExpanded={true}>\n          {filter_info}\n\n          <AccordionItem uuid=\"projects\">\n            <AccordionTitle>\n                Projects\n            </AccordionTitle>\n            <AccordionPanel>\n              {projects}\n            </AccordionPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"sources\">\n            <AccordionTitle>\n                Sources\n            </AccordionTitle>\n            <AccordionPanel>\n              {sources}\n            </AccordionPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"people\">\n            <AccordionTitle>\n              People\n            </AccordionTitle>\n            <AccordionPanel>\n              {people}\n            </AccordionPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"businesses\">\n            <AccordionTitle>\n              Businesses\n            </AccordionTitle>\n            <AccordionPanel>\n              {businesses}\n            </AccordionPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"positions\">\n            <AccordionTitle>\n              Positions\n            </AccordionTitle>\n            <AccordionPanel>\n              {positions}\n            </AccordionPanel>\n          </AccordionItem>\n\n          <AccordionItem uuid=\"affiliations\">\n            <AccordionTitle>\n              Affiliations\n            </AccordionTitle>\n            <AccordionPanel>\n              {affiliations}\n            </AccordionPanel>\n          </AccordionItem>\n\n        </Accordion>;\n}\n\nexport default FilterBox;\n","\nimport React from \"react\";\nimport {CSSTransition} from \"react-transition-group\";\n\nimport styles from './SlidingPanel.module.css'\nimport SlideFromLeft from './transitions/SlideFromLeft.module.css';\nimport SlideFromRight from './transitions/SlideFromRight.module.css';\nimport SlideFromBottom from './transitions/SlideFromBottom.module.css';\nimport SlideFromTop from './transitions/SlideFromTop.module.css';\n\nfunction SlidingPanel({children, isOpen=false, position=\"right\",\n                       size=\"40%\", minSize=\"300px\", maxSize=null, }){\n  let container = styles.rightContainer;\n  let transition = SlideFromRight;\n  let horiz_size = {width:size, minWidth:minSize};\n  let vert_size = {height:size, minHeight:minSize};\n\n  if (maxSize){\n    horiz_size.maxWidth = maxSize;\n    vert_size.maxHeight = maxSize;\n  }\n\n  let style = horiz_size;\n\n  if (position === \"right\"){\n    container = styles.rightContainer;\n    transition = SlideFromRight;\n  }\n  else if (position === \"bottom\"){\n    container = styles.bottomContainer;\n    transition = SlideFromBottom;\n    style = vert_size;\n  }\n  else if (position === \"top\"){\n    container = styles.topContainer;\n    transition = SlideFromTop;\n    style = vert_size;\n  }\n  else if (position === \"left\"){\n    container = styles.leftContainer;\n    transition = SlideFromLeft;\n  }\n\n  container = `${container} ${styles.container}`;\n\n  return (<CSSTransition in={isOpen}\n                         timeout={200}\n                         classNames={transition}\n                         unmountOnExit>\n            <div className={container} style={style}>\n              {children}\n            </div>\n          </CSSTransition>);\n};\n\nexport default SlidingPanel;\n","\nimport React from 'react';\nimport Spinner from 'react-spinkit';\n\nimport styles from './OverlayBox.module.css';\n\nclass OverlayBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true\n    };\n  }\n\n  hideSpinner() {\n    this.setState({\n      loading: false\n    });\n  }\n\n  render() {\n    let item = this.props.item;\n\n    let url = null;\n\n    if (item && item.getURL){\n      url = item.getURL();\n    }\n\n    if (!url){\n      return (<div className={styles.container}>\n                <div className={styles.centerContainer}>\n                  {item}\n                  <div>\n                    <button className={styles.button}\n                            onClick={this.props.emitClose}>Close</button>\n                  </div>\n                </div>\n              </div>);\n    }\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.url}>{url}</div>\n        {this.state.loading ? (\n          <div className={styles.centerContainer}>\n            <div>Loading page...</div>\n            <div>\n              <Spinner\n                name=\"ball-grid-pulse\"\n                color=\"green\"\n                fadeIn=\"none\"\n              />\n            </div>\n          </div>\n        ) : null}\n        <iframe\n          src={url}\n          title={url}\n          width=\"100%\"\n          height=\"95%\"\n          onLoad={()=>{this.hideSpinner()}}\n          frameBorder=\"0\"\n          marginHeight=\"0\"\n          marginWidth=\"0\"\n          sandbox=\"allow-scripts\"\n          position=\"absolute\"\n        />\n      </div>\n    );\n  }\n}\n\n\nexport default OverlayBox;\n","\nimport React from 'react';\nimport Spinner from 'react-spinkit';\n\nimport DefaultButton from './DefaultButton';\n\nimport styles from './SearchBar.module.css';\n\n// This class is heavily inspired by react-search-field\n// from https://github.com/nutboltu/react-search-field\n\nfunction _null_function(item){}\n\n\nfunction SearchResults(props){\n  let results = props.results;\n\n  if (!results){\n    return null;\n  }\n\n  let items = []\n\n  results.forEach((item, index)=>{\n    items.push(<li key={index}>{item}</li>);\n  });\n\n  return (<ul>{items}</ul>);\n}\n\nclass SearchBar extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {value: \"\",\n                  suggestions: null,\n                  searching: null,\n                  results: null};\n  }\n\n  componentDidUpdate(nextProps) {\n    if (this.props.searchText !== nextProps.searchText) {\n      this.setState({\n        value: nextProps.searchText,\n      });\n    }\n  }\n\n  setResults(results){\n    this.setState({searching:null,\n                   suggestions:null,\n                   results:results});\n  }\n\n  setSuggestions(suggestions){\n    this.setState({searching:null,\n                   suggestions:suggestions,\n                   results:null});\n  }\n\n  startSuggestion(text){\n    let social = this.props.social;\n    if (!social){\n      return;\n    }\n\n    let items = null;\n\n    try{\n      items = social.find(text);\n    }\n    catch(error){\n      items = null;\n    }\n\n    let emitSelected = this.props.emitSelected;\n\n    if (!emitSelected){\n      emitSelected = _null_function;\n    }\n\n    let emitToggleFilter = this.props.emitToggleFilter;\n\n    if (!emitToggleFilter){\n      emitToggleFilter = _null_function;\n    }\n\n    if (items){\n      let results = items.map((item)=>{\n        let name = item.getName();\n        return <DefaultButton onClick={()=>{emitSelected(item)}}\n                              style={{width:\"100%\"}}>\n                {name}\n               </DefaultButton>\n      });\n\n      this.setSuggestions(results);\n    }\n    else{\n      this.setSuggestions(null);\n    }\n  }\n\n  startSearch(text){\n    let social = this.props.social;\n\n    if (!social){\n      this.setResults([<div>No results!</div>]);\n      return;\n    }\n\n    let items = null;\n\n    try{\n      items = social.find(text);\n    }\n    catch(error){\n      items = null;\n    }\n\n    let emitSelected = this.props.emitSelected;\n\n    if (!emitSelected){\n      emitSelected = _null_function;\n    }\n\n    if (items){\n      let results = items.map((item)=>{\n        let name = item.getName();\n        return <DefaultButton onClick={()=>{emitSelected(item)}}\n                              style={{width:\"100%\"}}>\n                {name}\n               </DefaultButton>\n      });\n\n      this.setResults(results);\n    }\n    else{\n      this.setResults([<div>Really no results!</div>]);\n    }\n  }\n\n  searchFor(text){\n    if (text && text.length > 0){\n      this.setState({searching:text,\n                     suggestions:null,\n                     results:null});\n\n      setTimeout(()=>{this.startSearch(text)}, 10);\n    }\n    else{\n      this.setState({suggestions:null,\n        searching:null,\n        results:null});\n    }\n  }\n\n  autocomplete(text){\n    if (text && text.length > 0){\n      this.startSuggestion(text);\n    }\n    else{\n      this.setState({suggestions:null,\n                     searching:null,\n                     results:null});\n    }\n  }\n\n  isSearching(){\n    return this.state.searching !== null;\n  }\n\n  isSuggesting(){\n    return this.state.suggestions !== null;\n  }\n\n  hasResults(){\n    return this.state.results !== null;\n  }\n\n  stopSearch(){\n    this.setState({searching:null,\n                   suggestions:null,\n                   results:null});\n  }\n\n  onChange(event){\n    if (this.isSearching()){\n      return;\n    }\n\n    this.setState({value: event.target.value});\n    this.autocomplete(event.target.value);\n  }\n\n  onEnter(event){\n    if (this.isSearching() || this.isEmpty()){\n      return;\n    }\n\n    const enterKey = 13;\n    const isEnterPressed = event.which === enterKey || event.keyCode === enterKey;\n\n    if (isEnterPressed){\n      this.searchFor(event.target.value);\n    }\n  }\n\n  onSearch(){\n    if (this.isSearching() || this.isEmpty()){\n      return;\n    }\n\n    this.searchFor(this.state.value);\n  }\n\n  isEmpty(){\n    return !(this.state.value && this.state.value.length > 0);\n  }\n\n  render(){\n    let button_style = styles.searchButton;\n\n    if (this.isSearching() || this.isEmpty()){\n      button_style = styles.disabledButton;\n    }\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.searchContainer}>\n          <button className={styles.hamburgerButton}\n                  onClick={this.props.emitHamburgerClicked}>\n            \n          </button>\n          <input\n            className={styles.searchBox}\n            onChange={(event)=>{this.onChange(event)}}\n            onKeyPress={(event)=>{this.onEnter(event)}}\n            placeholder={this.props.placeholder}\n            type=\"text\"\n            value={this.state.value}\n          />\n          <div className={button_style}\n              onClick={()=>{this.onSearch()}}>\n            <div className={styles.magnifier}></div>\n          </div>\n        </div>\n        {this.isSearching() ? (\n          <div className={styles.searchContainer}>\n            <div className={styles.resultContainer}>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.stopSearch()}}>X</div>\n              <div className={styles.searchPending}>\n                <div>Searching for '{this.state.searching}'...</div>\n                <div style={{display:\"inline-block\"}}>\n                  <Spinner\n                    name=\"ball-grid-pulse\"\n                    color=\"green\"\n                    fadeIn=\"none\"\n                  />\n                </div>\n              </div>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.stopSearch()}}>X</div>\n            </div>\n          </div>\n        ) : null}\n        {this.isSuggesting() ? (\n          <div className={styles.searchContainer}>\n            <div className={styles.resultContainer}>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({suggestions:null})}}>X</div>\n              <div className={styles.searchResult}>\n                <SearchResults results={this.state.suggestions} />\n              </div>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({suggestions:null})}}>X</div>\n            </div>\n          </div>\n        ) : null}\n        {this.hasResults() ? (\n          <div className={styles.searchContainer}>\n            <div className={styles.resultContainer}>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({results:null})}}>X</div>\n              <div className={styles.searchResult}>\n                <SearchResults results={this.state.results} />\n              </div>\n              <div className={styles.closeResultButton}\n                   onClick={()=>{this.setState({results:null})}}>X</div>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default SearchBar;\n","\nimport React from 'react';\n\nimport styles from './BrunelMenu.module.css';\n\nfunction BrunelMenu(props){\n  if (!props.items){\n    return (<div>No menu</div>);\n  }\n\n  let buttons = [];\n\n  props.items.forEach((item, index)=>{\n    let func = item[1];\n\n    if (props.emitClose){\n      func = ()=>{props.emitClose(); item[1]() };\n    }\n\n    buttons.push(<button key={index}\n                         className={styles.menuItem}\n                         onClick={()=>{func()}}>\n                  {item[0]}\n                 </button>);\n  });\n\n  if (props.emitClose){\n    buttons.push(<button key=\"close\"\n                         className={styles.menuItem}\n                         onClick={()=>{props.emitClose()}}>\n                  Close\n                </button>);\n  }\n\n  return (\n    <div className={styles.menu}>\n      {buttons}\n    </div>\n  );\n}\n\nexport default BrunelMenu;\n","\n// package imports\nimport React from 'react';\nimport Dry from 'json-dry';\nimport ReactModal from 'react-modal';\n\n// Brunel components\nimport SocialGraph from \"./components/SocialGraph\";\nimport InfoBox from \"./components/InfoBox\";\nimport TimeLineBox from './components/TimeLineBox';\nimport FilterBox from './components/FilterBox';\nimport SlidingPanel from './components/SlidingPanel';\nimport OverlayBox from './components/OverlayBox';\nimport SearchBar from './components/SearchBar';\nimport BrunelMenu from './components/BrunelMenu';\nimport DefaultButton from './components/DefaultButton';\n\n// Brunel model\nimport Social from './model/Social';\n\n// Data for import\nimport graph_data from './data.json';\n\n// Styling for the app\nimport styles from './SocialApp.module.css'\nimport DateRange from './model/DateRange';\n\nclass SocialApp extends React.Component {\n  constructor(props){\n    super(props);\n\n    let social = Dry.parse(graph_data);\n    console.log(social);\n\n    if (!(social instanceof Social )){\n      console.log(\"Could not parse!\");\n      social = new Social();\n    }\n\n    // special cases for Brunel project...\n    social.setAnchor(\"Brunel\");\n    social.setMaxWindow(new DateRange({start:\"1800-01-01\", end:\"1860-12-31\"}));\n\n    this.state = {\n      social: social,\n      highlighted_item: null,\n      selected_item: null,\n      overlay_item: null,\n      isInfoPanelOpen: false,\n      isTimeLinePanelOpen: false,\n      isFilterPanelOpen: false,\n      isHamburgerMenuOpen: false,\n      timeline: new TimeLineBox(),\n      isOverlayOpen: false\n    };\n\n    this.socialGraph = null;\n  }\n\n  resetFilters(){\n    let social = this.state.social;\n    social.resetFilters();\n    this.setState({social:social});\n  }\n\n  closePanels(){\n    this.setState({isInfoPanelOpen:false,\n                   isTimeLinePanelOpen:false,\n                   isHamburgerMenuOpen:false,\n                   isFilterPanelOpen:false,\n                   highlighted_item:null,\n                  });\n  }\n\n  closeOverlay(){\n    this.setState({isOverlayOpen:false,\n                   overlay_item:null});\n  }\n\n  showInfo(item){\n    if (item._isAProjectObject){\n      this.setState({overlay_item:item,\n                     isOverlayOpen:true});\n    }\n    else{\n      this.setState({selected_item:item,\n                     isInfoPanelOpen:true});\n    }\n  }\n\n  slotClearFilters(){\n    this.resetFilters();\n  }\n\n  slotToggleFilter(item){\n    if (!item){\n      return;\n    }\n\n    let social = this.state.social;\n    social.toggleFilter(item);\n\n    this.setState(social);\n  }\n\n  slotHighlighted(id){\n    if (!id){\n      return;\n    }\n\n    if (id._isADateRangeObject){\n      return;\n    }\n\n    this.setState({highlighted_item:id});\n  }\n\n  slotSelected(id){\n    if (!id){\n      this.closePanels();\n      return;\n    }\n\n    if (id._isADateRangeObject){\n      let social = this.state.social;\n      if (social.setWindow(id)){\n        this.setState({social:social});\n      }\n      return;\n    }\n\n    const social = this.state.social;\n    const item = social.get(id);\n    this.showInfo(item);\n  }\n\n  slotWindowChanged(window){\n    let social = this.state.social;\n\n    if (social.setWindow(window)){\n      this.setState({social:social});\n    }\n  }\n\n  toggleInfoPanel(){\n    this.setState({isInfoPanelOpen: !(this.state.isInfoPanelOpen)});\n  }\n\n  toggleTimeLinePanel(){\n    this.setState({isFilterPanelOpen: false,\n                   isTimeLinePanelOpen: !(this.state.isTimeLinePanelOpen)});\n}\n\n  toggleFilterPanel(){\n    this.setState({isTimeLinePanelOpen: false,\n                   isFilterPanelOpen: !(this.state.isFilterPanelOpen)});\n  }\n\n  viewAbout(){\n    let item = <div>\n                 <div>\n                   This is a demo of the application to view\n                   Brunel's temporal social network. This is an\n                   incomplete application containing incomplete\n                   data and should not be relied on or viewed as\n                   being accurate.\n                 </div>\n                 <div>If you want more information, then please\n                      visit the <a href=\"https://github.com/chryswoods/brunel\">\n                        GitHub repository\n                      </a>\n                 </div>\n               </div>;\n    this.setState({\"overlay_item\": item,\n                   \"isOverlayOpen\": true});\n  }\n\n  viewSource(){\n    console.log(\"View source\");\n    var win = window.open(\"https://github.com/chryswoods/brunel\", '_blank');\n    win.focus();\n  }\n\n  resetAll(){\n    console.log(\"Reset all\");\n    window.location.reload(true);\n  }\n\n  render(){\n    const selected = this.state.selected_item;\n    const highlighted = this.state.highlighted_item;\n    const overlay_item = this.state.overlay_item;\n    const social = this.state.social;\n\n    let menu = [];\n\n    let timeline_text = \"Timeline\";\n\n    if (social){\n      timeline_text = `Timeline : ${social.getWindow().toSimpleString()}`;\n    }\n\n    menu.push([\"About\", ()=>{this.viewAbout()}]);\n    menu.push([\"View Source\", ()=>{this.viewSource()}]);\n    menu.push([\"Reset\", ()=>{this.resetAll()}]);\n\n    return (\n      <div>\n        <div className={styles.backgroundImage} />\n        <ReactModal isOpen={this.state.isOverlayOpen}\n                    onRequestClose={()=>{this.closeOverlay()}}\n                    contentLabel='Information overlay'\n                    className={styles.modal}\n                    overlayClassName={{base:styles.modalOverlay,\n                                       afterOpen:styles.modalOverlayAfterOpen,\n                                       beforeClose:styles.modalOverlayBeforeClose}}\n                    closeTimeoutMS={200}\n                    appElement={document.getElementById('root')}\n                    >\n          <div className={styles.closeOverlayButton}\n                onClick={()=>{this.closeOverlay()}}>X</div>\n          <OverlayBox item={overlay_item}\n                      emitClose={()=>{this.closeOverlay()}}/>\n        </ReactModal>\n\n        <SearchBar social={social}\n                   emitHamburgerClicked={()=>{this.setState({isHamburgerMenuOpen:true})}}\n                   emitSelected={(item)=>{this.slotSelected(item)}}\n                   emitHighlighted={(item)=>{this.slotHighlighted(item)}}\n                   emitClicked={(item)=>{this.slotClicked(item)}}/>\n\n        <SlidingPanel isOpen={this.state.isTimeLinePanelOpen}\n                      position='bottom'>\n          <span className={styles.closePanelButton}\n                onClick={()=>{this.setState({isTimeLinePanelOpen:false})}}>X</span>\n          <TimeLineBox selected={selected}\n                       getMaxWindow={()=>{return this.state.social.getMaxWindow()}}\n                       getProjectWindow={()=>{return this.state.social.getWindow()}}\n                       getItemWindow={()=>{return this.state.social.getWindow()}}\n                       getProjectTimeLine={()=>{return this.state.social.getProjectTimeLine()}}\n                       getItemTimeLine={()=>{return this.state.social.getItemTimeLine()}}\n                       emitClicked={(item)=>{this.slotClicked(item)}}\n                       emitSelected={(item)=>{this.slotClicked(item)}}\n                       emitHighlighted={(item)=>{this.slotHighlighted(item)}}\n                       emitWindowChanged={(window)=>{\n                                    this.slotWindowChanged(window)}}/>\n        </SlidingPanel>\n\n        <SlidingPanel isOpen={this.state.isInfoPanelOpen}\n                      position='right'>\n          <span className={styles.closePanelButton}\n                onClick={()=>{this.setState({isInfoPanelOpen:false})}}>X</span>\n          <InfoBox item={selected} social={social}\n                   emitSelected={(item)=>{this.slotSelected(item)}}\n                   emitHighlighted={(item)=>{this.slotHighlighted(item)}}\n                   emitToggleFilter={(item)=>{this.slotToggleFilter(item)}}/>\n        </SlidingPanel>\n\n        <SlidingPanel isOpen={this.state.isFilterPanelOpen}\n                      position='bottom'>\n          <span className={styles.closePanelButton}\n                onClick={()=>{this.setState({isFilterPanelOpen:false})}}>X</span>\n          <FilterBox social={social}\n                     emitToggleFilter={(item)=>{this.slotToggleFilter(item)}}\n                     emitSelected={(item)=>{this.slotSelected(item)}}\n                     emitHighlighted={(item)=>{this.slotHighlighted(item)}}\n                     emitClearFilters={()=>{this.slotClearFilters()}}/>\n        </SlidingPanel>\n\n        <SlidingPanel isOpen={this.state.isHamburgerMenuOpen}\n                      position='left'\n                      size=\"100px\" minSize=\"100px\">\n          <BrunelMenu emitClose={()=>{this.setState({isHamburgerMenuOpen:false})}}\n                      items={menu} />\n        </SlidingPanel>\n\n        <div className={styles.graphContainer}>\n          <SocialGraph social={this.state.social}\n                       selected={selected}\n                       highlighted={highlighted}\n                       emitClicked={(id)=>this.slotSelected(id)} />\n        </div>\n\n        <div className={styles.bottomContainer}>\n          <DefaultButton onClick={()=>{this.toggleFilterPanel()}}>\n            Filters\n          </DefaultButton>\n          <DefaultButton onClick={()=>this.toggleTimeLinePanel()}>\n            {timeline_text}\n          </DefaultButton>\n        </div>\n\n      </div>\n    );\n  }\n};\n\nexport default SocialApp;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonGroup\":\"TimeLineView_buttonGroup__2GQ9k\",\"datePicker\":\"TimeLineView_datePicker__1VM6E\",\"zoomButton\":\"TimeLineView_zoomButton__2X6JE\",\"scrollButton\":\"TimeLineView_scrollButton__pbyum\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TimeLineBox_container__3XwaK\",\"centerContainer\":\"TimeLineBox_centerContainer__16Ujh\",\"tabs\":\"TimeLineBox_tabs__yHSvr\",\"tablist\":\"TimeLineBox_tablist__yB2UA\",\"tab\":\"TimeLineBox_tab__157Wu\",\"tabPanel\":\"TimeLineBox_tabPanel__3u0d3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filterContainer\":\"FilterBox_filterContainer__2KAxt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SlidingPanel_container__360Fr\",\"leftContainer\":\"SlidingPanel_leftContainer__hQNC6\",\"rightContainer\":\"SlidingPanel_rightContainer__57qYr\",\"topContainer\":\"SlidingPanel_topContainer__YiYRz\",\"bottomContainer\":\"SlidingPanel_bottomContainer__2dEzd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromLeft_enter__jKjRY\",\"enterActive\":\"SlideFromLeft_enterActive__159kE\",\"exit\":\"SlideFromLeft_exit___gRJ9\",\"exitActive\":\"SlideFromLeft_exitActive__YfXDY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromRight_enter__3at5G\",\"enterActive\":\"SlideFromRight_enterActive__qhcn3\",\"exit\":\"SlideFromRight_exit__C9Did\",\"exitActive\":\"SlideFromRight_exitActive__2HcMW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromBottom_enter__1iOKm\",\"enterActive\":\"SlideFromBottom_enterActive__248cg\",\"exit\":\"SlideFromBottom_exit__1SBqa\",\"exitActive\":\"SlideFromBottom_exitActive__1TiIq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromTop_enter__2sGUw\",\"enterActive\":\"SlideFromTop_enterActive__3jElj\",\"exit\":\"SlideFromTop_exit__28rU4\",\"exitActive\":\"SlideFromTop_exitActive__2_Nxz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"OverlayBox_container__2H63R\",\"centerContainer\":\"OverlayBox_centerContainer__bl7gf\",\"button\":\"OverlayBox_button__V4JvO\",\"url\":\"OverlayBox_url__aN8n5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SearchBar_container__1nsMW\",\"searchContainer\":\"SearchBar_searchContainer__2xOxT\",\"resultContainer\":\"SearchBar_resultContainer__1_9Lx\",\"searchPending\":\"SearchBar_searchPending__1uhP9\",\"searchResult\":\"SearchBar_searchResult__1iaaf\",\"hamburgerButton\":\"SearchBar_hamburgerButton__1PuEk\",\"searchBox\":\"SearchBar_searchBox__3PHmH\",\"disabledButton\":\"SearchBar_disabledButton__2PWwO\",\"searchButton\":\"SearchBar_searchButton__1GItM\",\"magnifier\":\"SearchBar_magnifier__2xBEb\",\"closeResultButton\":\"SearchBar_closeResultButton__MIs2K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"BrunelMenu_menu__2QqAJ\",\"menuItem\":\"BrunelMenu_menuItem__Adzvp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"module\":\"SocialApp_module__3Cefy\",\"backgroundImage\":\"SocialApp_backgroundImage__3Kw9P\",\"graphContainer\":\"SocialApp_graphContainer__1fIZ_\",\"controlButton\":\"SocialApp_controlButton__dd05U\",\"bottomContainer\":\"SocialApp_bottomContainer__7teeO\",\"filterText\":\"SocialApp_filterText__12DDf\",\"citationText\":\"SocialApp_citationText__m100A\",\"closePanelButton\":\"SocialApp_closePanelButton__S0EAB\",\"closeOverlayButton\":\"SocialApp_closeOverlayButton__38BCO\",\"modal\":\"SocialApp_modal__7Dp7u\",\"modalOverlay\":\"SocialApp_modalOverlay__8objV\",\"modalOverlayAfterOpen\":\"SocialApp_modalOverlayAfterOpen__3azyt\",\"modalOverlayBeforeClose\":\"SocialApp_modalOverlayBeforeClose__3K48w\"};"],"sourceRoot":""}